(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2700],{610:function(e,a,s){Promise.resolve().then(s.bind(s,5401))},4445:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});var l=s(7437),t=s(8253);function r(e){let{section:a,children:s}=e,{hasPermission:r}=(0,t.q)();return r(a)?(0,l.jsx)(l.Fragment,{children:s}):(0,l.jsxs)("div",{className:"role-denied",children:[(0,l.jsx)("div",{className:"role-denied-icon",children:"\uD83D\uDD12"}),(0,l.jsx)("h2",{children:"Acesso Negado"}),(0,l.jsx)("p",{children:"Voce nao tem permissao para acessar esta secao."}),(0,l.jsx)("p",{className:"role-denied-hint",children:"Contate o administrador para solicitar acesso."})]})}},1656:function(e,a,s){"use strict";s.d(a,{X:function(){return n},Z:function(){return r}});var l=s(7437);let t={success:"badge-success",warning:"badge-warning",danger:"badge-danger",info:"badge-info",neutral:"badge-neutral"};function r(e){let{label:a,variant:s="neutral"}=e;return(0,l.jsx)("span",{className:"badge ".concat(t[s]||t.neutral),children:a})}function n(e){return({pendente:"warning",confirmado:"info",preparando:"info",pronto:"info",coletado:"info",em_entrega:"warning",entregue:"success",cancelado:"danger",recusado:"danger",ativo:"success",inativo:"neutral",bloqueado:"danger",online:"success",offline:"neutral",aprovado:"success",reprovado:"danger",pago:"success",pendente_pagamento:"warning",processando:"info",aberto:"warning",resolvido:"success",fechado:"neutral"})[e]||"neutral"}},9246:function(e,a,s){"use strict";s.d(a,{Z:function(){return i}});var l=s(7437),t=s(2265);function r(e){let{value:a,onChange:s,placeholder:r="Buscar...",delay:n=300}=e,[i,d]=(0,t.useState)(a||""),o=(0,t.useRef)(null);return(0,t.useEffect)(()=>{d(a||"")},[a]),(0,l.jsxs)("div",{className:"search-input-wrapper",children:[(0,l.jsx)("span",{className:"search-input-icon",children:"\uD83D\uDD0D"}),(0,l.jsx)("input",{type:"text",className:"search-input",value:i,onChange:e=>{let a=e.target.value;d(a),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{null==s||s(a)},n)},placeholder:r}),i&&(0,l.jsx)("button",{className:"search-input-clear",onClick:()=>{d(""),null==s||s("")},children:"✕"})]})}var n=s(4420);function i(e){let{columns:a=[],data:s=[],loading:i=!1,searchable:d=!0,pageSize:o=15,emptyMessage:c="Nenhum registro encontrado",onRowClick:u}=e,[m,p]=(0,t.useState)(""),[h,v]=(0,t.useState)(null),[x,g]=(0,t.useState)("asc"),[b,j]=(0,t.useState)(1),f=(0,t.useMemo)(()=>{if(!m)return s;let e=m.toLowerCase();return s.filter(s=>a.some(a=>{let l=s[a.key];return null!=l&&String(l).toLowerCase().includes(e)}))},[s,m,a]),N=(0,t.useMemo)(()=>h?[...f].sort((e,a)=>{var s,l;let t=null!==(s=e[h])&&void 0!==s?s:"",r=null!==(l=a[h])&&void 0!==l?l:"";if("number"==typeof t&&"number"==typeof r)return"asc"===x?t-r:r-t;let n=String(t).localeCompare(String(r));return"asc"===x?n:-n}):f,[f,h,x]),y=Math.max(1,Math.ceil(N.length/o)),_=N.slice((b-1)*o,b*o);(0,t.useEffect)(()=>{b>y&&j(1)},[b,y]);let w=e=>{h===e?g(e=>"asc"===e?"desc":"asc"):(v(e),g("asc"))};return i?(0,l.jsxs)("div",{className:"datatable",children:[d&&(0,l.jsx)("div",{className:"datatable-toolbar",children:(0,l.jsx)(r,{value:"",onChange:()=>{},placeholder:"Buscar..."})}),(0,l.jsx)("div",{className:"datatable-skeleton",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,l.jsx)("div",{className:"skeleton-row",children:a.map((e,a)=>(0,l.jsx)("div",{className:"skeleton-cell"},a))},s))})]}):(0,l.jsxs)("div",{className:"datatable",children:[d&&(0,l.jsxs)("div",{className:"datatable-toolbar",children:[(0,l.jsx)(r,{value:m,onChange:e=>{p(e),j(1)},placeholder:"Buscar na tabela..."}),(0,l.jsxs)("span",{className:"datatable-count",children:[f.length," registro(s)"]})]}),(0,l.jsx)("div",{className:"datatable-wrapper",children:(0,l.jsxs)("table",{className:"datatable-table",children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:a.map(e=>(0,l.jsxs)("th",{onClick:()=>!1!==e.sortable&&w(e.key),className:!1!==e.sortable?"sortable":"",style:e.width?{width:e.width}:void 0,children:[e.label,h===e.key&&(0,l.jsx)("span",{className:"sort-indicator",children:"asc"===x?" ▲":" ▼"})]},e.key))})}),(0,l.jsx)("tbody",{children:0===_.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:a.length,className:"datatable-empty",children:c})}):_.map((e,s)=>(0,l.jsx)("tr",{onClick:()=>null==u?void 0:u(e),className:u?"clickable-row":"",children:a.map(a=>{var s;return(0,l.jsx)("td",{children:a.render?a.render(e[a.key],e):null!==(s=e[a.key])&&void 0!==s?s:"-"},a.key)})},e.id||s))})]})}),y>1&&(0,l.jsx)(n.Z,{page:b,totalPages:y,onPageChange:j})]})}},7714:function(e,a,s){"use strict";s.d(a,{Z:function(){return n}});var l=s(7437),t=s(2265);let r={sm:"400px",md:"560px",lg:"720px",xl:"960px"};function n(e){let{isOpen:a,onClose:s,title:n,children:i,size:d="md"}=e;return((0,t.useEffect)(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]),(0,t.useEffect)(()=>{let e=e=>{"Escape"===e.key&&a&&(null==s||s())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a,s]),a)?(0,l.jsx)("div",{className:"modal-overlay",onClick:s,children:(0,l.jsxs)("div",{className:"modal-container",style:{maxWidth:r[d]||r.md},onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)("div",{className:"modal-header",children:[(0,l.jsx)("h3",{className:"modal-title",children:n}),(0,l.jsx)("button",{className:"modal-close",onClick:s,children:"✕"})]}),(0,l.jsx)("div",{className:"modal-body",children:i})]})}):null}},4420:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});var l=s(7437);function t(e){let{page:a,totalPages:s,onPageChange:t}=e,r=[],n=Math.max(1,a-Math.floor(2.5)),i=Math.min(s,n+5-1);i-n<4&&(n=Math.max(1,i-5+1));for(let e=n;e<=i;e++)r.push(e);return(0,l.jsxs)("div",{className:"pagination",children:[(0,l.jsx)("button",{className:"pagination-btn",disabled:a<=1,onClick:()=>t(a-1),children:"‹ Anterior"}),n>1&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{className:"pagination-btn",onClick:()=>t(1),children:"1"}),n>2&&(0,l.jsx)("span",{className:"pagination-dots",children:"..."})]}),r.map(e=>(0,l.jsx)("button",{className:"pagination-btn ".concat(e===a?"pagination-active":""),onClick:()=>t(e),children:e},e)),i<s&&(0,l.jsxs)(l.Fragment,{children:[i<s-1&&(0,l.jsx)("span",{className:"pagination-dots",children:"..."}),(0,l.jsx)("button",{className:"pagination-btn",onClick:()=>t(s),children:s})]}),(0,l.jsx)("button",{className:"pagination-btn",disabled:a>=s,onClick:()=>t(a+1),children:"Proximo ›"})]})}},3197:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});var l=s(7437);function t(e){let{icon:a,label:s,value:t,change:r,color:n="#f97316"}=e,i=r&&parseFloat(r)>=0;return(0,l.jsxs)("div",{className:"stats-card",style:{borderTopColor:n},children:[(0,l.jsxs)("div",{className:"stats-card-header",children:[(0,l.jsx)("span",{className:"stats-card-icon",style:{color:n},dangerouslySetInnerHTML:{__html:a||"&#128202;"}}),(0,l.jsx)("span",{className:"stats-card-label",children:s})]}),(0,l.jsx)("div",{className:"stats-card-value",children:null!=t?t:"-"}),null!=r&&(0,l.jsxs)("div",{className:"stats-card-change ".concat(i?"change-positive":"change-negative"),children:[i?"&#9650;":"&#9660;"," ",r,"%"]})]})}},3378:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});var l=s(7437);function t(e){let{tabs:a=[],activeTab:s,onChange:t}=e;return(0,l.jsx)("div",{className:"tabs",children:a.map(e=>(0,l.jsx)("button",{className:"tab-btn ".concat(s===e.key?"tab-active":""),onClick:()=>t(e.key),children:e.label},e.key))})}},6939:function(e,a,s){"use strict";s.d(a,{Z:function(){return n}});var l=s(7437),t=s(6971);let r={success:"&#10003;",error:"&#10007;",warning:"&#9888;",info:"&#8505;"};function n(){let{toasts:e,removeToast:a}=(0,t.l)();return 0===e.length?null:(0,l.jsx)("div",{className:"toast-container",children:e.map(e=>(0,l.jsxs)("div",{className:"toast toast-".concat(e.type),children:[(0,l.jsx)("span",{className:"toast-icon",dangerouslySetInnerHTML:{__html:r[e.type]||r.info}}),(0,l.jsx)("span",{className:"toast-message",children:e.message}),(0,l.jsx)("button",{className:"toast-close",onClick:()=>a(e.id),children:"✕"})]},e.id))})}},5401:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return R}});var l=s(7437),t=s(2265),r=s(8779),n=s(4477),i=s(4445),d=s(9246),o=s(7714),c=s(1656),u=s(3197),m=s(6939),p=s(3378),h=s(4420),v=s(8789),x=s(6971),g=s(6428);let b=[{key:"",label:"Todas"},{key:"open",label:"Abertas"},{key:"in_review",label:"Em Analise"},{key:"escalated",label:"Escaladas"},{key:"resolved",label:"Resolvidas"}],j=[{value:"7d",label:"7 dias"},{value:"30d",label:"30 dias"},{value:"90d",label:"90 dias"},{value:"all",label:"Todas"}],f=[{value:"",label:"Todas Severidades"},{value:"critical",label:"Critica"},{value:"high",label:"Alta"},{value:"medium",label:"Media"},{value:"low",label:"Baixa"}],N=[{value:"refund",label:"Reembolso"},{value:"credit",label:"Credito"},{value:"full_refund+credit",label:"Reembolso total + Credito"},{value:"none",label:"Sem compensacao"}],y={missing_items:"Itens faltando",wrong_items:"Itens errados",damaged_items:"Itens danificados",quality_issue:"Problema de qualidade",late_delivery:"Entrega atrasada",never_delivered:"Nao entregue",overcharged:"Cobrado a mais",other:"Outro"},_={missing_all:"Todos faltando",missing_partial:"Parcialmente faltando",wrong_item:"Item errado",wrong_quantity:"Quantidade errada",expired:"Produto vencido",rotten:"Produto estragado",crushed:"Produto amassado",melted:"Produto derretido",late_30min:"Atrasou 30min+",late_1h:"Atrasou 1h+",wrong_charge:"Cobranca errada",double_charge:"Cobranca duplicada"},w={open:"Aberta",awaiting_evidence:"Aguard. Evidencia",in_review:"Em Analise",escalated:"Escalada",auto_resolved:"Auto Resolvida",resolved:"Resolvida",closed:"Fechada"};function k(e){return({critical:"danger",high:"warning",medium:"info",low:"neutral"})[e]||"neutral"}function C(e){return({open:"warning",awaiting_evidence:"warning",in_review:"info",escalated:"danger",auto_resolved:"success",resolved:"success",closed:"neutral"})[e]||"neutral"}function S(e){return null==e||""===e?"R$ 0,00":"R$ "+Number(e).toFixed(2).replace(".",",")}function D(e){return e?new Date(e).toLocaleString("pt-BR"):"-"}function E(){var e,a,s,r,i,E;let{collapsed:R}=(0,v.A)(),{success:Z,error:A}=(0,x.l)(),[P,T]=(0,t.useState)(null),[M,B]=(0,t.useState)([]),[F,I]=(0,t.useState)({page:1,pages:0,total:0}),[W,L]=(0,t.useState)(!0),[q,z]=(0,t.useState)(!0),[V,O]=(0,t.useState)(""),[$,H]=(0,t.useState)(""),[Y,G]=(0,t.useState)("30d"),[K,Q]=(0,t.useState)(""),[U,X]=(0,t.useState)(""),[J,ee]=(0,t.useState)(1),[ea,es]=(0,t.useState)(!1),[el,et]=(0,t.useState)(null),[er,en]=(0,t.useState)([]),[ei,ed]=(0,t.useState)([]),[eo,ec]=(0,t.useState)(!1),[eu,em]=(0,t.useState)(""),[ep,eh]=(0,t.useState)(""),[ev,ex]=(0,t.useState)("refund"),[eg,eb]=(0,t.useState)(""),[ej,ef]=(0,t.useState)(""),[eN,ey]=(0,t.useState)(""),[e_,ew]=(0,t.useState)(!1),ek=(0,t.useCallback)(async()=>{z(!0);try{let e=await (0,g.SC)("/disputes.php?view=stats");T(e.stats||e)}catch(e){console.warn("Erro ao carregar stats de disputas:",e.message)}finally{z(!1)}},[]),eC=(0,t.useCallback)(async()=>{L(!0);try{let e=new URLSearchParams;e.set("view","list"),V&&e.set("status",V),$&&e.set("severity",$),Y&&e.set("period",Y),K&&e.set("search",K),e.set("page",String(J));let a=await (0,g.SC)("/disputes.php?".concat(e.toString()));B(a.disputes||[]),I(a.pagination||{page:1,pages:0,total:0})}catch(e){A("Erro ao carregar disputas")}finally{L(!1)}},[V,$,Y,K,J,A]);(0,t.useEffect)(()=>{ek()},[ek]),(0,t.useEffect)(()=>{eC()},[eC]),(0,t.useEffect)(()=>{ee(1)},[V,$,Y,K]);let eS=async e=>{let a=e.dispute_id||e.id;es(!0),ec(!0),et(e),en([]),ed([]),em(""),eh(""),ex("refund"),eb(""),ef(""),ey("");try{let s=await (0,g.SC)("/disputes.php?id=".concat(a));et(s.dispute||e),en(s.timeline||[]),ed(s.evidence||[])}catch(e){A("Erro ao carregar detalhes da disputa")}finally{ec(!1)}},eD=()=>{es(!1),et(null),en([]),ed([])},eE=async()=>{if(el){if(!eg.trim()){A("Nota de resolucao obrigatoria");return}ew(!0);try{await (0,g.sg)("/disputes.php",{action:"resolve",dispute_id:el.dispute_id||el.id,approved_amount:parseFloat(eu)||0,credit_amount:parseFloat(ep)||0,compensation_type:ev,resolution_note:eg}),Z("Disputa resolvida com sucesso"),eD(),eC(),ek()}catch(e){A("Erro ao resolver: "+e.message)}finally{ew(!1)}}},eR=async()=>{if(el){ew(!0);try{await (0,g.sg)("/disputes.php",{action:"escalate",dispute_id:el.dispute_id||el.id,reason:ej||"Escalado para nivel superior"}),Z("Disputa escalada"),eD(),eC(),ek()}catch(e){A("Erro ao escalar: "+e.message)}finally{ew(!1)}}},eZ=async()=>{if(el){if(!eN.trim()){A("Escreva uma nota");return}ew(!0);try{await (0,g.sg)("/disputes.php",{action:"add_note",dispute_id:el.dispute_id||el.id,note:eN}),Z("Nota adicionada");let e=el.dispute_id||el.id,a=await (0,g.SC)("/disputes.php?id=".concat(e));en(a.timeline||[]),ey("")}catch(e){A("Erro ao adicionar nota: "+e.message)}finally{ew(!1)}}},eA=[{key:"dispute_id",label:"#ID",width:"70px",render:(e,a)=>(0,l.jsxs)("strong",{children:["#",e||a.id]})},{key:"customer_name",label:"Cliente",render:e=>e||"-"},{key:"order_id",label:"Pedido",render:e=>e?"#".concat(e):"-"},{key:"category",label:"Categoria",render:(e,a)=>{let s=y[e]||e||"-",t=_[a.subcategory]||a.subcategory;return(0,l.jsxs)("span",{children:[s,t&&(0,l.jsx)("span",{className:"text-xs text-dim",style:{display:"block"},children:t})]})}},{key:"severity",label:"Severidade",render:e=>(0,l.jsx)(c.Z,{label:e||"medium",variant:k(e)})},{key:"status",label:"Status",render:e=>(0,l.jsx)(c.Z,{label:w[e]||e||"open",variant:C(e)})},{key:"requested_amount",label:"Valor",render:e=>S(e)},{key:"created_at",label:"Data",render:e=>e?new Date(e).toLocaleDateString("pt-BR"):"-"},{key:"actions",label:"Acoes",sortable:!1,render:(e,a)=>(0,l.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:e=>{e.stopPropagation(),eS(a)},children:"Ver"})}],eP=el&&!["resolved","closed","auto_resolved"].includes(el.status);return(0,l.jsxs)("div",{className:"admin-layout",children:[(0,l.jsx)(n.Z,{}),(0,l.jsxs)("main",{className:"admin-main ".concat(R?"main-collapsed":""),children:[(0,l.jsxs)("div",{className:"page-header",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"page-title",children:"Disputas"}),(0,l.jsx)("p",{className:"page-subtitle",children:"Gerenciar disputas e reclamacoes de pedidos"})]}),(0,l.jsx)("div",{className:"page-actions",children:(0,l.jsx)("button",{className:"btn btn-secondary",onClick:()=>{ek(),eC()},children:"Atualizar"})})]}),(0,l.jsxs)("div",{className:"stats-grid",style:{gridTemplateColumns:"repeat(4, 1fr)"},children:[(0,l.jsx)(u.Z,{icon:"\uD83D\uDCCB",label:"Total Disputas",value:q?"...":null!==(e=null==P?void 0:P.total)&&void 0!==e?e:0,color:"#6366f1"}),(0,l.jsx)(u.Z,{icon:"\uD83D\uDD34",label:"Abertas",value:q?"...":null!==(a=null==P?void 0:P.open)&&void 0!==a?a:0,color:"#f59e0b"}),(0,l.jsx)(u.Z,{icon:"\uD83D\uDD0D",label:"Em Analise",value:q?"...":null!==(s=null==P?void 0:P.in_review)&&void 0!==s?s:0,color:"#3b82f6"}),(0,l.jsx)(u.Z,{icon:"✅",label:"Resolvidas",value:q?"...":null!==(r=null==P?void 0:P.resolved)&&void 0!==r?r:0,color:"#22c55e"})]}),P&&!q&&(0,l.jsxs)("div",{className:"flex gap-4 mb-4",style:{flexWrap:"wrap"},children:[P.critical_open>0&&(0,l.jsxs)("div",{style:{padding:"8px 16px",background:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"var(--radius)",fontSize:13,color:"#ef4444",fontWeight:600},children:[P.critical_open," disputa(s) critica(s) aberta(s)"]}),(0,l.jsxs)("div",{style:{padding:"8px 16px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"var(--radius)",fontSize:13},children:["Tempo medio resolucao: ",(0,l.jsxs)("strong",{children:[null!==(i=P.avg_resolution_hours)&&void 0!==i?i:0,"h"]})]}),(0,l.jsxs)("div",{style:{padding:"8px 16px",background:"var(--bg)",border:"1px solid var(--border)",borderRadius:"var(--radius)",fontSize:13},children:["Resolvidas em 24h: ",(0,l.jsxs)("strong",{children:[null!==(E=P.resolved_24h_pct)&&void 0!==E?E:0,"%"]})]})]}),(0,l.jsx)(p.Z,{tabs:b,activeTab:V,onChange:e=>O(e)}),(0,l.jsxs)("div",{className:"filters-bar",style:{marginTop:16},children:[(0,l.jsxs)("div",{style:{position:"relative",flex:1},children:[(0,l.jsx)("input",{className:"form-input",placeholder:"Buscar por ID, pedido ou descricao...",value:U,onChange:e=>X(e.target.value),onKeyDown:e=>{"Enter"===e.key&&Q(U)},style:{width:"100%"}}),U&&(0,l.jsx)("button",{onClick:()=>{X(""),Q("")},style:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-dim)",fontSize:16},children:"✕"})]}),(0,l.jsx)("select",{className:"form-select",value:Y,onChange:e=>G(e.target.value),children:j.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,l.jsx)("select",{className:"form-select",value:$,onChange:e=>H(e.target.value),children:f.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsx)(d.Z,{columns:eA,data:M,loading:W,emptyMessage:"Nenhuma disputa encontrada"}),F.pages>1&&(0,l.jsx)(h.Z,{page:J,totalPages:F.pages,onPageChange:e=>ee(e)}),(0,l.jsx)(o.Z,{isOpen:ea,onClose:eD,title:el?"Disputa #".concat(el.dispute_id||el.id):"Detalhes da Disputa",size:"lg",children:eo?(0,l.jsx)("div",{style:{padding:40,textAlign:"center",color:"var(--text-muted)"},children:"Carregando detalhes..."}):el?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,l.jsx)(c.Z,{label:el.severity||"medium",variant:k(el.severity)}),(0,l.jsx)(c.Z,{label:w[el.status]||el.status||"open",variant:C(el.status)}),el.is_suspicious&&(0,l.jsx)(c.Z,{label:"Suspeito",variant:"danger"}),el.auto_resolved&&(0,l.jsx)(c.Z,{label:"Auto Resolvida",variant:"info"})]}),(0,l.jsxs)("div",{className:"detail-grid mb-4",children:[(0,l.jsxs)("div",{className:"detail-item",children:[(0,l.jsx)("span",{className:"detail-label",children:"Cliente"}),(0,l.jsxs)("span",{className:"detail-value",children:[el.customer_name||"-",el.customer_email&&(0,l.jsx)("span",{className:"text-xs text-dim",style:{display:"block"},children:el.customer_email})]})]}),(0,l.jsxs)("div",{className:"detail-item",children:[(0,l.jsx)("span",{className:"detail-label",children:"Pedido"}),(0,l.jsxs)("span",{className:"detail-value",children:["#",el.order_id||"-"]})]}),(0,l.jsxs)("div",{className:"detail-item",children:[(0,l.jsx)("span",{className:"detail-label",children:"Parceiro"}),(0,l.jsx)("span",{className:"detail-value",children:el.partner_name||"-"})]}),(0,l.jsxs)("div",{className:"detail-item",children:[(0,l.jsx)("span",{className:"detail-label",children:"Categoria"}),(0,l.jsxs)("span",{className:"detail-value",children:[y[el.category]||el.category||"-",el.subcategory&&(0,l.jsx)("span",{className:"text-xs text-dim",style:{display:"block"},children:_[el.subcategory]||el.subcategory})]})]}),(0,l.jsxs)("div",{className:"detail-item",children:[(0,l.jsx)("span",{className:"detail-label",children:"Valor Solicitado"}),(0,l.jsx)("span",{className:"detail-value",style:{fontWeight:600},children:S(el.requested_amount)})]}),(0,l.jsxs)("div",{className:"detail-item",children:[(0,l.jsx)("span",{className:"detail-label",children:"Data"}),(0,l.jsx)("span",{className:"detail-value",children:D(el.created_at)})]}),el.approved_amount>0&&(0,l.jsxs)("div",{className:"detail-item",children:[(0,l.jsx)("span",{className:"detail-label",children:"Valor Aprovado"}),(0,l.jsx)("span",{className:"detail-value",style:{color:"var(--success)",fontWeight:600},children:S(el.approved_amount)})]}),el.credit_amount>0&&(0,l.jsxs)("div",{className:"detail-item",children:[(0,l.jsx)("span",{className:"detail-label",children:"Credito Concedido"}),(0,l.jsx)("span",{className:"detail-value",style:{color:"var(--info)",fontWeight:600},children:S(el.credit_amount)})]})]}),el.description&&(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Descricao"}),(0,l.jsx)("p",{className:"text-sm",style:{padding:12,background:"var(--bg)",borderRadius:"var(--radius)",border:"1px solid var(--border)",whiteSpace:"pre-wrap"},children:el.description})]}),ei.length>0&&(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsxs)("label",{className:"form-label",children:["Evidencias (",ei.length,")"]}),(0,l.jsx)("div",{className:"flex gap-2",style:{flexWrap:"wrap"},children:ei.map((e,a)=>{var s,t;return(0,l.jsx)("div",{style:{width:80,height:80,borderRadius:"var(--radius)",overflow:"hidden",border:"1px solid var(--border)",background:"var(--bg)"},children:(null===(s=e.file_type)||void 0===s?void 0:s.startsWith("image"))||(null===(t=e.file_url)||void 0===t?void 0:t.match(/\.(jpg|jpeg|png|webp)/i))?(0,l.jsx)("a",{href:e.file_url,target:"_blank",rel:"noopener noreferrer",children:(0,l.jsx)("img",{src:e.file_url,alt:"Evidencia ".concat(a+1),style:{width:"100%",height:"100%",objectFit:"cover"}})}):(0,l.jsx)("a",{href:e.file_url,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",fontSize:10,color:"var(--primary)",textDecoration:"none",textAlign:"center",padding:4},children:e.file_type||"Arquivo"})},a)})})]}),er.length>0&&(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Timeline"}),(0,l.jsx)("div",{style:{maxHeight:240,overflowY:"auto",border:"1px solid var(--border)",borderRadius:"var(--radius)"},children:er.map((e,a)=>(0,l.jsxs)("div",{style:{padding:"10px 14px",borderBottom:a<er.length-1?"1px solid var(--border)":"none",background:a%2==0?"var(--bg)":"transparent"},children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(c.Z,{label:e.action||"note",variant:"resolved"===e.action?"success":"escalated"===e.action?"danger":"assigned"===e.action?"info":"neutral"}),(0,l.jsx)("span",{className:"text-xs text-dim",children:D(e.created_at)})]}),(0,l.jsx)("p",{className:"text-sm",style:{marginTop:4},children:e.description||"-"}),e.actor_type&&(0,l.jsxs)("span",{className:"text-xs text-dim",children:[e.actor_type," #",e.actor_id]})]},a))})]}),el.partner_response&&(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Resposta do Parceiro"}),(0,l.jsx)("p",{className:"text-sm",style:{padding:12,background:"rgba(59,130,246,0.05)",borderRadius:"var(--radius)",border:"1px solid rgba(59,130,246,0.2)",whiteSpace:"pre-wrap"},children:el.partner_response})]}),el.resolution_note&&!eP&&(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Nota de Resolucao"}),(0,l.jsx)("p",{className:"text-sm",style:{padding:12,background:"rgba(34,197,94,0.05)",borderRadius:"var(--radius)",border:"1px solid rgba(34,197,94,0.2)",whiteSpace:"pre-wrap"},children:el.resolution_note})]}),eP&&(0,l.jsxs)("div",{style:{marginTop:16,padding:16,background:"var(--bg)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:[(0,l.jsx)("h4",{style:{marginBottom:12,fontSize:15,fontWeight:600},children:"Resolver Disputa"}),(0,l.jsxs)("div",{className:"grid-2 gap-4",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Valor Reembolso (R$)"}),(0,l.jsx)("input",{className:"form-input",type:"number",step:"0.01",min:"0",value:eu,onChange:e=>em(e.target.value),placeholder:"0,00"})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Valor Credito (R$)"}),(0,l.jsx)("input",{className:"form-input",type:"number",step:"0.01",min:"0",value:ep,onChange:e=>eh(e.target.value),placeholder:"0,00"})]})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Tipo de Compensacao"}),(0,l.jsx)("select",{className:"form-select",value:ev,onChange:e=>ex(e.target.value),children:N.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Nota de Resolucao"}),(0,l.jsx)("textarea",{className:"form-textarea",value:eg,onChange:e=>eb(e.target.value),placeholder:"Descreva a resolucao aplicada...",rows:3})]}),(0,l.jsx)("div",{className:"flex gap-2",style:{justifyContent:"flex-end",flexWrap:"wrap"},children:(0,l.jsxs)("div",{className:"flex gap-2",style:{flex:1},children:[(0,l.jsx)("input",{className:"form-input",value:eN,onChange:e=>ey(e.target.value),placeholder:"Adicionar nota interna...",style:{flex:1}}),(0,l.jsx)("button",{className:"btn btn-secondary",onClick:eZ,disabled:e_||!eN.trim(),children:e_?"...":"Nota"})]})}),(0,l.jsxs)("div",{className:"flex gap-2",style:{justifyContent:"flex-end",marginTop:12},children:[(0,l.jsxs)("div",{className:"flex gap-2",style:{alignItems:"center"},children:[(0,l.jsx)("input",{className:"form-input",value:ej,onChange:e=>ef(e.target.value),placeholder:"Motivo da escalacao (opcional)",style:{width:220}}),(0,l.jsx)("button",{className:"btn btn-warning",onClick:eR,disabled:e_,children:e_?"...":"Escalar"})]}),(0,l.jsx)("button",{className:"btn btn-primary",onClick:eE,disabled:e_||!eg.trim(),children:e_?"Resolvendo...":"Resolver"})]})]})]}):null})]}),(0,l.jsx)(m.Z,{})]})}function R(){return(0,l.jsx)(r.Z,{children:(0,l.jsx)(i.Z,{section:"support",children:(0,l.jsx)(E,{})})})}}},function(e){e.O(0,[3448,1006,2971,2117,1744],function(){return e(e.s=610)}),_N_E=e.O()}]);