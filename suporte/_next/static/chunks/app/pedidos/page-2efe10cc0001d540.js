(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6429],{2751:function(e,a,n){Promise.resolve().then(n.bind(n,8725))},4445:function(e,a,n){"use strict";n.d(a,{Z:function(){return l}});var t=n(7437),s=n(8253);function l(e){let{section:a,children:n}=e,{hasPermission:l}=(0,s.q)();return l(a)?(0,t.jsx)(t.Fragment,{children:n}):(0,t.jsxs)("div",{className:"role-denied",children:[(0,t.jsx)("div",{className:"role-denied-icon",children:"\uD83D\uDD12"}),(0,t.jsx)("h2",{children:"Acesso Negado"}),(0,t.jsx)("p",{children:"Voce nao tem permissao para acessar esta secao."}),(0,t.jsx)("p",{className:"role-denied-hint",children:"Contate o administrador para solicitar acesso."})]})}},1656:function(e,a,n){"use strict";n.d(a,{X:function(){return r},Z:function(){return l}});var t=n(7437);let s={success:"badge-success",warning:"badge-warning",danger:"badge-danger",info:"badge-info",neutral:"badge-neutral"};function l(e){let{label:a,variant:n="neutral"}=e;return(0,t.jsx)("span",{className:"badge ".concat(s[n]||s.neutral),children:a})}function r(e){return({pendente:"warning",confirmado:"info",preparando:"info",pronto:"info",coletado:"info",em_entrega:"warning",entregue:"success",cancelado:"danger",recusado:"danger",ativo:"success",inativo:"neutral",bloqueado:"danger",online:"success",offline:"neutral",aprovado:"success",reprovado:"danger",pago:"success",pendente_pagamento:"warning",processando:"info",aberto:"warning",resolvido:"success",fechado:"neutral"})[e]||"neutral"}},9246:function(e,a,n){"use strict";n.d(a,{Z:function(){return i}});var t=n(7437),s=n(2265);function l(e){let{value:a,onChange:n,placeholder:l="Buscar...",delay:r=300}=e,[i,c]=(0,s.useState)(a||""),o=(0,s.useRef)(null);return(0,s.useEffect)(()=>{c(a||"")},[a]),(0,t.jsxs)("div",{className:"search-input-wrapper",children:[(0,t.jsx)("span",{className:"search-input-icon",children:"\uD83D\uDD0D"}),(0,t.jsx)("input",{type:"text",className:"search-input",value:i,onChange:e=>{let a=e.target.value;c(a),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{null==n||n(a)},r)},placeholder:l}),i&&(0,t.jsx)("button",{className:"search-input-clear",onClick:()=>{c(""),null==n||n("")},children:"✕"})]})}var r=n(4420);function i(e){let{columns:a=[],data:n=[],loading:i=!1,searchable:c=!0,pageSize:o=15,emptyMessage:d="Nenhum registro encontrado",onRowClick:u}=e,[h,m]=(0,s.useState)(""),[p,g]=(0,s.useState)(null),[x,b]=(0,s.useState)("asc"),[j,v]=(0,s.useState)(1),f=(0,s.useMemo)(()=>{if(!h)return n;let e=h.toLowerCase();return n.filter(n=>a.some(a=>{let t=n[a.key];return null!=t&&String(t).toLowerCase().includes(e)}))},[n,h,a]),N=(0,s.useMemo)(()=>p?[...f].sort((e,a)=>{var n,t;let s=null!==(n=e[p])&&void 0!==n?n:"",l=null!==(t=a[p])&&void 0!==t?t:"";if("number"==typeof s&&"number"==typeof l)return"asc"===x?s-l:l-s;let r=String(s).localeCompare(String(l));return"asc"===x?r:-r}):f,[f,p,x]),k=Math.max(1,Math.ceil(N.length/o)),y=N.slice((j-1)*o,j*o);(0,s.useEffect)(()=>{j>k&&v(1)},[j,k]);let C=e=>{p===e?b(e=>"asc"===e?"desc":"asc"):(g(e),b("asc"))};return i?(0,t.jsxs)("div",{className:"datatable",children:[c&&(0,t.jsx)("div",{className:"datatable-toolbar",children:(0,t.jsx)(l,{value:"",onChange:()=>{},placeholder:"Buscar..."})}),(0,t.jsx)("div",{className:"datatable-skeleton",children:[void 0,void 0,void 0,void 0,void 0].map((e,n)=>(0,t.jsx)("div",{className:"skeleton-row",children:a.map((e,a)=>(0,t.jsx)("div",{className:"skeleton-cell"},a))},n))})]}):(0,t.jsxs)("div",{className:"datatable",children:[c&&(0,t.jsxs)("div",{className:"datatable-toolbar",children:[(0,t.jsx)(l,{value:h,onChange:e=>{m(e),v(1)},placeholder:"Buscar na tabela..."}),(0,t.jsxs)("span",{className:"datatable-count",children:[f.length," registro(s)"]})]}),(0,t.jsx)("div",{className:"datatable-wrapper",children:(0,t.jsxs)("table",{className:"datatable-table",children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{children:a.map(e=>(0,t.jsxs)("th",{onClick:()=>!1!==e.sortable&&C(e.key),className:!1!==e.sortable?"sortable":"",style:e.width?{width:e.width}:void 0,children:[e.label,p===e.key&&(0,t.jsx)("span",{className:"sort-indicator",children:"asc"===x?" ▲":" ▼"})]},e.key))})}),(0,t.jsx)("tbody",{children:0===y.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:a.length,className:"datatable-empty",children:d})}):y.map((e,n)=>(0,t.jsx)("tr",{onClick:()=>null==u?void 0:u(e),className:u?"clickable-row":"",children:a.map(a=>{var n;return(0,t.jsx)("td",{children:a.render?a.render(e[a.key],e):null!==(n=e[a.key])&&void 0!==n?n:"-"},a.key)})},e.id||n))})]})}),k>1&&(0,t.jsx)(r.Z,{page:j,totalPages:k,onPageChange:v})]})}},4420:function(e,a,n){"use strict";n.d(a,{Z:function(){return s}});var t=n(7437);function s(e){let{page:a,totalPages:n,onPageChange:s}=e,l=[],r=Math.max(1,a-Math.floor(2.5)),i=Math.min(n,r+5-1);i-r<4&&(r=Math.max(1,i-5+1));for(let e=r;e<=i;e++)l.push(e);return(0,t.jsxs)("div",{className:"pagination",children:[(0,t.jsx)("button",{className:"pagination-btn",disabled:a<=1,onClick:()=>s(a-1),children:"‹ Anterior"}),r>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"pagination-btn",onClick:()=>s(1),children:"1"}),r>2&&(0,t.jsx)("span",{className:"pagination-dots",children:"..."})]}),l.map(e=>(0,t.jsx)("button",{className:"pagination-btn ".concat(e===a?"pagination-active":""),onClick:()=>s(e),children:e},e)),i<n&&(0,t.jsxs)(t.Fragment,{children:[i<n-1&&(0,t.jsx)("span",{className:"pagination-dots",children:"..."}),(0,t.jsx)("button",{className:"pagination-btn",onClick:()=>s(n),children:n})]}),(0,t.jsx)("button",{className:"pagination-btn",disabled:a>=n,onClick:()=>s(a+1),children:"Proximo ›"})]})}},6939:function(e,a,n){"use strict";n.d(a,{Z:function(){return r}});var t=n(7437),s=n(6971);let l={success:"&#10003;",error:"&#10007;",warning:"&#9888;",info:"&#8505;"};function r(){let{toasts:e,removeToast:a}=(0,s.l)();return 0===e.length?null:(0,t.jsx)("div",{className:"toast-container",children:e.map(e=>(0,t.jsxs)("div",{className:"toast toast-".concat(e.type),children:[(0,t.jsx)("span",{className:"toast-icon",dangerouslySetInnerHTML:{__html:l[e.type]||l.info}}),(0,t.jsx)("span",{className:"toast-message",children:e.message}),(0,t.jsx)("button",{className:"toast-close",onClick:()=>a(e.id),children:"✕"})]},e.id))})}},8725:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return b}});var t=n(7437),s=n(2265),l=n(9376),r=n(8779),i=n(4477),c=n(4445),o=n(9246),d=n(1656),u=n(6939),h=n(8789),m=n(6971),p=n(6428);let g=[{value:"",label:"Todos Status"},{value:"pendente",label:"Pendente"},{value:"confirmado",label:"Confirmado"},{value:"preparando",label:"Preparando"},{value:"pronto",label:"Pronto"},{value:"coletado",label:"Coletado"},{value:"em_entrega",label:"Em Entrega"},{value:"entregue",label:"Entregue"},{value:"cancelado",label:"Cancelado"}];function x(){let{collapsed:e}=(0,h.A)(),{error:a}=(0,m.l)(),n=(0,l.useRouter)(),[r,c]=(0,s.useState)([]),[x,b]=(0,s.useState)(!0),[j,v]=(0,s.useState)(""),[f,N]=(0,s.useState)(""),[k,y]=(0,s.useState)("");(0,s.useEffect)(()=>{C()},[j,f,k]);let C=async()=>{b(!0);try{let e=new URLSearchParams;j&&e.set("status",j),f&&e.set("date_from",f),k&&e.set("date_to",k);let a=e.toString()?"?".concat(e.toString()):"",n=await (0,p.SC)("/orders.php".concat(a));c(n.orders||n.data||[])}catch(e){a("Erro ao carregar pedidos: "+e.message)}finally{b(!1)}},w=e=>null==e?"R$ 0,00":"R$ ".concat(Number(e).toLocaleString("pt-BR",{minimumFractionDigits:2})),S=[{key:"id",label:"ID",width:"80px",render:(e,a)=>(0,t.jsxs)("strong",{children:["#",a.id||a.order_id]})},{key:"cliente_nome",label:"Cliente",render:(e,a)=>e||a.customer_name||"-"},{key:"parceiro_nome",label:"Parceiro",render:(e,a)=>e||a.partner_name||"-"},{key:"shopper_nome",label:"Shopper",render:(e,a)=>e||a.shopper_name||"-"},{key:"total",label:"Total",render:e=>w(e)},{key:"status",label:"Status",render:e=>(0,t.jsx)(d.Z,{label:e||"pendente",variant:(0,d.X)(e)})},{key:"created_at",label:"Data",render:(e,a)=>e||a.data||"-"}];return(0,t.jsxs)("div",{className:"admin-layout",children:[(0,t.jsx)(i.Z,{}),(0,t.jsxs)("main",{className:"admin-main ".concat(e?"main-collapsed":""),children:[(0,t.jsxs)("div",{className:"page-header",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"page-title",children:"Pedidos"}),(0,t.jsx)("p",{className:"page-subtitle",children:"Gerenciar todos os pedidos"})]}),(0,t.jsx)("div",{className:"page-actions",children:(0,t.jsx)("button",{className:"btn btn-secondary",onClick:C,children:"Atualizar"})})]}),(0,t.jsxs)("div",{className:"filters-bar",children:[(0,t.jsx)("select",{className:"form-select",value:j,onChange:e=>v(e.target.value),children:g.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,t.jsx)("input",{type:"date",className:"form-input",value:f,onChange:e=>N(e.target.value),placeholder:"Data inicio",style:{width:"auto"}}),(0,t.jsx)("input",{type:"date",className:"form-input",value:k,onChange:e=>y(e.target.value),placeholder:"Data fim",style:{width:"auto"}})]}),(0,t.jsx)(o.Z,{columns:S,data:r,loading:x,onRowClick:e=>{let a=e.id||e.order_id;n.push("/pedidos/detalhe/?id=".concat(a))},emptyMessage:"Nenhum pedido encontrado"})]}),(0,t.jsx)(u.Z,{})]})}function b(){return(0,t.jsx)(r.Z,{children:(0,t.jsx)(c.Z,{section:"orders",children:(0,t.jsx)(x,{})})})}}},function(e){e.O(0,[3448,1006,2971,2117,1744],function(){return e(e.s=2751)}),_N_E=e.O()}]);