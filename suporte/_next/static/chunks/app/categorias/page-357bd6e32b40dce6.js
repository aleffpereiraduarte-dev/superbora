(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{5888:function(e,a,s){Promise.resolve().then(s.bind(s,5764))},5764:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return b}});var t=s(7437),n=s(2265),r=s(8779),l=s(4477),i=s(4445),o=s(9246),c=s(1656),d=s(7714),u=s(6939),m=s(8789),g=s(6971),h=s(6428);let x=[{emoji:"\uD83D\uDED2",label:"Carrinho"},{emoji:"\uD83E\uDD64",label:"Bebida"},{emoji:"\uD83E\uDDC0",label:"Queijo"},{emoji:"\uD83E\uDD69",label:"Carne"},{emoji:"\uD83E\uDD6C",label:"Verdura"},{emoji:"\uD83E\uDD56",label:"Pao"},{emoji:"❄️",label:"Gelo"},{emoji:"\uD83E\uDDF4",label:"Sabao"},{emoji:"\uD83E\uDDF9",label:"Vassoura"},{emoji:"\uD83D\uDC76",label:"Bebe"},{emoji:"\uD83D\uDC15",label:"Pet"},{emoji:"\uD83C\uDF6A",label:"Biscoito"},{emoji:"\uD83C\uDF5D",label:"Massa"},{emoji:"☕",label:"Cafe"},{emoji:"\uD83C\uDF5A",label:"Arroz"},{emoji:"\uD83E\uDED2",label:"Oleo"},{emoji:"\uD83C\uDF70",label:"Bolo"},{emoji:"\uD83C\uDF53",label:"Fruta"},{emoji:"\uD83E\uDD5B",label:"Leite"},{emoji:"\uD83C\uDF7A",label:"Cerveja"}];function p(){let{collapsed:e}=(0,m.A)(),{success:a,error:s}=(0,g.l)(),[r,i]=(0,n.useState)([]),[p,b]=(0,n.useState)(!0),[j,v]=(0,n.useState)(!1),[f,y]=(0,n.useState)(!1),[N,C]=(0,n.useState)(!1),[D,k]=(0,n.useState)(!1),[_,S]=(0,n.useState)(null),[E,w]=(0,n.useState)(!1),[A,z]=(0,n.useState)({name:"",icon:"",sort_order:0,status:1,parent_id:0,slug:""});(0,n.useEffect)(()=>{Z()},[j]);let Z=async()=>{b(!0);try{let e={};j&&(e.include_inactive="1");let a=await (0,h.SC)("/categories.php",e);i(a.categories||a.data||[])}catch(e){s("Erro ao carregar categorias: "+e.message)}finally{b(!1)}},F=()=>{z({name:"",icon:"",sort_order:0,status:1,parent_id:0,slug:""})},B=e=>{S(e),z({name:e.name||"",icon:e.icon||"",sort_order:e.sort_order||0,status:void 0!==e.status?Number(e.status):1,parent_id:e.parent_id||0,slug:e.slug||""}),C(!0)},M=e=>{S(e),k(!0)},L=async()=>{if(!A.name.trim()){s("Nome da categoria e obrigatorio");return}w(!0);try{await (0,h.sg)("/categories.php",{name:A.name.trim(),icon:A.icon,sort_order:Number(A.sort_order),status:A.status,parent_id:A.parent_id,slug:A.slug}),a("Categoria criada com sucesso"),y(!1),F(),Z()}catch(e){s("Erro: "+e.message)}finally{w(!1)}},P=async()=>{if(!A.name.trim()){s("Nome da categoria e obrigatorio");return}if(_){w(!0);try{await (0,h.pE)("/categories.php",{category_id:_.category_id,name:A.name.trim(),icon:A.icon,sort_order:Number(A.sort_order),status:A.status,parent_id:A.parent_id,slug:A.slug}),a("Categoria atualizada com sucesso"),C(!1),S(null),Z()}catch(e){s("Erro: "+e.message)}finally{w(!1)}}},I=async e=>{try{await (0,h.pE)("/categories.php",{category_id:e.category_id,status:1==e.status?0:1}),a(1==e.status?"Categoria desativada":"Categoria ativada"),Z()}catch(e){s("Erro: "+e.message)}},O=async()=>{if(_){w(!0);try{await (0,h.QW)("/categories.php?id=".concat(_.category_id)),a("Categoria removida com sucesso"),k(!1),S(null),Z()}catch(e){s("Erro: "+e.message)}finally{w(!1)}}},R=e=>{let{onSubmit:a,submitLabel:s,submitLoading:n}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Nome da Categoria *"}),(0,t.jsx)("input",{className:"form-input",value:A.name,onChange:e=>z({...A,name:e.target.value}),placeholder:"Ex: Bebidas, Hortifruti..."})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Icone / Emoji"}),(0,t.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8},children:[(0,t.jsx)("input",{className:"form-input",value:A.icon,onChange:e=>z({...A,icon:e.target.value}),placeholder:"Cole um emoji ou selecione abaixo",style:{flex:1}}),A.icon&&(0,t.jsx)("span",{style:{fontSize:"2rem",lineHeight:1},children:A.icon})]}),(0,t.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:4,padding:8,background:"var(--bg)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:x.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>z({...A,icon:e.emoji}),style:{padding:"4px 8px",fontSize:"1.2rem",cursor:"pointer",background:A.icon===e.emoji?"var(--primary)":"transparent",border:"1px solid var(--border)",borderRadius:"var(--radius)",opacity:A.icon===e.emoji?1:.7},title:e.label,children:e.emoji},e.label))})]}),(0,t.jsxs)("div",{className:"grid-2 gap-4",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Ordem de Exibicao"}),(0,t.jsx)("input",{className:"form-input",type:"number",min:"0",value:A.sort_order,onChange:e=>z({...A,sort_order:e.target.value})})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Status"}),(0,t.jsxs)("select",{className:"form-select",value:A.status,onChange:e=>z({...A,status:Number(e.target.value)}),children:[(0,t.jsx)("option",{value:1,children:"Ativa"}),(0,t.jsx)("option",{value:0,children:"Inativa"})]})]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Slug (URL amigavel)"}),(0,t.jsx)("input",{className:"form-input",value:A.slug,onChange:e=>z({...A,slug:e.target.value}),placeholder:"Auto-gerado se vazio",style:{fontFamily:"monospace"}}),(0,t.jsx)("span",{className:"text-sm text-muted",children:"Deixe vazio para gerar automaticamente a partir do nome"})]}),(0,t.jsxs)("div",{className:"flex gap-2",style:{justifyContent:"flex-end",marginTop:16},children:[(0,t.jsx)("button",{className:"btn btn-secondary",onClick:()=>{y(!1),C(!1)},children:"Cancelar"}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:a,disabled:n,children:n?"Salvando...":s})]})]})};return(0,t.jsxs)("div",{className:"admin-layout",children:[(0,t.jsx)(l.Z,{}),(0,t.jsxs)("main",{className:"admin-main ".concat(e?"main-collapsed":""),children:[(0,t.jsxs)("div",{className:"page-header",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"page-title",children:"Categorias"}),(0,t.jsx)("p",{className:"page-subtitle",children:"Gerenciar categorias do marketplace"})]}),(0,t.jsxs)("div",{className:"page-actions",children:[(0,t.jsx)("button",{className:"btn btn-secondary",onClick:Z,children:"Atualizar"}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:()=>{F();let e=r.reduce((e,a)=>Math.max(e,a.sort_order||0),0);z(a=>({...a,sort_order:e+1})),y(!0)},children:"Nova Categoria"})]})]}),(0,t.jsxs)("div",{className:"filters-bar",children:[(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:"0.9rem"},children:[(0,t.jsx)("input",{type:"checkbox",checked:j,onChange:e=>v(e.target.checked),style:{width:16,height:16}}),"Mostrar categorias inativas"]}),(0,t.jsxs)("span",{className:"text-sm text-muted",style:{marginLeft:"auto"},children:[r.length," categoria",1!==r.length?"s":""]})]}),(0,t.jsxs)("div",{className:"grid-4 gap-4 mb-6",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:16,marginBottom:24},children:[(0,t.jsxs)("div",{className:"card",style:{padding:16,textAlign:"center"},children:[(0,t.jsx)("div",{className:"text-sm text-muted",children:"Total Categorias"}),(0,t.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:700,color:"var(--primary)"},children:r.length})]}),(0,t.jsxs)("div",{className:"card",style:{padding:16,textAlign:"center"},children:[(0,t.jsx)("div",{className:"text-sm text-muted",children:"Ativas"}),(0,t.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:700,color:"#22c55e"},children:r.filter(e=>1==e.status).length})]}),(0,t.jsxs)("div",{className:"card",style:{padding:16,textAlign:"center"},children:[(0,t.jsx)("div",{className:"text-sm text-muted",children:"Inativas"}),(0,t.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:700,color:"#6b7280"},children:r.filter(e=>1!=e.status).length})]}),(0,t.jsxs)("div",{className:"card",style:{padding:16,textAlign:"center"},children:[(0,t.jsx)("div",{className:"text-sm text-muted",children:"Total Produtos"}),(0,t.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:700,color:"#3b82f6"},children:r.reduce((e,a)=>e+(a.product_count||0),0)})]})]}),(0,t.jsx)(o.Z,{columns:[{key:"category_id",label:"ID",render:e=>(0,t.jsxs)("strong",{children:["#",e]})},{key:"icon",label:"Icone",sortable:!1,render:e=>(0,t.jsx)("span",{style:{fontSize:"1.5rem"},children:e||"-"})},{key:"name",label:"Nome",render:e=>(0,t.jsx)("strong",{children:e})},{key:"slug",label:"Slug",render:e=>(0,t.jsx)("span",{className:"text-sm text-muted",style:{fontFamily:"monospace"},children:e||"-"})},{key:"sort_order",label:"Ordem",render:e=>(0,t.jsx)("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:28,height:28,borderRadius:"50%",background:"var(--bg)",fontWeight:600,fontSize:"0.85rem"},children:e})},{key:"product_count",label:"Produtos",render:e=>(0,t.jsx)(c.Z,{label:"".concat(e||0," produtos"),variant:e>0?"info":"neutral"})},{key:"status",label:"Status",render:e=>(0,t.jsx)(c.Z,{label:1==e?"Ativa":"Inativa",variant:1==e?"success":"neutral"})},{key:"actions",label:"Acoes",sortable:!1,render:(e,a)=>(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:e=>{e.stopPropagation(),B(a)},children:"Editar"}),(0,t.jsx)("button",{className:"btn btn-sm ".concat(1==a.status?"btn-warning":"btn-success"),onClick:e=>{e.stopPropagation(),I(a)},children:1==a.status?"Desativar":"Ativar"}),(0,t.jsx)("button",{className:"btn btn-sm btn-danger",onClick:e=>{e.stopPropagation(),M(a)},children:"Excluir"})]})}],data:r,loading:p,emptyMessage:"Nenhuma categoria encontrada"}),(0,t.jsx)(d.Z,{isOpen:f,onClose:()=>y(!1),title:"Nova Categoria",size:"md",children:(0,t.jsx)(R,{onSubmit:L,submitLabel:"Criar Categoria",submitLoading:E})}),(0,t.jsx)(d.Z,{isOpen:N,onClose:()=>C(!1),title:"Editar Categoria",size:"md",children:(0,t.jsx)(R,{onSubmit:P,submitLabel:"Salvar Alteracoes",submitLoading:E})}),(0,t.jsx)(d.Z,{isOpen:D,onClose:()=>k(!1),title:"Excluir Categoria",size:"sm",children:_&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{style:{padding:16,background:"var(--bg)",borderRadius:"var(--radius)",border:"1px solid var(--border)",marginBottom:16},children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,t.jsx)("span",{style:{fontSize:"2rem"},children:_.icon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:_.name}),(0,t.jsxs)("p",{className:"text-sm text-muted",children:[_.product_count||0," produtos vinculados"]})]})]})}),(_.product_count||0)>0&&(0,t.jsxs)("div",{style:{padding:"8px 12px",background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"var(--radius)",marginBottom:16,fontSize:"0.85rem",color:"#f59e0b"},children:["Atencao: Esta categoria possui ",_.product_count," produtos vinculados. A categoria sera desativada (soft delete), nao removida permanentemente."]}),(0,t.jsxs)("p",{className:"text-sm text-muted mb-4",children:["Deseja desativar a categoria ",(0,t.jsx)("strong",{children:_.name}),"?"]}),(0,t.jsxs)("div",{className:"flex gap-2",style:{justifyContent:"flex-end"},children:[(0,t.jsx)("button",{className:"btn btn-secondary",onClick:()=>k(!1),children:"Cancelar"}),(0,t.jsx)("button",{className:"btn btn-danger",onClick:O,disabled:E,children:E?"Removendo...":"Confirmar Exclusao"})]})]})})]}),(0,t.jsx)(u.Z,{})]})}function b(){return(0,t.jsx)(r.Z,{children:(0,t.jsx)(i.Z,{section:"config",children:(0,t.jsx)(p,{})})})}},4445:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});var t=s(7437),n=s(8253);function r(e){let{section:a,children:s}=e,{hasPermission:r}=(0,n.q)();return r(a)?(0,t.jsx)(t.Fragment,{children:s}):(0,t.jsxs)("div",{className:"role-denied",children:[(0,t.jsx)("div",{className:"role-denied-icon",children:"\uD83D\uDD12"}),(0,t.jsx)("h2",{children:"Acesso Negado"}),(0,t.jsx)("p",{children:"Voce nao tem permissao para acessar esta secao."}),(0,t.jsx)("p",{className:"role-denied-hint",children:"Contate o administrador para solicitar acesso."})]})}},1656:function(e,a,s){"use strict";s.d(a,{X:function(){return l},Z:function(){return r}});var t=s(7437);let n={success:"badge-success",warning:"badge-warning",danger:"badge-danger",info:"badge-info",neutral:"badge-neutral"};function r(e){let{label:a,variant:s="neutral"}=e;return(0,t.jsx)("span",{className:"badge ".concat(n[s]||n.neutral),children:a})}function l(e){return({pendente:"warning",confirmado:"info",preparando:"info",pronto:"info",coletado:"info",em_entrega:"warning",entregue:"success",cancelado:"danger",recusado:"danger",ativo:"success",inativo:"neutral",bloqueado:"danger",online:"success",offline:"neutral",aprovado:"success",reprovado:"danger",pago:"success",pendente_pagamento:"warning",processando:"info",aberto:"warning",resolvido:"success",fechado:"neutral"})[e]||"neutral"}},9246:function(e,a,s){"use strict";s.d(a,{Z:function(){return i}});var t=s(7437),n=s(2265);function r(e){let{value:a,onChange:s,placeholder:r="Buscar...",delay:l=300}=e,[i,o]=(0,n.useState)(a||""),c=(0,n.useRef)(null);return(0,n.useEffect)(()=>{o(a||"")},[a]),(0,t.jsxs)("div",{className:"search-input-wrapper",children:[(0,t.jsx)("span",{className:"search-input-icon",children:"\uD83D\uDD0D"}),(0,t.jsx)("input",{type:"text",className:"search-input",value:i,onChange:e=>{let a=e.target.value;o(a),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{null==s||s(a)},l)},placeholder:r}),i&&(0,t.jsx)("button",{className:"search-input-clear",onClick:()=>{o(""),null==s||s("")},children:"✕"})]})}var l=s(4420);function i(e){let{columns:a=[],data:s=[],loading:i=!1,searchable:o=!0,pageSize:c=15,emptyMessage:d="Nenhum registro encontrado",onRowClick:u}=e,[m,g]=(0,n.useState)(""),[h,x]=(0,n.useState)(null),[p,b]=(0,n.useState)("asc"),[j,v]=(0,n.useState)(1),f=(0,n.useMemo)(()=>{if(!m)return s;let e=m.toLowerCase();return s.filter(s=>a.some(a=>{let t=s[a.key];return null!=t&&String(t).toLowerCase().includes(e)}))},[s,m,a]),y=(0,n.useMemo)(()=>h?[...f].sort((e,a)=>{var s,t;let n=null!==(s=e[h])&&void 0!==s?s:"",r=null!==(t=a[h])&&void 0!==t?t:"";if("number"==typeof n&&"number"==typeof r)return"asc"===p?n-r:r-n;let l=String(n).localeCompare(String(r));return"asc"===p?l:-l}):f,[f,h,p]),N=Math.max(1,Math.ceil(y.length/c)),C=y.slice((j-1)*c,j*c);(0,n.useEffect)(()=>{j>N&&v(1)},[j,N]);let D=e=>{h===e?b(e=>"asc"===e?"desc":"asc"):(x(e),b("asc"))};return i?(0,t.jsxs)("div",{className:"datatable",children:[o&&(0,t.jsx)("div",{className:"datatable-toolbar",children:(0,t.jsx)(r,{value:"",onChange:()=>{},placeholder:"Buscar..."})}),(0,t.jsx)("div",{className:"datatable-skeleton",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"skeleton-row",children:a.map((e,a)=>(0,t.jsx)("div",{className:"skeleton-cell"},a))},s))})]}):(0,t.jsxs)("div",{className:"datatable",children:[o&&(0,t.jsxs)("div",{className:"datatable-toolbar",children:[(0,t.jsx)(r,{value:m,onChange:e=>{g(e),v(1)},placeholder:"Buscar na tabela..."}),(0,t.jsxs)("span",{className:"datatable-count",children:[f.length," registro(s)"]})]}),(0,t.jsx)("div",{className:"datatable-wrapper",children:(0,t.jsxs)("table",{className:"datatable-table",children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{children:a.map(e=>(0,t.jsxs)("th",{onClick:()=>!1!==e.sortable&&D(e.key),className:!1!==e.sortable?"sortable":"",style:e.width?{width:e.width}:void 0,children:[e.label,h===e.key&&(0,t.jsx)("span",{className:"sort-indicator",children:"asc"===p?" ▲":" ▼"})]},e.key))})}),(0,t.jsx)("tbody",{children:0===C.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:a.length,className:"datatable-empty",children:d})}):C.map((e,s)=>(0,t.jsx)("tr",{onClick:()=>null==u?void 0:u(e),className:u?"clickable-row":"",children:a.map(a=>{var s;return(0,t.jsx)("td",{children:a.render?a.render(e[a.key],e):null!==(s=e[a.key])&&void 0!==s?s:"-"},a.key)})},e.id||s))})]})}),N>1&&(0,t.jsx)(l.Z,{page:j,totalPages:N,onPageChange:v})]})}},7714:function(e,a,s){"use strict";s.d(a,{Z:function(){return l}});var t=s(7437),n=s(2265);let r={sm:"400px",md:"560px",lg:"720px",xl:"960px"};function l(e){let{isOpen:a,onClose:s,title:l,children:i,size:o="md"}=e;return((0,n.useEffect)(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]),(0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&a&&(null==s||s())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a,s]),a)?(0,t.jsx)("div",{className:"modal-overlay",onClick:s,children:(0,t.jsxs)("div",{className:"modal-container",style:{maxWidth:r[o]||r.md},onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsx)("h3",{className:"modal-title",children:l}),(0,t.jsx)("button",{className:"modal-close",onClick:s,children:"✕"})]}),(0,t.jsx)("div",{className:"modal-body",children:i})]})}):null}},4420:function(e,a,s){"use strict";s.d(a,{Z:function(){return n}});var t=s(7437);function n(e){let{page:a,totalPages:s,onPageChange:n}=e,r=[],l=Math.max(1,a-Math.floor(2.5)),i=Math.min(s,l+5-1);i-l<4&&(l=Math.max(1,i-5+1));for(let e=l;e<=i;e++)r.push(e);return(0,t.jsxs)("div",{className:"pagination",children:[(0,t.jsx)("button",{className:"pagination-btn",disabled:a<=1,onClick:()=>n(a-1),children:"‹ Anterior"}),l>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"pagination-btn",onClick:()=>n(1),children:"1"}),l>2&&(0,t.jsx)("span",{className:"pagination-dots",children:"..."})]}),r.map(e=>(0,t.jsx)("button",{className:"pagination-btn ".concat(e===a?"pagination-active":""),onClick:()=>n(e),children:e},e)),i<s&&(0,t.jsxs)(t.Fragment,{children:[i<s-1&&(0,t.jsx)("span",{className:"pagination-dots",children:"..."}),(0,t.jsx)("button",{className:"pagination-btn",onClick:()=>n(s),children:s})]}),(0,t.jsx)("button",{className:"pagination-btn",disabled:a>=s,onClick:()=>n(a+1),children:"Proximo ›"})]})}},6939:function(e,a,s){"use strict";s.d(a,{Z:function(){return l}});var t=s(7437),n=s(6971);let r={success:"&#10003;",error:"&#10007;",warning:"&#9888;",info:"&#8505;"};function l(){let{toasts:e,removeToast:a}=(0,n.l)();return 0===e.length?null:(0,t.jsx)("div",{className:"toast-container",children:e.map(e=>(0,t.jsxs)("div",{className:"toast toast-".concat(e.type),children:[(0,t.jsx)("span",{className:"toast-icon",dangerouslySetInnerHTML:{__html:r[e.type]||r.info}}),(0,t.jsx)("span",{className:"toast-message",children:e.message}),(0,t.jsx)("button",{className:"toast-close",onClick:()=>a(e.id),children:"✕"})]},e.id))})}}},function(e){e.O(0,[3448,1006,2971,2117,1744],function(){return e(e.s=5888)}),_N_E=e.O()}]);