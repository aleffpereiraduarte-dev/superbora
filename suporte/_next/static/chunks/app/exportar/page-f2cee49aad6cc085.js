(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3271],{396:function(e,n,t){Promise.resolve().then(t.bind(t,7344))},7344:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return i}});var a=t(7437),s=t(2265),r=t(8779),l=t(4477),o=t(6428);function i(){let[e,n]=(0,s.useState)("orders"),[t,i]=(0,s.useState)("csv"),[c,d]=(0,s.useState)(new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0]),[u,h]=(0,s.useState)(new Date().toISOString().split("T")[0]);return(0,a.jsx)(r.Z,{children:(0,a.jsxs)("div",{style:{display:"flex",minHeight:"100vh"},children:[(0,a.jsx)(l.Z,{}),(0,a.jsxs)("main",{className:"main-content",children:[(0,a.jsx)("h1",{children:"Exportar Dados"}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Tipo de Dados"}),(0,a.jsxs)("select",{className:"form-input",value:e,onChange:e=>n(e.target.value),children:[(0,a.jsx)("option",{value:"orders",children:"Pedidos"}),(0,a.jsx)("option",{value:"customers",children:"Clientes"}),(0,a.jsx)("option",{value:"shoppers",children:"Shoppers"}),(0,a.jsx)("option",{value:"financial",children:"Financeiro"})]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Formato"}),(0,a.jsxs)("select",{className:"form-input",value:t,onChange:e=>i(e.target.value),children:[(0,a.jsx)("option",{value:"csv",children:"CSV"}),(0,a.jsx)("option",{value:"json",children:"JSON"})]})]}),(0,a.jsxs)("div",{className:"form-row",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"De"}),(0,a.jsx)("input",{type:"date",className:"form-input",value:c,onChange:e=>d(e.target.value)})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"At\xe9"}),(0,a.jsx)("input",{type:"date",className:"form-input",value:u,onChange:e=>h(e.target.value)})]})]}),(0,a.jsx)("button",{className:"btn btn-primary",onClick:function(){let n=(0,o.LP)(),a="/api/mercado/admin/exportar.php?type=".concat(e,"&format=").concat(t,"&date_from=").concat(c,"&date_to=").concat(u);"csv"===t?window.open(a,"_blank"):fetch(a,{headers:{Authorization:"Bearer "+n}}).then(e=>e.json()).then(n=>{let t=new Blob([JSON.stringify(n.data,null,2)],{type:"application/json"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download="export_".concat(e,"_").concat(c,".json"),a.click()})},children:"Exportar"})]})]})]})})}}},function(e){e.O(0,[3448,1006,2971,2117,1744],function(){return e(e.s=396)}),_N_E=e.O()}]);