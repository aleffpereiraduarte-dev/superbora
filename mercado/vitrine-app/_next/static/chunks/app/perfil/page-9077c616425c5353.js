(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[550],{8992:function(e,s,a){Promise.resolve().then(a.bind(a,6814))},6428:function(e,s,a){"use strict";a.d(s,{LP:function(){return r},QW:function(){return u},SC:function(){return i},o4:function(){return l},sg:function(){return c}});let t="/api/mercado",n="superbora_token";function r(){return localStorage.getItem(n)}function l(e){e?localStorage.setItem(n,e):localStorage.removeItem(n)}function o(){let e=r();return e?{Authorization:"Bearer ".concat(e)}:{}}async function i(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new URL(t+e,window.location.origin);Object.entries(s).forEach(e=>{let[s,t]=e;null!=t&&""!==t&&a.searchParams.set(s,t)});let n=await fetch(a.toString(),{credentials:"include",headers:o()});if(!n.ok){let e=await n.json().catch(()=>null);throw Error((null==e?void 0:e.message)||"API error: ".concat(n.status," ").concat(n.statusText))}let r=await n.json();if(!r.success)throw Error(r.message||"Erro desconhecido na API");return r.data}async function c(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new URL(t+e,window.location.origin),n=await fetch(a.toString(),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",...o()},body:JSON.stringify(s)}),r=await n.json().catch(()=>null);if(!n.ok||!(null==r?void 0:r.success))throw Error((null==r?void 0:r.message)||"API error: ".concat(n.status));return r.data}async function u(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new URL(t+e,window.location.origin);Object.entries(s).forEach(e=>{let[s,t]=e;null!=t&&""!==t&&a.searchParams.set(s,t)});let n=await fetch(a.toString(),{method:"DELETE",credentials:"include",headers:o()}),r=await n.json().catch(()=>null);if(!n.ok||!(null==r?void 0:r.success))throw Error((null==r?void 0:r.message)||"API error: ".concat(n.status));return r.data}},8779:function(e,s,a){"use strict";a.d(s,{Z:function(){return o}});var t=a(7437),n=a(2265),r=a(9376),l=a(7128);function o(e){let{children:s}=e,{isAuthenticated:a,loading:o}=(0,l.a)(),i=(0,r.useRouter)();return((0,n.useEffect)(()=>{if(!o&&!a){let e=window.location.pathname;i.push("/login?return=".concat(encodeURIComponent(e)))}},[o,a,i]),o)?(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:(0,t.jsx)("div",{style:{width:32,height:32,border:"3px solid var(--color-border)",borderTopColor:"var(--color-accent)",borderRadius:"50%",animation:"spin 0.8s linear infinite"}})}):a?s:null}},7128:function(e,s,a){"use strict";a.d(s,{H:function(){return o},a:function(){return i}});var t=a(7437),n=a(2265),r=a(6428);let l=(0,n.createContext)(null);function o(e){let{children:s}=e,[a,o]=(0,n.useState)(null),[i,c]=(0,n.useState)(!0),u=(0,n.useCallback)(async()=>{if(!(0,r.LP)()){o(null),c(!1);return}try{let e=await (0,r.SC)("/auth/session.php");e.authenticated&&e.customer?o(e.customer):((0,r.o4)(null),o(null))}catch(e){(0,r.o4)(null),o(null)}finally{c(!1)}},[]);(0,n.useEffect)(()=>{u()},[u]);let d=(0,n.useCallback)(async(e,s)=>{let a=await (0,r.sg)("/auth/login.php",{email:e,senha:s});return(0,r.o4)(a.token),o(a.customer),a.customer},[]),h=(0,n.useCallback)(async e=>{let s=await (0,r.sg)("/auth/register.php",e);return(0,r.o4)(s.token),o(s.customer),s.customer},[]),m=(0,n.useCallback)(()=>{(0,r.o4)(null),o(null)},[]);return(0,t.jsx)(l.Provider,{value:{customer:a,loading:i,isAuthenticated:!!a,login:d,register:h,logout:m,refreshSession:u},children:s})}function i(){let e=(0,n.useContext)(l);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},6814:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return h}});var t=a(7437),n=a(2265),r=a(9376),l=a(7648),o=a(8779),i=a(7128),c=a(6428),u=a(940),d=a.n(u);function h(){return(0,t.jsx)(o.Z,{children:(0,t.jsx)(m,{})})}function m(){let e=(0,r.useRouter)(),{customer:s,logout:a}=(0,i.a)(),[o,u]=(0,n.useState)([]);async function h(e){try{await (0,c.QW)("/addresses/list.php",{id:e}),u(s=>s.filter(s=>s.id!==e))}catch(e){}}if((0,n.useEffect)(()=>{(0,c.SC)("/addresses/list.php").then(e=>u(e.addresses||[])).catch(()=>{})},[]),!s)return null;let m=(s.nome||"").split(" ").slice(0,2).map(e=>e[0]).join("").toUpperCase();return(0,t.jsxs)("div",{className:d().page,children:[(0,t.jsx)("div",{className:d().header,children:(0,t.jsx)("div",{className:d().title,children:"Meu perfil"})}),(0,t.jsxs)("div",{className:d().profileCard,children:[(0,t.jsx)("div",{className:d().profileAvatar,children:m}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:d().profileName,children:s.nome}),(0,t.jsx)("div",{className:d().profileEmail,children:s.email})]})]}),(0,t.jsxs)("div",{className:d().section,children:[(0,t.jsxs)(l.default,{href:"/pedidos",className:d().menuItem,children:[(0,t.jsxs)("svg",{className:d().menuIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,t.jsx)("polyline",{points:"14 2 14 8 20 8"})]}),(0,t.jsx)("span",{className:d().menuLabel,children:"Meus pedidos"}),(0,t.jsx)("svg",{className:d().menuArrow,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,t.jsx)("polyline",{points:"9 18 15 12 9 6"})})]}),(0,t.jsxs)(l.default,{href:"/favoritos",className:d().menuItem,children:[(0,t.jsx)("svg",{className:d().menuIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,t.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),(0,t.jsx)("span",{className:d().menuLabel,children:"Favoritos"}),(0,t.jsx)("svg",{className:d().menuArrow,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,t.jsx)("polyline",{points:"9 18 15 12 9 6"})})]}),(0,t.jsxs)(l.default,{href:"/carrinho",className:d().menuItem,children:[(0,t.jsxs)("svg",{className:d().menuIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("circle",{cx:"9",cy:"21",r:"1"}),(0,t.jsx)("circle",{cx:"20",cy:"21",r:"1"}),(0,t.jsx)("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),(0,t.jsx)("span",{className:d().menuLabel,children:"Carrinho"}),(0,t.jsx)("svg",{className:d().menuArrow,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,t.jsx)("polyline",{points:"9 18 15 12 9 6"})})]})]}),(0,t.jsxs)("div",{className:d().section,children:[(0,t.jsx)("div",{className:d().sectionTitle,children:"Dados pessoais"}),(0,t.jsxs)("div",{className:d().formSection,children:[(0,t.jsxs)("label",{className:d().formLabel,children:["Nome",(0,t.jsx)("input",{type:"text",value:s.nome||"",disabled:!0,className:d().formInput})]}),(0,t.jsxs)("label",{className:d().formLabel,children:["Email",(0,t.jsx)("input",{type:"email",value:s.email||"",disabled:!0,className:d().formInput})]}),(0,t.jsxs)("div",{className:d().formRow,children:[(0,t.jsxs)("label",{className:d().formLabel,children:["Telefone",(0,t.jsx)("input",{type:"tel",value:s.telefone||"",disabled:!0,className:d().formInput})]}),(0,t.jsxs)("label",{className:d().formLabel,children:["CPF",(0,t.jsx)("input",{type:"text",value:s.cpf||"",disabled:!0,className:d().formInput})]})]})]})]}),(0,t.jsxs)("div",{className:d().section,children:[(0,t.jsx)("div",{className:d().sectionTitle,children:"Enderecos"}),0===o.length?(0,t.jsx)("div",{style:{padding:16,fontSize:14,color:"var(--color-text-muted)"},children:"Nenhum endereco cadastrado"}):o.map(e=>(0,t.jsxs)("div",{className:d().addressItem,children:[(0,t.jsx)("span",{className:d().addressBadge,children:e.label}),(0,t.jsx)("span",{className:d().addressText,children:e.formatted}),(0,t.jsx)("button",{className:d().addressDelete,onClick:()=>h(e.id),children:(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,t.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]},e.id))]}),(0,t.jsx)("div",{className:d().section,children:(0,t.jsxs)("button",{className:d().logoutBtn,onClick:function(){a(),e.push("/")},children:[(0,t.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,t.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,t.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"Sair da conta"]})})]})}},9376:function(e,s,a){"use strict";var t=a(5475);a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},940:function(e){e.exports={page:"Pages_page__1BOVN",header:"Pages_header__jGmk8",backBtn:"Pages_backBtn__mTFay",title:"Pages_title__n2U_m",profileCard:"Pages_profileCard__wMFAT",profileAvatar:"Pages_profileAvatar__J6d58",profileName:"Pages_profileName__eHajI",profileEmail:"Pages_profileEmail__BG4As",section:"Pages_section__HV85g",sectionTitle:"Pages_sectionTitle__Tp1xX",menuItem:"Pages_menuItem___rXUi",menuIcon:"Pages_menuIcon__NOqLG",menuLabel:"Pages_menuLabel__Kl19j",menuArrow:"Pages_menuArrow__SdUUa",logoutBtn:"Pages_logoutBtn__f_kNh",formSection:"Pages_formSection__U2cjn",formRow:"Pages_formRow__JYsGc",formLabel:"Pages_formLabel__bb7Gh",formInput:"Pages_formInput__HPy8g",saveBtn:"Pages_saveBtn__I8a11",addressItem:"Pages_addressItem__WoRA7",addressBadge:"Pages_addressBadge__sJUoT",addressText:"Pages_addressText__d_ZO9",addressDelete:"Pages_addressDelete__cnadr",searchBar:"Pages_searchBar__5Dkwd",searchInput:"Pages_searchInput__uwXko",searchGroup:"Pages_searchGroup__GTpFY",searchGroupTitle:"Pages_searchGroupTitle__G7oMv",searchResult:"Pages_searchResult__pHApo",searchResultImg:"Pages_searchResultImg__Rm_38",searchResultInfo:"Pages_searchResultInfo___2tNW",searchResultName:"Pages_searchResultName__Uxe2e",searchResultSub:"Pages_searchResultSub__T6Igl",searchResultPrice:"Pages_searchResultPrice__0aoBM",favGrid:"Pages_favGrid__EeFq2",favCard:"Pages_favCard__2v7V3",favImg:"Pages_favImg__gibhm",favInfo:"Pages_favInfo__FUDHC",favName:"Pages_favName__iEqsH",favSub:"Pages_favSub__WiVId",favRemove:"Pages_favRemove__D9W9q",empty:"Pages_empty__453IL",emptyIcon:"Pages_emptyIcon__KgY7u",emptyTitle:"Pages_emptyTitle__DydbF",emptyText:"Pages_emptyText__j_lO2",emptyBtn:"Pages_emptyBtn__t6JhT",loader:"Pages_loader__CfUaA",spinner:"Pages_spinner__vfHyj",spin:"Pages_spin__EwJus"}}},function(e){e.O(0,[315,648,971,117,744],function(){return e(e.s=8992)}),_N_E=e.O()}]);