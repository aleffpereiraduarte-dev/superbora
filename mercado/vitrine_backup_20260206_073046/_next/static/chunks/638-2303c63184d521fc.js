(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[638],{6428:function(e,t,a){"use strict";a.d(t,{LP:function(){return r},QW:function(){return m},SC:function(){return l},o4:function(){return c},pE:function(){return _},sg:function(){return u}}),a(257);let i="/api/mercado",n="superbora_token";function o(){return window.location.origin}function r(){try{return localStorage.getItem(n)}catch(e){return null}}function c(e){try{e?localStorage.setItem(n,e):localStorage.removeItem(n)}catch(e){}}function s(){let e=r();return e?{Authorization:"Bearer ".concat(e)}:{}}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:n}=a,r=new URL(i+e,o());Object.entries(t).forEach(e=>{let[t,a]=e;null!=a&&""!==a&&r.searchParams.set(t,a)});let c=await fetch(r.toString(),{credentials:"include",headers:s(),signal:n});if(!c.ok){let e=await c.json().catch(()=>null);throw Error((null==e?void 0:e.message)||"API error: ".concat(c.status))}let l=await c.json().catch(()=>null);if(!l||!l.success)throw Error((null==l?void 0:l.message)||"Erro desconhecido na API");return void 0!==l.data?l.data:null}async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:n}=a,r=new URL(i+e,o()),c=await fetch(r.toString(),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify(t),signal:n}),l=await c.json().catch(()=>null);if(!c.ok||!(null==l?void 0:l.success))throw Error((null==l?void 0:l.message)||"API error: ".concat(c.status));return void 0!==l.data?l.data:null}async function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:n}=a,r=new URL(i+e,o()),c=await fetch(r.toString(),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify(t),signal:n}),l=await c.json().catch(()=>null);if(!c.ok||!(null==l?void 0:l.success))throw Error((null==l?void 0:l.message)||"API error: ".concat(c.status));return void 0!==l.data?l.data:null}async function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:n}=a,r=new URL(i+e,o());Object.entries(t).forEach(e=>{let[t,a]=e;null!=a&&""!==a&&r.searchParams.set(t,a)});let c=await fetch(r.toString(),{method:"DELETE",credentials:"include",headers:s(),signal:n}),l=await c.json().catch(()=>null);if(!c.ok||!(null==l?void 0:l.success))throw Error((null==l?void 0:l.message)||"API error: ".concat(c.status));return void 0!==l.data?l.data:null}},2563:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var i=a(7437),n=a(1564),o=a.n(n);function r(e){var t;let{level:a,points:n,nextLevel:r}=e;if(!a||!n)return null;let c=Math.min(100,Math.max(0,n.progress_percent||0)),s=!r;return(0,i.jsxs)("div",{className:o().progressContainer,children:[!s&&(0,i.jsxs)("div",{className:o().progressLabels,children:[(0,i.jsx)("span",{children:a.name}),(0,i.jsx)("span",{children:r.name})]}),(0,i.jsx)("div",{className:o().progressBar,children:(0,i.jsx)("div",{className:o().progressFill,style:{width:"".concat(c,"%"),background:s?"linear-gradient(90deg, #a855f7, #ec4899)":"linear-gradient(90deg, ".concat(a.color,", ").concat((null==r?void 0:r.color)||a.color,")")}})}),(0,i.jsx)("div",{className:o().progressText,children:s?(0,i.jsx)("span",{children:"Nivel maximo alcancado!"}):(0,i.jsxs)("span",{children:["Faltam ",(0,i.jsx)("strong",{children:null===(t=n.to_next_level)||void 0===t?void 0:t.toLocaleString("pt-BR")})," pontos para"," ",r.icon," ",r.name]})})]})}},1314:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var i=a(7437),n=a(1564),o=a.n(n);function r(e){let{streak:t}=e;if(!t)return null;let{current:a,best:n,is_active:r}=t,c=a>0;return(0,i.jsxs)("div",{className:"".concat(o().streakContainer," ").concat(r?o().streakContainerActive:""),children:[(0,i.jsx)("div",{className:o().streakIcon,children:r?"\uD83D\uDD25":"❄️"}),(0,i.jsxs)("div",{className:o().streakInfo,children:[(0,i.jsxs)("div",{className:o().streakValue,children:[c?a:0," ",1===a?"dia":"dias"]}),(0,i.jsx)("div",{className:o().streakLabel,children:r?"de sequencia ativa":c?"sequencia pausada":"Comece sua sequencia!"})]}),n>0&&(0,i.jsxs)("div",{className:o().streakBest,children:["Recorde: ",n," ",1===n?"dia":"dias"]})]})}},8779:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var i=a(7437),n=a(2265),o=a(9376),r=a(7128);function c(e){let{children:t}=e,{isAuthenticated:a,loading:c}=(0,r.a)(),s=(0,o.useRouter)();return((0,n.useEffect)(()=>{if(!c&&!a){let e=window.location.pathname;s.push("/login?return=".concat(encodeURIComponent(e)))}},[c,a,s]),c)?(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:(0,i.jsx)("div",{style:{width:32,height:32,border:"3px solid var(--color-border)",borderTopColor:"var(--color-accent)",borderRadius:"50%",animation:"spin 0.8s linear infinite"}})}):a?t:null}},7128:function(e,t,a){"use strict";a.d(t,{H:function(){return c},a:function(){return s}});var i=a(7437),n=a(2265),o=a(6428);let r=(0,n.createContext)(null);function c(e){let{children:t}=e,[a,c]=(0,n.useState)(null),[s,l]=(0,n.useState)(!0),u=(0,n.useRef)(!0);(0,n.useEffect)(()=>(u.current=!0,()=>{u.current=!1}),[]);let _=(0,n.useCallback)(async()=>{if(!(0,o.LP)()){u.current&&(c(null),l(!1));return}try{let e=await (0,o.SC)("/auth/session.php");if(!u.current)return;e.authenticated&&e.customer?c(e.customer):((0,o.o4)(null),c(null))}catch(e){if(!u.current)return;"AbortError"!==e.name&&console.warn("[Auth] Session check failed"),(0,o.o4)(null),c(null)}finally{u.current&&l(!1)}},[]);(0,n.useEffect)(()=>{_()},[_]);let m=(0,n.useCallback)(async(e,t)=>{try{let a=await (0,o.sg)("/auth/login.php",{email:e,senha:t});if(!u.current)return null;return(0,o.o4)(a.token),c(a.customer),a.customer}catch(e){throw console.warn("[AuthContext] Login failed:",e.message),e}},[]),d=(0,n.useCallback)(async e=>{try{let t=await (0,o.sg)("/auth/register.php",e);if(!u.current)return null;return(0,o.o4)(t.token),c(t.customer),t.customer}catch(e){throw console.warn("[AuthContext] Register failed:",e.message),e}},[]),f=(0,n.useCallback)(async e=>{try{let t=await (0,o.sg)("/auth/google.php",{credential:e});if(!u.current)return null;return(0,o.o4)(t.token),c(t.customer),t}catch(e){throw console.warn("[AuthContext] Google login failed:",e.message),e}},[]),h=(0,n.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"whatsapp";try{let a={channel:t};return"email"===t?a.email=e:a.phone=e,await (0,o.sg)("/auth/send-code.php",a)}catch(e){throw console.warn("[AuthContext] Send OTP failed:",e.message),e}},[]),g=(0,n.useCallback)(async(e,t,a)=>{try{let i={phone:e,code:t};a&&(i.name=a);let n=await (0,o.sg)("/auth/verify-code.php",i);if(!u.current)return null;return(0,o.o4)(n.token),c(n.customer),n}catch(e){throw console.warn("[AuthContext] Verify OTP failed:",e.message),e}},[]),v=(0,n.useCallback)(()=>{(0,o.o4)(null),c(null)},[]),p=(0,n.useCallback)(e=>{c(t=>t?{...t,...e}:t)},[]),G=(0,n.useMemo)(()=>({customer:a,loading:s,isAuthenticated:!!a,login:m,loginWithGoogle:f,register:d,sendOtp:h,verifyOtp:g,logout:v,updateCustomer:p,refreshSession:_}),[a,s,m,f,d,h,g,v,p,_]);return(0,i.jsx)(r.Provider,{value:G,children:t})}function s(){let e=(0,n.useContext)(r);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},9376:function(e,t,a){"use strict";var i=a(5475);a.o(i,"usePathname")&&a.d(t,{usePathname:function(){return i.usePathname}}),a.o(i,"useRouter")&&a.d(t,{useRouter:function(){return i.useRouter}}),a.o(i,"useSearchParams")&&a.d(t,{useSearchParams:function(){return i.useSearchParams}})},257:function(e,t,a){"use strict";var i,n;e.exports=(null==(i=a.g.process)?void 0:i.env)&&"object"==typeof(null==(n=a.g.process)?void 0:n.env)?a.g.process:a(4227)},4227:function(e){!function(){var t={229:function(e){var t,a,i,n=e.exports={};function o(){throw Error("setTimeout has not been defined")}function r(){throw Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(a){try{return t.call(null,e,0)}catch(a){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{a="function"==typeof clearTimeout?clearTimeout:r}catch(e){a=r}}();var s=[],l=!1,u=-1;function _(){l&&i&&(l=!1,i.length?s=i.concat(s):u=-1,s.length&&m())}function m(){if(!l){var e=c(_);l=!0;for(var t=s.length;t;){for(i=s,s=[];++u<t;)i&&i[u].run();u=-1,t=s.length}i=null,l=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===r||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function f(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];s.push(new d(e,t)),1!==s.length||l||c(m)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},a={};function i(e){var n=a[e];if(void 0!==n)return n.exports;var o=a[e]={exports:{}},r=!0;try{t[e](o,o.exports,i),r=!1}finally{r&&delete a[e]}return o.exports}i.ab="//";var n=i(229);e.exports=n}()},1564:function(e){e.exports={card:"Gamification_card__uIyE7",cardHeader:"Gamification_cardHeader__ku9tp",cardTitle:"Gamification_cardTitle__4DnN0",cardLink:"Gamification_cardLink__hivDh",cardBody:"Gamification_cardBody__wbw8b",levelRow:"Gamification_levelRow__9ADq9",levelBadge:"Gamification_levelBadge___mygM",levelPulse:"Gamification_levelPulse__WUc4i",levelInfo:"Gamification_levelInfo__7JPw6",levelName:"Gamification_levelName__pzsDn",levelPoints:"Gamification_levelPoints__dn87u",statsRow:"Gamification_statsRow__kK2Gc",stat:"Gamification_stat__eoUSp",statValue:"Gamification_statValue__m_0Bv",statLabel:"Gamification_statLabel__iKw7K",progressContainer:"Gamification_progressContainer__cDYbT",progressLabels:"Gamification_progressLabels__Fed7p",progressBar:"Gamification_progressBar__nYycw",progressFill:"Gamification_progressFill__EIJ6m",shimmer:"Gamification_shimmer__NjZCo",progressText:"Gamification_progressText__H7ztL",streakContainer:"Gamification_streakContainer__zyIy2",streakContainerActive:"Gamification_streakContainerActive__gT4KG",streakIcon:"Gamification_streakIcon__gLA_7",flameWiggle:"Gamification_flameWiggle__z8xL3",flameBurn:"Gamification_flameBurn__6whLG",streakInfo:"Gamification_streakInfo__3cc7K",streakValue:"Gamification_streakValue__sHMH9",streakLabel:"Gamification_streakLabel__x5jIZ",streakBest:"Gamification_streakBest__9oPG_",badgeSection:"Gamification_badgeSection__GxaHn",badgeSectionTitle:"Gamification_badgeSectionTitle__S9n0q",badgeGrid:"Gamification_badgeGrid__NS_am",badgeItem:"Gamification_badgeItem__XIaz7",badgeItemEarned:"Gamification_badgeItemEarned__R_ytE",badgeItemLocked:"Gamification_badgeItemLocked__eDgVx",badgeIcon:"Gamification_badgeIcon__7optl",badgeShine:"Gamification_badgeShine__Wd4sk",badgeName:"Gamification_badgeName__82ohS",badgeCheck:"Gamification_badgeCheck__hpIsH",badgeProgress:"Gamification_badgeProgress__cuCgV",badgeProgressFill:"Gamification_badgeProgressFill__SRz74",badgeTooltip:"Gamification_badgeTooltip__Yt_xu",tooltipFadeIn:"Gamification_tooltipFadeIn__WvyAY",badgeTooltipTitle:"Gamification_badgeTooltipTitle__3wCpl",badgeTooltipDesc:"Gamification_badgeTooltipDesc__FBCL7",badgeTooltipReward:"Gamification_badgeTooltipReward__6_KpV",badgeTooltipProgress:"Gamification_badgeTooltipProgress__3dM5T",achievementToast:"Gamification_achievementToast__3COLo",achievementSlideIn:"Gamification_achievementSlideIn__mi_PX",achievementToastLeaving:"Gamification_achievementToastLeaving__5w7r1",achievementSlideOut:"Gamification_achievementSlideOut__CmA3O",achievementIcon:"Gamification_achievementIcon___qow4",achievementBounce:"Gamification_achievementBounce__gjfZf",achievementContent:"Gamification_achievementContent__VFPzs",achievementLabel:"Gamification_achievementLabel__mAFG8",achievementName:"Gamification_achievementName__L6BvD",achievementPoints:"Gamification_achievementPoints__P9eqm",achievementClose:"Gamification_achievementClose__az_5u",conquistas:"Gamification_conquistas__IlWg_",conquistasHeader:"Gamification_conquistasHeader__1TQMC",backBtn:"Gamification_backBtn__jalvh",conquistasTitle:"Gamification_conquistasTitle__IWYoj",conquistasSummary:"Gamification_conquistasSummary__TpLvq",conquistasSummaryCard:"Gamification_conquistasSummaryCard__eQwlM",conquistasSummaryIcon:"Gamification_conquistasSummaryIcon__mfIQk",conquistasSummaryValue:"Gamification_conquistasSummaryValue__8muZo",conquistasSummaryLabel:"Gamification_conquistasSummaryLabel__zZm_g",loading:"Gamification_loading__XSULY",spinner:"Gamification_spinner__ocDsH",spin:"Gamification_spin__FXIly",confetti:"Gamification_confetti__rz6qo",confettiPiece:"Gamification_confettiPiece__wkoUk",confettiFall:"Gamification_confettiFall__FMOdm",categoryTabs:"Gamification_categoryTabs__7vYEO",categoryTab:"Gamification_categoryTab__I6oZS",categoryTabActive:"Gamification_categoryTabActive__z_0X_",emptyState:"Gamification_emptyState___2zYY",emptyIcon:"Gamification_emptyIcon__9atCr",emptyText:"Gamification_emptyText__HjyLV"}}}]);