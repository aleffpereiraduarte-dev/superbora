(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7439],{8870:function(e,t,r){Promise.resolve().then(r.bind(r,8877))},6428:function(e,t,r){"use strict";r.d(t,{LP:function(){return s},QW:function(){return h},SC:function(){return c},o4:function(){return l},pE:function(){return d},sg:function(){return u}}),r(257);let i="/api/mercado",n="superbora_token";function a(){return window.location.origin}function s(){try{return localStorage.getItem(n)}catch(e){return null}}function l(e){try{e?localStorage.setItem(n,e):localStorage.removeItem(n)}catch(e){}}function o(){let e=s();return e?{Authorization:"Bearer ".concat(e)}:{}}async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:n}=r,s=new URL(i+e,a());Object.entries(t).forEach(e=>{let[t,r]=e;null!=r&&""!==r&&s.searchParams.set(t,r)});let l=await fetch(s.toString(),{credentials:"include",headers:o(),signal:n});if(!l.ok){let e=await l.json().catch(()=>null);throw Error((null==e?void 0:e.message)||"API error: ".concat(l.status))}let c=await l.json().catch(()=>null);if(!c||!c.success)throw Error((null==c?void 0:c.message)||"Erro desconhecido na API");return void 0!==c.data?c.data:null}async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:n}=r,s=new URL(i+e,a()),l=await fetch(s.toString(),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",...o()},body:JSON.stringify(t),signal:n}),c=await l.json().catch(()=>null);if(!l.ok||!(null==c?void 0:c.success))throw Error((null==c?void 0:c.message)||"API error: ".concat(l.status));return void 0!==c.data?c.data:null}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:n}=r,s=new URL(i+e,a()),l=await fetch(s.toString(),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",...o()},body:JSON.stringify(t),signal:n}),c=await l.json().catch(()=>null);if(!l.ok||!(null==c?void 0:c.success))throw Error((null==c?void 0:c.message)||"API error: ".concat(l.status));return void 0!==c.data?c.data:null}async function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:n}=r,s=new URL(i+e,a());Object.entries(t).forEach(e=>{let[t,r]=e;null!=r&&""!==r&&s.searchParams.set(t,r)});let l=await fetch(s.toString(),{method:"DELETE",credentials:"include",headers:o(),signal:n}),c=await l.json().catch(()=>null);if(!l.ok||!(null==c?void 0:c.success))throw Error((null==c?void 0:c.message)||"API error: ".concat(l.status));return void 0!==c.data?c.data:null}},2004:function(e,t,r){"use strict";r.d(t,{dg:function(){return l}});var i=r(7437),n=r(2265),a=r(51),s=r.n(a);function l(e){let{src:t,alt:r="",placeholder:a,fallback:l="/placeholder-image.png",width:o,height:c,aspectRatio:u,objectFit:d="cover",className:h="",imgClassName:m="",priority:_=!1,rootMargin:p="100px",threshold:f=.01,onLoad:g,onError:v,style:x={},imgStyle:w={},...y}=e,b=(0,n.useRef)(null),[j,k]=(0,n.useState)(_),[C,N]=(0,n.useState)(!1),[S,W]=(0,n.useState)(!1),[B,E]=(0,n.useState)(t),P=(0,n.useRef)(null);(0,n.useEffect)(()=>{E(t),N(!1),W(!1)},[t]),(0,n.useEffect)(()=>{if(_||j)return;let e=b.current;if(e)return P.current=new IntersectionObserver(e=>{let[t]=e;if(t.isIntersecting){var r;k(!0),null===(r=P.current)||void 0===r||r.disconnect()}},{rootMargin:p,threshold:f}),P.current.observe(e),()=>{var e;null===(e=P.current)||void 0===e||e.disconnect()}},[_,j,p,f]);let I=(0,n.useCallback)(()=>{N(!0),null==g||g()},[g]),A=(0,n.useCallback)(()=>{W(!0),l&&B!==l&&(E(l),W(!1)),null==v||v()},[l,B,v]),L=a||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#e5e7eb";return"data:image/svg+xml;base64,".concat(btoa('<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><rect width="1" height="1" fill="'.concat(e,'"/></svg>')))}(),T={...x,position:"relative",overflow:"hidden",backgroundColor:"var(--color-bg-muted)"};o&&(T.width="number"==typeof o?"".concat(o,"px"):o),c&&(T.height="number"==typeof c?"".concat(c,"px"):c),u&&(T.aspectRatio=u);let R={...w,objectFit:d,width:"100%",height:"100%"};return(0,i.jsxs)("div",{ref:b,className:"".concat(s().container," ").concat(h),style:T,...y,children:[!C&&L&&(0,i.jsx)("div",{className:s().placeholder,style:{backgroundImage:"url(".concat(L,")")}}),!C&&!S&&(0,i.jsx)("div",{className:s().shimmer}),j&&B&&(0,i.jsx)("img",{src:B,alt:r,className:"".concat(s().image," ").concat(C?s().imageLoaded:""," ").concat(m),style:R,onLoad:I,onError:A,loading:_?"eager":"lazy",decoding:"async"}),S&&!B&&(0,i.jsx)("div",{className:s().errorPlaceholder,children:(0,i.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[(0,i.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,i.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,i.jsx)("polyline",{points:"21 15 16 10 5 21"})]})})]})}},7128:function(e,t,r){"use strict";r.d(t,{H:function(){return l},a:function(){return o}});var i=r(7437),n=r(2265),a=r(6428);let s=(0,n.createContext)(null);function l(e){let{children:t}=e,[r,l]=(0,n.useState)(null),[o,c]=(0,n.useState)(!0),u=(0,n.useRef)(!0);(0,n.useEffect)(()=>(u.current=!0,()=>{u.current=!1}),[]);let d=(0,n.useCallback)(async()=>{if(!(0,a.LP)()){u.current&&(l(null),c(!1));return}try{let e=await (0,a.SC)("/auth/session.php");if(!u.current)return;e.authenticated&&e.customer?l(e.customer):((0,a.o4)(null),l(null))}catch(e){if(!u.current)return;"AbortError"!==e.name&&console.warn("[Auth] Session check failed"),(0,a.o4)(null),l(null)}finally{u.current&&c(!1)}},[]);(0,n.useEffect)(()=>{d()},[d]);let h=(0,n.useCallback)(async(e,t)=>{try{let r=await (0,a.sg)("/auth/login.php",{email:e,senha:t});if(!u.current)return null;return(0,a.o4)(r.token),l(r.customer),r.customer}catch(e){throw console.warn("[AuthContext] Login failed:",e.message),e}},[]),m=(0,n.useCallback)(async e=>{try{let t=await (0,a.sg)("/auth/register.php",e);if(!u.current)return null;return(0,a.o4)(t.token),l(t.customer),t.customer}catch(e){throw console.warn("[AuthContext] Register failed:",e.message),e}},[]),_=(0,n.useCallback)(async e=>{try{let t=await (0,a.sg)("/auth/google.php",{credential:e});if(!u.current)return null;return(0,a.o4)(t.token),l(t.customer),t}catch(e){throw console.warn("[AuthContext] Google login failed:",e.message),e}},[]),p=(0,n.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"whatsapp";try{let r={channel:t};return"email"===t?r.email=e:r.phone=e,await (0,a.sg)("/auth/send-code.php",r)}catch(e){throw console.warn("[AuthContext] Send OTP failed:",e.message),e}},[]),f=(0,n.useCallback)(async(e,t,r)=>{try{let i={phone:e,code:t};r&&(i.name=r);let n=await (0,a.sg)("/auth/verify-code.php",i);if(!u.current)return null;return(0,a.o4)(n.token),l(n.customer),n}catch(e){throw console.warn("[AuthContext] Verify OTP failed:",e.message),e}},[]),g=(0,n.useCallback)(()=>{(0,a.o4)(null),l(null)},[]),v=(0,n.useCallback)(e=>{l(t=>t?{...t,...e}:t)},[]),x=(0,n.useMemo)(()=>({customer:r,loading:o,isAuthenticated:!!r,login:h,loginWithGoogle:_,register:m,sendOtp:p,verifyOtp:f,logout:g,updateCustomer:v,refreshSession:d}),[r,o,h,_,m,p,f,g,v,d]);return(0,i.jsx)(s.Provider,{value:x,children:t})}function o(){let e=(0,n.useContext)(s);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},6971:function(e,t,r){"use strict";r.d(t,{J:function(){return o},z:function(){return c}});var i=r(7437),n=r(2265),a=r(6428),s=r(7128);let l=(0,n.createContext)(null);function o(e){let{children:t}=e,{isAuthenticated:r}=(0,s.a)(),[o,c]=(0,n.useState)([]),[u,d]=(0,n.useState)(0),[h,m]=(0,n.useState)(null),_=(0,n.useRef)(0),p=(0,n.useRef)(null),f=(0,n.useRef)(!0),g=(0,n.useRef)(null),v=(0,n.useCallback)(async()=>{if((0,a.LP)())try{var e;let t=await (0,a.SC)("/notifications/list.php",{unread:1});if(!f.current)return;let r=null!==(e=t.unread_count)&&void 0!==e?e:0;if(r>_.current&&null!==_.current){let e=r-_.current;m(1===e?"Nova notificacao recebida":"".concat(e," novas notificacoes")),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{f.current&&m(null)},3500)}_.current=r,d(r)}catch(e){}},[]),x=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if((0,a.LP)())try{var t,r,i;let n=await (0,a.SC)("/notifications/list.php",{page:e,limit:20});if(!f.current)return null;return c(null!==(t=n.notifications)&&void 0!==t?t:[]),d(null!==(r=n.unread_count)&&void 0!==r?r:0),_.current=null!==(i=n.unread_count)&&void 0!==i?i:0,n}catch(e){return null}},[]),w=(0,n.useCallback)(async e=>{try{await (0,a.sg)("/notifications/list.php",{id:e}),c(t=>t.map(t=>t.id===e?{...t,is_read:!0}:t)),d(e=>Math.max(0,e-1))}catch(e){}},[]),y=(0,n.useCallback)(async()=>{try{await (0,a.sg)("/notifications/list.php",{}),c(e=>e.map(e=>({...e,is_read:!0}))),d(0),_.current=0}catch(e){}},[]);return(0,n.useEffect)(()=>(f.current=!0,r?(v(),p.current=setInterval(v,3e4)):(c([]),d(0),_.current=0),()=>{f.current=!1,p.current&&(clearInterval(p.current),p.current=null),g.current&&(clearTimeout(g.current),g.current=null)}),[r,v]),(0,i.jsxs)(l.Provider,{value:{notifications:o,unreadCount:u,fetchNotifications:x,markAsRead:w,markAllAsRead:y},children:[t,h&&(0,i.jsxs)("div",{style:{position:"fixed",top:"16px",left:"50%",transform:"translateX(-50%)",zIndex:"var(--z-toast, 1100)",padding:"10px 20px",borderRadius:"var(--radius-pill)",background:"var(--color-accent, #16a34a)",color:"#fff",fontSize:"14px",fontWeight:500,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",animation:"notifSlideDown 0.3s ease",display:"flex",alignItems:"center",gap:"8px",pointerEvents:"none"},children:[(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,i.jsx)("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),(0,i.jsx)("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),h]}),(0,i.jsx)("style",{children:"\n        @keyframes notifSlideDown {\n          from { opacity: 0; transform: translateX(-50%) translateY(-10px); }\n          to { opacity: 1; transform: translateX(-50%) translateY(0); }\n        }\n      "})]})}function c(){let e=(0,n.useContext)(l);if(!e)throw Error("useNotifications must be used within NotificationProvider");return e}},5228:function(e,t,r){"use strict";r.d(t,{E:function(){return u},T:function(){return c}});var i=r(7437),n=r(2265),a=r(7128),s=r(6428);let l=(0,n.createContext)(null),o="superbora_wishlists_guest";function c(e){let{children:t}=e,{customer:r}=(0,a.a)(),c=!!r,[u,d]=(0,n.useState)([]),[h,m]=(0,n.useState)(!0),[_,p]=(0,n.useState)(!1),f=(0,n.useRef)(!1),[g,v]=(0,n.useState)(!1),x=(0,n.useRef)(null);(0,n.useEffect)(()=>(v(!0),()=>{x.current&&x.current.abort()}),[]);let w=(0,n.useCallback)(()=>{try{let e=localStorage.getItem(o);if(e){let t=JSON.parse(e);d(t.wishlists||[])}else{let e={id:"guest-default",name:"Favoritos",is_default:!0,items:[],created_at:new Date().toISOString()};d([e]),y([e])}}catch(e){console.error("Error loading wishlists from storage:",e),d([])}m(!1)},[]),y=(0,n.useCallback)(e=>{try{localStorage.setItem(o,JSON.stringify({wishlists:e}))}catch(e){console.error("Error saving wishlists to storage:",e)}},[]),b=(0,n.useCallback)(async()=>{x.current&&x.current.abort(),x.current=new AbortController;let e=x.current.signal;m(!0);try{let t;let r=await (0,s.SC)("/vitrine/wishlists.php",{},{signal:e});if(e.aborted)return;try{t=await Promise.all((r.wishlists||[]).map(async t=>{if(e.aborted){let e=Error("Aborted");throw e.name="AbortError",e}try{let r=await (0,s.SC)("/vitrine/wishlist-items.php",{wishlist_id:t.id},{signal:e});return{...t,items:Array.isArray(null==r?void 0:r.items)?r.items:[]}}catch(e){if("AbortError"===e.name)throw e;return console.warn("[Wishlist] Failed to load items for wishlist",t.id,e),{...t,items:[]}}}))}catch(e){if("AbortError"===e.name)return;throw e}if(e.aborted)return;d(t)}catch(e){if("AbortError"===e.name)return;console.error("Error loading wishlists from API:",e),d([])}finally{e.aborted||m(!1)}},[]),j=(0,n.useCallback)(async()=>{try{let e=localStorage.getItem(o);if(!e)return;let t=JSON.parse(e).wishlists||[];if(0===t.length)return;p(!0);let r=(await (0,s.SC)("/vitrine/wishlists.php")).wishlists||[],i=r.find(e=>e.is_default);!i&&r.length>0&&(i=r[0]);let n=t.find(e=>e.is_default);if(n&&n.items&&i)for(let e of n.items)try{await (0,s.sg)("/vitrine/wishlist-items.php",{wishlist_id:i.id,product_id:e.product_id,partner_id:e.partner_id})}catch(t){console.warn("[Wishlist] Failed to sync item (may already exist):",e.product_id)}localStorage.removeItem(o),await b()}catch(e){console.error("Error syncing guest wishlists:",e)}p(!1)},[b]);(0,n.useEffect)(()=>{g&&(c?b():w())},[c,g,b,w]),(0,n.useEffect)(()=>{c&&r&&!f.current&&(j(),f.current=!0),c||(f.current=!1)},[c,r,j]);let k=(0,n.useCallback)(e=>u.some(t=>(t.items||[]).some(t=>String(t.product_id)===String(e))),[u]),C=(0,n.useCallback)(e=>u.filter(t=>(t.items||[]).some(t=>String(t.product_id)===String(e))),[u]),N=(0,n.useCallback)(()=>u.find(e=>e.is_default)||u[0]||null,[u]),S=(0,n.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=t?u.find(e=>e.id===t):N();if(!r)return!1;let i={product_id:e.id||e.product_id,partner_id:e.partner_id||0,product:{id:e.id||e.product_id,nome:e.nome||e.name,imagem:e.imagem||e.image,preco:e.preco||e.price,preco_promo:e.preco_promo||null,unidade:e.unidade||""},added_at:new Date().toISOString()};if(c)try{return await (0,s.sg)("/vitrine/wishlist-items.php",{wishlist_id:r.id,product_id:i.product_id,partner_id:i.partner_id}),await b(),!0}catch(e){return console.error("Error adding to wishlist:",e),!1}else{let e=u.map(e=>e.id===r.id?(e.items||[]).some(e=>String(e.product_id)===String(i.product_id))?e:{...e,items:[...e.items||[],i]}:e);return d(e),y(e),!0}},[u,c,N,b,y]),W=(0,n.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(c)try{let r={product_id:e};return t&&(r.wishlist_id=t),await (0,s.QW)("/vitrine/wishlist-items.php",r),await b(),!0}catch(e){return console.error("Error removing from wishlist:",e),!1}else{let r=u.map(r=>t&&r.id!==t?r:{...r,items:(r.items||[]).filter(t=>String(t.product_id)!==String(e))});return d(r),y(r),!0}},[u,c,b,y]),B=(0,n.useCallback)(async e=>{let t=e.id||e.product_id;return k(t)?W(t):S(e)},[k,S,W]),E=(0,n.useCallback)(async e=>{if(c)try{let t=await (0,s.sg)("/vitrine/wishlists.php",{name:e});return await b(),t.wishlist}catch(e){throw console.error("Error creating wishlist:",e),e}else{let t={id:"guest-".concat(Date.now()),name:e,is_default:!1,items:[],created_at:new Date().toISOString()},r=[...u,t];return d(r),y(r),t}},[u,c,b,y]),P=(0,n.useCallback)(async(e,t)=>{if(c)try{return await (0,s.pE)("/vitrine/wishlists.php",{id:e,name:t}),await b(),!0}catch(e){return console.error("Error renaming wishlist:",e),!1}else{let r=u.map(r=>r.id===e?{...r,name:t}:r);return d(r),y(r),!0}},[u,c,b,y]),I=(0,n.useCallback)(async e=>{if(c)try{return await (0,s.QW)("/vitrine/wishlists.php",{id:e}),await b(),!0}catch(e){throw console.error("Error deleting wishlist:",e),e}else{let t=u.find(t=>t.id===e);if(null==t?void 0:t.is_default)throw Error("Nao e possivel excluir a lista padrao");let r=u.filter(t=>t.id!==e);return d(r),y(r),!0}},[u,c,b,y]),A=(0,n.useCallback)(()=>c?b():(w(),Promise.resolve()),[c,b,w]),L=(0,n.useMemo)(()=>({wishlists:u,loading:h,syncing:_,isInWishlist:k,getWishlistsForProduct:C,getDefaultWishlist:N,addToWishlist:S,removeFromWishlist:W,toggleWishlist:B,createWishlist:E,renameWishlist:P,deleteWishlist:I,refresh:A}),[u,h,_,k,C,N,S,W,B,E,P,I,A]);return(0,i.jsx)(l.Provider,{value:L,children:t})}function u(){let e=(0,n.useContext)(l);if(!e)throw Error("useWishlist must be used within WishlistProvider");return e}},8877:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var i=r(7437),n=r(2265),a=r(7648),s=r(9376),l=r(5228),o=r(7128),c=r(6971);r(2647),r(275);var u=r(7650),d=r(2004),h=r(8859),m=r.n(h);function _(e){var t;let{wishlistId:r=null,onProductClick:s,showPartner:o=!0,emptyMessage:c="Nenhum item salvo ainda"}=e,{wishlists:h,removeFromWishlist:_,loading:p}=(0,l.E)(),[f,g]=(0,n.useState)(null),v=r?(null===(t=h.find(e=>e.id===r))||void 0===t?void 0:t.items)||[]:h.flatMap(e=>e.items||[]),x=r?v:Array.from(new Map(v.map(e=>[e.product_id,e])).values()),w=(0,n.useCallback)(async(e,t)=>{e.stopPropagation(),e.preventDefault(),g(t.product_id);try{await _(t.product_id,r)}catch(e){console.error("Error removing item:",e)}g(null)},[_,r]);return p?(0,i.jsx)("div",{className:m().grid,children:[...Array(6)].map((e,t)=>(0,i.jsxs)("div",{className:m().skeleton,children:[(0,i.jsx)("div",{className:m().skeletonImg}),(0,i.jsxs)("div",{className:m().skeletonBody,children:[(0,i.jsx)("div",{className:m().skeletonText}),(0,i.jsx)("div",{className:m().skeletonTextShort})]})]},t))}):0===x.length?(0,i.jsxs)("div",{className:m().empty,children:[(0,i.jsx)("div",{className:m().emptyIcon,children:(0,i.jsx)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:(0,i.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})}),(0,i.jsx)("p",{className:m().emptyText,children:c}),(0,i.jsx)(a.default,{href:"/",className:m().emptyBtn,children:"Explorar produtos"})]}):(0,i.jsx)("div",{className:m().grid,children:x.map(e=>{let t=e.product||{},r=t.preco_promo&&t.preco_promo<t.preco,n=r?t.preco_promo:t.preco,a=f===e.product_id;return(0,i.jsxs)("div",{className:"".concat(m().card," ").concat(a?m().removing:""),onClick:()=>null==s?void 0:s(e),role:s?"button":void 0,style:s?{cursor:"pointer"}:void 0,children:[(0,i.jsxs)("div",{className:m().imgWrap,children:[t.imagem?(0,i.jsx)(d.dg,{src:t.imagem,alt:t.nome||"",aspectRatio:"1/1",className:m().imgContainer,imgClassName:m().img}):(0,i.jsx)("div",{className:m().imgPlaceholder,children:(0,i.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[(0,i.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,i.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,i.jsx)("polyline",{points:"21 15 16 10 5 21"})]})}),r&&(0,i.jsxs)("span",{className:m().promoBadge,children:["-",Math.round((t.preco-t.preco_promo)/t.preco*100),"%"]}),(0,i.jsx)("button",{type:"button",className:m().removeBtn,onClick:t=>w(t,e),disabled:a,"aria-label":"Remover da lista",children:(0,i.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"#e74c3c",stroke:"#e74c3c",strokeWidth:"2",children:(0,i.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})})]}),(0,i.jsxs)("div",{className:m().body,children:[(0,i.jsx)("div",{className:m().name,children:t.nome}),t.unidade&&(0,i.jsx)("div",{className:m().unit,children:t.unidade}),o&&e.partner&&(0,i.jsxs)("div",{className:m().partner,children:[e.partner.logo&&(0,i.jsx)("img",{src:e.partner.logo,alt:e.partner.name||"Logo do parceiro",className:m().partnerLogo}),(0,i.jsx)("span",{children:e.partner.name})]}),(0,i.jsx)("div",{className:m().priceRow,children:(0,i.jsxs)("div",{children:[r&&(0,i.jsx)("span",{className:m().priceOriginal,children:(0,u.o_)(t.preco)}),(0,i.jsx)("span",{className:"".concat(m().price," ").concat(r?m().pricePromo:""),children:(0,u.o_)(n)})]})}),!t.disponivel&&(0,i.jsx)("div",{className:m().unavailable,children:"Indisponivel"})]})]},e.product_id)})})}var p=r(9740),f=r.n(p);function g(){var e;let t=(0,s.useRouter)(),{isAuthenticated:r}=(0,o.a)(),{showToast:u}=(0,c.z)(),{wishlists:d,loading:h,syncing:m,createWishlist:p,renameWishlist:g,deleteWishlist:v,refresh:x}=(0,l.E)(),[w,y]=(0,n.useState)(null),[b,j]=(0,n.useState)(!1),[k,C]=(0,n.useState)(""),[N,S]=(0,n.useState)(null),[W,B]=(0,n.useState)(""),[E,P]=(0,n.useState)(null),[I,A]=(0,n.useState)(!1),[L,T]=(0,n.useState)(""),[R,G]=(0,n.useState)(!1);(0,n.useEffect)(()=>{h||!(d.length>0)||w||y((d.find(e=>e.is_default)||d[0]).id)},[h,d,w]);let O=d.find(e=>e.id===w),M=d.reduce((e,t)=>{var r;return e+((null===(r=t.items)||void 0===r?void 0:r.length)||0)},0),D=(0,n.useCallback)(async()=>{if(!k.trim()){T("Digite um nome para a lista");return}G(!0),T("");try{let e=await p(k.trim());y(e.id),j(!1),C("")}catch(e){T(e.message||"Erro ao criar lista")}G(!1)},[k,p]),z=(0,n.useCallback)(async()=>{if(W.trim()&&N){G(!0),T("");try{await g(N.id,W.trim()),S(null),B("")}catch(e){T(e.message||"Erro ao renomear lista")}G(!1)}},[N,W,g]),F=(0,n.useCallback)(async e=>{G(!0),T("");try{if(await v(e.id),w===e.id){let t=d.filter(t=>t.id!==e.id),r=t.find(e=>e.is_default)||t[0];y((null==r?void 0:r.id)||null)}u('Lista "'.concat(e.name,'" excluida com sucesso'),"success")}catch(e){T(e.message||"Erro ao excluir lista")}G(!1),P(null)},[w,d,v,u]),U=(0,n.useCallback)(()=>{if(!O)return;let e=(O.items||[]).map(e=>{var t;return"- ".concat((null===(t=e.product)||void 0===t?void 0:t.nome)||"Produto")}).join("\n"),t='Minha lista "'.concat(O.name,'" no SuperBora:\n\n').concat(e||"(lista vazia)","\n\nConfira em: ").concat(window.location.origin,"/listas");navigator.share?navigator.share({title:"Lista: ".concat(O.name),text:t}).catch(e=>{"AbortError"!==e.name&&console.warn("[Lists] Share failed:",e.message)}):navigator.clipboard.writeText(t).then(()=>{u("Link copiado para a area de transferencia!","success")}),A(!1)},[O,u]),V=(0,n.useCallback)(e=>{S(e),B(e.name),P(null)},[]);return(0,i.jsxs)("div",{className:f().page,children:[(0,i.jsxs)("div",{className:f().header,children:[(0,i.jsx)("button",{type:"button",className:f().backBtn,onClick:()=>t.back(),"aria-label":"Voltar",children:(0,i.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,i.jsx)("path",{d:"M15 18l-6-6 6-6"})})}),(0,i.jsx)("h1",{className:f().title,children:"Minhas Listas"}),(0,i.jsx)("button",{type:"button",className:f().shareBtn,onClick:()=>A(!0),disabled:!O||0===((null===(e=O.items)||void 0===e?void 0:e.length)||0),children:(0,i.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,i.jsx)("circle",{cx:"18",cy:"5",r:"3"}),(0,i.jsx)("circle",{cx:"6",cy:"12",r:"3"}),(0,i.jsx)("circle",{cx:"18",cy:"19",r:"3"}),(0,i.jsx)("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),(0,i.jsx)("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]})})]}),(0,i.jsxs)("div",{className:f().stats,children:[(0,i.jsxs)("div",{className:f().stat,children:[(0,i.jsx)("span",{className:f().statValue,children:d.length}),(0,i.jsx)("span",{className:f().statLabel,children:1===d.length?"Lista":"Listas"})]}),(0,i.jsx)("div",{className:f().statDivider}),(0,i.jsxs)("div",{className:f().stat,children:[(0,i.jsx)("span",{className:f().statValue,children:M}),(0,i.jsx)("span",{className:f().statLabel,children:1===M?"Item salvo":"Itens salvos"})]})]}),(0,i.jsx)("div",{className:f().tabsContainer,children:(0,i.jsxs)("div",{className:f().tabs,children:[d.map(e=>{var t;return(0,i.jsxs)("button",{type:"button",className:"".concat(f().tab," ").concat(w===e.id?f().tabActive:""),onClick:()=>y(e.id),children:[(0,i.jsx)("span",{className:f().tabName,children:e.name}),(0,i.jsx)("span",{className:f().tabCount,children:(null===(t=e.items)||void 0===t?void 0:t.length)||0}),e.is_default&&(0,i.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",className:f().tabStar,children:(0,i.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})]},e.id)}),(0,i.jsx)("button",{type:"button",className:f().tabAdd,onClick:()=>j(!0),children:(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[(0,i.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,i.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})}),O&&!O.is_default&&(0,i.jsxs)("div",{className:f().listActions,children:[(0,i.jsxs)("button",{type:"button",className:f().actionBtn,onClick:()=>V(O),children:[(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,i.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,i.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Renomear"]}),(0,i.jsxs)("button",{type:"button",className:"".concat(f().actionBtn," ").concat(f().deleteBtn),onClick:()=>F(O),children:[(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,i.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,i.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),"Excluir"]})]}),L&&(0,i.jsx)("div",{className:f().error,children:L}),b&&(0,i.jsx)("div",{className:f().formOverlay,onClick:()=>j(!1),role:"dialog","aria-modal":"true","aria-labelledby":"new-list-modal-title",children:(0,i.jsxs)("div",{className:f().formCard,onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("h3",{id:"new-list-modal-title",className:f().formTitle,children:"Nova lista"}),(0,i.jsx)("input",{type:"text",className:f().input,placeholder:"Nome da lista",value:k,onChange:e=>C(e.target.value),maxLength:100,autoFocus:!0,onKeyDown:e=>"Enter"===e.key&&D()}),(0,i.jsxs)("div",{className:f().formActions,children:[(0,i.jsx)("button",{type:"button",className:f().cancelBtn,onClick:()=>{j(!1),C("")},children:"Cancelar"}),(0,i.jsx)("button",{type:"button",className:f().saveBtn,onClick:D,disabled:R||!k.trim(),children:R?"Criando...":"Criar lista"})]})]})}),N&&(0,i.jsx)("div",{className:f().formOverlay,onClick:()=>S(null),role:"dialog","aria-modal":"true","aria-labelledby":"edit-list-modal-title",children:(0,i.jsxs)("div",{className:f().formCard,onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("h3",{id:"edit-list-modal-title",className:f().formTitle,children:"Renomear lista"}),(0,i.jsx)("input",{type:"text",className:f().input,placeholder:"Nome da lista",value:W,onChange:e=>B(e.target.value),maxLength:100,autoFocus:!0,onKeyDown:e=>"Enter"===e.key&&z()}),(0,i.jsxs)("div",{className:f().formActions,children:[(0,i.jsx)("button",{type:"button",className:f().cancelBtn,onClick:()=>{S(null),B("")},children:"Cancelar"}),(0,i.jsx)("button",{type:"button",className:f().saveBtn,onClick:z,disabled:R||!W.trim(),children:R?"Salvando...":"Salvar"})]})]})}),I&&(0,i.jsx)("div",{className:f().formOverlay,onClick:()=>A(!1),role:"dialog","aria-modal":"true","aria-labelledby":"share-modal-title",children:(0,i.jsxs)("div",{className:f().formCard,onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("h3",{id:"share-modal-title",className:f().formTitle,children:"Compartilhar lista"}),(0,i.jsxs)("p",{className:f().shareText,children:['Compartilhe sua lista "',null==O?void 0:O.name,'" com amigos e familiares!']}),(0,i.jsxs)("div",{className:f().formActions,children:[(0,i.jsx)("button",{type:"button",className:f().cancelBtn,onClick:()=>A(!1),children:"Cancelar"}),(0,i.jsxs)("button",{type:"button",className:f().saveBtn,onClick:U,children:[(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,i.jsx)("circle",{cx:"18",cy:"5",r:"3"}),(0,i.jsx)("circle",{cx:"6",cy:"12",r:"3"}),(0,i.jsx)("circle",{cx:"18",cy:"19",r:"3"}),(0,i.jsx)("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),(0,i.jsx)("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),"Compartilhar"]})]})]})}),m&&(0,i.jsxs)("div",{className:f().syncing,children:[(0,i.jsx)("div",{className:f().spinner}),(0,i.jsx)("span",{children:"Sincronizando favoritos..."})]}),(0,i.jsx)("div",{className:f().content,children:h?(0,i.jsxs)("div",{className:f().loading,children:[(0,i.jsx)("div",{className:f().spinner}),(0,i.jsx)("span",{children:"Carregando listas..."})]}):(0,i.jsx)(_,{wishlistId:w,emptyMessage:'Nenhum item em "'.concat((null==O?void 0:O.name)||"esta lista",'"')})}),!r&&(0,i.jsxs)("div",{className:f().loginPrompt,children:[(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),(0,i.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),(0,i.jsx)("p",{children:"Faca login para sincronizar suas listas em todos os dispositivos"}),(0,i.jsx)(a.default,{href:"/login",className:f().loginBtn,children:"Entrar"})]})]})}},7650:function(e,t,r){"use strict";function i(e){return null!=e&&"number"==typeof e&&Number.isFinite(e)?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e):"R$ 0,00"}function n(e){if(!e)return"";let t=String(e);if(t.length>20)return"";let r=t.replace(/\D/g,"");return 8===r.length&&/^\d{8}$/.test(r)?"".concat(r.slice(0,5),"-").concat(r.slice(5)):""}function a(e){if(null==e||"number"!=typeof e||!Number.isFinite(e)||e<0)return"";let t=Math.round(e);if(0===t)return"";if(t<60)return"".concat(t," min");let r=Math.floor(t/60),i=t%60;return i>0?"".concat(r,"h").concat(i,"min"):"".concat(r,"h")}function s(e){if(null==e)return"0.0";let t=Number(e);return Number.isFinite(t)?t.toFixed(1):"0.0"}function l(e){if(null==e)return"";let t=Number(e);return isNaN(t)?i(0):0===t?"Gratis":i(t)}r.d(t,{A6:function(){return s},ci:function(){return l},gN:function(){return a},hR:function(){return n},o_:function(){return i}})},9376:function(e,t,r){"use strict";var i=r(5475);r.o(i,"usePathname")&&r.d(t,{usePathname:function(){return i.usePathname}}),r.o(i,"useRouter")&&r.d(t,{useRouter:function(){return i.useRouter}}),r.o(i,"useSearchParams")&&r.d(t,{useSearchParams:function(){return i.useSearchParams}})},257:function(e,t,r){"use strict";var i,n;e.exports=(null==(i=r.g.process)?void 0:i.env)&&"object"==typeof(null==(n=r.g.process)?void 0:n.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,i,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var o=[],c=!1,u=-1;function d(){c&&i&&(c=!1,i.length?o=i.concat(o):u=-1,o.length&&h())}function h(){if(!c){var e=l(d);c=!0;for(var t=o.length;t;){for(i=o,o=[];++u<t;)i&&i[u].run();u=-1,t=o.length}i=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function _(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.push(new m(e,t)),1!==o.length||c||l(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=_,n.addListener=_,n.once=_,n.off=_,n.removeListener=_,n.removeAllListeners=_,n.emit=_,n.prependListener=_,n.prependOnceListener=_,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}},s=!0;try{t[e](a,a.exports,i),s=!1}finally{s&&delete r[e]}return a.exports}i.ab="//";var n=i(229);e.exports=n}()},51:function(e){e.exports={container:"OptimizedImage_container__Q7NU0",placeholder:"OptimizedImage_placeholder__Mw27p",shimmer:"OptimizedImage_shimmer__gJhRq",shimmerAnimation:"OptimizedImage_shimmerAnimation__MusyU",image:"OptimizedImage_image__rBhcU",imageLoaded:"OptimizedImage_imageLoaded__DYNSn",errorPlaceholder:"OptimizedImage_errorPlaceholder__eVHW5"}},2647:function(e){e.exports={button:"WishlistButton_button__8e68v",active:"WishlistButton_active__Od1n5",animating:"WishlistButton_animating__L4_cW",heart:"WishlistButton_heart__L0lYl",heartPop:"WishlistButton_heartPop__hbu5_",iconWrap:"WishlistButton_iconWrap__m_2M1",label:"WishlistButton_label__2qZK_",burst:"WishlistButton_burst__v5V3n",particle:"WishlistButton_particle__mhYK4",particleBurst:"WishlistButton_particleBurst__BFx8I",circular:"WishlistButton_circular__a07Bc",compact:"WishlistButton_compact__k4bQB",large:"WishlistButton_large__DqKiL",withLabel:"WishlistButton_withLabel__57DQS"}},8859:function(e){e.exports={grid:"WishlistGrid_grid__AwYBo",card:"WishlistGrid_card__wV_eY",removing:"WishlistGrid_removing__iCR5F",imgWrap:"WishlistGrid_imgWrap__42wJB",imgContainer:"WishlistGrid_imgContainer__pTS3Y",img:"WishlistGrid_img__RuFlj",imgPlaceholder:"WishlistGrid_imgPlaceholder___ClYm",promoBadge:"WishlistGrid_promoBadge__gmRFh",removeBtn:"WishlistGrid_removeBtn__XMzej",body:"WishlistGrid_body__HiG4U",name:"WishlistGrid_name__i3iI7",unit:"WishlistGrid_unit__XTHgO",partner:"WishlistGrid_partner__U5RUd",partnerLogo:"WishlistGrid_partnerLogo__sVch2",priceRow:"WishlistGrid_priceRow__VQd9b",price:"WishlistGrid_price__bpADk",pricePromo:"WishlistGrid_pricePromo__ZJ85P",priceOriginal:"WishlistGrid_priceOriginal__IMbec",unavailable:"WishlistGrid_unavailable__Xkt5T",empty:"WishlistGrid_empty__MewiX",emptyIcon:"WishlistGrid_emptyIcon__Mqw18",emptyText:"WishlistGrid_emptyText__1UYT7",emptyBtn:"WishlistGrid_emptyBtn__ObEeG",skeleton:"WishlistGrid_skeleton__20U_V",skeletonImg:"WishlistGrid_skeletonImg__b_oSf",shimmer:"WishlistGrid_shimmer__OclaU",skeletonBody:"WishlistGrid_skeletonBody__Zr_dk",skeletonText:"WishlistGrid_skeletonText__dwn3K",skeletonTextShort:"WishlistGrid_skeletonTextShort__WkwoC"}},275:function(e){e.exports={overlay:"WishlistSelector_overlay__gDcLE",fadeIn:"WishlistSelector_fadeIn__YZi80",modal:"WishlistSelector_modal__mKMwD",slideUp:"WishlistSelector_slideUp__NY1sb",header:"WishlistSelector_header__yFdKK",title:"WishlistSelector_title__raCG4",closeBtn:"WishlistSelector_closeBtn__x_4Gy",productPreview:"WishlistSelector_productPreview__63zUk",productImg:"WishlistSelector_productImg__EKLea",productInfo:"WishlistSelector_productInfo__8McCR",productName:"WishlistSelector_productName__4gZcj",lists:"WishlistSelector_lists__w5Suj",listItem:"WishlistSelector_listItem__njiZi",selected:"WishlistSelector_selected__1DlAj",checkbox:"WishlistSelector_checkbox__jSd05",listName:"WishlistSelector_listName__bJ7Hi",defaultBadge:"WishlistSelector_defaultBadge__J2SXt",listCount:"WishlistSelector_listCount___euKR",createBtn:"WishlistSelector_createBtn__jSPxR",newForm:"WishlistSelector_newForm__rODF7",newInput:"WishlistSelector_newInput__jDvcQ",newActions:"WishlistSelector_newActions__hdj9R",newCancelBtn:"WishlistSelector_newCancelBtn__og3qu",newSaveBtn:"WishlistSelector_newSaveBtn__g593K",error:"WishlistSelector_error__WqTbN",footer:"WishlistSelector_footer__kWjgj",saveBtn:"WishlistSelector_saveBtn__itr99"}},9740:function(e){e.exports={page:"page_page__gZeJP",header:"page_header__PIXHP",backBtn:"page_backBtn__AgF5C",title:"page_title__Ndoh_",shareBtn:"page_shareBtn__DMc_G",stats:"page_stats__qbPGh",stat:"page_stat__RUFe7",statValue:"page_statValue__UVZBM",statLabel:"page_statLabel__QPpxw",statDivider:"page_statDivider__o41yX",tabsContainer:"page_tabsContainer__3oi_y",tabs:"page_tabs__s73rO",tab:"page_tab__W4U5h",tabActive:"page_tabActive__4F7ui",tabName:"page_tabName__eoT_0",tabCount:"page_tabCount__0ZQFz",tabStar:"page_tabStar__78t_E",tabAdd:"page_tabAdd__8kl7f",listActions:"page_listActions__Jbi4B",actionBtn:"page_actionBtn__LsC2l",deleteBtn:"page_deleteBtn__8jsKS",error:"page_error__z03hN",content:"page_content__eE_SH",loading:"page_loading__gu4Mi",spinner:"page_spinner__G8bkN",spin:"page_spin__QHDqG",syncing:"page_syncing__lURhu",formOverlay:"page_formOverlay__vnxEp",fadeIn:"page_fadeIn__voQyl",formCard:"page_formCard__YZcSL",scaleIn:"page_scaleIn__OM7_4",formTitle:"page_formTitle__UAm_u",input:"page_input__7zaJw",shareText:"page_shareText__uBCg0",formActions:"page_formActions__kWoBM",cancelBtn:"page_cancelBtn__e1CGz",saveBtn:"page_saveBtn__pP_kx",loginPrompt:"page_loginPrompt__N_v2n",loginBtn:"page_loginBtn__3u6D7"}}},function(e){e.O(0,[3498,508,7648,2971,2117,1744],function(){return e(e.s=8870)}),_N_E=e.O()}]);