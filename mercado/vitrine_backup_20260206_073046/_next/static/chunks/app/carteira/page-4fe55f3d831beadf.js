(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4058],{620:function(e,a,t){Promise.resolve().then(t.bind(t,433))},6428:function(e,a,t){"use strict";t.d(a,{LP:function(){return n},QW:function(){return u},SC:function(){return i},o4:function(){return o},pE:function(){return _},sg:function(){return d}}),t(257);let r="/api/mercado",s="superbora_token";function l(){return window.location.origin}function n(){try{return localStorage.getItem(s)}catch(e){return null}}function o(e){try{e?localStorage.setItem(s,e):localStorage.removeItem(s)}catch(e){}}function c(){let e=n();return e?{Authorization:"Bearer ".concat(e)}:{}}async function i(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:s}=t,n=new URL(r+e,l());Object.entries(a).forEach(e=>{let[a,t]=e;null!=t&&""!==t&&n.searchParams.set(a,t)});let o=await fetch(n.toString(),{credentials:"include",headers:c(),signal:s});if(!o.ok){let e=await o.json().catch(()=>null);throw Error((null==e?void 0:e.message)||"API error: ".concat(o.status))}let i=await o.json().catch(()=>null);if(!i||!i.success)throw Error((null==i?void 0:i.message)||"Erro desconhecido na API");return void 0!==i.data?i.data:null}async function d(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:s}=t,n=new URL(r+e,l()),o=await fetch(n.toString(),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",...c()},body:JSON.stringify(a),signal:s}),i=await o.json().catch(()=>null);if(!o.ok||!(null==i?void 0:i.success))throw Error((null==i?void 0:i.message)||"API error: ".concat(o.status));return void 0!==i.data?i.data:null}async function _(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:s}=t,n=new URL(r+e,l()),o=await fetch(n.toString(),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",...c()},body:JSON.stringify(a),signal:s}),i=await o.json().catch(()=>null);if(!o.ok||!(null==i?void 0:i.success))throw Error((null==i?void 0:i.message)||"API error: ".concat(o.status));return void 0!==i.data?i.data:null}async function u(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:s}=t,n=new URL(r+e,l());Object.entries(a).forEach(e=>{let[a,t]=e;null!=t&&""!==t&&n.searchParams.set(a,t)});let o=await fetch(n.toString(),{method:"DELETE",credentials:"include",headers:c(),signal:s}),i=await o.json().catch(()=>null);if(!o.ok||!(null==i?void 0:i.success))throw Error((null==i?void 0:i.message)||"API error: ".concat(o.status));return void 0!==i.data?i.data:null}},433:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return f}});var r=t(7437),s=t(2265),l=t(9376),n=t(8779),o=t(7128),c=t(6428),i=t(6680),d=t.n(i);function _(e){switch(e){case"visa":return"Visa";case"mastercard":return"Mastercard";case"elo":return"Elo";case"amex":return"American Express";default:return""}}function u(e){let{onClose:a,onSave:t,saving:l}=e,[n,o]=(0,s.useState)(""),[c,i]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[h,f]=(0,s.useState)({}),g=(0,s.useRef)(!0),p=(0,s.useRef)(null);(0,s.useEffect)(()=>(g.current=!0,p.current&&p.current.focus(),()=>{g.current=!1}),[]);let x=function(e){let a=e.replace(/\D/g,"");return a?"4"===a[0]?"visa":"5"===a[0]?"mastercard":"6"===a[0]?"elo":"3"===a[0]?"amex":"":""}(n),v=n.replace(/\D/g,"").slice(-4),y=(0,s.useCallback)(e=>{o(function(e){let a=e.replace(/\D/g,""),t=[];for(let e=0;e<a.length&&e<16;e+=4)t.push(a.slice(e,e+4));return t.join(" ")}(e.target.value)),f(e=>({...e,cardNumber:""}))},[]),b=(0,s.useCallback)(e=>{m(function(e){let a=e.replace(/\D/g,"");return a.length<=2?a:a.slice(0,2)+"/"+a.slice(2,4)}(e.target.value)),f(e=>({...e,expiry:""}))},[]),P=(0,s.useCallback)(e=>{i(e.target.value.toUpperCase()),f(e=>({...e,holderName:""}))},[]),w=(0,s.useCallback)(()=>{let e={};n.replace(/\D/g,"").length<13&&(e.cardNumber="Numero do cartao invalido"),c.trim()||(e.holderName="Nome do titular e obrigatorio");let a=u.replace(/\D/g,"");if(4!==a.length)e.expiry="Data de validade invalida";else{let t=parseInt(a.slice(0,2),10);(t<1||t>12)&&(e.expiry="Mes invalido")}return x||(e.cardNumber="Bandeira nao reconhecida"),f(e),0===Object.keys(e).length},[n,c,u,x]),j=(0,s.useCallback)(e=>{if(e.preventDefault(),!w())return;let a=u.replace(/\D/g,"");t({card_last4:v,card_brand:x,card_exp_month:a.slice(0,2),card_exp_year:a.slice(2,4)})},[w,u,v,x,t]),C=n||"**** **** **** ****";return(0,r.jsx)("div",{className:d().modalOverlay,onClick:e=>{e.target!==e.currentTarget||l||a()},role:"dialog","aria-modal":"true","aria-label":"Adicionar cartao",children:(0,r.jsxs)("div",{className:d().modal,onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:d().modalHeader,children:[(0,r.jsx)("div",{className:d().modalTitle,children:"Adicionar cartao"}),(0,r.jsx)("button",{className:d().modalClose,onClick:a,disabled:l,"aria-label":"Fechar",type:"button",children:(0,r.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,r.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,r.jsxs)("div",{className:"".concat(d().cardVisual," ").concat(function(e){switch(e){case"visa":return d().cardVisualVisa;case"mastercard":return d().cardVisualMastercard;case"elo":return d().cardVisualElo;case"amex":return d().cardVisualAmex;default:return d().cardVisualOther}}(x)),children:[(0,r.jsx)("div",{className:d().cardVisualPattern}),(0,r.jsx)("div",{className:d().cardVisualPattern2}),(0,r.jsx)("div",{className:d().cardVisualChip}),(0,r.jsx)("div",{className:d().cardVisualNumber,children:C}),(0,r.jsxs)("div",{className:d().cardVisualBottom,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:d().cardVisualExpiry,children:"VALIDADE"}),(0,r.jsx)("div",{className:d().cardVisualExpiryValue,children:u||"MM/AA"})]}),(0,r.jsx)("div",{className:d().cardVisualBrand,children:_(x)||"CARTAO"})]})]}),(0,r.jsxs)("form",{onSubmit:j,noValidate:!0,children:[(0,r.jsxs)("div",{className:d().formGroup,children:[(0,r.jsx)("label",{className:d().formLabel,htmlFor:"card-number",children:"Numero do cartao"}),(0,r.jsx)("input",{ref:p,id:"card-number",type:"text",inputMode:"numeric",autoComplete:"cc-number",className:"".concat(d().formInput," ").concat(h.cardNumber?d().formInputError:""),value:n,onChange:y,placeholder:"0000 0000 0000 0000",maxLength:19,disabled:l}),h.cardNumber&&(0,r.jsx)("div",{className:d().formError,children:h.cardNumber}),x&&!h.cardNumber&&(0,r.jsxs)("div",{className:d().brandDetected,children:[(0,r.jsx)("span",{className:d().brandDot,style:{background:function(e){switch(e){case"visa":return"#1a1f71";case"mastercard":return"#eb001b";case"elo":return"#000000";case"amex":return"#016fd0";default:return"#6b7280"}}(x)}}),_(x)]})]}),(0,r.jsxs)("div",{className:d().formGroup,children:[(0,r.jsx)("label",{className:d().formLabel,htmlFor:"card-holder",children:"Nome do titular"}),(0,r.jsx)("input",{id:"card-holder",type:"text",autoComplete:"cc-name",className:"".concat(d().formInput," ").concat(h.holderName?d().formInputError:""),value:c,onChange:P,placeholder:"NOME COMO NO CARTAO",disabled:l}),h.holderName&&(0,r.jsx)("div",{className:d().formError,children:h.holderName})]}),(0,r.jsx)("div",{className:d().formRow,children:(0,r.jsxs)("div",{className:d().formGroup,children:[(0,r.jsx)("label",{className:d().formLabel,htmlFor:"card-expiry",children:"Validade"}),(0,r.jsx)("input",{id:"card-expiry",type:"text",inputMode:"numeric",autoComplete:"cc-exp",className:"".concat(d().formInput," ").concat(h.expiry?d().formInputError:""),value:u,onChange:b,placeholder:"MM/AA",maxLength:5,disabled:l}),h.expiry&&(0,r.jsx)("div",{className:d().formError,children:h.expiry})]})}),(0,r.jsx)("button",{type:"submit",className:d().submitBtn,disabled:l,children:l?"Salvando...":"Salvar cartao"})]})]})})}var m=t(940),h=t.n(m);function f(){return(0,r.jsx)(n.Z,{children:(0,r.jsx)(x,{})})}function g(e){switch((e||"").toLowerCase()){case"visa":return"Visa";case"mastercard":return"Mastercard";case"elo":return"Elo";case"amex":return"American Express";default:return e||"Cartao"}}function p(e){let{brand:a}=e,t=(a||"").toLowerCase();return"visa"===t?(0,r.jsx)("svg",{viewBox:"0 0 48 32",fill:"none",style:{width:"100%",height:"100%"},children:(0,r.jsx)("text",{x:"50%",y:"55%",dominantBaseline:"middle",textAnchor:"middle",fill:"#fff",fontSize:"12",fontWeight:"700",fontStyle:"italic",fontFamily:"Arial, sans-serif",children:"VISA"})}):"mastercard"===t?(0,r.jsxs)("svg",{viewBox:"0 0 48 32",fill:"none",style:{width:"100%",height:"100%"},children:[(0,r.jsx)("circle",{cx:"18",cy:"16",r:"10",fill:"#eb001b",opacity:"0.9"}),(0,r.jsx)("circle",{cx:"30",cy:"16",r:"10",fill:"#f79e1b",opacity:"0.9"})]}):"elo"===t?(0,r.jsx)("svg",{viewBox:"0 0 48 32",fill:"none",style:{width:"100%",height:"100%"},children:(0,r.jsx)("text",{x:"50%",y:"55%",dominantBaseline:"middle",textAnchor:"middle",fill:"#fff",fontSize:"14",fontWeight:"700",fontFamily:"Arial, sans-serif",children:"elo"})}):"amex"===t?(0,r.jsx)("svg",{viewBox:"0 0 48 32",fill:"none",style:{width:"100%",height:"100%"},children:(0,r.jsx)("text",{x:"50%",y:"55%",dominantBaseline:"middle",textAnchor:"middle",fill:"#fff",fontSize:"10",fontWeight:"700",fontFamily:"Arial, sans-serif",children:"AMEX"})}):(0,r.jsxs)("svg",{viewBox:"0 0 48 32",fill:"none",style:{width:"100%",height:"100%"},children:[(0,r.jsx)("rect",{x:"8",y:"6",width:"32",height:"20",rx:"3",stroke:"#fff",strokeWidth:"1.5",fill:"none"}),(0,r.jsx)("line",{x1:"8",y1:"12",x2:"40",y2:"12",stroke:"#fff",strokeWidth:"1.5"})]})}function x(){let e=(0,l.useRouter)(),{customer:a}=(0,o.a)(),[t,n]=(0,s.useState)([]),[i,_]=(0,s.useState)(!0),[m,f]=(0,s.useState)(!1),[x,v]=(0,s.useState)(!1),[y,b]=(0,s.useState)(null),[P,w]=(0,s.useState)(null),[j,C]=(0,s.useState)(!1),k=(0,s.useRef)(!0);(0,s.useEffect)(()=>(k.current=!0,()=>{k.current=!1}),[]);let N=(0,s.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";b({message:e,type:a}),setTimeout(()=>{k.current&&b(null)},3e3)},[]);(0,s.useEffect)(()=>{_(!0),(0,c.SC)("/customer/cards.php").then(e=>{k.current&&n(e.cards||[])}).catch(e=>{"AbortError"!==e.name&&console.warn("[Wallet] Failed to load cards")}).finally(()=>{k.current&&_(!1)})},[]);let A=(0,s.useCallback)(async e=>{v(!0);try{await (0,c.sg)("/customer/cards.php",e);let a=await (0,c.SC)("/customer/cards.php");k.current&&(n(a.cards||[]),f(!1),N("Cartao adicionado com sucesso!"))}catch(e){k.current&&N(e.message||"Erro ao adicionar cartao","error")}finally{k.current&&v(!1)}},[N]),W=(0,s.useCallback)(async e=>{C(!0);try{await (0,c.QW)("/customer/cards.php",{id:e}),k.current&&(n(a=>a.filter(a=>a.id!==e)),w(null),N("Cartao removido!"))}catch(e){k.current&&N(e.message||"Erro ao remover cartao","error")}finally{k.current&&C(!1)}},[N]),S=(0,s.useCallback)(async e=>{try{await (0,c.sg)("/customer/cards.php",{card_id:e,set_default:!0}),k.current&&(n(a=>a.map(a=>({...a,is_default:a.id===e}))),N("Cartao padrao atualizado!"))}catch(a){"AbortError"!==a.name&&console.warn("[Wallet] Failed to set default card"),k.current&&n(a=>a.map(a=>({...a,is_default:a.id===e})))}},[N]);return a?(0,r.jsxs)("div",{className:h().page,children:[(0,r.jsxs)("div",{className:h().header,children:[(0,r.jsx)("button",{className:h().backBtn,onClick:()=>e.back(),"aria-label":"Voltar",type:"button",children:(0,r.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,r.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,r.jsx)("div",{className:h().title,children:"Carteira"})]}),i&&(0,r.jsx)("div",{className:h().section,children:(0,r.jsx)("div",{className:d().skeleton,children:[0,1,2].map(e=>(0,r.jsxs)("div",{className:d().skeletonCard,children:[(0,r.jsx)("div",{className:d().skeletonIcon}),(0,r.jsxs)("div",{className:d().skeletonLines,children:[(0,r.jsx)("div",{className:"".concat(d().skeletonLine," ").concat(d().skeletonLineShort)}),(0,r.jsx)("div",{className:"".concat(d().skeletonLine," ").concat(d().skeletonLineLong)})]})]},e))})}),!i&&0===t.length&&(0,r.jsx)("div",{className:h().section,children:(0,r.jsxs)("div",{className:d().emptyState,children:[(0,r.jsxs)("svg",{className:d().emptyIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[(0,r.jsx)("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),(0,r.jsx)("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]}),(0,r.jsx)("div",{className:d().emptyTitle,children:"Nenhum cartao salvo"}),(0,r.jsx)("div",{className:d().emptyText,children:"Adicione um cartao para agilizar seus pagamentos"}),(0,r.jsxs)("button",{className:d().emptyAddBtn,onClick:()=>f(!0),type:"button",children:[(0,r.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,r.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Adicionar cartao"]})]})}),!i&&t.length>0&&(0,r.jsx)("div",{className:h().section,children:(0,r.jsxs)("div",{className:d().cardList,children:[t.map((e,a)=>(0,r.jsxs)("div",{className:"".concat(d().cardItem," ").concat(e.is_default?d().cardItemDefault:""," ").concat(d().cardAnimateIn),style:{animationDelay:"".concat(.05*a,"s")},onClick:()=>S(e.id),role:"button",tabIndex:0,"aria-label":"".concat(g(e.card_brand)," terminando em ").concat(e.card_last4).concat(e.is_default?", cartao padrao":""),onKeyDown:a=>{("Enter"===a.key||" "===a.key)&&(a.preventDefault(),S(e.id))},children:[(0,r.jsx)("div",{className:"".concat(d().brandIcon," ").concat(function(e){switch((e||"").toLowerCase()){case"visa":return d().brandVisa;case"mastercard":return d().brandMastercard;case"elo":return d().brandElo;case"amex":return d().brandAmex;default:return d().brandOther}}(e.card_brand)),children:(0,r.jsx)(p,{brand:e.card_brand})}),(0,r.jsxs)("div",{className:d().cardInfo,children:[(0,r.jsxs)("div",{className:d().cardNumber,children:[(0,r.jsx)("span",{className:d().cardDots,children:"****"}),e.card_last4]}),(0,r.jsxs)("div",{className:d().cardExpiry,children:[g(e.card_brand)," \xb7 ",e.card_exp_month,"/",e.card_exp_year]})]}),e.is_default?(0,r.jsxs)("div",{className:d().defaultBadge,children:[(0,r.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:(0,r.jsx)("polyline",{points:"20 6 9 17 4 12"})}),"Padrao"]}):(0,r.jsx)("div",{className:d().cardActions,children:(0,r.jsx)("button",{className:d().deleteBtn,onClick:a=>{a.stopPropagation(),w(e)},"aria-label":"Remover cartao terminando em ".concat(e.card_last4),type:"button",children:(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,r.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})})]},e.id)),(0,r.jsxs)("button",{className:d().addCardBtn,onClick:()=>f(!0),type:"button",children:[(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,r.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Adicionar cartao"]})]})}),m&&(0,r.jsx)(u,{onClose:()=>!x&&f(!1),onSave:A,saving:x}),P&&(0,r.jsx)("div",{className:d().confirmOverlay,onClick:e=>{e.target!==e.currentTarget||j||w(null)},role:"alertdialog","aria-modal":"true","aria-label":"Confirmar exclusao",children:(0,r.jsxs)("div",{className:d().confirmDialog,onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:d().confirmTitle,children:"Remover cartao"}),(0,r.jsxs)("div",{className:d().confirmText,children:["Tem certeza que deseja remover o cartao ",g(P.card_brand)," terminando em ",P.card_last4,"?"]}),(0,r.jsxs)("div",{className:d().confirmActions,children:[(0,r.jsx)("button",{className:d().confirmCancel,onClick:()=>w(null),disabled:j,type:"button",children:"Cancelar"}),(0,r.jsx)("button",{className:d().confirmDelete,onClick:()=>W(P.id),disabled:j,type:"button",children:j?"Removendo...":"Remover"})]})]})}),y&&(0,r.jsx)("div",{className:"".concat(d().toast," ").concat("error"===y.type?d().toastError:d().toastSuccess),children:y.message})]}):null}},8779:function(e,a,t){"use strict";t.d(a,{Z:function(){return o}});var r=t(7437),s=t(2265),l=t(9376),n=t(7128);function o(e){let{children:a}=e,{isAuthenticated:t,loading:o}=(0,n.a)(),c=(0,l.useRouter)();return((0,s.useEffect)(()=>{if(!o&&!t){let e=window.location.pathname;c.push("/login?return=".concat(encodeURIComponent(e)))}},[o,t,c]),o)?(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:(0,r.jsx)("div",{style:{width:32,height:32,border:"3px solid var(--color-border)",borderTopColor:"var(--color-accent)",borderRadius:"50%",animation:"spin 0.8s linear infinite"}})}):t?a:null}},7128:function(e,a,t){"use strict";t.d(a,{H:function(){return o},a:function(){return c}});var r=t(7437),s=t(2265),l=t(6428);let n=(0,s.createContext)(null);function o(e){let{children:a}=e,[t,o]=(0,s.useState)(null),[c,i]=(0,s.useState)(!0),d=(0,s.useRef)(!0);(0,s.useEffect)(()=>(d.current=!0,()=>{d.current=!1}),[]);let _=(0,s.useCallback)(async()=>{if(!(0,l.LP)()){d.current&&(o(null),i(!1));return}try{let e=await (0,l.SC)("/auth/session.php");if(!d.current)return;e.authenticated&&e.customer?o(e.customer):((0,l.o4)(null),o(null))}catch(e){if(!d.current)return;"AbortError"!==e.name&&console.warn("[Auth] Session check failed"),(0,l.o4)(null),o(null)}finally{d.current&&i(!1)}},[]);(0,s.useEffect)(()=>{_()},[_]);let u=(0,s.useCallback)(async(e,a)=>{try{let t=await (0,l.sg)("/auth/login.php",{email:e,senha:a});if(!d.current)return null;return(0,l.o4)(t.token),o(t.customer),t.customer}catch(e){throw console.warn("[AuthContext] Login failed:",e.message),e}},[]),m=(0,s.useCallback)(async e=>{try{let a=await (0,l.sg)("/auth/register.php",e);if(!d.current)return null;return(0,l.o4)(a.token),o(a.customer),a.customer}catch(e){throw console.warn("[AuthContext] Register failed:",e.message),e}},[]),h=(0,s.useCallback)(async e=>{try{let a=await (0,l.sg)("/auth/google.php",{credential:e});if(!d.current)return null;return(0,l.o4)(a.token),o(a.customer),a}catch(e){throw console.warn("[AuthContext] Google login failed:",e.message),e}},[]),f=(0,s.useCallback)(async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"whatsapp";try{let t={channel:a};return"email"===a?t.email=e:t.phone=e,await (0,l.sg)("/auth/send-code.php",t)}catch(e){throw console.warn("[AuthContext] Send OTP failed:",e.message),e}},[]),g=(0,s.useCallback)(async(e,a,t)=>{try{let r={phone:e,code:a};t&&(r.name=t);let s=await (0,l.sg)("/auth/verify-code.php",r);if(!d.current)return null;return(0,l.o4)(s.token),o(s.customer),s}catch(e){throw console.warn("[AuthContext] Verify OTP failed:",e.message),e}},[]),p=(0,s.useCallback)(()=>{(0,l.o4)(null),o(null)},[]),x=(0,s.useCallback)(e=>{o(a=>a?{...a,...e}:a)},[]),v=(0,s.useMemo)(()=>({customer:t,loading:c,isAuthenticated:!!t,login:u,loginWithGoogle:h,register:m,sendOtp:f,verifyOtp:g,logout:p,updateCustomer:x,refreshSession:_}),[t,c,u,h,m,f,g,p,x,_]);return(0,r.jsx)(n.Provider,{value:v,children:a})}function c(){let e=(0,s.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},9376:function(e,a,t){"use strict";var r=t(5475);t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},257:function(e,a,t){"use strict";var r,s;e.exports=(null==(r=t.g.process)?void 0:r.env)&&"object"==typeof(null==(s=t.g.process)?void 0:s.env)?t.g.process:t(4227)},4227:function(e){!function(){var a={229:function(e){var a,t,r,s=e.exports={};function l(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function o(e){if(a===setTimeout)return setTimeout(e,0);if((a===l||!a)&&setTimeout)return a=setTimeout,setTimeout(e,0);try{return a(e,0)}catch(t){try{return a.call(null,e,0)}catch(t){return a.call(this,e,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:l}catch(e){a=l}try{t="function"==typeof clearTimeout?clearTimeout:n}catch(e){t=n}}();var c=[],i=!1,d=-1;function _(){i&&r&&(i=!1,r.length?c=r.concat(c):d=-1,c.length&&u())}function u(){if(!i){var e=o(_);i=!0;for(var a=c.length;a;){for(r=c,c=[];++d<a;)r&&r[d].run();d=-1,a=c.length}r=null,i=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===n||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(a){try{return t.call(null,e)}catch(a){return t.call(this,e)}}}(e)}}function m(e,a){this.fun=e,this.array=a}function h(){}s.nextTick=function(e){var a=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)a[t-1]=arguments[t];c.push(new m(e,a)),1!==c.length||i||o(u)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=h,s.addListener=h,s.once=h,s.off=h,s.removeListener=h,s.removeAllListeners=h,s.emit=h,s.prependListener=h,s.prependOnceListener=h,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},t={};function r(e){var s=t[e];if(void 0!==s)return s.exports;var l=t[e]={exports:{}},n=!0;try{a[e](l,l.exports,r),n=!1}finally{n&&delete t[e]}return l.exports}r.ab="//";var s=r(229);e.exports=s}()},940:function(e){e.exports={page:"Pages_page__1BOVN",header:"Pages_header__jGmk8",backBtn:"Pages_backBtn__mTFay",title:"Pages_title__n2U_m",profileCard:"Pages_profileCard__wMFAT",profileAvatar:"Pages_profileAvatar__J6d58",profileName:"Pages_profileName__eHajI",profileEmail:"Pages_profileEmail__BG4As",section:"Pages_section__HV85g",sectionTitle:"Pages_sectionTitle__Tp1xX",menuItem:"Pages_menuItem___rXUi",menuIcon:"Pages_menuIcon__NOqLG",menuLabel:"Pages_menuLabel__Kl19j",menuArrow:"Pages_menuArrow__SdUUa",logoutBtn:"Pages_logoutBtn__f_kNh",formSection:"Pages_formSection__U2cjn",formRow:"Pages_formRow__JYsGc",formLabel:"Pages_formLabel__bb7Gh",formInput:"Pages_formInput__HPy8g",saveBtn:"Pages_saveBtn__I8a11",addressItem:"Pages_addressItem__WoRA7",addressBadge:"Pages_addressBadge__sJUoT",addressText:"Pages_addressText__d_ZO9",addressDefault:"Pages_addressDefault__5JKVW",addressDelete:"Pages_addressDelete__cnadr",searchBar:"Pages_searchBar__5Dkwd",searchInput:"Pages_searchInput__uwXko",searchGroup:"Pages_searchGroup__GTpFY",searchGroupTitle:"Pages_searchGroupTitle__G7oMv",searchResult:"Pages_searchResult__pHApo",searchResultImg:"Pages_searchResultImg__Rm_38",searchResultInfo:"Pages_searchResultInfo___2tNW",searchResultName:"Pages_searchResultName__Uxe2e",searchResultSub:"Pages_searchResultSub__T6Igl",searchResultPrice:"Pages_searchResultPrice__0aoBM",favGrid:"Pages_favGrid__EeFq2",favCard:"Pages_favCard__2v7V3",favImg:"Pages_favImg__gibhm",favInfo:"Pages_favInfo__FUDHC",favName:"Pages_favName__iEqsH",favSub:"Pages_favSub__WiVId",favRemove:"Pages_favRemove__D9W9q",empty:"Pages_empty__453IL",emptyIcon:"Pages_emptyIcon__KgY7u",emptyTitle:"Pages_emptyTitle__DydbF",emptyText:"Pages_emptyText__j_lO2",emptyBtn:"Pages_emptyBtn__t6JhT",loader:"Pages_loader__CfUaA",spinner:"Pages_spinner__vfHyj",spin:"Pages_spin__EwJus",sectionHeader:"Pages_sectionHeader__nUDll",editBtn:"Pages_editBtn__pIroG",formActions:"Pages_formActions__6UaKQ",cancelBtn:"Pages_cancelBtn__1lLBg",toast:"Pages_toast__HVzU5",toastSlide:"Pages_toastSlide__Asiox",toastSuccess:"Pages_toastSuccess__SiheR",toastError:"Pages_toastError__IFB0U",themeToggle:"Pages_themeToggle__NUe4D",themeSwitch:"Pages_themeSwitch__FfX5_",active:"Pages_active___qnLG",themeSwitchKnob:"Pages_themeSwitchKnob__P_Lbi",faqItem:"Pages_faqItem__SXRHq",faqQuestion:"Pages_faqQuestion__J2tB_",faqArrow:"Pages_faqArrow__hHUFM",faqArrowOpen:"Pages_faqArrowOpen__skMZa",faqAnswer:"Pages_faqAnswer__y1SOx",supportSection:"Pages_supportSection__GpKPS",supportBtn:"Pages_supportBtn__nc5K5",whatsappBtn:"Pages_whatsappBtn__Fh6BH",emailBtn:"Pages_emailBtn__zXmb_",dangerZone:"Pages_dangerZone___OjoH",deleteAccountBtn:"Pages_deleteAccountBtn__RjiDZ",modalOverlay:"Pages_modalOverlay__Ozk7K",fadeIn:"Pages_fadeIn__qy_Lm",modal:"Pages_modal__WqBAs",modalSlide:"Pages_modalSlide__2k_8W",modalTitle:"Pages_modalTitle__NVRC7",modalText:"Pages_modalText__er455",modalInput:"Pages_modalInput__Axi42",modalActions:"Pages_modalActions__n_gup",modalCancelBtn:"Pages_modalCancelBtn__5y6zO",modalDeleteBtn:"Pages_modalDeleteBtn__J__OJ",legalContent:"Pages_legalContent__kNa0Q",legalLinks:"Pages_legalLinks__nvTPF",legalLink:"Pages_legalLink__Yb2Lh",filterBar:"Pages_filterBar__5_wQM",filterRow:"Pages_filterRow__X5_1W",sortWrapper:"Pages_sortWrapper__nP3qh",sortSelect:"Pages_sortSelect__CGoV1",sortIcon:"Pages_sortIcon__MLIpC",filterToggle:"Pages_filterToggle__rR2y_",filterToggleActive:"Pages_filterToggleActive__qLlB6",categoryPills:"Pages_categoryPills__XdAK4",categoryPill:"Pages_categoryPill__MQbTs",categoryPillActive:"Pages_categoryPillActive__7evic",searchGroupHeader:"Pages_searchGroupHeader__tjzk1",searchGroupCount:"Pages_searchGroupCount__tWq_Z",badgeOpen:"Pages_badgeOpen__FkSbP",badgeClosed:"Pages_badgeClosed__Px3It",searchResultRating:"Pages_searchResultRating___POva",searchResultMeta:"Pages_searchResultMeta___JaSQ",searchResultPriceRow:"Pages_searchResultPriceRow__lrFKp",searchResultPriceOld:"Pages_searchResultPriceOld__MZeBz",badgePromo:"Pages_badgePromo__l8v2Q",priceRange:"Pages_priceRange__to7SG",priceInput:"Pages_priceInput__a8uGp",priceSep:"Pages_priceSep__JbekD",priceClear:"Pages_priceClear__WyfjP",collapsibleToggle:"Pages_collapsibleToggle__eM6Xw",collapsibleIcon:"Pages_collapsibleIcon__UpZJ2",collapsibleLabel:"Pages_collapsibleLabel__VQyBe",collapsibleArrow:"Pages_collapsibleArrow__7XJx1",collapsibleArrowOpen:"Pages_collapsibleArrowOpen__u7mYT",collapsibleContent:"Pages_collapsibleContent__xYahU",passwordMsg:"Pages_passwordMsg__aNyN5",passwordMsgSuccess:"Pages_passwordMsgSuccess__APLEp",passwordMsgError:"Pages_passwordMsgError__Qzj3f",addressActions:"Pages_addressActions__v_kCd",addressEdit:"Pages_addressEdit___KVRM",addressEditForm:"Pages_addressEditForm__eiUpy",addressEditGrid:"Pages_addressEditGrid___9wvb",addressEditFull:"Pages_addressEditFull__OLTK9",addressEditActions:"Pages_addressEditActions__bsiYD",addressLabelSelect:"Pages_addressLabelSelect__ZDzya"}},6680:function(e){e.exports={cardList:"Wallet_cardList__4ysM7",cardItem:"Wallet_cardItem__DGhjw",cardItemDefault:"Wallet_cardItemDefault__HEU1H",cardSwipeContainer:"Wallet_cardSwipeContainer__RxG2H",cardSwipeContent:"Wallet_cardSwipeContent__QsXus",cardSwipeDelete:"Wallet_cardSwipeDelete__kP_Rq",brandIcon:"Wallet_brandIcon__AZwkt",brandVisa:"Wallet_brandVisa__qeiDf",brandMastercard:"Wallet_brandMastercard__hi9rO",brandElo:"Wallet_brandElo__zqZAm",brandAmex:"Wallet_brandAmex__UwLny",brandOther:"Wallet_brandOther__yWnq_",cardInfo:"Wallet_cardInfo__eAKKU",cardNumber:"Wallet_cardNumber__eFbI1",cardDots:"Wallet_cardDots__fL7fW",cardExpiry:"Wallet_cardExpiry___aIKa",cardBrand:"Wallet_cardBrand__i1Z4S",defaultBadge:"Wallet_defaultBadge__AIBsP",cardActions:"Wallet_cardActions___65ee",deleteBtn:"Wallet_deleteBtn__SRz5g",addCardBtn:"Wallet_addCardBtn__RjIyZ",emptyState:"Wallet_emptyState___0Uom",emptyIcon:"Wallet_emptyIcon__gTpuV",emptyTitle:"Wallet_emptyTitle__687t_",emptyText:"Wallet_emptyText__ZnGKy",emptyAddBtn:"Wallet_emptyAddBtn__XgKOs",cardVisual:"Wallet_cardVisual__vodlG",cardVisualVisa:"Wallet_cardVisualVisa__29_Pg",cardVisualMastercard:"Wallet_cardVisualMastercard___vS5m",cardVisualElo:"Wallet_cardVisualElo__JtwN6",cardVisualAmex:"Wallet_cardVisualAmex__C51VP",cardVisualOther:"Wallet_cardVisualOther__DmgGy",cardVisualChip:"Wallet_cardVisualChip__X0VXh",cardVisualNumber:"Wallet_cardVisualNumber__kqg3v",cardVisualBottom:"Wallet_cardVisualBottom__G0nT0",cardVisualExpiry:"Wallet_cardVisualExpiry__qMDmj",cardVisualExpiryValue:"Wallet_cardVisualExpiryValue__rNQu0",cardVisualBrand:"Wallet_cardVisualBrand__3kAZC",cardVisualPattern:"Wallet_cardVisualPattern__EgEMK",cardVisualPattern2:"Wallet_cardVisualPattern2__faQ7d",modalOverlay:"Wallet_modalOverlay__zX06T",fadeIn:"Wallet_fadeIn__zl5l0",modal:"Wallet_modal__QJIGO",modalSlideUp:"Wallet_modalSlideUp__Elma0",modalScale:"Wallet_modalScale__EalMD",modalHeader:"Wallet_modalHeader__CORKQ",modalTitle:"Wallet_modalTitle__utXwE",modalClose:"Wallet_modalClose__6xjyH",formGroup:"Wallet_formGroup__kX9b6",formLabel:"Wallet_formLabel__m5Qjh",formInput:"Wallet_formInput__3NyXk",formInputError:"Wallet_formInputError__kBdB7",formError:"Wallet_formError__XRNxt",formRow:"Wallet_formRow__XfCCs",brandDetected:"Wallet_brandDetected__zjoQM",brandDot:"Wallet_brandDot__8FwBh",submitBtn:"Wallet_submitBtn__fcJiI",skeleton:"Wallet_skeleton__EOuUl",skeletonCard:"Wallet_skeletonCard__zgvqj",pulse:"Wallet_pulse__BhXRS",skeletonIcon:"Wallet_skeletonIcon__g02eC",skeletonLines:"Wallet_skeletonLines__gF2eE",skeletonLine:"Wallet_skeletonLine__QqKYN",skeletonLineShort:"Wallet_skeletonLineShort__vsX5K",skeletonLineLong:"Wallet_skeletonLineLong__HQkqu",confirmOverlay:"Wallet_confirmOverlay__sQDvt",confirmDialog:"Wallet_confirmDialog__7JxGg",confirmTitle:"Wallet_confirmTitle__OsbLX",confirmText:"Wallet_confirmText__nrfus",confirmActions:"Wallet_confirmActions__HenMt",confirmCancel:"Wallet_confirmCancel__Ih09s",confirmDelete:"Wallet_confirmDelete__v4TTr",cardAnimateIn:"Wallet_cardAnimateIn__nx2XA",cardAppear:"Wallet_cardAppear__pgTqL",toast:"Wallet_toast__p7fly",toastSlide:"Wallet_toastSlide__97M_M",toastSuccess:"Wallet_toastSuccess__I_fj_",toastError:"Wallet_toastError__cdZ0b"}}},function(e){e.O(0,[3602,2971,2117,1744],function(){return e(e.s=620)}),_N_E=e.O()}]);