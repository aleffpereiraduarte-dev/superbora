(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{7848:function(e,r,t){Promise.resolve().then(t.bind(t,7586))},6428:function(e,r,t){"use strict";t.d(r,{LP:function(){return n},QW:function(){return h},SC:function(){return i},o4:function(){return l},pE:function(){return u},sg:function(){return c}}),t(257);let o="/api/mercado",a="superbora_token";function s(){return window.location.origin}function n(){try{return localStorage.getItem(a)}catch(e){return null}}function l(e){try{e?localStorage.setItem(a,e):localStorage.removeItem(a)}catch(e){}}function d(){let e=n();return e?{Authorization:"Bearer ".concat(e)}:{}}async function i(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:a}=t,n=new URL(o+e,s());Object.entries(r).forEach(e=>{let[r,t]=e;null!=t&&""!==t&&n.searchParams.set(r,t)});let l=await fetch(n.toString(),{credentials:"include",headers:d(),signal:a});if(!l.ok){let e=await l.json().catch(()=>null);throw Error((null==e?void 0:e.message)||"API error: ".concat(l.status))}let i=await l.json().catch(()=>null);if(!i||!i.success)throw Error((null==i?void 0:i.message)||"Erro desconhecido na API");return void 0!==i.data?i.data:null}async function c(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:a}=t,n=new URL(o+e,s()),l=await fetch(n.toString(),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",...d()},body:JSON.stringify(r),signal:a}),i=await l.json().catch(()=>null);if(!l.ok||!(null==i?void 0:i.success))throw Error((null==i?void 0:i.message)||"API error: ".concat(l.status));return void 0!==i.data?i.data:null}async function u(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:a}=t,n=new URL(o+e,s()),l=await fetch(n.toString(),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",...d()},body:JSON.stringify(r),signal:a}),i=await l.json().catch(()=>null);if(!l.ok||!(null==i?void 0:i.success))throw Error((null==i?void 0:i.message)||"API error: ".concat(l.status));return void 0!==i.data?i.data:null}async function h(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:a}=t,n=new URL(o+e,s());Object.entries(r).forEach(e=>{let[r,t]=e;null!=t&&""!==t&&n.searchParams.set(r,t)});let l=await fetch(n.toString(),{method:"DELETE",credentials:"include",headers:d(),signal:a}),i=await l.json().catch(()=>null);if(!l.ok||!(null==i?void 0:i.success))throw Error((null==i?void 0:i.message)||"API error: ".concat(l.status));return void 0!==i.data?i.data:null}},8779:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var o=t(7437),a=t(2265),s=t(9376),n=t(7128);function l(e){let{children:r}=e,{isAuthenticated:t,loading:l}=(0,n.a)(),d=(0,s.useRouter)();return((0,a.useEffect)(()=>{if(!l&&!t){let e=window.location.pathname;d.push("/login?return=".concat(encodeURIComponent(e)))}},[l,t,d]),l)?(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:(0,o.jsx)("div",{style:{width:32,height:32,border:"3px solid var(--color-border)",borderTopColor:"var(--color-accent)",borderRadius:"50%",animation:"spin 0.8s linear infinite"}})}):t?r:null}},7128:function(e,r,t){"use strict";t.d(r,{H:function(){return l},a:function(){return d}});var o=t(7437),a=t(2265),s=t(6428);let n=(0,a.createContext)(null);function l(e){let{children:r}=e,[t,l]=(0,a.useState)(null),[d,i]=(0,a.useState)(!0),c=(0,a.useRef)(!0);(0,a.useEffect)(()=>(c.current=!0,()=>{c.current=!1}),[]);let u=(0,a.useCallback)(async()=>{if(!(0,s.LP)()){c.current&&(l(null),i(!1));return}try{let e=await (0,s.SC)("/auth/session.php");if(!c.current)return;e.authenticated&&e.customer?l(e.customer):((0,s.o4)(null),l(null))}catch(e){if(!c.current)return;"AbortError"!==e.name&&console.warn("[Auth] Session check failed"),(0,s.o4)(null),l(null)}finally{c.current&&i(!1)}},[]);(0,a.useEffect)(()=>{u()},[u]);let h=(0,a.useCallback)(async(e,r)=>{try{let t=await (0,s.sg)("/auth/login.php",{email:e,senha:r});if(!c.current)return null;return(0,s.o4)(t.token),l(t.customer),t.customer}catch(e){throw console.warn("[AuthContext] Login failed:",e.message),e}},[]),m=(0,a.useCallback)(async e=>{try{let r=await (0,s.sg)("/auth/register.php",e);if(!c.current)return null;return(0,s.o4)(r.token),l(r.customer),r.customer}catch(e){throw console.warn("[AuthContext] Register failed:",e.message),e}},[]),p=(0,a.useCallback)(async e=>{try{let r=await (0,s.sg)("/auth/google.php",{credential:e});if(!c.current)return null;return(0,s.o4)(r.token),l(r.customer),r}catch(e){throw console.warn("[AuthContext] Google login failed:",e.message),e}},[]),f=(0,a.useCallback)(async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"whatsapp";try{let t={channel:r};return"email"===r?t.email=e:t.phone=e,await (0,s.sg)("/auth/send-code.php",t)}catch(e){throw console.warn("[AuthContext] Send OTP failed:",e.message),e}},[]),_=(0,a.useCallback)(async(e,r,t)=>{try{let o={phone:e,code:r};t&&(o.name=t);let a=await (0,s.sg)("/auth/verify-code.php",o);if(!c.current)return null;return(0,s.o4)(a.token),l(a.customer),a}catch(e){throw console.warn("[AuthContext] Verify OTP failed:",e.message),e}},[]),x=(0,a.useCallback)(()=>{(0,s.o4)(null),l(null)},[]),v=(0,a.useCallback)(e=>{l(r=>r?{...r,...e}:r)},[]),b=(0,a.useMemo)(()=>({customer:t,loading:d,isAuthenticated:!!t,login:h,loginWithGoogle:p,register:m,sendOtp:f,verifyOtp:_,logout:x,updateCustomer:v,refreshSession:u}),[t,d,h,p,m,f,_,x,v,u]);return(0,o.jsx)(n.Provider,{value:b,children:r})}function d(){let e=(0,a.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},7586:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return f}});var o=t(7437),a=t(2265),s=t(9376),n=t(8779),l=t(6428),d=t(383),i=t(6155),c=t.n(i);let u={label:"Casa",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",estado:"",reference:""},h=[{value:"Casa",icon:"home"},{value:"Trabalho",icon:"work"},{value:"Hotel",icon:"hotel"},{value:"Outro",icon:"other"}];function m(e){let{type:r,size:t=18}=e;return"home"===r?(0,o.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,o.jsx)("polyline",{points:"9 22 9 12 15 12 15 22"})]}):"work"===r?(0,o.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),(0,o.jsx)("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}):"hotel"===r?(0,o.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z"}),(0,o.jsx)("path",{d:"M9 22v-4h6v4"}),(0,o.jsx)("path",{d:"M8 6h.01"}),(0,o.jsx)("path",{d:"M16 6h.01"}),(0,o.jsx)("path",{d:"M12 6h.01"}),(0,o.jsx)("path",{d:"M12 10h.01"}),(0,o.jsx)("path",{d:"M12 14h.01"}),(0,o.jsx)("path",{d:"M16 10h.01"}),(0,o.jsx)("path",{d:"M16 14h.01"}),(0,o.jsx)("path",{d:"M8 10h.01"}),(0,o.jsx)("path",{d:"M8 14h.01"})]}):(0,o.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,o.jsx)("circle",{cx:"12",cy:"10",r:"3"})]})}function p(e){let{address:r,onSave:t,onClose:s,saving:n}=e,[l,i]=(0,a.useState)(u),[p,f]=(0,a.useState)(!1),_=(0,a.useRef)(!0),x=(0,a.useRef)(null),v=(0,a.useRef)(!1);(0,a.useEffect)(()=>(_.current=!0,()=>{_.current=!1}),[]),(0,a.useEffect)(()=>{r?i({label:r.label||"Casa",cep:r.cep||r.zipcode||"",logradouro:r.logradouro||r.street||"",numero:r.numero||r.number||"",complemento:r.complemento||r.complement||"",bairro:r.bairro||r.neighborhood||"",cidade:r.cidade||r.city||"",estado:r.estado||r.state||"",reference:r.reference||""}):i(u)},[r]);let b=(0,a.useCallback)(async e=>{let r=e.replace(/\D/g,"");if(8===r.length){f(!0);try{let e=await fetch("https://viacep.com.br/ws/".concat(r,"/json/")),t=await e.json();if(!_.current)return;t.erro||(i(e=>({...e,logradouro:t.logradouro||e.logradouro,bairro:t.bairro||e.bairro,cidade:t.localidade||e.cidade,estado:t.uf||e.estado})),setTimeout(()=>{x.current&&x.current.focus()},100))}catch(e){"AbortError"!==e.name&&console.warn("[AddressForm] CEP lookup failed:",e.message)}finally{_.current&&f(!1)}}},[]),g=(0,d.Dg)(l.label,l.logradouro);(0,a.useEffect)(()=>{!v.current&&"Hotel"!==l.label&&(0,d.rM)(l.logradouro)&&i(e=>({...e,label:"Hotel"}))},[l.logradouro,l.label]);let j=(0,a.useCallback)((e,r)=>{"label"===e&&((0,d.rM)(l.logradouro)&&"Hotel"!==r?v.current=!0:v.current=!1),i(t=>({...t,[e]:r}))},[l.logradouro]),y=l.logradouro.trim()&&l.numero.trim()&&l.bairro.trim()&&l.cidade.trim()&&l.estado.trim()&&(!g||l.complemento.trim()),w=[l.logradouro,l.numero?"".concat(l.numero):"",l.complemento?"- ".concat(l.complemento):""].filter(Boolean).join(", "),C=[l.bairro,l.cidade,l.estado].filter(Boolean).join(" - ");return(0,o.jsx)("div",{className:c().modalOverlay,onClick:s,role:"dialog","aria-modal":"true","aria-label":r?"Editar endereco":"Novo endereco",children:(0,o.jsxs)("div",{className:c().modal,onClick:e=>e.stopPropagation(),children:[(0,o.jsx)("div",{className:c().modalHandle,children:(0,o.jsx)("div",{className:c().modalHandleBar})}),(0,o.jsxs)("div",{className:c().modalHeader,children:[(0,o.jsx)("div",{className:c().modalTitle,children:r?"Editar endereco":"Novo endereco"}),(0,o.jsx)("button",{className:c().modalClose,onClick:s,"aria-label":"Fechar",type:"button",children:(0,o.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,o.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,o.jsxs)("form",{className:c().formBody,onSubmit:function(e){e.preventDefault(),l.logradouro.trim()&&l.numero.trim()&&l.bairro.trim()&&l.cidade.trim()&&l.estado.trim()&&(!g||l.complemento.trim())&&t({label:l.label,street:l.logradouro.trim(),number:l.numero.trim(),complement:(0,d.z1)(l.complemento,g),neighborhood:l.bairro.trim(),city:l.cidade.trim(),state:l.estado.trim().toUpperCase(),zipcode:l.cep.replace(/\D/g,""),reference:l.reference.trim()})},children:[(0,o.jsx)("div",{className:c().labelSelector,children:h.map(e=>(0,o.jsxs)("button",{type:"button",className:"".concat(c().labelOption," ").concat(l.label===e.value?c().labelOptionActive:""),onClick:()=>j("label",e.value),children:[(0,o.jsx)(m,{type:e.icon,size:16}),e.value]},e.value))}),(0,o.jsxs)("div",{className:c().formGroup,children:[(0,o.jsx)("label",{className:c().formGroupLabel,htmlFor:"addr-cep",children:"CEP"}),(0,o.jsxs)("div",{className:c().cepRow,children:[(0,o.jsx)("div",{className:c().cepInput,children:(0,o.jsx)("input",{id:"addr-cep",type:"text",className:c().formInput,value:l.cep,onChange:function(e){let r=e.target.value.replace(/\D/g,"").slice(0,8);j("cep",r.length>5?"".concat(r.slice(0,5),"-").concat(r.slice(5)):r),8===r.length&&b(r)},placeholder:"00000-000",inputMode:"numeric",maxLength:9})}),p&&(0,o.jsx)("div",{className:c().cepLoading,children:(0,o.jsx)("div",{className:c().cepSpinner})})]})]}),(0,o.jsxs)("div",{className:c().formGroup,children:[(0,o.jsx)("label",{className:"".concat(c().formGroupLabel," ").concat(c().formGroupRequired),htmlFor:"addr-street",children:"Rua"}),(0,o.jsx)("input",{id:"addr-street",type:"text",className:c().formInput,value:l.logradouro,onChange:e=>j("logradouro",e.target.value),placeholder:"Nome da rua"})]}),(0,o.jsxs)("div",{className:c().formRow,children:[(0,o.jsxs)("div",{className:c().formGroup,children:[(0,o.jsx)("label",{className:"".concat(c().formGroupLabel," ").concat(c().formGroupRequired),htmlFor:"addr-number",children:"Numero"}),(0,o.jsx)("input",{id:"addr-number",ref:x,type:"text",className:c().formInput,value:l.numero,onChange:e=>j("numero",e.target.value),placeholder:"123"})]}),(0,o.jsxs)("div",{className:c().formGroup,children:[(0,o.jsx)("label",{className:"".concat(c().formGroupLabel," ").concat(g?c().formGroupRequired:""),htmlFor:"addr-complement",children:g?"Numero do quarto":"Complemento"}),(0,o.jsx)("input",{id:"addr-complement",type:"text",className:"".concat(c().formInput," ").concat(g?c().formInputHotel:""),value:l.complemento,onChange:e=>j("complemento",e.target.value),placeholder:g?"Ex: 305":"Apto, bloco..."}),g&&(0,o.jsx)("div",{className:c().hotelHint,children:"Informe o numero do quarto para entrega"})]})]}),(0,o.jsxs)("div",{className:c().formGroup,children:[(0,o.jsx)("label",{className:"".concat(c().formGroupLabel," ").concat(c().formGroupRequired),htmlFor:"addr-neighborhood",children:"Bairro"}),(0,o.jsx)("input",{id:"addr-neighborhood",type:"text",className:c().formInput,value:l.bairro,onChange:e=>j("bairro",e.target.value),placeholder:"Bairro"})]}),(0,o.jsxs)("div",{className:c().formRow,children:[(0,o.jsxs)("div",{className:c().formGroup,children:[(0,o.jsx)("label",{className:"".concat(c().formGroupLabel," ").concat(c().formGroupRequired),htmlFor:"addr-city",children:"Cidade"}),(0,o.jsx)("input",{id:"addr-city",type:"text",className:c().formInput,value:l.cidade,onChange:e=>j("cidade",e.target.value),placeholder:"Cidade"})]}),(0,o.jsxs)("div",{className:c().formGroup,children:[(0,o.jsx)("label",{className:"".concat(c().formGroupLabel," ").concat(c().formGroupRequired),htmlFor:"addr-state",children:"Estado"}),(0,o.jsx)("input",{id:"addr-state",type:"text",className:c().formInput,value:l.estado,onChange:e=>j("estado",e.target.value.toUpperCase().slice(0,2)),placeholder:"UF",maxLength:2})]})]}),(0,o.jsxs)("div",{className:c().formGroup,children:[(0,o.jsx)("label",{className:c().formGroupLabel,htmlFor:"addr-reference",children:"Ponto de referencia"}),(0,o.jsx)("input",{id:"addr-reference",type:"text",className:c().formInput,value:l.reference,onChange:e=>j("reference",e.target.value),placeholder:"Proximo ao mercado, em frente a padaria..."})]}),(l.logradouro||l.numero)&&(0,o.jsxs)("div",{className:c().addressPreview,children:[(0,o.jsx)("div",{className:c().addressPreviewIcon,children:(0,o.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,o.jsx)("circle",{cx:"12",cy:"10",r:"3"})]})}),(0,o.jsxs)("div",{className:c().addressPreviewText,children:[w&&(0,o.jsx)("div",{children:w}),C&&(0,o.jsx)("div",{children:C}),l.cep&&(0,o.jsxs)("div",{children:["CEP: ",l.cep]})]})]}),(0,o.jsx)("button",{type:"submit",className:c().submitBtn,disabled:!y||n,children:n?"Salvando...":r?"Salvar alteracoes":"Adicionar endereco"})]})]})})}function f(){return(0,o.jsx)(n.Z,{children:(0,o.jsx)(_,{})})}function _(){let e=(0,s.useRouter)(),[r,t]=(0,a.useState)([]),[n,d]=(0,a.useState)(!0),[i,u]=(0,a.useState)(null),[h,f]=(0,a.useState)(!1),[_,x]=(0,a.useState)(null),[v,b]=(0,a.useState)(!1),[g,j]=(0,a.useState)(null),y=(0,a.useRef)(!0),w=(0,a.useRef)(null);(0,a.useEffect)(()=>(y.current=!0,()=>{y.current=!1,w.current&&clearTimeout(w.current)}),[]);let C=(0,a.useCallback)(function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";w.current&&clearTimeout(w.current),u({message:e,type:r}),w.current=setTimeout(()=>{y.current&&u(null)},3e3)},[]);async function A(e){b(!0);try{await (0,l.sg)("/addresses/list.php",{...e,is_default:0===r.length});let o=await (0,l.SC)("/addresses/list.php");y.current&&(t(o.addresses||[]),f(!1),C("Endereco adicionado!"))}catch(e){C(e.message||"Erro ao adicionar endereco","error")}finally{y.current&&b(!1)}}async function k(e){if(_){b(!0);try{await (0,l.pE)("/addresses/list.php",{address_id:_.id||_.address_id,...e});let r=await (0,l.SC)("/addresses/list.php");y.current&&(t(r.addresses||[]),x(null),C("Endereco atualizado!"))}catch(e){C(e.message||"Erro ao atualizar endereco","error")}finally{y.current&&b(!1)}}}async function N(e){j(e)}async function B(e){try{await (0,l.QW)("/addresses/list.php",{id:e}),y.current&&(t(r=>r.filter(r=>(r.id||r.address_id)!==e)),j(null),C("Endereco removido!"))}catch(e){C(e.message||"Erro ao remover endereco","error")}}async function E(e){try{let r=(0,l.LP)(),o=await fetch("/api/mercado/addresses/list.php",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({address_id:e,is_default:!0})});(await o.json()).success&&y.current&&(t(r=>r.map(r=>({...r,is_default:(r.id||r.address_id)===e}))),C("Endereco padrao atualizado!"))}catch(e){"AbortError"!==e.name&&console.warn("[Enderecos] Failed to set default address:",e.message)}}return(0,a.useEffect)(()=>{d(!0),(0,l.SC)("/addresses/list.php").then(e=>{y.current&&t(e.addresses||[])}).catch(e=>{"AbortError"!==e.name&&console.warn("[Enderecos] Failed to load addresses")}).finally(()=>{y.current&&d(!1)})},[]),(0,o.jsxs)("div",{className:c().page,children:[(0,o.jsxs)("div",{className:c().header,children:[(0,o.jsx)("button",{className:c().backBtn,onClick:()=>e.back(),"aria-label":"Voltar",type:"button",children:(0,o.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,o.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,o.jsx)("div",{className:c().title,children:"Enderecos"})]}),n&&(0,o.jsx)("div",{className:c().loader,children:(0,o.jsx)("div",{className:c().spinner})}),!n&&0===r.length&&(0,o.jsxs)("div",{className:c().emptyState,children:[(0,o.jsx)("div",{className:c().emptyIcon,children:(0,o.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,o.jsx)("circle",{cx:"12",cy:"10",r:"3"})]})}),(0,o.jsx)("div",{className:c().emptyTitle,children:"Nenhum endereco cadastrado"}),(0,o.jsx)("div",{className:c().emptyText,children:"Adicione um endereco para facilitar suas entregas"}),(0,o.jsxs)("button",{className:c().emptyBtn,onClick:()=>f(!0),type:"button",children:[(0,o.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,o.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Adicionar endereco"]})]}),!n&&r.length>0&&(0,o.jsxs)("div",{className:c().addressList,children:[r.map(e=>{var r;let t=e.id||e.address_id,a=e.is_default,s=g===t;return(0,o.jsxs)("div",{className:"".concat(c().addressCard," ").concat(a?c().addressCardDefault:""),children:[(0,o.jsxs)("div",{className:c().addressCardBody,onClick:()=>!a&&E(t),role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||a||(e.preventDefault(),E(t))},"aria-label":a?"".concat(e.label," - endereco padrao"):"Definir ".concat(e.label," como padrao"),children:[(0,o.jsx)("div",{className:"".concat(c().labelIcon," ").concat(function(e){let r=(e||"").toLowerCase();return"casa"===r||"home"===r?c().labelIconCasa:"trabalho"===r||"work"===r?c().labelIconTrabalho:"hotel"===r?c().labelIconHotel:c().labelIconOutro}(e.label)),children:(0,o.jsx)(m,{type:function(e){let r=(e||"").toLowerCase();return"casa"===r||"home"===r?"home":"trabalho"===r||"work"===r?"work":"hotel"===r?"hotel":"other"}(e.label),size:22})}),(0,o.jsxs)("div",{className:c().addressInfo,children:[(0,o.jsxs)("div",{className:c().addressLabelRow,children:[(0,o.jsx)("span",{className:c().addressLabel,children:e.label||"Endereco"}),a&&(0,o.jsxs)("span",{className:c().defaultBadge,children:[(0,o.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:(0,o.jsx)("polyline",{points:"20 6 9 17 4 12"})}),"Padrao"]})]}),(0,o.jsx)("div",{className:c().addressStreet,children:e.formatted||function(e){let r=e.street||e.logradouro||"",t=e.number||e.numero||"",o=e.complement||e.complemento||"",a=[r,t].filter(Boolean).join(", ");return o?"".concat(a," - ").concat(o):a}(e)}),(0,o.jsx)("div",{className:c().addressCity,children:[(r=e).neighborhood||r.bairro||"",r.city||r.cidade||"",r.state||r.estado||""].filter(Boolean).join(" - ")}),e.reference&&(0,o.jsx)("div",{className:c().addressReference,children:e.reference})]})]}),s&&(0,o.jsxs)("div",{className:c().deleteConfirm,children:[(0,o.jsx)("div",{className:c().deleteConfirmText,children:"Tem certeza que deseja excluir este endereco?"}),(0,o.jsxs)("div",{className:c().deleteConfirmActions,children:[(0,o.jsx)("button",{className:c().deleteConfirmCancel,onClick:()=>j(null),type:"button",children:"Cancelar"}),(0,o.jsx)("button",{className:c().deleteConfirmBtn,onClick:()=>B(t),type:"button",children:"Excluir"})]})]}),!s&&(0,o.jsxs)("div",{className:c().cardActions,children:[!a&&(0,o.jsxs)("button",{className:"".concat(c().actionBtn," ").concat(c().actionBtnDefault),onClick:()=>E(t),type:"button","aria-label":"Definir como padrao",children:[(0,o.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),"Padrao"]}),(0,o.jsxs)("button",{className:"".concat(c().actionBtn," ").concat(c().actionBtnEdit),onClick:()=>x(e),type:"button","aria-label":"Editar endereco",children:[(0,o.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,o.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Editar"]}),(0,o.jsxs)("button",{className:"".concat(c().actionBtn," ").concat(c().actionBtnDelete),onClick:()=>N(t),type:"button","aria-label":"Excluir endereco",children:[(0,o.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,o.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),"Excluir"]})]})]},t)}),(0,o.jsxs)("button",{className:c().addBtn,onClick:()=>f(!0),type:"button",children:[(0,o.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,o.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Adicionar endereco"]})]}),h&&(0,o.jsx)(p,{address:null,onSave:A,onClose:()=>f(!1),saving:v}),_&&(0,o.jsx)(p,{address:_,onSave:k,onClose:()=>x(null),saving:v}),i&&(0,o.jsx)("div",{className:"".concat(c().toast," ").concat("error"===i.type?c().toastError:c().toastSuccess),children:i.message})]})}},383:function(e,r,t){"use strict";t.d(r,{Dg:function(){return s},rM:function(){return a},z1:function(){return n}});let o=["hotel","pousada","hostel","motel","resort","apart hotel","apart-hotel","aparthotel","flat","albergue","hospedaria","pensao","inn"];function a(e){if(!e||"string"!=typeof e)return!1;let r=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return o.some(e=>r.includes(e))}function s(e,r){return"Hotel"===e||a(r)}function n(e,r){if(!r||!e||!e.trim())return(e||"").trim();let t=e.trim();return/^quarto\s/i.test(t)?t:/^\d+[a-zA-Z]?$/.test(t)?"Quarto ".concat(t):t}},9376:function(e,r,t){"use strict";var o=t(5475);t.o(o,"usePathname")&&t.d(r,{usePathname:function(){return o.usePathname}}),t.o(o,"useRouter")&&t.d(r,{useRouter:function(){return o.useRouter}}),t.o(o,"useSearchParams")&&t.d(r,{useSearchParams:function(){return o.useSearchParams}})},257:function(e,r,t){"use strict";var o,a;e.exports=(null==(o=t.g.process)?void 0:o.env)&&"object"==typeof(null==(a=t.g.process)?void 0:a.env)?t.g.process:t(4227)},4227:function(e){!function(){var r={229:function(e){var r,t,o,a=e.exports={};function s(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{t="function"==typeof clearTimeout?clearTimeout:n}catch(e){t=n}}();var d=[],i=!1,c=-1;function u(){i&&o&&(i=!1,o.length?d=o.concat(d):c=-1,d.length&&h())}function h(){if(!i){var e=l(u);i=!0;for(var r=d.length;r;){for(o=d,d=[];++c<r;)o&&o[c].run();c=-1,r=d.length}o=null,i=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===n||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(r){try{return t.call(null,e)}catch(r){return t.call(this,e)}}}(e)}}function m(e,r){this.fun=e,this.array=r}function p(){}a.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];d.push(new m(e,r)),1!==d.length||i||l(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=p,a.addListener=p,a.once=p,a.off=p,a.removeListener=p,a.removeAllListeners=p,a.emit=p,a.prependListener=p,a.prependOnceListener=p,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},t={};function o(e){var a=t[e];if(void 0!==a)return a.exports;var s=t[e]={exports:{}},n=!0;try{r[e](s,s.exports,o),n=!1}finally{n&&delete t[e]}return s.exports}o.ab="//";var a=o(229);e.exports=a}()},6155:function(e){e.exports={page:"Address_page__3HY7r",header:"Address_header__Wrjiu",backBtn:"Address_backBtn__yYhus",title:"Address_title__0X5ab",addressList:"Address_addressList__GU7qY",addressCard:"Address_addressCard__kMnTd",addressCardDefault:"Address_addressCardDefault__kWfZb",addressCardBody:"Address_addressCardBody__EOXDE",labelIcon:"Address_labelIcon__IQGhL",labelIconCasa:"Address_labelIconCasa__lQqkW",labelIconTrabalho:"Address_labelIconTrabalho__41pym",labelIconOutro:"Address_labelIconOutro___WuF2",labelIconHotel:"Address_labelIconHotel__ubRiX",formInputHotel:"Address_formInputHotel__mHWhB",hotelHint:"Address_hotelHint__VbLPN",addressInfo:"Address_addressInfo__lQr8a",addressLabelRow:"Address_addressLabelRow__O1219",addressLabel:"Address_addressLabel__Bu0qL",defaultBadge:"Address_defaultBadge__wC9W4",addressStreet:"Address_addressStreet__WoEFM",addressCity:"Address_addressCity__DFxl2",addressReference:"Address_addressReference__FTgDI",cardActions:"Address_cardActions__RSxKc",actionBtn:"Address_actionBtn__mz_Y3",actionBtnDefault:"Address_actionBtnDefault__jJHu3",actionBtnEdit:"Address_actionBtnEdit__yfEM4",actionBtnDelete:"Address_actionBtnDelete__1Th6V",addBtn:"Address_addBtn__WyC8l",emptyState:"Address_emptyState__1_S_q",emptyIcon:"Address_emptyIcon__a3WrX",emptyTitle:"Address_emptyTitle__YqZ8s",emptyText:"Address_emptyText__R2PGj",emptyBtn:"Address_emptyBtn__8txSD",modalOverlay:"Address_modalOverlay___wWht",fadeIn:"Address_fadeIn__AK1BI",modal:"Address_modal__n6b_Z",slideUp:"Address_slideUp__5A_Zv",modalSlide:"Address_modalSlide__A8msl",modalHandle:"Address_modalHandle__KjKcq",modalHandleBar:"Address_modalHandleBar__cHt5u",modalHeader:"Address_modalHeader__mR248",modalTitle:"Address_modalTitle__PxwUf",modalClose:"Address_modalClose__HI2MY",formBody:"Address_formBody__R16Pk",labelSelector:"Address_labelSelector__Np_kj",labelOption:"Address_labelOption__tFn_Z",labelOptionActive:"Address_labelOptionActive__7O9Pu",formGroup:"Address_formGroup__AbKA5",formGroupLabel:"Address_formGroupLabel___ds2J",formGroupRequired:"Address_formGroupRequired__YW0mr",formInput:"Address_formInput__u8KdX",formRow:"Address_formRow__cBMD0",cepRow:"Address_cepRow__iHj2t",cepInput:"Address_cepInput__ece2i",cepLoading:"Address_cepLoading__z3kg8",cepSpinner:"Address_cepSpinner__lquEt",spin:"Address_spin__fYmiH",addressPreview:"Address_addressPreview__iq0p4",addressPreviewIcon:"Address_addressPreviewIcon__frKfb",addressPreviewText:"Address_addressPreviewText__jvoS_",submitBtn:"Address_submitBtn__5UHw_",toast:"Address_toast__Uyq6f",toastSlide:"Address_toastSlide__DUl9R",toastSuccess:"Address_toastSuccess__s9j9l",toastError:"Address_toastError__LsTdQ",loader:"Address_loader__DTyo8",spinner:"Address_spinner__zY4Ah",deleteConfirm:"Address_deleteConfirm__LyHg6",deleteConfirmText:"Address_deleteConfirmText__TN2R0",deleteConfirmActions:"Address_deleteConfirmActions__mgBbC",deleteConfirmCancel:"Address_deleteConfirmCancel__NppcR",deleteConfirmBtn:"Address_deleteConfirmBtn__H0aaP"}}},function(e){e.O(0,[8591,2971,2117,1744],function(){return e(e.s=7848)}),_N_E=e.O()}]);