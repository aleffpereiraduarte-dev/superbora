(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6521],{4223:function(e,r,t){Promise.resolve().then(t.bind(t,1516))},1516:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return w}});var a=t(7437),o=t(2265),i=t(9376),s=t(7648),n=t(9146),l=t(7128);let c=(0,o.createContext)(null),d="superbora_saved_items";function m(e,r){let t;switch(r.type){case"ADD_ITEM":{let{item:a}=r.payload;if(e.items.some(e=>e.id===a.id&&e.partnerId===a.partnerId))return e;t={items:[...e.items,{...a,savedAt:Date.now()}]};break}case"REMOVE_ITEM":{let{id:a,partnerId:o}=r.payload;t={items:e.items.filter(e=>!(e.id===a&&(!o||e.partnerId===o)))};break}case"CLEAR":t={items:[]};break;case"HYDRATE":return r.payload;default:return e}return!function(e){try{localStorage.setItem(d,JSON.stringify(e))}catch(e){console.warn("[SavedItems] Failed to save to localStorage")}}(t),t}function p(e){let{children:r}=e,[t,i]=(0,o.useReducer)(m,{items:[]});(0,o.useEffect)(()=>{i({type:"HYDRATE",payload:function(){try{let e=localStorage.getItem(d);if(e){let r=JSON.parse(e);if(Array.isArray(r))return{items:r};return r}}catch(e){console.warn("[SavedItems] Failed to load from localStorage")}return{items:[]}}()})},[]);let s=(0,o.useCallback)(e=>{i({type:"ADD_ITEM",payload:{item:e}})},[]),n=(0,o.useCallback)((e,r)=>{i({type:"REMOVE_ITEM",payload:{id:e,partnerId:r}})},[]),l=(0,o.useCallback)((e,r)=>t.items.some(t=>t.id===e&&(!r||t.partnerId===r)),[t.items]),p=(0,o.useCallback)(()=>{i({type:"CLEAR"})},[]);return(0,a.jsx)(c.Provider,{value:{savedItems:t.items,addToSaved:s,removeFromSaved:n,isSaved:l,clearSaved:p},children:r})}function u(){let e=(0,o.useContext)(c);if(!e)throw Error("useSavedItems must be used within SavedItemsProvider");return e}var h=t(6428),_=t(7650),v=t(3904),x=t(964),g=t.n(x);function f(){let{savedItems:e,removeFromSaved:r}=u(),{addItem:t}=(0,n.iQ)();return 0===e.length?null:(0,a.jsxs)("div",{className:g().container,children:[(0,a.jsxs)("div",{className:g().header,children:[(0,a.jsxs)("div",{className:g().title,children:[(0,a.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Salvos para depois"]}),(0,a.jsx)("span",{className:g().count,children:e.length})]}),(0,a.jsx)("div",{className:g().items,children:e.map(e=>{let o=e.preco_promo&&e.preco_promo>0&&e.preco_promo<e.preco?e.preco_promo:e.preco,i=e.preco_promo&&e.preco_promo>0&&e.preco_promo<e.preco;return(0,a.jsxs)("div",{className:g().item,children:[e.imagem&&(0,a.jsx)("img",{src:e.imagem,alt:e.nome||"Produto salvo",className:g().itemImage}),(0,a.jsxs)("div",{className:g().itemInfo,children:[(0,a.jsx)("div",{className:g().itemName,children:e.nome}),e.partnerName&&(0,a.jsx)("div",{className:g().itemStore,children:e.partnerName}),(0,a.jsxs)("div",{className:g().itemPriceRow,children:[(0,a.jsx)("span",{className:g().itemPrice,children:(0,_.o_)(o)}),i&&(0,a.jsx)("span",{className:g().itemOrigPrice,children:(0,_.o_)(e.preco)})]})]}),(0,a.jsxs)("div",{className:g().itemActions,children:[(0,a.jsxs)("button",{className:g().moveBtn,onClick:()=>{t({id:e.id,nome:e.nome,preco:e.preco,preco_promo:e.preco_promo,imagem:e.imagem,unidade:e.unidade,selectedOptions:e.selectedOptions||[]},e.partnerId,e.partnerName),r(e.id,e.partnerId)},title:"Mover para carrinho",children:[(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"9",cy:"21",r:"1"}),(0,a.jsx)("circle",{cx:"20",cy:"21",r:"1"}),(0,a.jsx)("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),(0,a.jsx)("span",{children:"Mover"})]}),(0,a.jsx)("button",{className:g().removeBtn,onClick:()=>{r(e.id,e.partnerId)},title:"Remover",children:(0,a.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,a.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]},"".concat(e.id,"-").concat(e.partnerId))})})]})}var j=t(4972),y=t.n(j);function b(e){for(let r in e){let t=e[r];if(t&&t.surge_active&&t.surge_multiplier>1)return{active:!0,multiplier:t.surge_multiplier,reason:t.surge_reason||"Alta demanda"}}return{active:!1,multiplier:1,reason:null}}let S=[{label:"Sem",value:0},{label:"R$ 2",value:2},{label:"R$ 5",value:5},{label:"R$ 10",value:10}],N=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00"];function k(e,r){let t=r[String(e)];return t?{deliveryFee:t.taxa_entrega||5.99,freeDeliveryAbove:t.entrega_gratis_acima,minOrder:t.pedido_minimo||0,loaded:!0}:{deliveryFee:5.99,freeDeliveryAbove:null,minOrder:0,loaded:!1}}function C(e){let{partnerId:r,store:t,getItemPrice:i,removeItem:s,setItemQty:n,updateItemNote:l,clearStore:c,storeConfigs:d,onSaveForLater:m}=e,[p,u]=(0,o.useState)(null),h=t.items.reduce((e,r)=>e+(r.preco_promo&&r.preco_promo>0&&r.preco_promo<r.preco?r.preco_promo:r.preco)*r.quantity,0),v=t.items.reduce((e,r)=>e+r.quantity,0),x=k(r,d),g=null!==x.freeDeliveryAbove&&x.freeDeliveryAbove>0,f=g&&h>=x.freeDeliveryAbove,j=f?0:x.deliveryFee,b=x.minOrder>0&&h<x.minOrder,S=x.minOrder>0?Math.max(0,x.minOrder-h):0,N=g&&x.freeDeliveryAbove>0?Math.min(100,h/x.freeDeliveryAbove*100):0,C=g?Math.max(0,x.freeDeliveryAbove-h):0;return(0,a.jsxs)("div",{className:y().section,children:[(0,a.jsxs)("div",{className:y().storeHeader,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:y().sectionTitle,style:{marginBottom:2},children:t.partnerName}),(0,a.jsxs)("div",{style:{fontSize:12,color:"var(--color-text-muted)"},children:[v," ",1===v?"item":"itens"," - Subtotal: ",(0,_.o_)(h),0===j?(0,a.jsx)("span",{style:{color:"var(--color-accent)",marginLeft:8,fontWeight:600},children:"Entrega gratis"}):(0,a.jsxs)("span",{style:{marginLeft:8},children:["+ Entrega ",(0,_.o_)(j)]})]})]}),(0,a.jsx)("button",{onClick:()=>{window.confirm("Remover todos os itens de ".concat(t.partnerName,"?"))&&c(r)},style:{fontSize:12,color:"var(--color-danger)",cursor:"pointer",background:"none",border:"none",padding:"4px 8px"},"aria-label":"Remover loja ".concat(t.partnerName),children:"Remover loja"})]}),g&&!f&&(0,a.jsxs)("div",{style:{padding:"8px 10px",marginBottom:8,borderRadius:"var(--radius-sm)",background:"#f0fdf4",fontSize:12},children:[(0,a.jsxs)("div",{style:{color:"#15803d",marginBottom:4},children:["Falta ",(0,_.o_)(C)," para entrega gratis nesta loja"]}),(0,a.jsx)("div",{style:{height:4,background:"#dcfce7",borderRadius:2,overflow:"hidden"},children:(0,a.jsx)("div",{style:{height:"100%",background:"var(--color-accent)",borderRadius:2,transition:"width 0.3s ease",width:"".concat(N,"%")}})})]}),b&&(0,a.jsxs)("div",{style:{padding:"8px 10px",marginBottom:8,borderRadius:"var(--radius-sm)",background:"#fef3c7",border:"1px solid #fde68a",fontSize:12,color:"#92400e",display:"flex",alignItems:"center",gap:6},children:[(0,a.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),(0,a.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,a.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),"Pedido minimo: ",(0,_.o_)(x.minOrder)," - faltam ",(0,_.o_)(S)]}),t.items.map(e=>{let o=i(e),c=e.preco_promo&&e.preco_promo>0&&e.preco_promo<e.preco,d=e.cartKey||e.id;return(0,a.jsxs)("div",{className:y().item,children:[e.imagem&&(0,a.jsx)("img",{src:e.imagem,alt:e.nome||"Produto no carrinho",className:y().itemImage}),(0,a.jsxs)("div",{className:y().itemInfo,children:[(0,a.jsx)("div",{className:y().itemName,children:e.nome}),e.selectedOptions&&e.selectedOptions.length>0&&(0,a.jsx)("div",{style:{fontSize:12,color:"var(--color-text-muted)",lineHeight:1.4,marginTop:2},children:e.selectedOptions.map(e=>e.name).join(", ")}),e.unidade&&(0,a.jsx)("div",{className:y().itemUnit,children:e.unidade}),(0,a.jsxs)("div",{className:y().itemBottom,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:y().itemPrice,children:(0,_.o_)(o*e.quantity)}),c&&(0,a.jsx)("span",{className:y().itemOrigPrice,children:(0,_.o_)(e.preco*e.quantity)})]}),(0,a.jsxs)("div",{className:y().qtyControls,children:[(0,a.jsx)("button",{className:"".concat(y().qtyBtn," ").concat(1===e.quantity?y().qtyBtnDanger:""),onClick:()=>1===e.quantity?s(e.id,parseInt(r)):n(e.id,e.quantity-1,parseInt(r)),children:1===e.quantity?(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,a.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}):"-"}),(0,a.jsx)("span",{className:y().qtyValue,children:e.quantity}),(0,a.jsx)("button",{className:y().qtyBtn,onClick:()=>n(e.id,e.quantity+1,parseInt(r)),children:"+"})]})]}),e.notes&&p!==e.id?(0,a.jsx)("div",{style:{marginTop:6},children:(0,a.jsxs)("div",{onClick:()=>u(e.id),style:{padding:"6px 10px",background:"#fef9c3",borderRadius:"var(--radius-sm)",fontSize:12,color:"#854d0e",cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:[(0,a.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,a.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Obs: ",e.notes]})}):p===e.id?(0,a.jsxs)("div",{style:{marginTop:6,display:"flex",gap:6},children:[(0,a.jsx)("input",{type:"text",defaultValue:e.notes||"",placeholder:"Ex: sem cebola, bem passado...",maxLength:200,autoFocus:!0,onKeyDown:t=>{"Enter"===t.key&&(l(e.id,t.target.value.trim(),parseInt(r)),u(null))},style:{flex:1,padding:"6px 10px",border:"1px solid var(--color-accent)",borderRadius:"var(--radius-sm)",fontSize:12,outline:"none"}}),(0,a.jsx)("button",{onClick:t=>{let a=t.target.closest("div").querySelector("input");l(e.id,a.value.trim(),parseInt(r)),u(null)},style:{padding:"6px 12px",background:"var(--color-accent)",color:"#fff",borderRadius:"var(--radius-sm)",fontSize:12,fontWeight:600,whiteSpace:"nowrap"},children:"OK"}),(0,a.jsx)("button",{onClick:()=>u(null),style:{padding:"6px 8px",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",fontSize:12,color:"var(--color-text-muted)"},children:"X"})]}):(0,a.jsxs)("button",{onClick:()=>u(e.id),style:{marginTop:6,fontSize:12,color:"var(--color-accent)",fontWeight:500,display:"flex",alignItems:"center",gap:4,cursor:"pointer",background:"none",border:"none",padding:0},children:[(0,a.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,a.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Adicionar observacao"]}),(0,a.jsxs)("button",{onClick:()=>m&&m(e,parseInt(r),t.partnerName),style:{marginTop:6,fontSize:11,color:"var(--color-text-secondary)",fontWeight:500,display:"flex",alignItems:"center",gap:4,cursor:"pointer",background:"none",border:"none",padding:0},title:"Salvar para depois",children:[(0,a.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Salvar para depois"]})]})]},d)})]})}function B(){var e;let r=(0,i.useRouter)(),{stores:t,subtotal:c,count:d,storeCount:m,removeItem:p,setItemQty:x,updateItemNote:g,clearCart:j,clearStore:B,getItemPrice:w}=(0,n.iQ)(),{isAuthenticated:I}=(0,l.a)(),{addToSaved:L,savedItems:O}=u(),[F,R]=(0,o.useState)("asap"),[D,T]=(0,o.useState)(""),[A,q]=(0,o.useState)(""),[E,M]=(0,o.useState)(0),[z,P]=(0,o.useState)(""),[W,V]=(0,o.useState)(null),[H,J]=(0,o.useState)(""),[K,G]=(0,o.useState)(!1),[X,U]=(0,o.useState)({}),[Q,Y]=(0,o.useState)(!1),[Z,$]=(0,o.useState)({}),[ee,er]=(0,o.useState)({}),[et,ea]=(0,o.useState)(!1);function eo(e,r,t){L({id:e.id,nome:e.nome,preco:e.preco,preco_promo:e.preco_promo,imagem:e.imagem,unidade:e.unidade,selectedOptions:e.selectedOptions||[],partnerId:r,partnerName:t}),p(e.id,r)}let ei=function(){let e=[],r=new Date;for(let t=0;t<7;t++){let a=new Date(r);a.setDate(a.getDate()+t),e.push({value:a.toISOString().split("T")[0],label:0===t?"Hoje":1===t?"Amanha":a.toLocaleDateString("pt-BR",{weekday:"short",day:"numeric",month:"short"})})}return e}(),es=(0,o.useMemo)(()=>Object.keys(t),[t]),en=es.join(",");(0,o.useEffect)(()=>{if(0===es.length){U({});return}let e=es.filter(e=>!X[e]);if(0===e.length)return;let r=!1;return Y(!0),(0,h.SC)("/parceiros/delivery-config.php",{ids:e.join(",")}).then(e=>{r||U(r=>({...r,...e}))}).catch(e=>{console.warn("Failed to fetch store delivery configs:",e.message)}).finally(()=>{r||Y(!1)}),()=>{r=!0}},[en]),(0,o.useEffect)(()=>{if(0===es.length){er({}),$({});return}let e=!1;ea(!0);let r=0,t=0;try{let e=JSON.parse(localStorage.getItem("superbora_location")||"{}");r=e.lat||0,t=e.lng||0}catch(e){console.warn("[Cart] Failed to parse location from localStorage")}return Promise.all(es.map(e=>(0,h.SC)("/vitrine/delivery-options.php",{partner_id:e,lat:r,lng:t}).then(r=>({partnerId:e,data:r})).catch(()=>({partnerId:e,data:null})))).then(r=>{if(e)return;let t={},a={...Z};r.forEach(e=>{let{partnerId:r,data:o}=e;o&&o.options&&(t[r]=o.options,a[r]||(a[r]=o.default_option||"standard"))}),er(t),$(a);try{localStorage.setItem("superbora_delivery_options",JSON.stringify(t)),localStorage.setItem("superbora_delivery_methods",JSON.stringify(a))}catch(e){console.warn("[Cart] Failed to save delivery options to localStorage")}}).finally(()=>{e||ea(!1)}),()=>{e=!0}},[en]);let el=(0,o.useMemo)(()=>Object.keys(t).reduce((e,r)=>{let a=t[r].items.reduce((e,r)=>e+(r.preco_promo&&r.preco_promo>0&&r.preco_promo<r.preco?r.preco_promo:r.preco)*r.quantity,0);return e+function(e,r){let t=Z[e]||"standard",a=ee[e];if("pickup"===t)return 0;if(a&&a[t]){let e=a[t];return e.free_above&&e.free_above>0&&r>=e.free_above?0:e.fee||0}let o=k(e,X);return null!==o.freeDeliveryAbove&&o.freeDeliveryAbove>0&&r>=o.freeDeliveryAbove?0:o.deliveryFee}(r,a)},0),[t,X,ee,Z]),ec=(0,o.useMemo)(()=>{let e=[];return Object.entries(t).forEach(r=>{let[t,a]=r,o=k(t,X);if(o.minOrder<=0)return;let i=a.items.reduce((e,r)=>e+(r.preco_promo&&r.preco_promo>0&&r.preco_promo<r.preco?r.preco_promo:r.preco)*r.quantity,0);i<o.minOrder&&e.push({partnerId:t,partnerName:a.partnerName,minOrder:o.minOrder,subtotal:i,remaining:o.minOrder-i})}),e},[t,X]),ed=(null==W?void 0:W.free_delivery)?0:el,em=(null==W?void 0:W.desconto)||0,ep=Math.max(0,parseFloat((c+ed+2.49+E-em).toFixed(2))),eu=I?parseFloat((.05*ep).toFixed(2)):0;(0,o.useEffect)(()=>{try{localStorage.setItem("superbora_tip",String(E))}catch(e){console.warn("[Cart] Failed to save tip")}},[E]),(0,o.useEffect)(()=>{try{let e=(null==W?void 0:W.codigo)||"";localStorage.setItem("superbora_coupon",e)}catch(e){console.warn("[Cart] Failed to save coupon")}},[W]),(0,o.useEffect)(()=>{try{"scheduled"===F&&D&&A?localStorage.setItem("superbora_schedule",JSON.stringify({date:D,time:A})):localStorage.removeItem("superbora_schedule")}catch(e){console.warn("[Cart] Failed to save schedule")}},[F,D,A]);let eh=(0,o.useMemo)(()=>{let e=Object.keys(t).map(e=>k(e,X).freeDeliveryAbove).filter(e=>null!==e&&e>0);if(0===e.length)return null;let r=Math.max(...e);return{threshold:r,progress:Math.min(100,c/r*100),remaining:Math.max(0,r-c),allFree:c>=r}},[t,X,c]);async function e_(){if(z.trim()){J(""),G(!0);try{let e=Object.keys(t)[0],r=await (0,h.sg)("/carrinho/cupom.php",{code:z,partner_id:e?parseInt(e):null,subtotal:c,cart_items_count:d});V(r)}catch(e){J(e.message),V(null)}finally{G(!1)}}}return 0===d?(0,a.jsx)("div",{className:y().page,children:(0,a.jsxs)("div",{className:y().empty,children:[(0,a.jsx)("div",{className:y().emptyIcon,children:(0,a.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"9",cy:"21",r:"1"}),(0,a.jsx)("circle",{cx:"20",cy:"21",r:"1"}),(0,a.jsx)("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]})}),(0,a.jsx)("div",{className:y().emptyTitle,children:"Seu carrinho esta vazio"}),(0,a.jsx)("div",{className:y().emptyText,children:"Adicione produtos de uma loja para comecar"}),(0,a.jsx)(s.default,{href:"/",className:y().emptyBtn,children:"Ver lojas"})]})}):(0,a.jsxs)("div",{className:y().page,children:[(0,a.jsxs)("div",{className:y().header,children:[(0,a.jsx)("button",{className:y().backBtn,onClick:()=>r.back(),"aria-label":"Voltar",children:(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:y().title,children:"Carrinho"}),m>1&&(0,a.jsxs)("div",{className:y().partnerName,children:[m," lojas - ",d," itens"]}),1===m&&(0,a.jsx)("div",{className:y().partnerName,children:null===(e=Object.values(t)[0])||void 0===e?void 0:e.partnerName})]})]}),eh&&!eh.allFree?(0,a.jsxs)("div",{className:y().freeBar,children:[(0,a.jsxs)("div",{className:y().freeBarText,children:["Falta ",(0,_.o_)(eh.remaining)," para entrega gratis"]}),(0,a.jsx)("div",{className:y().freeBarTrack,children:(0,a.jsx)("div",{className:y().freeBarFill,style:{width:"".concat(eh.progress,"%")}})})]}):eh&&eh.allFree?(0,a.jsx)("div",{className:y().freeBar,children:(0,a.jsx)("div",{className:y().freeBarDone,children:"Voce ganhou entrega gratis!"})}):0===ed?(0,a.jsx)("div",{className:y().freeBar,children:(0,a.jsx)("div",{className:y().freeBarDone,children:"Entrega gratis!"})}):null,m>1&&(0,a.jsxs)("div",{style:{padding:"10px 14px",marginBottom:12,borderRadius:"var(--radius-sm)",background:"#eff6ff",border:"1px solid #bfdbfe",fontSize:13,color:"#1e40af",display:"flex",alignItems:"center",gap:8},children:[(0,a.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,a.jsx)("polyline",{points:"9 22 9 12 15 12 15 22"})]}),"Seu pedido sera separado em ",m," entregas (uma por loja), cada uma com sua taxa."]}),b(X).active&&(0,a.jsxs)("div",{style:{padding:"10px 14px",marginBottom:12,borderRadius:"var(--radius-sm)",background:"#fef2f2",border:"1px solid #fecaca",fontSize:13,color:"#991b1b",display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),(0,a.jsxs)("div",{style:{flex:1},children:[(0,a.jsx)("div",{style:{fontWeight:600},children:"Taxa de entrega aumentada devido a alta demanda"}),(0,a.jsx)("div",{style:{fontSize:11,marginTop:2,color:"#b91c1c"},children:b(X).reason})]}),(0,a.jsxs)("div",{style:{background:"#dc2626",color:"#fff",borderRadius:"var(--radius-sm)",padding:"4px 10px",fontWeight:700,fontSize:14,whiteSpace:"nowrap"},children:[b(X).multiplier,"x"]})]}),Object.entries(t).map(e=>{let[r,t]=e;return(0,a.jsx)(C,{partnerId:r,store:t,getItemPrice:w,removeItem:p,setItemQty:x,updateItemNote:g,clearStore:B,storeConfigs:X,onSaveForLater:eo},r)}),(0,a.jsx)(f,{}),Object.keys(t).map(e=>(0,a.jsxs)("div",{className:y().section,children:[m>1&&(0,a.jsx)("div",{style:{fontSize:12,color:"var(--color-text-muted)",marginBottom:8},children:t[e].partnerName}),(0,a.jsx)(v.Z,{options:ee[e],selected:Z[e]||"standard",onSelect:r=>(function(e,r){$(t=>({...t,[e]:r}));try{let t={...Z,[e]:r};localStorage.setItem("superbora_delivery_methods",JSON.stringify(t)),localStorage.setItem("superbora_delivery_options",JSON.stringify(ee))}catch(e){console.warn("[Cart] Failed to save delivery method to localStorage")}})(e,r),subtotal:t[e].items.reduce((e,r)=>e+(r.preco_promo&&r.preco_promo>0&&r.preco_promo<r.preco?r.preco_promo:r.preco)*r.quantity,0),loading:et})]},"delivery-".concat(e))),(0,a.jsxs)("div",{className:y().section,children:[(0,a.jsx)("div",{className:y().sectionTitle,children:"Quando receber?"}),(0,a.jsxs)("div",{className:y().slots,children:[(0,a.jsxs)("button",{className:"".concat(y().slot," ").concat("asap"===F?y().slotActive:""),onClick:()=>R("asap"),children:[(0,a.jsx)("div",{className:y().slotLabel,children:"O mais rapido"}),(0,a.jsx)("div",{className:y().slotTime,children:"30-50 min"})]}),(0,a.jsxs)("button",{className:"".concat(y().slot," ").concat("scheduled"===F?y().slotActive:""),onClick:()=>{R("scheduled"),D||T(ei[0].value)},children:[(0,a.jsx)("div",{className:y().slotLabel,children:"Agendar"}),(0,a.jsx)("div",{className:y().slotTime,children:"Escolher data/hora"})]})]}),"scheduled"===F&&(0,a.jsxs)("div",{style:{marginTop:12},children:[(0,a.jsxs)("div",{style:{marginBottom:8},children:[(0,a.jsx)("div",{style:{fontSize:13,fontWeight:500,marginBottom:6,color:"var(--color-text-secondary)"},children:"Data"}),(0,a.jsx)("div",{style:{display:"flex",gap:6,overflowX:"auto",paddingBottom:4},children:ei.map(e=>(0,a.jsx)("button",{onClick:()=>T(e.value),style:{padding:"8px 14px",borderRadius:"var(--radius-sm)",border:D===e.value?"2px solid var(--color-accent)":"1px solid var(--color-border)",background:D===e.value?"#f0fdf4":"transparent",fontSize:13,fontWeight:D===e.value?600:400,whiteSpace:"nowrap",cursor:"pointer"},children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{fontSize:13,fontWeight:500,marginBottom:6,color:"var(--color-text-secondary)"},children:"Horario"}),(0,a.jsx)("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:N.map(e=>(0,a.jsx)("button",{onClick:()=>q(e),style:{padding:"8px 12px",borderRadius:"var(--radius-sm)",border:A===e?"2px solid var(--color-accent)":"1px solid var(--color-border)",background:A===e?"#f0fdf4":"transparent",fontSize:13,fontWeight:A===e?600:400,cursor:"pointer"},children:e},e))})]}),D&&A&&(0,a.jsxs)("div",{style:{marginTop:8,padding:"8px 12px",background:"#f0fdf4",borderRadius:"var(--radius-sm)",fontSize:13,color:"var(--color-accent)",fontWeight:500},children:["Entrega agendada para ",new Date(D+"T00:00:00").toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})," as ",A]})]})]}),(0,a.jsxs)("div",{className:y().section,children:[(0,a.jsx)("div",{className:y().sectionTitle,children:"Gorjeta para o entregador"}),(0,a.jsx)("div",{className:y().tips,children:S.map(e=>(0,a.jsx)("button",{className:"".concat(y().tipBtn," ").concat(E===e.value?y().tipActive:""),onClick:()=>M(e.value),children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:y().section,children:[(0,a.jsx)("div",{className:y().sectionTitle,children:"Cupom de desconto"}),W?(0,a.jsxs)("div",{className:y().couponSuccess,children:[(0,a.jsxs)("span",{children:[W.codigo," - ",W.descricao]}),(0,a.jsx)("button",{className:y().couponRemove,onClick:()=>{V(null),P("")},children:"Remover"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:y().couponRow,children:[(0,a.jsx)("input",{type:"text",value:z,onChange:e=>P(e.target.value.toUpperCase()),className:y().couponInput,placeholder:"Codigo do cupom"}),(0,a.jsx)("button",{className:y().couponBtn,onClick:e_,disabled:K||!z.trim(),children:K?"...":"Aplicar"})]}),H&&(0,a.jsx)("div",{className:y().couponError,children:H})]})]}),(0,a.jsxs)("div",{className:y().section,children:[(0,a.jsx)("div",{className:y().sectionTitle,children:"Resumo"}),(0,a.jsxs)("div",{className:y().summaryRow,children:[(0,a.jsxs)("span",{children:["Subtotal (",d," itens)"]}),(0,a.jsx)("span",{children:(0,_.o_)(c)})]}),(0,a.jsxs)("div",{className:y().summaryRow,children:[(0,a.jsxs)("span",{children:["Taxa de entrega ",m>1?"(".concat(m," lojas)"):"",b(X).active&&(0,a.jsxs)("span",{style:{marginLeft:6,fontSize:11,color:"#dc2626",fontWeight:600},children:[b(X).multiplier,"x"]})]}),(0,a.jsx)("span",{children:0===ed?"Gratis":(0,_.o_)(ed)})]}),m>1&&ed>0&&(0,a.jsx)("div",{style:{paddingLeft:12,paddingBottom:4},children:Object.entries(t).map(e=>{let[r,t]=e,o=k(r,X),i=t.items.reduce((e,r)=>e+(r.preco_promo&&r.preco_promo>0&&r.preco_promo<r.preco?r.preco_promo:r.preco)*r.quantity,0),s=null!==o.freeDeliveryAbove&&o.freeDeliveryAbove>0&&i>=o.freeDeliveryAbove?0:o.deliveryFee;return(0,a.jsxs)("div",{style:{fontSize:12,color:"var(--color-text-muted)",padding:"2px 0"},children:[t.partnerName,": ",0===s?"Gratis":(0,_.o_)(s)]},r)})}),(0,a.jsxs)("div",{className:y().summaryRow,children:[(0,a.jsx)("span",{children:"Taxa de servico"}),(0,a.jsx)("span",{children:(0,_.o_)(2.49)})]}),E>0&&(0,a.jsxs)("div",{className:y().summaryRow,children:[(0,a.jsx)("span",{children:"Gorjeta"}),(0,a.jsx)("span",{children:(0,_.o_)(E)})]}),em>0&&(0,a.jsxs)("div",{className:"".concat(y().summaryRow," ").concat(y().summaryDiscount),children:[(0,a.jsx)("span",{children:"Desconto cupom"}),(0,a.jsxs)("span",{children:["-",(0,_.o_)(em)]})]}),(0,a.jsxs)("div",{className:y().summaryTotal,children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsx)("span",{children:(0,_.o_)(ep)})]}),eu>0&&(0,a.jsxs)("div",{className:y().cashback,children:["Voce ganha ",(0,_.o_)(eu)," de cashback neste pedido"]})]}),(0,a.jsx)("button",{className:y().cta,onClick:function(){if(!I){r.push("/login?return=/checkout");return}ec.length>0||r.push("/checkout")},disabled:ec.length>0,children:ec.length>0?"Pedido abaixo do minimo":"Ir para o pagamento - ".concat((0,_.o_)(ep))})]})}function w(){return(0,a.jsx)(p,{children:(0,a.jsx)(B,{})})}},4972:function(e){e.exports={page:"Cart_page__u2TJh",header:"Cart_header__DnUen",backBtn:"Cart_backBtn__NrPyA",title:"Cart_title__sK19a",partnerName:"Cart_partnerName__o7yJk",section:"Cart_section__OKdhO",sectionTitle:"Cart_sectionTitle__rd1Ef",storeHeader:"Cart_storeHeader__MnYnO",item:"Cart_item__XxL4W",itemImage:"Cart_itemImage__SoDjw",itemInfo:"Cart_itemInfo__8u6fs",itemName:"Cart_itemName__B0MWC",itemUnit:"Cart_itemUnit__Eyjk1",itemBottom:"Cart_itemBottom__7yMuj",itemPrice:"Cart_itemPrice__ec3Zo",itemOrigPrice:"Cart_itemOrigPrice__g0KFt",qtyControls:"Cart_qtyControls__t04R1",qtyBtn:"Cart_qtyBtn__GVmyU",qtyBtnBounce:"Cart_qtyBtnBounce__DjBbP",cartQtyBounce:"Cart_cartQtyBounce__tHbtt",qtyBtnDanger:"Cart_qtyBtnDanger__hgNBv",qtyValue:"Cart_qtyValue__ajE7b",qtyValuePop:"Cart_qtyValuePop__MZCkl",freeBar:"Cart_freeBar__XWueI",freeBarText:"Cart_freeBarText__WKgND",freeBarTrack:"Cart_freeBarTrack__GwISz",freeBarFill:"Cart_freeBarFill__OA3FG",freeBarDone:"Cart_freeBarDone__5OvDX",freeBarGlow:"Cart_freeBarGlow__VoRBx",slots:"Cart_slots__7f2b1",slot:"Cart_slot__fxKN5",slotActive:"Cart_slotActive__2MSYX",slotLabel:"Cart_slotLabel__chK7w",slotTime:"Cart_slotTime__BtynX",tips:"Cart_tips__RJDdr",tipBtn:"Cart_tipBtn__f7heA",tipActive:"Cart_tipActive__pDFyT",couponRow:"Cart_couponRow__SFplR",couponInput:"Cart_couponInput__B3KhC",couponBtn:"Cart_couponBtn__X3hTs",couponSuccess:"Cart_couponSuccess__nfDPy",couponRemove:"Cart_couponRemove__Pm0pL",couponError:"Cart_couponError__lPtUe",summaryRow:"Cart_summaryRow__jtO0l",summaryDiscount:"Cart_summaryDiscount__jIntF",summaryTotal:"Cart_summaryTotal__YPTqf",cashback:"Cart_cashback__hhKUc",cta:"Cart_cta__geg2q",ctaShine:"Cart_ctaShine__BiSy5",empty:"Cart_empty__6fq_4",emptyIcon:"Cart_emptyIcon__rtvqy",emptyTitle:"Cart_emptyTitle__waDI4",emptyText:"Cart_emptyText__wkdwd",emptyBtn:"Cart_emptyBtn__XSmEk"}},964:function(e){e.exports={container:"SavedForLater_container__XRJms",header:"SavedForLater_header__FsOba",title:"SavedForLater_title__p7KqJ",count:"SavedForLater_count__DzhwG",items:"SavedForLater_items__uLurA",item:"SavedForLater_item__Up_k_",itemImage:"SavedForLater_itemImage__cIesh",itemInfo:"SavedForLater_itemInfo__to_CI",itemName:"SavedForLater_itemName__S9mGF",itemStore:"SavedForLater_itemStore__9NZmS",itemPriceRow:"SavedForLater_itemPriceRow__uzhfU",itemPrice:"SavedForLater_itemPrice__qXT8D",itemOrigPrice:"SavedForLater_itemOrigPrice__at_w_",itemActions:"SavedForLater_itemActions__fCihe",moveBtn:"SavedForLater_moveBtn__1YhIC",removeBtn:"SavedForLater_removeBtn__7XtwH",empty:"SavedForLater_empty__PzcbR",emptyIcon:"SavedForLater_emptyIcon__Gr07n",emptyText:"SavedForLater_emptyText__LO_ZK"}}},function(e){e.O(0,[9252,7648,9938,0,2971,2117,1744],function(){return e(e.s=4223)}),_N_E=e.O()}]);