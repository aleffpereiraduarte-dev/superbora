(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2115],{1729:function(e,s,a){Promise.resolve().then(a.bind(a,8172))},8172:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return h}});var l=a(7437),i=a(2265),n=a(9376),t=a(8779),c=a(6428),r=a(1564),o=a.n(r);let d={"shopping-bag":"\uD83D\uDECD️",star:"⭐",award:"\uD83C\uDFC6",trophy:"\uD83C\uDFC6",crown:"\uD83D\uDC51",diamond:"\uD83D\uDC8E",flame:"\uD83D\uDD25",zap:"⚡",fire:"\uD83D\uDD25",medal:"\uD83C\uDFC5","message-square":"\uD83D\uDCAC",camera:"\uD83D\uDCF8",moon:"\uD83C\uDF19",sunrise:"\uD83C\uDF05",calendar:"\uD83D\uDCC5","credit-card":"\uD83D\uDCB3",gem:"\uD83D\uDC8E",heart:"❤️"};function u(e){let{badges:s=[],showProgress:a=!0,filter:n=null}=e,[t,c]=(0,i.useState)(null),[r,u]=(0,i.useState)({x:0,y:0}),m=(0,i.useCallback)((e,s)=>{let a=e.currentTarget.getBoundingClientRect(),l=a.left+a.width/2,i=a.top-10;c(s),u({x:l,y:i})},[]),v=(0,i.useCallback)(()=>{c(null)},[]),h=n?s.filter(e=>e.category===n):s;return 0===h.length?(0,l.jsxs)("div",{className:o().emptyState,children:[(0,l.jsx)("div",{className:o().emptyIcon,children:"\uD83C\uDF96️"}),(0,l.jsx)("div",{className:o().emptyText,children:"Nenhuma conquista nesta categoria"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:o().badgeGrid,children:h.map(e=>(0,l.jsxs)("div",{className:"".concat(o().badgeItem," ").concat(e.earned?o().badgeItemEarned:o().badgeItemLocked),onMouseEnter:s=>m(s,e),onMouseLeave:v,onTouchStart:s=>m(s,e),onTouchEnd:v,children:[(0,l.jsx)("div",{className:o().badgeIcon,children:d[e.icon]||"\uD83C\uDFC6"}),(0,l.jsx)("div",{className:o().badgeName,children:e.name}),e.earned&&(0,l.jsx)("div",{className:o().badgeCheck,children:(0,l.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:(0,l.jsx)("polyline",{points:"20 6 9 17 4 12"})})}),!e.earned&&a&&e.progress>0&&(0,l.jsx)("div",{className:o().badgeProgress,children:(0,l.jsx)("div",{className:o().badgeProgressFill,style:{width:"".concat(e.progress,"%")}})})]},e.id))}),t&&(0,l.jsxs)("div",{className:o().badgeTooltip,style:{left:r.x,top:r.y,transform:"translate(-50%, -100%)"},children:[(0,l.jsxs)("div",{className:o().badgeTooltipTitle,children:[d[t.icon]||"\uD83C\uDFC6"," ",t.name]}),(0,l.jsx)("div",{className:o().badgeTooltipDesc,children:t.description}),t.points_reward>0&&(0,l.jsxs)("div",{className:o().badgeTooltipReward,children:["+",t.points_reward," pontos"]}),!t.earned&&t.progress_text&&(0,l.jsxs)("div",{className:o().badgeTooltipProgress,children:["Progresso: ",t.progress_text]}),t.earned&&t.earned_at&&(0,l.jsxs)("div",{className:o().badgeTooltipProgress,children:["Conquistado em ",new Date(t.earned_at).toLocaleDateString("pt-BR")]})]})]})}var m=a(2563),v=a(1314);function h(){return(0,l.jsx)(t.Z,{children:(0,l.jsx)(x,{})})}function x(){let e=(0,n.useRouter)(),[s,a]=(0,i.useState)(null),[t,r]=(0,i.useState)(!0),[d,h]=(0,i.useState)("all");(0,i.useEffect)(()=>{(0,c.SC)("/vitrine/gamification.php").then(a).catch(e=>console.error("Failed to load gamification:",e)).finally(()=>r(!1))},[]);let x=(0,i.useMemo)(()=>{var e;if(!(null==s?void 0:null===(e=s.badges)||void 0===e?void 0:e.by_category))return[];let a=[];return Object.values(s.badges.by_category).forEach(e=>{a.push(...e.badges)}),a},[s]),g=(0,i.useMemo)(()=>{var e;return(null==s?void 0:null===(e=s.badges)||void 0===e?void 0:e.by_category)?[{id:"all",name:"Todas"},...Object.entries(s.badges.by_category).map(e=>{let[s,a]=e;return{id:s,name:a.name}})]:[]},[s]),j=(0,i.useMemo)(()=>"all"===d?x:x.filter(e=>e.category===d),[x,d]);return t?(0,l.jsx)("div",{className:o().conquistas,children:(0,l.jsx)("div",{className:o().loading,children:(0,l.jsx)("div",{className:o().spinner})})}):s?(0,l.jsxs)("div",{className:o().conquistas,children:[(0,l.jsxs)("div",{className:o().conquistasHeader,children:[(0,l.jsx)("button",{className:o().backBtn,onClick:()=>e.back(),"aria-label":"Voltar",children:(0,l.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,l.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,l.jsx)("div",{className:o().conquistasTitle,children:"Conquistas"})]}),(0,l.jsxs)("div",{className:o().conquistasSummary,children:[(0,l.jsxs)("div",{className:o().conquistasSummaryCard,children:[(0,l.jsx)("div",{className:o().conquistasSummaryIcon,children:s.level.icon}),(0,l.jsx)("div",{className:o().conquistasSummaryValue,children:s.level.name}),(0,l.jsx)("div",{className:o().conquistasSummaryLabel,children:"Seu nivel"})]}),(0,l.jsxs)("div",{className:o().conquistasSummaryCard,children:[(0,l.jsx)("div",{className:o().conquistasSummaryIcon,children:"\uD83C\uDFC6"}),(0,l.jsxs)("div",{className:o().conquistasSummaryValue,children:[s.badges.total_earned,"/",s.badges.total_available]}),(0,l.jsx)("div",{className:o().conquistasSummaryLabel,children:"Conquistas"})]}),(0,l.jsxs)("div",{className:o().conquistasSummaryCard,children:[(0,l.jsx)("div",{className:o().conquistasSummaryIcon,children:"\uD83D\uDCB0"}),(0,l.jsx)("div",{className:o().conquistasSummaryValue,children:s.points.total.toLocaleString("pt-BR")}),(0,l.jsx)("div",{className:o().conquistasSummaryLabel,children:"Pontos"})]})]}),(0,l.jsx)(v.Z,{streak:s.streak}),(0,l.jsx)("div",{className:o().card,style:{marginBottom:24},children:(0,l.jsxs)("div",{className:o().cardBody,children:[(0,l.jsxs)("div",{className:o().levelRow,children:[(0,l.jsx)("div",{className:o().levelBadge,style:{background:"linear-gradient(135deg, ".concat(s.level.color,"40, ").concat(s.level.color,"20)"),border:"2px solid ".concat(s.level.color)},children:s.level.icon}),(0,l.jsxs)("div",{className:o().levelInfo,children:[(0,l.jsx)("div",{className:o().levelName,children:s.level.name}),(0,l.jsxs)("div",{className:o().levelPoints,children:[s.points.total.toLocaleString("pt-BR")," pontos totais"]})]})]}),(0,l.jsx)(m.Z,{level:s.level,points:s.points,nextLevel:s.next_level})]})}),(0,l.jsx)("div",{className:o().categoryTabs,children:g.map(e=>(0,l.jsx)("button",{className:"".concat(o().categoryTab," ").concat(d===e.id?o().categoryTabActive:""),onClick:()=>h(e.id),children:e.name},e.id))}),(0,l.jsx)(u,{badges:j,showProgress:!0}),(0,l.jsx)("div",{style:{height:80}})]}):(0,l.jsxs)("div",{className:o().conquistas,children:[(0,l.jsxs)("div",{className:o().conquistasHeader,children:[(0,l.jsx)("button",{className:o().backBtn,onClick:()=>e.back(),"aria-label":"Voltar",children:(0,l.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,l.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,l.jsx)("div",{className:o().conquistasTitle,children:"Conquistas"})]}),(0,l.jsxs)("div",{className:o().emptyState,children:[(0,l.jsx)("div",{className:o().emptyIcon,children:"\uD83C\uDFAE"}),(0,l.jsx)("div",{className:o().emptyText,children:"Nao foi possivel carregar suas conquistas"})]})]})}}},function(e){e.O(0,[2361,638,2971,2117,1744],function(){return e(e.s=1729)}),_N_E=e.O()}]);