(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{4467:function(e,t,n){Promise.resolve().then(n.bind(n,382))},6428:function(e,t,n){"use strict";n.d(t,{LP:function(){return l},QW:function(){return h},SC:function(){return s},o4:function(){return c},pE:function(){return d},sg:function(){return u}}),n(257);let a="/api/mercado",o="superbora_token";function r(){return window.location.origin}function l(){try{return localStorage.getItem(o)}catch(e){return null}}function c(e){try{e?localStorage.setItem(o,e):localStorage.removeItem(o)}catch(e){}}function i(){let e=l();return e?{Authorization:"Bearer ".concat(e)}:{}}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:o}=n,l=new URL(a+e,r());Object.entries(t).forEach(e=>{let[t,n]=e;null!=n&&""!==n&&l.searchParams.set(t,n)});let c=await fetch(l.toString(),{credentials:"include",headers:i(),signal:o});if(!c.ok){let e=await c.json().catch(()=>null);throw Error((null==e?void 0:e.message)||"API error: ".concat(c.status))}let s=await c.json().catch(()=>null);if(!s||!s.success)throw Error((null==s?void 0:s.message)||"Erro desconhecido na API");return void 0!==s.data?s.data:null}async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:o}=n,l=new URL(a+e,r()),c=await fetch(l.toString(),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",...i()},body:JSON.stringify(t),signal:o}),s=await c.json().catch(()=>null);if(!c.ok||!(null==s?void 0:s.success))throw Error((null==s?void 0:s.message)||"API error: ".concat(c.status));return void 0!==s.data?s.data:null}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:o}=n,l=new URL(a+e,r()),c=await fetch(l.toString(),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",...i()},body:JSON.stringify(t),signal:o}),s=await c.json().catch(()=>null);if(!c.ok||!(null==s?void 0:s.success))throw Error((null==s?void 0:s.message)||"API error: ".concat(c.status));return void 0!==s.data?s.data:null}async function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{signal:o}=n,l=new URL(a+e,r());Object.entries(t).forEach(e=>{let[t,n]=e;null!=n&&""!==n&&l.searchParams.set(t,n)});let c=await fetch(l.toString(),{method:"DELETE",credentials:"include",headers:i(),signal:o}),s=await c.json().catch(()=>null);if(!c.ok||!(null==s?void 0:s.success))throw Error((null==s?void 0:s.message)||"API error: ".concat(c.status));return void 0!==s.data?s.data:null}},7128:function(e,t,n){"use strict";n.d(t,{H:function(){return c},a:function(){return i}});var a=n(7437),o=n(2265),r=n(6428);let l=(0,o.createContext)(null);function c(e){let{children:t}=e,[n,c]=(0,o.useState)(null),[i,s]=(0,o.useState)(!0),u=(0,o.useRef)(!0);(0,o.useEffect)(()=>(u.current=!0,()=>{u.current=!1}),[]);let d=(0,o.useCallback)(async()=>{if(!(0,r.LP)()){u.current&&(c(null),s(!1));return}try{let e=await (0,r.SC)("/auth/session.php");if(!u.current)return;e.authenticated&&e.customer?c(e.customer):((0,r.o4)(null),c(null))}catch(e){if(!u.current)return;"AbortError"!==e.name&&console.warn("[Auth] Session check failed"),(0,r.o4)(null),c(null)}finally{u.current&&s(!1)}},[]);(0,o.useEffect)(()=>{d()},[d]);let h=(0,o.useCallback)(async(e,t)=>{try{let n=await (0,r.sg)("/auth/login.php",{email:e,senha:t});if(!u.current)return null;return(0,r.o4)(n.token),c(n.customer),n.customer}catch(e){throw console.warn("[AuthContext] Login failed:",e.message),e}},[]),p=(0,o.useCallback)(async e=>{try{let t=await (0,r.sg)("/auth/register.php",e);if(!u.current)return null;return(0,r.o4)(t.token),c(t.customer),t.customer}catch(e){throw console.warn("[AuthContext] Register failed:",e.message),e}},[]),m=(0,o.useCallback)(async e=>{try{let t=await (0,r.sg)("/auth/google.php",{credential:e});if(!u.current)return null;return(0,r.o4)(t.token),c(t.customer),t}catch(e){throw console.warn("[AuthContext] Google login failed:",e.message),e}},[]),g=(0,o.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"whatsapp";try{let n={channel:t};return"email"===t?n.email=e:n.phone=e,await (0,r.sg)("/auth/send-code.php",n)}catch(e){throw console.warn("[AuthContext] Send OTP failed:",e.message),e}},[]),f=(0,o.useCallback)(async(e,t,n)=>{try{let a={phone:e,code:t};n&&(a.name=n);let o=await (0,r.sg)("/auth/verify-code.php",a);if(!u.current)return null;return(0,r.o4)(o.token),c(o.customer),o}catch(e){throw console.warn("[AuthContext] Verify OTP failed:",e.message),e}},[]),v=(0,o.useCallback)(()=>{(0,r.o4)(null),c(null)},[]),x=(0,o.useCallback)(e=>{c(t=>t?{...t,...e}:t)},[]),b=(0,o.useMemo)(()=>({customer:n,loading:i,isAuthenticated:!!n,login:h,loginWithGoogle:m,register:p,sendOtp:g,verifyOtp:f,logout:v,updateCustomer:x,refreshSession:d}),[n,i,h,m,p,g,f,v,x,d]);return(0,a.jsx)(l.Provider,{value:b,children:t})}function i(){let e=(0,o.useContext)(l);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},495:function(e,t,n){"use strict";n.d(t,{F:function(){return u},v:function(){return s}});var a=n(7437),o=n(2265);let r=(0,o.createContext)(null),l="superbora_location";function c(e){try{localStorage.setItem(l,JSON.stringify(e))}catch(e){console.warn("[Location] Failed to save location to localStorage")}}async function i(e,t,n){if("number"!=typeof e||"number"!=typeof t||!Number.isFinite(e)||!Number.isFinite(t))return null;try{var a;let o=await fetch("https://nominatim.openstreetmap.org/reverse?lat=".concat(e,"&lon=").concat(t,"&format=json&addressdetails=1&accept-language=pt-BR"),{headers:{"User-Agent":"SuperBora/1.0"},signal:n}),r=await o.json();if(r.error)return null;let l=r.address||{},c=l.road||l.pedestrian||l.footway||"",i=l.house_number||"",s=l.suburb||l.neighbourhood||l.quarter||"",u=l.city||l.town||l.village||l.municipality||"",d=l.state||"",h=(l.postcode||"").replace(/\D/g,""),p={"Sao Paulo":"SP","Rio de Janeiro":"RJ","Minas Gerais":"MG",Bahia:"BA",Parana:"PR","Rio Grande do Sul":"RS",Pernambuco:"PE",Ceara:"CE",Para:"PA","Santa Catarina":"SC",Goias:"GO",Maranhao:"MA",Amazonas:"AM","Espirito Santo":"ES",Paraiba:"PB","Rio Grande do Norte":"RN","Mato Grosso":"MT",Alagoas:"AL",Piaui:"PI","Distrito Federal":"DF","Mato Grosso do Sul":"MS",Sergipe:"SE",Rondonia:"RO",Tocantins:"TO",Acre:"AC",Amapa:"AP",Roraima:"RR"}[d]||d.slice(0,2).toUpperCase(),m=[c,i].filter(Boolean).join(", ")||(null===(a=r.display_name)||void 0===a?void 0:a.split(",")[0])||"Localizacao atual",g=u?"".concat(u,"/").concat(p):p;return{endereco:m,bairro:s,cidade:g,cep:h,displayName:r.display_name||""}}catch(e){return e.name,null}}function s(e){let{children:t}=e,[n,s]=(0,o.useState)({cep:"",endereco:"",bairro:"",cidade:"",lat:null,lng:null,source:""}),[u,d]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!0),[m,g]=(0,o.useState)(""),f=(0,o.useRef)(!0),v=(0,o.useRef)(!1),x=(0,o.useRef)(null),[b,y]=(0,o.useState)("");(0,o.useEffect)(()=>{f.current=!0;let e=function(){try{let e=localStorage.getItem(l);if(e)return JSON.parse(e)}catch(e){console.warn("[Location] Failed to load location from localStorage")}return null}();if(e&&e.cidade)s(e),("cep"===e.source||"gps"===e.source)&&(v.current=!0),p(!1);else{let e=new AbortController;return fetch("/api/mercado/geolocate.php",{signal:e.signal}).then(e=>e.json()).then(e=>{if(f.current&&!v.current&&e.success&&e.data){let t=e.data,n={cep:"",endereco:"",bairro:"",cidade:t.city&&t.state?"".concat(t.city,"/").concat(t.state):"",lat:t.lat||null,lng:t.lng||null,source:"ip"};s(n),c(n),t.city&&y("".concat(t.city,"/").concat(t.state))}}).catch(e=>{"AbortError"!==e.name&&console.warn("[Location] IP geolocation failed:",e)}).finally(()=>{f.current&&p(!1)}),()=>{f.current=!1,e.abort()}}return()=>{f.current=!1}},[]);let D=(0,o.useCallback)(e=>{v.current=!0,s(e),c(e)},[]),j=(0,o.useCallback)(async e=>{let t=e.replace(/\D/g,"");if(8!==t.length)return null;d(!0),g("");try{let e=await fetch("https://viacep.com.br/ws/".concat(t,"/json/"));if(!f.current)return null;if(!e.ok)throw Error("CEP lookup failed");let n=await e.json();if(!f.current)return null;if(n.erro)throw Error("CEP not found");let a={cep:t,endereco:n.logradouro||"",bairro:n.bairro||"",cidade:"".concat(n.localidade,"/").concat(n.uf),lat:null,lng:null,source:"cep"};return D(a),a}catch(e){if(!f.current)return null;return console.warn("[Location] CEP lookup failed:",e.message),null}finally{f.current&&d(!1)}},[D]),C=(0,o.useCallback)(()=>{if(!navigator.geolocation){g("Geolocalizacao nao suportada neste navegador");return}d(!0),g(""),f.current&&navigator.geolocation.getCurrentPosition(async e=>{if(!f.current)return;if(!e||!e.coords){f.current&&(d(!1),g("Dados de localizacao invalidos."));return}let{latitude:t,longitude:n}=e.coords;if("number"!=typeof t||"number"!=typeof n||isNaN(t)||isNaN(n)){f.current&&(d(!1),g("Coordenadas invalidas."));return}if(!f.current)return;x.current&&x.current.abort(),x.current=new AbortController;let a=await i(t,n,x.current.signal);if(!f.current)return;let o={lat:t,lng:n,cep:(null==a?void 0:a.cep)||"",endereco:(null==a?void 0:a.endereco)||"Localizacao atual",bairro:(null==a?void 0:a.bairro)||"",cidade:(null==a?void 0:a.cidade)||"",source:"gps"};f.current&&(D(o),d(!1))},e=>{if(f.current)switch(d(!1),e.code){case e.PERMISSION_DENIED:g("Permissao de localizacao negada. Habilite nas configuracoes do navegador.");break;case e.POSITION_UNAVAILABLE:g("Localizacao indisponivel no momento.");break;case e.TIMEOUT:g("Tempo esgotado ao buscar localizacao.");break;default:g("Erro ao obter localizacao.")}},{enableHighAccuracy:!0,timeout:15e3,maximumAge:6e4})},[D]),_=(0,o.useCallback)(()=>{s({cep:"",endereco:"",bairro:"",cidade:"",lat:null,lng:null,source:""}),g("");try{localStorage.removeItem(l)}catch(e){console.warn("[Location] Failed to clear location from localStorage")}},[]);return(0,a.jsx)(r.Provider,{value:{...n,loading:u,initializing:h,gpsError:m,detectedCity:b,setLocation:D,lookupCep:j,getGeoLocation:C,clearLocation:_,hasLocation:!!(n.cep||n.lat||n.cidade),isGps:"gps"===n.source,isIp:"ip"===n.source},children:t})}function u(){let e=(0,o.useContext)(r);if(!e)throw Error("useLocationContext must be used within LocationProvider");return e}},382:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var a=n(7437),o=n(2265),r=n(9376),l=n(7128),c=n(7648),i=n(3510),s=n.n(i);let u="CHANGE_ME";function d(){return(0,a.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",children:[(0,a.jsx)("path",{d:"M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844a4.14 4.14 0 0 1-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z",fill:"#4285F4"}),(0,a.jsx)("path",{d:"M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 0 0 9 18z",fill:"#34A853"}),(0,a.jsx)("path",{d:"M3.964 10.71A5.41 5.41 0 0 1 3.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.997 8.997 0 0 0 0 9c0 1.452.348 2.827.957 4.042l3.007-2.332z",fill:"#FBBC05"}),(0,a.jsx)("path",{d:"M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 0 0 .957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z",fill:"#EA4335"})]})}function h(e){let{onSuccess:t,label:n}=e,{loginWithGoogle:r}=(0,l.a)(),[c,i]=(0,o.useState)(!1),[h,p]=(0,o.useState)(""),[m,g]=(0,o.useState)(!1),f=(0,o.useCallback)(async e=>{if(null==e?void 0:e.credential){p(""),i(!0);try{await r(e.credential),null==t||t()}catch(e){p(e.message)}finally{i(!1)}}},[r,t]);return((0,o.useEffect)(()=>{var e,t;if(!u)return;let n=!0;if(null===(t=window.google)||void 0===t?void 0:null===(e=t.accounts)||void 0===e?void 0:e.id){g(!0);return}let a=document.getElementById("google-gsi-script");if(a){let e=()=>{n&&g(!0)};return a.addEventListener("load",e),()=>{n=!1,a.removeEventListener("load",e)}}let o=document.createElement("script");o.id="google-gsi-script",o.src="https://accounts.google.com/gsi/client",o.async=!0,o.defer=!0;let r=()=>{n&&g(!0)};return o.addEventListener("load",r),document.head.appendChild(o),()=>{n=!1,o.removeEventListener("load",r)}},[]),(0,o.useEffect)(()=>{var e,t;m&&u&&(null===(t=window.google)||void 0===t?void 0:null===(e=t.accounts)||void 0===e?void 0:e.id)&&window.google.accounts.id.initialize({client_id:u,callback:f,auto_select:!1,cancel_on_tap_outside:!0})},[m,f]),u)?(0,a.jsxs)("div",{children:[h&&(0,a.jsx)("div",{className:s().error,children:h}),(0,a.jsx)("button",{type:"button",className:s().googleBtn,onClick:function(){var e,t;if(!u){p("Google Sign-In nao configurado");return}if(!(null===(t=window.google)||void 0===t?void 0:null===(e=t.accounts)||void 0===e?void 0:e.id)){p("Carregando Google Sign-In...");return}window.google.accounts.id.prompt(e=>{(e.isNotDisplayed()||e.isSkippedMoment())&&window.google.accounts.oauth2.initCodeClient({client_id:u,scope:"email profile",ux_mode:"popup",callback:f})})},disabled:c,children:c?(0,a.jsx)("span",{className:s().googleBtnLoading,children:"Conectando..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d,{}),(0,a.jsx)("span",{children:n||"Continuar com Google"})]})})]}):null}function p(e){let t=e.replace(/\D/g,"");if(t.length<6)return e;let n=t.slice(0,2),a=t.slice(-4);return"(".concat(n,") ****-").concat(a)}function m(e){let{onSuccess:t}=e,{login:n,sendOtp:r,verifyOtp:c}=(0,l.a)(),[i,u]=(0,o.useState)("email"),[d,m]=(0,o.useState)(""),[g,f]=(0,o.useState)(""),[v,x]=(0,o.useState)(""),[b,y]=(0,o.useState)(["","","","","",""]),[D,j]=(0,o.useState)(!1),[C,_]=(0,o.useState)(0),[A,w]=(0,o.useState)(""),[N,S]=(0,o.useState)(""),[k,E]=(0,o.useState)(""),[L,B]=(0,o.useState)(!1),I=(0,o.useRef)([]),P=(0,o.useRef)(null);async function T(e){if(e.preventDefault(),E(""),!d.trim()){E("Digite seu email");return}if(!g){E("Digite sua senha");return}B(!0);try{await n(d,g),null==t||t()}catch(e){E(e.message)}finally{B(!1)}}async function R(e){e.preventDefault(),E("");let t=v.replace(/\D/g,"");if(t.length<10||t.length>11){E("Telefone invalido. Use DDD + numero");return}B(!0);try{let e=await r(t);w(e.channel||"whatsapp"),S(e.phone||p(v)),_(60),j(!0),y(["","","","","",""]),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{var e;return null===(e=I.current[0])||void 0===e?void 0:e.focus()},100)}catch(e){E(e.message)}finally{B(!1)}}async function F(){E(""),B(!0);try{var e;let t=v.replace(/\D/g,""),n=await r(t);w(n.channel||"whatsapp"),S(n.phone||p(v)),_(60),y(["","","","","",""]),null===(e=I.current[0])||void 0===e||e.focus()}catch(e){E(e.message)}finally{B(!1)}}async function M(e){e.preventDefault(),E("");let n=b.join("");if(6!==n.length){E("Digite o codigo de 6 digitos");return}B(!0);try{let e=v.replace(/\D/g,"");await c(e,n),null==t||t()}catch(e){E(e.message)}finally{B(!1)}}function z(e){u(e),E(""),j(!1),y(["","","","","",""])}return(0,o.useEffect)(()=>{if(C<=0)return;let e=setTimeout(()=>_(e=>e-1),1e3);return()=>clearTimeout(e)},[C]),(0,o.useEffect)(()=>()=>{P.current&&clearTimeout(P.current)},[]),(0,a.jsxs)("div",{children:[(0,a.jsx)(h,{onSuccess:t}),(0,a.jsxs)("div",{className:s().divider,children:[(0,a.jsx)("span",{className:s().dividerLine}),(0,a.jsx)("span",{className:s().dividerText,children:"ou"}),(0,a.jsx)("span",{className:s().dividerLine})]}),(0,a.jsxs)("div",{className:s().methodToggle,children:[(0,a.jsxs)("button",{type:"button",className:"".concat(s().methodBtn," ").concat("email"===i?s().methodBtnActive:""),onClick:()=>z("email"),children:[(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),(0,a.jsx)("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),"Email"]}),(0,a.jsxs)("button",{type:"button",className:"".concat(s().methodBtn," ").concat("phone"===i?s().methodBtnActive:""),onClick:()=>z("phone"),children:[(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}),(0,a.jsx)("path",{d:"M12 18h.01"})]}),"Celular"]})]}),k&&(0,a.jsx)("div",{className:s().error,children:k}),"email"===i&&(0,a.jsxs)("form",{onSubmit:T,className:s().form,children:[(0,a.jsxs)("label",{className:s().label,children:["Email",(0,a.jsx)("input",{type:"email",value:d,onChange:e=>m(e.target.value),className:s().input,placeholder:"seu@email.com",required:!0,autoComplete:"email"})]}),(0,a.jsxs)("label",{className:s().label,children:["Senha",(0,a.jsx)("input",{type:"password",value:g,onChange:e=>f(e.target.value),className:s().input,placeholder:"Sua senha",required:!0,minLength:6,autoComplete:"current-password",spellCheck:"false"})]}),(0,a.jsx)("button",{type:"submit",className:s().button,disabled:L,children:L?"Entrando...":"Entrar"})]}),"phone"===i&&!D&&(0,a.jsxs)("form",{onSubmit:R,className:s().form,children:[(0,a.jsxs)("label",{className:s().label,children:["Numero do celular",(0,a.jsx)("input",{type:"tel",value:v,onChange:e=>x(function(e){let t=e.replace(/\D/g,"").slice(0,11);return t.length<=2?t:t.length<=7?"(".concat(t.slice(0,2),") ").concat(t.slice(2)):"(".concat(t.slice(0,2),") ").concat(t.slice(2,7),"-").concat(t.slice(7))}(e.target.value)),className:s().input,placeholder:"(33) 99999-9999",required:!0,autoFocus:!0})]}),(0,a.jsx)("p",{className:s().otpHint,children:"Vamos enviar um codigo de verificacao via WhatsApp"}),(0,a.jsx)("button",{type:"submit",className:s().button,disabled:L,children:L?"Enviando...":"Enviar codigo"})]}),"phone"===i&&D&&(0,a.jsxs)("form",{onSubmit:M,className:s().form,children:[(0,a.jsx)("button",{type:"button",className:s().stepBack,onClick:()=>{j(!1),E("")},children:"← Alterar numero"}),(0,a.jsxs)("div",{className:s().otpInfo,children:["Codigo enviado via"," ",(0,a.jsx)("span",{className:s().otpChannel,children:"sms"===A?"SMS":"WhatsApp"})," ","para"," ",(0,a.jsx)("span",{className:s().otpPhone,children:N})]}),(0,a.jsx)("div",{className:s().otpContainer,onPaste:function(e){var t;e.preventDefault();let n=e.clipboardData||window.clipboardData;if(!n)return;let a=n.getData("text").replace(/\D/g,"").slice(0,6);if(!a.length)return;let o=[...b];for(let e=0;e<a.length&&e<6;e++)o[e]=a[e];y(o),null===(t=I.current[Math.min(a.length,5)])||void 0===t||t.focus()},role:"group","aria-label":"Codigo de verificacao",children:b.map((e,t)=>(0,a.jsx)("input",{ref:e=>I.current[t]=e,type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:e=>(function(e,t){let n=t.replace(/\D/g,"").slice(-1);if(y(t=>{let a=[...t];return a[e]=n,a}),n&&e<5){var a;null===(a=I.current[e+1])||void 0===a||a.focus()}})(t,e.target.value),onKeyDown:e=>(function(e,t){if("Backspace"===t.key&&!b[e]&&e>0){var n;null===(n=I.current[e-1])||void 0===n||n.focus()}})(t,e),className:s().otpInput,autoFocus:0===t,"aria-label":"Digito ".concat(t+1," de 6")},t))}),(0,a.jsx)("div",{className:s().timer,children:C>0?"Reenviar em ".concat(C,"s"):(0,a.jsx)("button",{type:"button",className:s().resendBtn,onClick:F,disabled:L,children:"Reenviar codigo"})}),(0,a.jsx)("button",{type:"submit",className:s().button,disabled:L,children:L?"Verificando...":"Entrar"})]})]})}var g=n(495),f=n(6428),v=n(383);function x(e){let t=e.replace(/\D/g,"");if(t.length<6)return e;let n=t.slice(0,2),a=t.slice(-4);return"(".concat(n,") ****-").concat(a)}let b=[{code:"55",name:"Brasil",flag:"\uD83C\uDDE7\uD83C\uDDF7"},{code:"1",name:"EUA/Canad\xe1",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"351",name:"Portugal",flag:"\uD83C\uDDF5\uD83C\uDDF9"},{code:"34",name:"Espanha",flag:"\uD83C\uDDEA\uD83C\uDDF8"},{code:"33",name:"Fran\xe7a",flag:"\uD83C\uDDEB\uD83C\uDDF7"},{code:"44",name:"Reino Unido",flag:"\uD83C\uDDEC\uD83C\uDDE7"},{code:"49",name:"Alemanha",flag:"\uD83C\uDDE9\uD83C\uDDEA"},{code:"39",name:"It\xe1lia",flag:"\uD83C\uDDEE\uD83C\uDDF9"},{code:"81",name:"Jap\xe3o",flag:"\uD83C\uDDEF\uD83C\uDDF5"},{code:"86",name:"China",flag:"\uD83C\uDDE8\uD83C\uDDF3"},{code:"91",name:"\xcdndia",flag:"\uD83C\uDDEE\uD83C\uDDF3"},{code:"52",name:"M\xe9xico",flag:"\uD83C\uDDF2\uD83C\uDDFD"},{code:"54",name:"Argentina",flag:"\uD83C\uDDE6\uD83C\uDDF7"},{code:"56",name:"Chile",flag:"\uD83C\uDDE8\uD83C\uDDF1"},{code:"57",name:"Col\xf4mbia",flag:"\uD83C\uDDE8\uD83C\uDDF4"},{code:"58",name:"Venezuela",flag:"\uD83C\uDDFB\uD83C\uDDEA"},{code:"595",name:"Paraguai",flag:"\uD83C\uDDF5\uD83C\uDDFE"},{code:"598",name:"Uruguai",flag:"\uD83C\uDDFA\uD83C\uDDFE"},{code:"591",name:"Bol\xedvia",flag:"\uD83C\uDDE7\uD83C\uDDF4"},{code:"51",name:"Peru",flag:"\uD83C\uDDF5\uD83C\uDDEA"},{code:"27",name:"\xc1frica do Sul",flag:"\uD83C\uDDFF\uD83C\uDDE6"},{code:"971",name:"Emirados",flag:"\uD83C\uDDE6\uD83C\uDDEA"},{code:"972",name:"Israel",flag:"\uD83C\uDDEE\uD83C\uDDF1"},{code:"61",name:"Austr\xe1lia",flag:"\uD83C\uDDE6\uD83C\uDDFA"},{code:"64",name:"Nova Zel\xe2ndia",flag:"\uD83C\uDDF3\uD83C\uDDFF"}];function y(e){let{onSuccess:t}=e,{register:n,sendOtp:r}=(0,l.a)(),c=(0,g.F)(),[i,u]=(0,o.useState)(1),[d,p]=(0,o.useState)({nome:"",sobrenome:"",email:"",telefone:"",cpf:"",senha:"",confirmarSenha:"",codigoIndicacao:""}),[m,y]=(0,o.useState)("55"),[D,j]=(0,o.useState)(!1),[C,_]=(0,o.useState)(["","","","","",""]),[A,w]=(0,o.useState)(""),[N,S]=(0,o.useState)(!1),[k,E]=(0,o.useState)(0),[L,B]=(0,o.useState)(""),[I,P]=(0,o.useState)("whatsapp"),[T,R]=(0,o.useState)(!1),[F,M]=(0,o.useState)(!1),z=(0,o.useRef)(null),[O,W]=(0,o.useState)({label:"Casa",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",estado:""}),[U,G]=(0,o.useState)(!1),[q,H]=(0,o.useState)(!1),[V,$]=(0,o.useState)(""),[J,Z]=(0,o.useState)([]),[K,Q]=(0,o.useState)(!1),Y=(0,o.useRef)(null),X=(0,o.useRef)(null),ee=(0,o.useRef)(null),et=b.find(e=>e.code===m)||b[0];(0,o.useEffect)(()=>{function e(e){z.current&&!z.current.contains(e.target)&&j(!1)}if(D)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[D]);let[en,ea]=(0,o.useState)(""),eo=(0,o.useRef)([]);function er(e){let{name:t,value:n}=e.target;p(e=>({...e,[t]:n}))}async function el(e){e.preventDefault(),w("");let t=function(){let e=d.telefone.replace(/\D/g,"");return e.length<8||e.length>15?"Telefone invalido":!function(e){let t=e.replace(/\D/g,"");if(11!==t.length||/^(\d)\1{10}$/.test(t))return!1;let n=0;for(let e=0;e<9;e++)n+=parseInt(t[e])*(10-e);let a=n%11,o=a<2?0:11-a;if(parseInt(t[9])!==o)return!1;n=0;for(let e=0;e<10;e++)n+=parseInt(t[e])*(11-e);let r=(a=n%11)<2?0:11-a;return parseInt(t[10])===r}(d.cpf.replace(/\D/g,""))?"CPF invalido":null}();if(t){w(t);return}S(!0);try{let e;if("email"===I)e=await r(d.email,"email"),ea(e.email||d.email.replace(/^(.{3}).*(@.*)$/,"$1***$2"));else{let t=d.telefone.replace(/\D/g,"");e=await r(m+t,I),ea(e.phone||"+".concat(m," ").concat(x(d.telefone)))}B(e.channel||I),E(60),u(3)}catch(e){w(e.message)}finally{S(!1)}}async function ec(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;w(""),S(!0);try{var t;let n;let a=e||I;if("email"===a)n=await r(d.email,"email"),ea(n.email||d.email.replace(/^(.{3}).*(@.*)$/,"$1***$2"));else{let e=d.telefone.replace(/\D/g,"");n=await r(m+e,a),ea(n.phone||"+".concat(m," ").concat(x(d.telefone)))}B(n.channel||a),E(60),_(["","","","","",""]),null===(t=eo.current[0])||void 0===t||t.focus()}catch(e){w(e.message)}finally{S(!1)}}async function ei(e){e.preventDefault(),w("");let t=C.join("");if(6!==t.length){w("Digite o codigo de 6 digitos");return}S(!0);try{let e=d.telefone.replace(/\D/g,"");await n({nome:d.nome,sobrenome:d.sobrenome,email:d.email,telefone:m+e,cpf:d.cpf.replace(/\D/g,""),senha:d.senha,otp_code:t});let a=d.codigoIndicacao.trim().toUpperCase();if(a)try{await (0,f.sg)("/customer/referral.php",{code:a})}catch(e){}u(4)}catch(e){w(e.message)}finally{S(!1)}}async function es(e){let t=e.replace(/\D/g,"");if(8===t.length)try{let e=await fetch("https://viacep.com.br/ws/".concat(t,"/json/"));if(!e.ok)return;let n=await e.json();if(n.erro)return;W(e=>({...e,logradouro:n.logradouro||e.logradouro,bairro:n.bairro||e.bairro,cidade:n.localidade||e.cidade,estado:n.uf||e.estado}))}catch(e){}}async function eu(){let e=(0,v.Dg)(O.label,O.logradouro);if(!O.logradouro.trim()||!O.numero.trim()||!O.cidade.trim()){w("Preencha rua, numero e cidade");return}if(e&&!O.complemento.trim()){w("Informe o numero do quarto");return}G(!0),w("");try{await (0,f.sg)("/addresses/list.php",{...O,complemento:(0,v.z1)(O.complemento,e),is_default:!0});let n={cep:O.cep,endereco:"".concat(O.logradouro,", ").concat(O.numero),bairro:O.bairro,cidade:"".concat(O.cidade,"/").concat(O.estado),lat:null,lng:null,source:"saved",addressLabel:O.label};c.setLocation(n),null==t||t()}catch(e){w(e.message||"Erro ao salvar endereco")}finally{G(!1)}}(0,o.useEffect)(()=>{if(k<=0)return;let e=setTimeout(()=>E(e=>e-1),1e3);return()=>clearTimeout(e)},[k]);let ed=(0,o.useRef)(null);return(0,o.useEffect)(()=>()=>{Y.current&&clearTimeout(Y.current),X.current&&X.current.abort(),ed.current&&clearTimeout(ed.current)},[]),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:s().steps,children:[1,2,3,4].map((e,t)=>(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)("div",{className:"".concat(s().stepDot," ").concat(e===i?s().stepDotActive:e<i?s().stepDotDone:"")}),t<3&&(0,a.jsx)("div",{className:"".concat(s().stepLine," ").concat(e<i?s().stepLineActive:"")})]},e))}),(0,a.jsx)("div",{className:s().stepLabel,children:["Dados pessoais","Telefone e CPF","Verificacao","Endereco"][i-1]}),A&&(0,a.jsx)("div",{className:s().error,children:A}),1===i&&(0,a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),w("");let t=d.nome.trim()?d.email.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)?d.senha.length<8?"Senha deve ter no minimo 8 caracteres":/[a-zA-Z]/.test(d.senha)&&/[0-9]/.test(d.senha)?d.senha!==d.confirmarSenha?"As senhas nao conferem":null:"Senha deve conter pelo menos uma letra e um numero":"Email invalido":"Nome obrigatorio";if(t){w(t);return}u(2)},className:s().form,children:[(0,a.jsx)(h,{onSuccess:t,label:"Cadastrar com Google"}),(0,a.jsxs)("div",{className:s().divider,children:[(0,a.jsx)("span",{className:s().dividerLine}),(0,a.jsx)("span",{className:s().dividerText,children:"ou"}),(0,a.jsx)("span",{className:s().dividerLine})]}),(0,a.jsxs)("div",{className:s().row,children:[(0,a.jsxs)("label",{className:s().label,children:["Nome *",(0,a.jsx)("input",{type:"text",name:"nome",value:d.nome,onChange:er,className:s().input,placeholder:"Nome",required:!0,autoFocus:!0})]}),(0,a.jsxs)("label",{className:s().label,children:["Sobrenome",(0,a.jsx)("input",{type:"text",name:"sobrenome",value:d.sobrenome,onChange:er,className:s().input,placeholder:"Sobrenome"})]})]}),(0,a.jsxs)("label",{className:s().label,children:["Email *",(0,a.jsx)("input",{type:"email",name:"email",value:d.email,onChange:er,className:s().input,placeholder:"seu@email.com",required:!0,autoComplete:"email"})]}),(0,a.jsxs)("label",{className:s().label,children:["Senha *",(0,a.jsxs)("div",{className:s().passwordWrapper,children:[(0,a.jsx)("input",{type:T?"text":"password",name:"senha",value:d.senha,onChange:er,className:s().input,placeholder:"Minimo 8 caracteres (letra + numero)",required:!0,minLength:8,autoComplete:"new-password",spellCheck:"false"}),(0,a.jsx)("button",{type:"button",className:s().passwordToggle,onClick:()=>R(!T),"aria-label":T?"Ocultar senha":"Mostrar senha",children:T?(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),(0,a.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),(0,a.jsxs)("label",{className:s().label,children:["Confirmar senha *",(0,a.jsxs)("div",{className:s().passwordWrapper,children:[(0,a.jsx)("input",{type:F?"text":"password",name:"confirmarSenha",value:d.confirmarSenha,onChange:er,className:s().input,placeholder:"Repita a senha",required:!0,minLength:8,autoComplete:"new-password",spellCheck:"false"}),(0,a.jsx)("button",{type:"button",className:s().passwordToggle,onClick:()=>M(!F),"aria-label":F?"Ocultar senha":"Mostrar senha",children:F?(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),(0,a.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),(0,a.jsx)("button",{type:"submit",className:s().button,children:"Continuar"})]}),2===i&&(0,a.jsxs)("form",{onSubmit:el,className:s().form,children:[(0,a.jsx)("button",{type:"button",className:s().stepBack,onClick:()=>u(1),children:"← Voltar"}),(0,a.jsxs)("label",{className:s().label,children:["Telefone *",(0,a.jsxs)("div",{className:s().phoneWrapper,children:[(0,a.jsxs)("div",{className:s().countrySelector,ref:z,children:[(0,a.jsxs)("button",{type:"button",className:s().countryButton,onClick:()=>j(!D),"aria-label":"Selecionar pa\xeds",children:[(0,a.jsx)("span",{className:s().countryFlag,children:et.flag}),(0,a.jsxs)("span",{className:s().countryCode,children:["+",et.code]}),(0,a.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("path",{d:"M6 9l6 6 6-6"})})]}),D&&(0,a.jsx)("div",{className:s().countryList,children:b.map(e=>(0,a.jsxs)("button",{type:"button",className:"".concat(s().countryItem," ").concat(e.code===m?s().countryItemActive:""),onClick:()=>{y(e.code),j(!1)},children:[(0,a.jsx)("span",{className:s().countryFlag,children:e.flag}),(0,a.jsx)("span",{className:s().countryName,children:e.name}),(0,a.jsxs)("span",{className:s().countryCodeSmall,children:["+",e.code]})]},e.code))})]}),(0,a.jsx)("input",{type:"tel",name:"telefone",value:d.telefone,onChange:e=>p(t=>({...t,telefone:function(e){let t=e.replace(/\D/g,"").slice(0,11);return t.length<=2?t:t.length<=7?"(".concat(t.slice(0,2),") ").concat(t.slice(2)):"(".concat(t.slice(0,2),") ").concat(t.slice(2,7),"-").concat(t.slice(7))}(e.target.value)})),className:s().phoneInput,placeholder:"99999-9999",required:!0,autoFocus:!0,autoComplete:"tel"})]})]}),(0,a.jsxs)("label",{className:s().label,children:["CPF *",(0,a.jsx)("input",{type:"text",name:"cpf",inputMode:"numeric",value:d.cpf,onChange:e=>p(t=>({...t,cpf:function(e){let t=e.replace(/\D/g,"").slice(0,11);return t.length<=3?t:t.length<=6?"".concat(t.slice(0,3),".").concat(t.slice(3)):t.length<=9?"".concat(t.slice(0,3),".").concat(t.slice(3,6),".").concat(t.slice(6)):"".concat(t.slice(0,3),".").concat(t.slice(3,6),".").concat(t.slice(6,9),"-").concat(t.slice(9))}(e.target.value)})),className:s().input,placeholder:"000.000.000-00",required:!0,autoComplete:"off"})]}),(0,a.jsxs)("label",{className:s().label,children:["Codigo de indicacao (opcional)",(0,a.jsx)("input",{type:"text",name:"codigoIndicacao",value:d.codigoIndicacao,onChange:e=>p(t=>({...t,codigoIndicacao:e.target.value.toUpperCase()})),className:s().input,placeholder:"Ex: SUPER1A3XY",maxLength:20,style:{textTransform:"uppercase",letterSpacing:"1px"}})]}),(0,a.jsxs)("div",{className:s().label,children:["Receber codigo por:",(0,a.jsxs)("div",{className:s().channelOptions,children:[(0,a.jsxs)("button",{type:"button",className:"".concat(s().channelBtn," ").concat("whatsapp"===I?s().channelBtnActive:""),onClick:()=>P("whatsapp"),children:[(0,a.jsx)("span",{className:s().channelIcon,children:"\uD83D\uDCF1"}),"WhatsApp"]}),(0,a.jsxs)("button",{type:"button",className:"".concat(s().channelBtn," ").concat("sms"===I?s().channelBtnActive:""),onClick:()=>P("sms"),children:[(0,a.jsx)("span",{className:s().channelIcon,children:"\uD83D\uDCAC"}),"SMS"]}),(0,a.jsxs)("button",{type:"button",className:"".concat(s().channelBtn," ").concat("email"===I?s().channelBtnActive:""),onClick:()=>P("email"),children:[(0,a.jsx)("span",{className:s().channelIcon,children:"\uD83D\uDCE7"}),"Email"]})]})]}),(0,a.jsx)("button",{type:"submit",className:s().button,disabled:N,children:N?"Enviando codigo...":"Enviar codigo"})]}),3===i&&(0,a.jsxs)("form",{onSubmit:ei,className:s().form,children:[(0,a.jsx)("button",{type:"button",className:s().stepBack,onClick:()=>u(2),children:"← Voltar"}),(0,a.jsxs)("div",{className:s().otpInfo,children:["Codigo enviado via"," ",(0,a.jsx)("span",{className:s().otpChannel,children:"email"===L?"Email":"sms"===L?"SMS":"WhatsApp"})," ","para"," ",(0,a.jsx)("span",{className:s().otpPhone,children:en})]}),(0,a.jsx)("div",{className:s().otpContainer,onPaste:function(e){var t;if(e.preventDefault(),!e.clipboardData)return;let n=e.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);if(0===n.length)return;let a=[...C];for(let e=0;e<n.length&&e<6;e++)a[e]=n[e];_(a);let o=Math.min(n.length,5);null===(t=eo.current[o])||void 0===t||t.focus()},role:"group","aria-label":"Codigo de verificacao",children:C.map((e,t)=>(0,a.jsx)("input",{ref:e=>eo.current[t]=e,type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:e=>(function(e,t){let n=t.replace(/\D/g,"").slice(-1);if(_(t=>{let a=[...t];return a[e]=n,a}),n&&e<5){var a;null===(a=eo.current[e+1])||void 0===a||a.focus()}})(t,e.target.value),onKeyDown:e=>(function(e,t){if("Backspace"===t.key&&!C[e]&&e>0){var n;null===(n=eo.current[e-1])||void 0===n||n.focus()}})(t,e),className:s().otpInput,autoFocus:0===t,"aria-label":"Digito ".concat(t+1," de 6")},t))}),(0,a.jsx)("div",{className:s().timer,children:k>0?"Reenviar codigo em ".concat(k,"s"):(0,a.jsx)("button",{type:"button",className:s().resendBtn,onClick:ec,disabled:N,children:"Reenviar codigo"})}),(0,a.jsx)("button",{type:"submit",className:s().button,disabled:N,children:N?"Criando conta...":"Criar conta"})]}),4===i&&(0,a.jsxs)("div",{className:s().form,children:[(0,a.jsxs)("div",{style:{textAlign:"center",marginBottom:16},children:[(0,a.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-accent)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,a.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,a.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),(0,a.jsx)("div",{style:{fontSize:16,fontWeight:700,marginTop:8,color:"var(--color-text)"},children:"Onde voce quer receber?"}),(0,a.jsx)("div",{style:{fontSize:13,color:"var(--color-text-muted)",marginTop:4},children:"Adicione um endereco para ver lojas perto de voce"})]}),(0,a.jsxs)("div",{style:{marginBottom:12},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"12px 14px",border:"1.5px solid var(--color-border)",borderRadius:12,background:"var(--color-bg-muted)",transition:"border-color 0.15s ease"},children:[(0,a.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-text-muted)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,a.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,a.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),(0,a.jsx)("input",{ref:ee,type:"text",value:V,onChange:e=>(function(e){if($(e),Y.current&&clearTimeout(Y.current),X.current&&X.current.abort(),e.trim().length<3){Z([]),Q(!1);return}Q(!0),Y.current=setTimeout(async()=>{let t=new AbortController;X.current=t;try{let n=encodeURIComponent(e.trim()),a=await fetch("https://nominatim.openstreetmap.org/search?q=".concat(n,"&format=json&addressdetails=1&countrycodes=br&limit=5&accept-language=pt-BR"),{headers:{"User-Agent":"SuperBora/1.0"},signal:t.signal}),o=await a.json();Z(o||[])}catch(e){"AbortError"!==e.name&&console.warn("[RegisterForm] Address search failed")}finally{Q(!1)}},400)})(e.target.value),placeholder:"Buscar endereco e numero","aria-label":"Buscar endereco",autoFocus:!0,style:{flex:1,border:"none",outline:"none",background:"transparent",fontSize:15,color:"var(--color-text)",minWidth:0}}),V&&(0,a.jsx)("button",{type:"button",onClick:()=>{var e;$(""),Z([]),null===(e=ee.current)||void 0===e||e.focus()},"aria-label":"Limpar busca",style:{display:"flex",alignItems:"center",justifyContent:"center",width:28,height:28,borderRadius:"50%",background:"var(--color-border)",border:"none",cursor:"pointer",color:"var(--color-text-secondary)",flexShrink:0},children:(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),V.trim().length>=3&&(0,a.jsxs)("div",{style:{marginTop:4},children:[K&&(0,a.jsx)("div",{style:{padding:12,textAlign:"center",fontSize:13,color:"var(--color-text-muted)"},children:"Buscando..."}),!K&&0===J.length&&(0,a.jsx)("div",{style:{padding:12,textAlign:"center",fontSize:13,color:"var(--color-text-muted)"},children:"Nenhum endereco encontrado"}),!K&&J.map(e=>{let t=(e.display_name||"").split(",").map(e=>e.trim()),n=t.slice(0,2).join(", "),o=t.slice(2,4).join(", ");return(0,a.jsxs)("button",{type:"button",onClick:()=>(function(e){let t=e.address||{},n=t.road||t.pedestrian||t.footway||"",a=t.house_number||"",o=t.suburb||t.neighbourhood||t.quarter||"",r=t.city||t.town||t.village||t.municipality||"",l=t.state||"",c=(t.postcode||"").replace(/\D/g,""),i={"Sao Paulo":"SP","Rio de Janeiro":"RJ","Minas Gerais":"MG",Bahia:"BA",Parana:"PR","Rio Grande do Sul":"RS",Pernambuco:"PE",Ceara:"CE",Para:"PA","Santa Catarina":"SC",Goias:"GO",Maranhao:"MA",Amazonas:"AM","Espirito Santo":"ES",Paraiba:"PB","Rio Grande do Norte":"RN","Mato Grosso":"MT",Alagoas:"AL",Piaui:"PI","Distrito Federal":"DF","Mato Grosso do Sul":"MS",Sergipe:"SE",Rondonia:"RO",Tocantins:"TO",Acre:"AC",Amapa:"AP",Roraima:"RR"}[l]||(l?l.slice(0,2).toUpperCase():""),s=e.display_name||"",u=(0,v.rM)(n)||(0,v.rM)(s);W(e=>({...e,label:u?"Hotel":e.label,logradouro:n||e.logradouro,numero:a||e.numero,bairro:o||e.bairro,cidade:r||e.cidade,estado:i||e.estado,cep:c?c.replace(/^(\d{5})(\d{3})$/,"$1-$2"):e.cep})),$(""),Z([])})(e),style:{display:"flex",alignItems:"flex-start",gap:10,width:"100%",padding:"10px 12px",border:"none",background:"transparent",borderRadius:10,cursor:"pointer",textAlign:"left"},children:[(0,a.jsx)("div",{style:{width:30,height:30,borderRadius:"50%",background:"var(--color-bg-muted)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,color:"var(--color-accent)",marginTop:2},children:(0,a.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,a.jsx)("circle",{cx:"12",cy:"10",r:"3"})]})}),(0,a.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,a.jsx)("div",{style:{fontSize:13,fontWeight:600,color:"var(--color-text)",lineHeight:1.3},children:n}),o&&(0,a.jsx)("div",{style:{fontSize:11,color:"var(--color-text-muted)",marginTop:2,lineHeight:1.3},children:o})]})]},e.place_id)})]})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:14,margin:"0 0 12px"},children:[(0,a.jsx)("span",{style:{flex:1,height:1,background:"var(--color-border)"}}),(0,a.jsx)("span",{style:{fontSize:12,color:"var(--color-text-muted)"},children:"ou preencha manualmente"}),(0,a.jsx)("span",{style:{flex:1,height:1,background:"var(--color-border)"}})]}),(0,a.jsxs)("label",{className:s().label,children:["Rotulo",(0,a.jsx)("div",{style:{display:"flex",gap:8,marginTop:4},children:["Casa","Trabalho","Hotel","Outro"].map(e=>(0,a.jsx)("button",{type:"button",className:"".concat(s().channelBtn," ").concat(O.label===e?s().channelBtnActive:""),onClick:()=>W(t=>({...t,label:e})),style:{flex:1,padding:"10px 8px",fontSize:13},children:e},e))})]}),(0,a.jsxs)("label",{className:s().label,children:["CEP",(0,a.jsx)("input",{type:"text",inputMode:"numeric",value:O.cep,onChange:e=>{let t=e.target.value.replace(/\D/g,"").slice(0,8);t.length>5&&(t=t.slice(0,5)+"-"+t.slice(5)),W(e=>({...e,cep:t})),8===t.replace(/\D/g,"").length&&es(t)},className:s().input,placeholder:"00000-000",maxLength:9,autoFocus:!0})]}),(0,a.jsxs)("label",{className:s().label,children:["Rua *",(0,a.jsx)("input",{type:"text",value:O.logradouro,onChange:e=>W(t=>({...t,logradouro:e.target.value})),className:s().input,placeholder:"Nome da rua"})]}),(0,a.jsxs)("div",{className:s().row,children:[(0,a.jsxs)("label",{className:s().label,children:["Numero *",(0,a.jsx)("input",{type:"text",value:O.numero,onChange:e=>W(t=>({...t,numero:e.target.value})),className:s().input,placeholder:"123"})]}),(0,a.jsxs)("label",{className:s().label,children:[(0,v.Dg)(O.label,O.logradouro)?"Numero do quarto *":"Complemento",(0,a.jsx)("input",{type:"text",value:O.complemento,onChange:e=>W(t=>({...t,complemento:e.target.value})),className:s().input,placeholder:(0,v.Dg)(O.label,O.logradouro)?"Ex: 305":"Apto, bloco...",style:(0,v.Dg)(O.label,O.logradouro)?{borderColor:"#7c3aed",borderWidth:2}:void 0}),(0,v.Dg)(O.label,O.logradouro)&&(0,a.jsx)("span",{style:{fontSize:12,color:"#7c3aed",marginTop:4,display:"block"},children:"Informe o numero do quarto para entrega"})]})]}),(0,a.jsxs)("label",{className:s().label,children:["Bairro",(0,a.jsx)("input",{type:"text",value:O.bairro,onChange:e=>W(t=>({...t,bairro:e.target.value})),className:s().input,placeholder:"Bairro"})]}),(0,a.jsxs)("div",{className:s().row,children:[(0,a.jsxs)("label",{className:s().label,children:["Cidade *",(0,a.jsx)("input",{type:"text",value:O.cidade,onChange:e=>W(t=>({...t,cidade:e.target.value})),className:s().input,placeholder:"Cidade"})]}),(0,a.jsxs)("label",{className:s().label,children:["Estado",(0,a.jsx)("input",{type:"text",value:O.estado,onChange:e=>W(t=>({...t,estado:e.target.value.toUpperCase().slice(0,2)})),className:s().input,placeholder:"UF",maxLength:2})]})]}),(0,a.jsx)("button",{type:"button",className:s().button,onClick:eu,disabled:U,children:U?"Salvando...":"Salvar endereco"}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:14,margin:"12px 0"},children:[(0,a.jsx)("span",{style:{flex:1,height:1,background:"var(--color-border)"}}),(0,a.jsx)("span",{style:{fontSize:13,color:"var(--color-text-muted)"},children:"ou"}),(0,a.jsx)("span",{style:{flex:1,height:1,background:"var(--color-border)"}})]}),(0,a.jsxs)("button",{type:"button",className:s().buttonOutline,onClick:function(){H(!0),w(""),c.getGeoLocation(),ed.current&&clearTimeout(ed.current),ed.current=setTimeout(()=>{H(!1),null==t||t()},2500)},disabled:q,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[(0,a.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,a.jsx)("polygon",{points:"3 11 22 2 13 21 11 13 3 11"})}),q?"Buscando localizacao...":"Usar minha localizacao"]}),(0,a.jsx)("button",{type:"button",className:s().resendBtn,onClick:function(){null==t||t()},style:{display:"block",margin:"16px auto 0",fontSize:14},children:"Pular por enquanto"})]})]})}function D(){let[e,t]=(0,o.useState)("login"),n=(0,r.useRouter)(),{isAuthenticated:i}=(0,l.a)(),u=(0,o.useCallback)(()=>{let e="/";{let t=new URLSearchParams(window.location.search).get("return");t&&t.startsWith("/")&&!t.startsWith("//")&&(e=t)}n.push(e)},[n]);return((0,o.useEffect)(()=>{i&&u()},[i,u]),i)?null:(0,a.jsx)("div",{className:s().page,children:(0,a.jsxs)("div",{className:s().card,children:[(0,a.jsxs)("div",{className:s().logo,children:[(0,a.jsx)("div",{className:s().logoText,children:"SuperBora"}),(0,a.jsx)("div",{className:s().logoSub,children:"Delivery para voce"})]}),(0,a.jsxs)("div",{className:s().tabs,children:[(0,a.jsx)("button",{className:"".concat(s().tab," ").concat("login"===e?s().tabActive:""),onClick:()=>t("login"),children:"Entrar"}),(0,a.jsx)("button",{className:"".concat(s().tab," ").concat("register"===e?s().tabActive:""),onClick:()=>t("register"),children:"Criar conta"})]}),"login"===e?(0,a.jsx)(m,{onSuccess:u}):(0,a.jsx)(y,{onSuccess:u}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:16,marginTop:20,fontSize:12},children:[(0,a.jsx)(c.default,{href:"/termos",style:{color:"var(--color-text-muted)",textDecoration:"underline"},children:"Termos de uso"}),(0,a.jsx)(c.default,{href:"/privacidade",style:{color:"var(--color-text-muted)",textDecoration:"underline"},children:"Privacidade"})]})]})})}},383:function(e,t,n){"use strict";n.d(t,{Dg:function(){return r},rM:function(){return o},z1:function(){return l}});let a=["hotel","pousada","hostel","motel","resort","apart hotel","apart-hotel","aparthotel","flat","albergue","hospedaria","pensao","inn"];function o(e){if(!e||"string"!=typeof e)return!1;let t=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return a.some(e=>t.includes(e))}function r(e,t){return"Hotel"===e||o(t)}function l(e,t){if(!t||!e||!e.trim())return(e||"").trim();let n=e.trim();return/^quarto\s/i.test(n)?n:/^\d+[a-zA-Z]?$/.test(n)?"Quarto ".concat(n):n}},9376:function(e,t,n){"use strict";var a=n(5475);n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})},257:function(e,t,n){"use strict";var a,o;e.exports=(null==(a=n.g.process)?void 0:a.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(4227)},4227:function(e){!function(){var t={229:function(e){var t,n,a,o=e.exports={};function r(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{n="function"==typeof clearTimeout?clearTimeout:l}catch(e){n=l}}();var i=[],s=!1,u=-1;function d(){s&&a&&(s=!1,a.length?i=a.concat(i):u=-1,i.length&&h())}function h(){if(!s){var e=c(d);s=!0;for(var t=i.length;t;){for(a=i,i=[];++u<t;)a&&a[u].run();u=-1,t=i.length}a=null,s=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===l||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];i.push(new p(e,t)),1!==i.length||s||c(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function a(e){var o=n[e];if(void 0!==o)return o.exports;var r=n[e]={exports:{}},l=!0;try{t[e](r,r.exports,a),l=!1}finally{l&&delete n[e]}return r.exports}a.ab="//";var o=a(229);e.exports=o}()},3510:function(e){e.exports={form:"Auth_form__k4Q0w",label:"Auth_label__k_4Q_",input:"Auth_input__mAw6A",passwordWrapper:"Auth_passwordWrapper__s61_H",passwordToggle:"Auth_passwordToggle__1rnsa",phoneWrapper:"Auth_phoneWrapper__ii7VI",countrySelector:"Auth_countrySelector__RKh7q",countryButton:"Auth_countryButton__6kcne",countryFlag:"Auth_countryFlag__3sBp3",countryCode:"Auth_countryCode__b0cUO",countryList:"Auth_countryList__ebEG2",countryItem:"Auth_countryItem__PouUO",countryItemActive:"Auth_countryItemActive__qy5k1",countryName:"Auth_countryName__nZ_qp",countryCodeSmall:"Auth_countryCodeSmall__S4jtT",phoneInput:"Auth_phoneInput__vIPyv",row:"Auth_row__mvI26",button:"Auth_button__K7ImG",error:"Auth_error__XPBex",fadeInUp:"Auth_fadeInUp__iJkvZ",tabs:"Auth_tabs__BDyKD",tab:"Auth_tab__6_xKK",tabActive:"Auth_tabActive__q0D2Y",page:"Auth_page__Yt5C7",card:"Auth_card__8s6Fq",fadeInScale:"Auth_fadeInScale__7q0gs",logo:"Auth_logo__VUzrE",logoText:"Auth_logoText__iBvrn",logoSub:"Auth_logoSub__aZQti",backLink:"Auth_backLink__pVzO9",steps:"Auth_steps__igD6_",stepDot:"Auth_stepDot__aZjHa",stepDotActive:"Auth_stepDotActive__Y5a2y",stepDotDone:"Auth_stepDotDone__1ixo_",stepLine:"Auth_stepLine__LCbbo",stepLineActive:"Auth_stepLineActive__ALDDI",stepLabel:"Auth_stepLabel__TmloU",otpContainer:"Auth_otpContainer__E0bAs",otpInput:"Auth_otpInput__XCfvx",timer:"Auth_timer__tC0tN",resendBtn:"Auth_resendBtn__hBISG",stepBack:"Auth_stepBack__lh5vb",otpInfo:"Auth_otpInfo__bMvr6",otpChannel:"Auth_otpChannel__uGb9a",otpPhone:"Auth_otpPhone__5Of2f",buttonOutline:"Auth_buttonOutline__i9kg8",methodToggle:"Auth_methodToggle__ZhqEv",methodBtn:"Auth_methodBtn__4ZZ9n",methodBtnActive:"Auth_methodBtnActive__z_JBn",channelOptions:"Auth_channelOptions__VtUjH",channelBtn:"Auth_channelBtn__QgAeN",channelBtnActive:"Auth_channelBtnActive__LNHf1",channelIcon:"Auth_channelIcon__IDM12",otpHint:"Auth_otpHint__23Hk6",googleBtn:"Auth_googleBtn__cCQ_4",googleBtnLoading:"Auth_googleBtnLoading__WbqHU",divider:"Auth_divider__i5lVs",dividerLine:"Auth_dividerLine__7KOOv",dividerText:"Auth_dividerText__KW9kp"}}},function(e){e.O(0,[7576,7648,2971,2117,1744],function(){return e(e.s=4467)}),_N_E=e.O()}]);