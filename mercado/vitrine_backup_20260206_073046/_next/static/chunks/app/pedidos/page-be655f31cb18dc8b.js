(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6429],{2320:function(e,t,r){Promise.resolve().then(r.bind(r,706))},8779:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var a=r(7437),n=r(2265),s=r(9376),i=r(7128);function o(e){let{children:t}=e,{isAuthenticated:r,loading:o}=(0,i.a)(),l=(0,s.useRouter)();return((0,n.useEffect)(()=>{if(!o&&!r){let e=window.location.pathname;l.push("/login?return=".concat(encodeURIComponent(e)))}},[o,r,l]),o)?(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:(0,a.jsx)("div",{style:{width:32,height:32,border:"3px solid var(--color-border)",borderTopColor:"var(--color-accent)",borderRadius:"50%",animation:"spin 0.8s linear infinite"}})}):r?t:null}},6477:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(7437),n=r(2265),s=r(4609),i=r(3132),o=r.n(i);function l(e){let{onRefresh:t,disabled:r=!1,children:i}=e,{refreshing:l,pullDistance:c,containerRef:d}=function(){let{onRefresh:e,disabled:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[r,a]=(0,n.useState)(!1),[i,o]=(0,n.useState)(0),l=(0,n.useRef)(null),c=(0,n.useRef)(0),d=(0,n.useRef)(0),u=(0,n.useRef)(!1),h=(0,n.useRef)(!0),_=(0,n.useCallback)(e=>{if(t||r)return;let a=l.current;(a?a.scrollTop:window.scrollY||document.documentElement.scrollTop)>5||(c.current=e.touches[0].clientY,u.current=!0)},[t,r]),m=(0,n.useCallback)(e=>{if(!u.current||t||r)return;d.current=e.touches[0].clientY;let a=d.current-c.current;if(a>0){let t=Math.min(120,.5*a);o(t),t>10&&e.preventDefault()}else o(0),u.current=!1},[t,r]),p=(0,n.useCallback)(async()=>{if(u.current&&!t&&!r){if(u.current=!1,i>=60&&e){(0,s.q8)("pullTrigger"),a(!0),o(60);try{await e()}catch(e){}finally{h.current&&(a(!1),o(0))}}else o(0)}},[i,e,t,r]);return(0,n.useEffect)(()=>{h.current=!0;let e=l.current;if(e)return e.addEventListener("touchstart",_,{passive:!0}),e.addEventListener("touchmove",m,{passive:!1}),e.addEventListener("touchend",p,{passive:!0}),()=>{h.current=!1,e.removeEventListener("touchstart",_),e.removeEventListener("touchmove",m),e.removeEventListener("touchend",p)}},[_,m,p]),{refreshing:r,pullDistance:i,containerRef:l}}({onRefresh:t,disabled:r}),u=Math.min(c,60);return(0,a.jsxs)("div",{ref:d,className:o().wrapper,children:[(0,a.jsxs)("div",{className:o().indicator,style:{transform:"translateY(".concat(u-44,"px)"),opacity:l?1:Math.min(c/30,1)},children:[(0,a.jsx)("div",{className:"".concat(o().iconWrap," ").concat(l?o().spinning:""),children:(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{transform:l?"none":"rotate(".concat(180*Math.min(c/60,1),"deg)"),transition:l?"none":"transform 0.1s"},children:l?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,a.jsx)("polyline",{points:"19 12 12 19 5 12"})]})})}),(0,a.jsx)("span",{className:o().text,children:l?"Atualizando...":c>=60?"Solte para atualizar":"Puxe para atualizar"})]}),(0,a.jsx)("div",{className:o().content,style:{transform:c>0?"translateY(".concat(u,"px)"):"none",transition:c>0&&!l?"none":"transform 0.3s ease"},children:i})]})}},6939:function(e,t,r){"use strict";r.d(t,{V:function(){return i},p:function(){return o}});var a=r(7437),n=r(2265);let s=(0,n.createContext)(null);function i(e){let{children:t}=e,[r,i]=(0,n.useState)([]),o=(0,n.useRef)(new Map);(0,n.useEffect)(()=>()=>{o.current.forEach(e=>clearTimeout(e)),o.current.clear()},[]);let l=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=crypto.randomUUID();i(a=>[...a,{id:r,message:e,type:t}]);let a=setTimeout(()=>{i(e=>e.filter(e=>e.id!==r)),o.current.delete(r)},3e3);o.current.set(r,a)},[]),c=(0,n.useCallback)(e=>{i(t=>t.filter(t=>t.id!==e));let t=o.current.get(e);t&&(clearTimeout(t),o.current.delete(e))},[]);return(0,a.jsxs)(s.Provider,{value:l,children:[t,(0,a.jsx)("div",{role:"status","aria-live":"polite","aria-atomic":"true",style:{position:"fixed",bottom:"80px",left:"50%",transform:"translateX(-50%)",zIndex:"var(--z-toast, 1100)",display:"flex",flexDirection:"column",gap:"8px",pointerEvents:"none"},children:r.map(e=>(0,a.jsx)("div",{onClick:()=>c(e.id),style:{padding:"10px 20px",borderRadius:"var(--radius-pill)",background:"error"===e.type?"var(--color-danger)":"var(--color-text)",color:"var(--color-bg)",fontSize:"14px",fontWeight:500,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",animation:"toastFadeIn 0.3s ease",pointerEvents:"auto",cursor:"pointer",maxWidth:"90vw",textAlign:"center"},children:e.message},e.id))}),(0,a.jsx)("style",{children:"\n        @keyframes toastFadeIn {\n          from { opacity: 0; transform: translateY(10px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n      "})]})}function o(){let e=(0,n.useContext)(s);if(!e)throw Error("useToast must be used within ToastProvider");return e}},6971:function(e,t,r){"use strict";r.d(t,{J:function(){return l},z:function(){return c}});var a=r(7437),n=r(2265),s=r(6428),i=r(7128);let o=(0,n.createContext)(null);function l(e){let{children:t}=e,{isAuthenticated:r}=(0,i.a)(),[l,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(0),[h,_]=(0,n.useState)(null),m=(0,n.useRef)(0),p=(0,n.useRef)(null),x=(0,n.useRef)(!0),v=(0,n.useRef)(null),g=(0,n.useCallback)(async()=>{if((0,s.LP)())try{var e;let t=await (0,s.SC)("/notifications/list.php",{unread:1});if(!x.current)return;let r=null!==(e=t.unread_count)&&void 0!==e?e:0;if(r>m.current&&null!==m.current){let e=r-m.current;_(1===e?"Nova notificacao recebida":"".concat(e," novas notificacoes")),v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{x.current&&_(null)},3500)}m.current=r,u(r)}catch(e){}},[]),f=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if((0,s.LP)())try{var t,r,a;let n=await (0,s.SC)("/notifications/list.php",{page:e,limit:20});if(!x.current)return null;return c(null!==(t=n.notifications)&&void 0!==t?t:[]),u(null!==(r=n.unread_count)&&void 0!==r?r:0),m.current=null!==(a=n.unread_count)&&void 0!==a?a:0,n}catch(e){return null}},[]),j=(0,n.useCallback)(async e=>{try{await (0,s.sg)("/notifications/list.php",{id:e}),c(t=>t.map(t=>t.id===e?{...t,is_read:!0}:t)),u(e=>Math.max(0,e-1))}catch(e){}},[]),y=(0,n.useCallback)(async()=>{try{await (0,s.sg)("/notifications/list.php",{}),c(e=>e.map(e=>({...e,is_read:!0}))),u(0),m.current=0}catch(e){}},[]);return(0,n.useEffect)(()=>(x.current=!0,r?(g(),p.current=setInterval(g,3e4)):(c([]),u(0),m.current=0),()=>{x.current=!1,p.current&&(clearInterval(p.current),p.current=null),v.current&&(clearTimeout(v.current),v.current=null)}),[r,g]),(0,a.jsxs)(o.Provider,{value:{notifications:l,unreadCount:d,fetchNotifications:f,markAsRead:j,markAllAsRead:y},children:[t,h&&(0,a.jsxs)("div",{style:{position:"fixed",top:"16px",left:"50%",transform:"translateX(-50%)",zIndex:"var(--z-toast, 1100)",padding:"10px 20px",borderRadius:"var(--radius-pill)",background:"var(--color-accent, #16a34a)",color:"#fff",fontSize:"14px",fontWeight:500,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",animation:"notifSlideDown 0.3s ease",display:"flex",alignItems:"center",gap:"8px",pointerEvents:"none"},children:[(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),(0,a.jsx)("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),h]}),(0,a.jsx)("style",{children:"\n        @keyframes notifSlideDown {\n          from { opacity: 0; transform: translateX(-50%) translateY(-10px); }\n          to { opacity: 1; transform: translateX(-50%) translateY(0); }\n        }\n      "})]})}function c(){let e=(0,n.useContext)(o);if(!e)throw Error("useNotifications must be used within NotificationProvider");return e}},3290:function(e,t,r){"use strict";r.d(t,{ZP:function(){return o}});var a=r(2265),n=r(6428),s=r(7937);let i={AUTO:"auto",WEBSOCKET:"websocket",SSE:"sse"};function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{transport:r=i.AUTO,onStatusChange:o=null,onLocationUpdate:l=null,onNotification:c=null}=t,[d,u]=(0,a.useState)({}),[h,_]=(0,a.useState)(null),[m,p]=(0,a.useState)(!1),[x,v]=(0,a.useState)(null),g=(0,a.useRef)(null),f=(0,a.useRef)(null),j=(0,a.useRef)(0),y=(0,a.useRef)(!1),b=(0,a.useRef)(null),N=(0,a.useRef)(null),S=(0,a.useRef)(null),k=(0,a.useRef)(!1),C=(0,a.useRef)(null),O=(0,a.useRef)(o),R=(0,a.useRef)(l),w=(0,a.useRef)(c),B=(0,a.useRef)(r);(0,a.useEffect)(()=>{O.current=o,R.current=l,w.current=c,B.current=r},[o,l,c,r]),(0,a.useEffect)(()=>{try{let e=localStorage.getItem("superbora_user");if(e){let t=JSON.parse(e);C.current=t.id}}catch(t){let e=(0,n.LP)();e&&(C.current="user_".concat(e.substring(0,8)))}},[]);let E=(0,a.useCallback)(t=>{y.current||u(r=>{let a=t.order_id||e,n=r[a]||{};return O.current&&n.status!==t.status&&t.status&&O.current({orderId:a,previousStatus:n.status,newStatus:t.status,statusLabel:t.status_label,data:t}),{...r,[a]:{...n,...t,receivedAt:Date.now()}}})},[e]),T=(0,a.useCallback)(e=>{if(y.current)return;let t={...e,receivedAt:Date.now()};_(t),R.current&&R.current(t)},[]),I=(0,a.useCallback)(e=>{!y.current&&w.current&&w.current(e)},[]),{connectionState:L,isConnected:M,connect:P,disconnect:D}=(0,s.ZP)({userId:C.current,orderId:e,onOrderUpdate:E,onDriverLocation:T,onNotification:I,onConnectionChange:e=>{e===s.Lk.ERROR&&(k.current=!0)},config:{autoConnect:!1}}),A=(0,a.useCallback)(()=>{if(y.current)return;let t=(0,n.LP)();if(!t)return;g.current&&(g.current.close(),g.current=null),f.current&&(clearTimeout(f.current),f.current=null);let r="/api/mercado/orders/stream.php?token=".concat(encodeURIComponent(t));e&&(r+="&order_id=".concat(encodeURIComponent(e)));let a=new EventSource(r);g.current=a;let s=()=>{y.current||(p(!0),v(i.SSE),j.current=0)},o=e=>{if(!y.current)try{let t=JSON.parse(e.data);E(t)}catch(e){}},l=e=>{if(!y.current)try{let t=JSON.parse(e.data);T(t)}catch(e){}},c=e=>{if(!y.current)try{let t=JSON.parse(e.data);I(t)}catch(e){}},d=()=>{y.current||(a.close(),p(!1),W(0))},u=e=>{if(!y.current)try{let t=JSON.parse(e.data);if("Token invalido"===t.message||"Token necessario"===t.message){a.close(),p(!1);return}}catch(e){}};a.addEventListener("connected",s),a.addEventListener("order_update",o),a.addEventListener("location_update",l),a.addEventListener("notification",c),a.addEventListener("stream_end",d),a.addEventListener("error",u),a._handlers={connected:s,order_update:o,location_update:l,notification:c,stream_end:d,error:u},a.onerror=()=>{if(!y.current&&(p(!1),a.close(),j.current<10)){let e=Math.min(3e4,1e3*Math.pow(2,j.current));j.current+=1,W(e)}}},[e,E,T,I]);b.current=A;let W=(0,a.useCallback)(e=>{f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{y.current||b.current()},e)},[]),z=(0,a.useCallback)(()=>{if(g.current){let e=g.current;e._handlers&&(e.removeEventListener("connected",e._handlers.connected),e.removeEventListener("order_update",e._handlers.order_update),e.removeEventListener("location_update",e._handlers.location_update),e.removeEventListener("notification",e._handlers.notification),e.removeEventListener("stream_end",e._handlers.stream_end),e.removeEventListener("error",e._handlers.error),e._handlers=null),e.close(),g.current=null}f.current&&(clearTimeout(f.current),f.current=null),p(!1)},[]),V=(0,a.useCallback)(()=>{let e=B.current;e===i.SSE||e===i.AUTO&&k.current?(v(i.SSE),A()):(e===i.WEBSOCKET||e===i.AUTO)&&(v(i.WEBSOCKET),P())},[A,P]);N.current=V;let H=(0,a.useCallback)(()=>{z(),D(),p(!1),v(null)},[z,D]);return S.current=H,(0,a.useEffect)(()=>(y.current=!1,N.current(),()=>{y.current=!0,S.current()}),[e,r]),(0,a.useEffect)(()=>{x===i.WEBSOCKET&&(p(M),L===s.Lk.ERROR&&r===i.AUTO&&(k.current=!0,v(i.SSE),A()))},[M,L,r,A,x]),{orderUpdates:d,shopperLocation:h,connected:m,transport:x,getOrderUpdate:e=>d[e]||null,reconnect:V}}},7937:function(e,t,r){"use strict";r.d(t,{Lk:function(){return s},ZP:function(){return l}});var a=r(2265),n=r(6428);let s={CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",RECONNECTING:"reconnecting",ERROR:"error"},i={WELCOME:"welcome",AUTH_SUCCESS:"auth_success",AUTH_ERROR:"auth_error",ORDER_UPDATE:"order_update",DRIVER_LOCATION:"driver_location",CHAT_MESSAGE:"chat_message",NOTIFICATION:"notification",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed",PONG:"pong",ERROR:"error"},o={url:null,port:8080,secure:!0,reconnect:!0,reconnectMaxRetries:5,reconnectBaseDelay:2e3,reconnectMaxDelay:6e4,pingInterval:3e4,autoConnect:!0};function l(){let{userId:e=null,orderId:t=null,onMessage:r=null,onOrderUpdate:l=null,onDriverLocation:c=null,onChatMessage:d=null,onNotification:u=null,onConnectionChange:h=null,config:_={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[m,p]=(0,a.useState)(s.DISCONNECTED),[x,v]=(0,a.useState)(null),[g,f]=(0,a.useState)([]),j=(0,a.useRef)(null),y=(0,a.useRef)({...o,..._}),b=(0,a.useRef)(0),N=(0,a.useRef)(null),S=(0,a.useRef)(null),k=(0,a.useRef)(!1),C=(0,a.useRef)([]),O=(0,a.useRef)(!1),R=(0,a.useRef)(!1),w=(0,a.useRef)(!0),B=(0,a.useRef)(null),E=(0,a.useRef)(null),T=(0,a.useRef)(null),I=(0,a.useCallback)(()=>{let e=y.current;if(e.url)return e.url;let t=e.secure?"wss":"ws",r=window.location.hostname;return"".concat(t,"://").concat(r,"/ws")},[]),L=(0,a.useCallback)(e=>{p(e),h&&h(e)},[h]),M=(0,a.useCallback)(e=>j.current&&j.current.readyState===WebSocket.OPEN?(j.current.send(JSON.stringify(e)),!0):(C.current.push(e),!1),[]),P=(0,a.useCallback)(()=>{for(var e;C.current.length>0&&(null===(e=j.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN;){let e=C.current.shift();j.current.send(JSON.stringify(e))}},[]),D=(0,a.useCallback)(()=>{let t=(0,n.LP)();if(!t||!e){console.warn("[WebSocket] Cannot authenticate: missing token or userId");return}M({type:"auth",partner_id:e,user_id:e,token:t,client_type:"vitrine"})},[M,e]),A=(0,a.useCallback)(e=>{O.current?M({type:"subscribe",channel:e}):C.current.push({type:"subscribe",channel:e})},[M]),W=(0,a.useCallback)(e=>{M({type:"unsubscribe",channel:e}),f(t=>t.filter(t=>t!==e))},[M]),z=(0,a.useCallback)(()=>{M({type:"ping"})},[M]),V=(0,a.useCallback)(()=>{S.current&&clearInterval(S.current),S.current=setInterval(z,y.current.pingInterval)},[z]),H=(0,a.useCallback)(()=>{S.current&&(clearInterval(S.current),S.current=null)},[]),F=(0,a.useCallback)(e=>{if(!k.current)try{let a=JSON.parse(e.data);switch(v(a),r&&r(a),a.type){case i.WELCOME:D();break;case i.AUTH_SUCCESS:O.current=!0,a.subscribed_channels&&f(a.subscribed_channels),P(),t&&A("order_".concat(t));break;case i.AUTH_ERROR:console.error("[WebSocket] Authentication failed:",a.message),O.current=!1,L(s.ERROR);break;case i.ORDER_UPDATE:l&&l(a.data||a);break;case i.DRIVER_LOCATION:c&&c(a.data||a);break;case i.CHAT_MESSAGE:d&&d(a.data||a);break;case i.NOTIFICATION:u&&u(a.data||a);break;case i.SUBSCRIBED:f(e=>e.includes(a.channel)?e:[...e,a.channel]);break;case i.UNSUBSCRIBED:f(e=>e.filter(e=>e!==a.channel));break;case i.PONG:break;case i.ERROR:console.error("[WebSocket] Server error:",a.message)}}catch(e){console.error("[WebSocket] Failed to parse message:",e)}},[r,l,c,d,u,D,P,A,t,L]),U=(0,a.useCallback)(()=>{let e=y.current;if(!e.reconnect||b.current>=e.reconnectMaxRetries){L(s.DISCONNECTED);return}let t=Math.min(e.reconnectMaxDelay,e.reconnectBaseDelay*Math.pow(2,b.current));b.current+=1,L(s.RECONNECTING),N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{k.current||B.current()},t)},[L]),q=(0,a.useCallback)(()=>{if(k.current)return;let e=I();if(!e){console.warn("[WebSocket] Cannot connect: no URL available");return}j.current&&(j.current.close(),j.current=null),L(s.CONNECTING),O.current=!1;try{let t=new WebSocket(e);j.current=t,t.onopen=()=>{if(k.current){t.close();return}w.current=!1,R.current=!1,L(s.CONNECTED),b.current=0,V()},t.onmessage=F,t.onerror=()=>{R.current||(console.warn("[WebSocket] Connection failed (server may be unavailable)"),R.current=!0)},t.onclose=e=>{if(!k.current){if(H(),O.current=!1,1e3===e.code||w.current&&b.current>=2){L(s.DISCONNECTED);return}U()}}}catch(e){console.error("[WebSocket] Failed to create connection:",e),U()}},[I,F,U,V,H,L]);B.current=q,E.current=q;let G=(0,a.useCallback)(()=>{N.current&&(clearTimeout(N.current),N.current=null),H(),j.current&&(j.current.close(1e3,"Client disconnect"),j.current=null),O.current=!1,f([]),C.current=[],L(s.DISCONNECTED)},[H,L]);T.current=G;let Q=(0,a.useCallback)(()=>{G(),b.current=0,q()},[q,G]);return(0,a.useEffect)(()=>{y.current={...o,..._}},[_]),(0,a.useEffect)(()=>(k.current=!1,y.current.autoConnect&&e&&E.current(),()=>{k.current=!0,C.current=[],T.current()}),[e]),(0,a.useEffect)(()=>{t&&O.current&&A("order_".concat(t))},[t,A]),{connectionState:m,isConnected:m===s.CONNECTED,isConnecting:m===s.CONNECTING,isReconnecting:m===s.RECONNECTING,lastMessage:x,subscribedChannels:g,connect:q,disconnect:G,reconnect:Q,send:M,subscribe:A,unsubscribe:W}}},706:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return eB}});var a=r(7437),n=r(2265),s=r(9376),i=r(7648),o=r(5775),l=r.n(o),c=r(8779),d=r(3098),u=r.n(d);let h={pendente:1,pending:1,confirmado:2,aceito:2,confirmed:2,coletando:3,shopping:3,preparando:3,pronto:3.5,coleta_finalizada:3.5,purchased:3.5,aguardando_entregador:3.7,saiu_entrega:4,em_entrega:4,delivering:4,entregue:5,delivered:5},_=[{key:"pedido_feito",label:"Pedido feito",rank:1,icon:(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("polyline",{points:"12 6 12 12 16 14"})]})},{key:"shopper_aceito",label:"Shopper a caminho",rank:2,icon:(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,a.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,a.jsx)("polyline",{points:"16 11 18 13 22 9"})]})},{key:"coletando",label:"Coletando itens",rank:3,icon:(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"9",cy:"21",r:"1"}),(0,a.jsx)("circle",{cx:"20",cy:"21",r:"1"}),(0,a.jsx)("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]})},{key:"em_entrega",label:"Em entrega",rank:4,icon:(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M5 17h2a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H3v12a2 2 0 0 0 2 2z"}),(0,a.jsx)("path",{d:"M9 5h4l3 6h3"}),(0,a.jsx)("circle",{cx:"7.5",cy:"17.5",r:"2.5"}),(0,a.jsx)("circle",{cx:"17.5",cy:"17.5",r:"2.5"}),(0,a.jsx)("path",{d:"M15 17h-5"}),(0,a.jsx)("path",{d:"M13 11V5"}),(0,a.jsx)("path",{d:"M19 11h-3"}),(0,a.jsx)("path",{d:"M19 11v4a2 2 0 0 1-2 2h-.5"})]})},{key:"entregue",label:"Entregue",rank:5,icon:(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,a.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]})}],m=[{key:"pedido_feito",label:"Pedido feito",rank:1,icon:(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("polyline",{points:"12 6 12 12 16 14"})]})},{key:"confirmado",label:"Confirmado",rank:2,icon:(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("polyline",{points:"20 6 9 17 4 12"})})},{key:"preparando",label:"Preparando",rank:3,icon:(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M12 2C6.48 2 2 6 2 10c0 1.5.5 3 1.5 4.5L2 22l4-2 4 2 4-2 4 2-1.5-7.5C17.5 13 18 11.5 18 10c0-4-4.48-8-6-8z"}),(0,a.jsx)("path",{d:"M9 10h.01"}),(0,a.jsx)("path",{d:"M15 10h.01"})]})},{key:"saiu_entrega",label:"Saiu p/ entrega",rank:4,icon:(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M5 17h2a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H3v12a2 2 0 0 0 2 2z"}),(0,a.jsx)("path",{d:"M9 5h4l3 6h3"}),(0,a.jsx)("circle",{cx:"7.5",cy:"17.5",r:"2.5"}),(0,a.jsx)("circle",{cx:"17.5",cy:"17.5",r:"2.5"}),(0,a.jsx)("path",{d:"M15 17h-5"}),(0,a.jsx)("path",{d:"M13 11V5"}),(0,a.jsx)("path",{d:"M19 11h-3"}),(0,a.jsx)("path",{d:"M19 11v4a2 2 0 0 1-2 2h-.5"})]})},{key:"entregue",label:"Entregue",rank:5,icon:(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,a.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]})}];function p(e){if(!e)return null;let t=new Date(e);return isNaN(t.getTime())?null:t.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}function x(e){let{status:t,flow:r="restaurante",timestamps:n={}}=e,s=h[t]||1;return(0,a.jsx)("div",{className:u().container,children:(0,a.jsx)("div",{className:u().timeline,children:("mercado"===r?_:m).map(e=>{let t=s>e.rank,r=s>=e.rank&&s<e.rank+1,i=5===e.rank?s>=5:r,o="future";t?o="completed":i&&(o="current");let l=n[e.key]?p(n[e.key]):"current"===o&&n.current?p(n.current):null;return(0,a.jsxs)("div",{className:"".concat(u().step," ").concat(u()[o]),children:[(0,a.jsx)("div",{className:"".concat(u().circle," ").concat("completed"===o?u().circleCompleted:"current"===o?u().circleCurrent:u().circleFuture),children:(0,a.jsx)("span",{className:u().icon,children:e.icon})}),(0,a.jsx)("div",{className:"".concat(u().label," ").concat("completed"===o?u().labelCompleted:"current"===o?u().labelCurrent:""),children:e.label}),l&&(0,a.jsx)("div",{className:u().time,children:l})]},e.key)})})})}var v=r(6428),g=r(2472),f=r.n(g);function j(e){var t;let{photos:r=[],maxVisible:s=4,compact:i=!1,className:o=""}=e,[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(0),[h,_]=(0,n.useState)(null),m=(0,n.useRef)(null),p=r.map(e=>"string"==typeof e?{photo_url:e,thumbnail_url:e}:e),x=p.slice(0,s),v=p.length-s,g=(0,n.useRef)(""),j=(0,n.useCallback)(e=>{u(e),c(!0),g.current=document.body.style.overflow,document.body.style.overflow="hidden"},[]),y=(0,n.useCallback)(()=>{c(!1),document.body.style.overflow=g.current},[]),b=(0,n.useCallback)(()=>{u(e=>e<p.length-1?e+1:0)},[p.length]),N=(0,n.useCallback)(()=>{u(e=>e>0?e-1:p.length-1)},[p.length]);return((0,n.useEffect)(()=>{if(!l)return;let e=e=>{switch(e.key){case"Escape":y();break;case"ArrowRight":b();break;case"ArrowLeft":N()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l,y,b,N]),r.length)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"".concat(f().gallery," ").concat(i?f().compact:""," ").concat(o),children:[x.map((e,t)=>(0,a.jsxs)("button",{type:"button",className:f().thumbnail,onClick:()=>j(t),"aria-label":"Ver foto ".concat(t+1," de ").concat(p.length),children:[(0,a.jsx)("img",{src:e.thumbnail_url||e.photo_url,alt:"Foto de avaliacao ".concat(t+1),className:f().thumbImage,loading:"lazy"}),t===s-1&&v>0&&(0,a.jsxs)("div",{className:f().moreOverlay,children:[(0,a.jsxs)("span",{className:f().moreCount,children:["+",v]}),(0,a.jsx)("span",{className:f().moreLabel,children:"fotos"})]})]},e.id||e.photo_url||t)),p.length>1&&(0,a.jsxs)("div",{className:f().countBadge,children:[(0,a.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,a.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,a.jsx)("polyline",{points:"21 15 16 10 5 21"})]}),p.length]})]}),l&&(0,a.jsxs)("div",{ref:m,className:f().lightbox,onClick:y,onTouchStart:e=>{e.touches&&e.touches.length>0&&_(e.touches[0].clientX)},onTouchEnd:e=>{if(null===h)return;if(!e.changedTouches||0===e.changedTouches.length){_(null);return}let t=h-e.changedTouches[0].clientX;Math.abs(t)>50&&(t>0?b():N()),_(null)},role:"dialog","aria-modal":"true","aria-label":"Visualizador de fotos",children:[(0,a.jsx)("button",{type:"button",className:f().closeBtn,onClick:y,"aria-label":"Fechar",children:(0,a.jsxs)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),(0,a.jsxs)("div",{className:f().lightboxContent,onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("img",{src:null===(t=p[d])||void 0===t?void 0:t.photo_url,alt:"Foto ".concat(d+1," de ").concat(p.length),className:f().lightboxImage}),p.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{type:"button",className:"".concat(f().navBtn," ").concat(f().navPrev),onClick:e=>{e.stopPropagation(),N()},"aria-label":"Foto anterior",children:(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,a.jsx)("button",{type:"button",className:"".concat(f().navBtn," ").concat(f().navNext),onClick:e=>{e.stopPropagation(),b()},"aria-label":"Proxima foto",children:(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("polyline",{points:"9 18 15 12 9 6"})})})]})]}),p.length>1&&(0,a.jsx)("div",{className:f().dotsContainer,children:p.map((e,t)=>(0,a.jsx)("button",{type:"button",className:"".concat(f().dot," ").concat(t===d?f().dotActive:""),onClick:e=>{e.stopPropagation(),u(t)},"aria-label":"Ir para foto ".concat(t+1)},e.id||e.photo_url||t))}),(0,a.jsxs)("div",{className:f().counter,children:[d+1," / ",p.length]})]})]}):null}var y=r(4627),b=r.n(y);let N=["image/jpeg","image/png","image/webp"];function S(e){let{filled:t}=e;return t?(0,a.jsx)("svg",{className:"".concat(b().starIcon," ").concat(b().starFilled),viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:(0,a.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):(0,a.jsx)("svg",{className:"".concat(b().starIcon," ").concat(b().starEmpty),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}function k(){return(0,a.jsx)("svg",{className:b().ratedStar,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:(0,a.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}function C(e){let{orderId:t,existingReview:r}=e,[s,i]=(0,n.useState)(0),[o,l]=(0,n.useState)(0),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),[_,m]=(0,n.useState)(!1),[p,x]=(0,n.useState)(""),[g,f]=(0,n.useState)([]),[y,C]=(0,n.useState)(!1),[O,R]=(0,n.useState)(0),w=(0,n.useRef)(!0);(0,n.useEffect)(()=>(w.current=!0,()=>{w.current=!1}),[]);let B=(0,n.useRef)(null),[E,T]=(0,n.useState)(!1);if(r&&r.rating){let e=r.photos||(r.photo?[r.photo]:[]);return(0,a.jsx)("div",{className:b().container,children:(0,a.jsxs)("div",{className:b().rated,children:[(0,a.jsx)("div",{style:{fontSize:14,fontWeight:500,color:"var(--color-text-secondary)",marginBottom:8},children:"Sua avaliacao"}),(0,a.jsx)("div",{className:b().ratedStars,children:[1,2,3,4,5].map(e=>e<=r.rating?(0,a.jsx)(k,{},e):(0,a.jsx)("svg",{className:b().ratedStar,viewBox:"0 0 24 24",fill:"none",stroke:"#d1d5db",strokeWidth:"1.5",children:(0,a.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})},e))}),r.comment&&(0,a.jsxs)("div",{className:b().ratedComment,children:['"',r.comment,'"']}),e.length>0&&(0,a.jsx)("div",{className:b().ratedPhotos,children:(0,a.jsx)(j,{photos:e,maxVisible:3,compact:!0})})]})})}if(_)return(0,a.jsx)("div",{className:b().container,children:(0,a.jsxs)("div",{className:b().success,children:[(0,a.jsx)("div",{className:b().successIcon,children:(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("polyline",{points:"20 6 9 17 4 12"})})}),(0,a.jsx)("div",{className:b().successText,children:"Obrigado pela avaliacao!"}),(0,a.jsx)("div",{className:b().successSub,children:"Sua opiniao ajuda a melhorar o servico"})]})});let I=async e=>new Promise((t,r)=>{let a=new FileReader;a.onload=a=>{let n=new Image;n.onload=()=>{let{width:a,height:s}=n;(a>1920||s>1920)&&(a>s?(s=Math.round(1920*s/a),a=1920):(a=Math.round(1920*a/s),s=1920));let i=document.createElement("canvas");i.width=a,i.height=s,i.getContext("2d").drawImage(n,0,0,a,s),i.toBlob(a=>{a?t(new File([a],e.name,{type:"image/jpeg"})):r(Error("Erro ao comprimir imagem"))},"image/jpeg",.85)},n.onerror=()=>r(Error("Erro ao carregar imagem")),n.src=a.target.result},a.onerror=()=>r(Error("Erro ao ler arquivo")),a.readAsDataURL(e)}),L=async(e,r)=>{let a=e;if(e.size>1048576)try{a=await I(e)}catch(e){console.warn("Compression failed, using original:",e)}let n=new FormData;n.append("image",a),n.append("order_id",t.toString());let s=(0,v.LP)();return new Promise((e,t)=>{let r=new XMLHttpRequest;r.upload.addEventListener("progress",e=>{e.lengthComputable&&w.current&&R(Math.round(e.loaded/e.total*100))}),r.addEventListener("load",()=>{try{let a=JSON.parse(r.responseText);a.success?e(a.data):t(Error(a.message||"Erro no upload"))}catch(e){t(Error("Resposta invalida do servidor"))}}),r.addEventListener("error",()=>{t(Error("Erro de conexao"))}),r.open("POST","/api/mercado/vitrine/review-photo-upload.php"),s&&r.setRequestHeader("Authorization","Bearer ".concat(s)),r.send(n)})},M=(0,n.useCallback)(async e=>{if(y||g.length>=3)return;let t=e[0];if(!t)return;if(!N.includes(t.type)){x("Formato invalido. Use JPG, PNG ou WebP.");return}if(t.size>5242880){x("Foto muito grande. Maximo 5MB.");return}x("");let r=new FileReader;r.onload=async e=>{let r=Date.now().toString(),a={id:r,file:t,preview:e.target.result,uploading:!0,uploaded:!1,photo_url:null};f(e=>[...e,a]),C(!0),R(0);try{let e=await L(t,r);f(t=>t.map(t=>t.id===r?{...t,uploading:!1,uploaded:!0,photo_url:e.photo_url,thumbnail_url:e.thumbnail_url,photo_id:e.photo_id}:t))}catch(e){f(e=>e.filter(e=>e.id!==r)),x(e.message||"Erro ao enviar foto")}finally{C(!1),R(0)}},r.readAsDataURL(t)},[y,g.length,t]),P=(0,n.useCallback)(e=>{f(t=>t.filter(t=>t.id!==e&&t.photo_id!==e))},[]);async function D(){if(0===s){x("Selecione uma nota de 1 a 5 estrelas");return}if(y){x("Aguarde o upload da foto terminar");return}h(!0),x("");try{let e={order_id:t,rating:s,comment:c.trim()},r=g.filter(e=>e.uploaded);r.length>0&&!r[0].photo_url&&(e.photo=g[0].preview),await (0,v.sg)("/orders/rate.php",e),m(!0)}catch(e){x(e.message||"Erro ao enviar avaliacao")}finally{h(!1)}}let A=o||s,W=g.length<3&&!y;return(0,a.jsxs)("div",{className:b().container,children:[(0,a.jsx)("div",{className:b().header,children:"Como foi seu pedido?"}),(0,a.jsx)("div",{className:b().subtitle,children:"Avalie sua experiencia com este pedido"}),(0,a.jsx)("div",{className:b().stars,children:[1,2,3,4,5].map(e=>(0,a.jsx)("button",{type:"button",className:b().star,onClick:()=>i(e),onMouseEnter:()=>l(e),onMouseLeave:()=>l(0),children:(0,a.jsx)(S,{filled:e<=A})},e))}),(0,a.jsxs)("div",{className:b().commentWrap,children:[(0,a.jsx)("div",{className:b().commentLabel,children:"Comentario (opcional)"}),(0,a.jsx)("textarea",{className:b().textarea,value:c,onChange:e=>d(e.target.value),placeholder:"Conte como foi sua experiencia...",maxLength:500,rows:3,"aria-label":"Comentario sobre o pedido"}),(0,a.jsxs)("div",{className:b().charCounter,children:[c.length,"/500"]}),(0,a.jsx)("input",{ref:B,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:e=>M(Array.from(e.target.files||[])),style:{display:"none"}}),g.length>0&&(0,a.jsx)("div",{className:b().photosGrid,children:g.map(e=>(0,a.jsxs)("div",{className:"".concat(b().photoPreviewItem," ").concat(e.uploading?b().uploading:""),children:[(0,a.jsx)("img",{src:e.preview,alt:"Preview",className:b().photoPreviewImg}),e.uploading&&(0,a.jsxs)("div",{className:b().uploadOverlay,children:[(0,a.jsx)("div",{className:b().uploadSpinner}),(0,a.jsxs)("span",{className:b().uploadPercent,children:[O,"%"]})]}),!e.uploading&&(0,a.jsx)("button",{type:"button",className:b().photoRemoveBtn,onClick:()=>P(e.id),title:"Remover foto",children:(0,a.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},e.id))}),W&&(0,a.jsxs)("div",{className:"".concat(b().photoUploadArea," ").concat(E?b().dragging:""),onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),!y&&g.length<3&&T(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),T(!1)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation(),T(!1),y||g.length>=3||M(Array.from(e.dataTransfer.files).filter(e=>e.type.startsWith("image/")))},onClick:()=>{var e;return null===(e=B.current)||void 0===e?void 0:e.click()},role:"button",tabIndex:0,onKeyDown:e=>{if("Enter"===e.key||" "===e.key){var t;e.preventDefault(),null===(t=B.current)||void 0===t||t.click()}},children:[(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z"}),(0,a.jsx)("circle",{cx:"12",cy:"13",r:"4"})]}),(0,a.jsx)("span",{className:b().photoUploadText,children:E?"Solte a foto aqui":0===g.length?"Adicionar fotos":"Adicionar mais"}),(0,a.jsxs)("span",{className:b().photoUploadHint,children:[g.length,"/",3," fotos - JPG, PNG, WebP ate 5MB"]})]})]}),(0,a.jsx)("button",{className:b().submitBtn,onClick:D,disabled:u||0===s||y,children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:b().loadingSpinner}),"Enviando..."]}):"Avaliar"}),p&&(0,a.jsx)("div",{className:b().error,children:p})]})}var O=r(7650);let R=[{value:2,label:"R$ 2"},{value:5,label:"R$ 5"},{value:10,label:"R$ 10"},{value:0,label:"Outro"}];function w(e){let{orderId:t,existingTip:r,deliveredAt:s}=e,[i,o]=(0,n.useState)(null),[l,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(!1),[h,_]=(0,n.useState)(r>0),[m,p]=(0,n.useState)(""),x=s?new Date(s).getTime():0,g=Date.now()-x<864e5;if(h||r>0)return(0,a.jsxs)("div",{style:B,children:[(0,a.jsxs)("div",{style:E,children:[(0,a.jsx)("div",{style:T,children:(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("path",{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{fontWeight:600,fontSize:16},children:"Gorjeta enviada!"}),(0,a.jsxs)("div",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:["Voce deu ",(0,O.o_)(r||i||l)," de gorjeta"]})]})]}),(0,a.jsx)("div",{style:V,children:"Obrigado por valorizar o trabalho do entregador!"})]});if(!g)return null;let f=async()=>{let e=0===i?parseFloat(l):i;if(!e||e<=0){p("Informe um valor valido");return}u(!0),p("");try{await (0,v.sg)("/customer/post-tip.php",{order_id:t,amount:e}),_(!0)}catch(e){p(e.message||"Erro ao enviar gorjeta")}finally{u(!1)}};return(0,a.jsxs)("div",{style:B,children:[(0,a.jsxs)("div",{style:E,children:[(0,a.jsx)("div",{style:T,children:(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("path",{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{fontWeight:600,fontSize:16},children:"Dar gorjeta ao entregador"}),(0,a.jsx)("div",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:"Gostou do servico? Valorize o trabalho do entregador"})]})]}),(0,a.jsx)("div",{style:I,children:R.map(e=>(0,a.jsx)("button",{onClick:()=>{o(e.value),p("")},style:{...L,...i===e.value?M:{}},children:e.label},e.value))}),0===i&&(0,a.jsxs)("div",{style:P,children:[(0,a.jsx)("span",{style:{fontSize:16,fontWeight:600},children:"R$"}),(0,a.jsx)("input",{type:"number",value:l,onChange:e=>c(e.target.value),placeholder:"0,00",style:D,min:"1",step:"1"})]}),m&&(0,a.jsx)("div",{style:A,children:m}),(0,a.jsx)("button",{onClick:f,disabled:d||!i&&!l,style:{...W,opacity:!d&&(i||l)?1:.6},children:d?"Enviando...":"Enviar gorjeta"}),(0,a.jsx)("div",{style:z,children:"100% do valor vai para o entregador"})]})}let B={background:"var(--color-bg)",borderRadius:12,padding:16,boxShadow:"var(--shadow-card)"},E={display:"flex",alignItems:"flex-start",gap:12,marginBottom:16},T={width:44,height:44,borderRadius:12,background:"#fef9c3",color:"#ca8a04",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},I={display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8,marginBottom:12},L={padding:"12px 8px",background:"var(--color-bg-elevated)",border:"1px solid var(--color-border)",borderRadius:8,fontSize:14,fontWeight:600,color:"var(--color-text)",cursor:"pointer",transition:"all 0.2s"},M={background:"#fef9c3",borderColor:"#ca8a04",color:"#854d0e"},P={display:"flex",alignItems:"center",gap:8,padding:12,background:"var(--color-bg-elevated)",borderRadius:8,marginBottom:12},D={flex:1,background:"none",border:"none",fontSize:18,fontWeight:600,color:"var(--color-text)",outline:"none"},A={fontSize:13,color:"#dc2626",marginBottom:8,textAlign:"center"},W={width:"100%",padding:14,background:"#ca8a04",color:"#fff",border:"none",borderRadius:10,fontSize:15,fontWeight:600,cursor:"pointer",marginBottom:8},z={textAlign:"center",fontSize:12,color:"var(--color-text-muted)"},V={textAlign:"center",padding:"12px 16px",background:"#fef9c3",borderRadius:8,fontSize:14,color:"#854d0e"};var H=r(9365),F=r.n(H);function U(e){return e?new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}function q(e){var t,r;let{order:s,onClose:i}=e,o=(0,n.useRef)(null);if(!s)return null;async function l(){var e;let t=["Comprovante de pedido - SuperBora","Pedido: ".concat(s.order_number),"Data: ".concat(U(s.date)),"Loja: ".concat((null===(e=s.partner)||void 0===e?void 0:e.name)||""),"","Itens:",...s.items.map(e=>"  ".concat(e.quantity,"x ").concat(e.name," - ").concat((0,O.o_)(e.total))),"","Subtotal: ".concat((0,O.o_)(s.subtotal)),"Entrega: ".concat(0===s.delivery_fee?"Gratis":(0,O.o_)(s.delivery_fee)),s.service_fee>0?"Taxa de servico: ".concat((0,O.o_)(s.service_fee)):null,s.tip>0?"Gorjeta: ".concat((0,O.o_)(s.tip)):null,s.coupon_discount>0?"Desconto: -".concat((0,O.o_)(s.coupon_discount)):null,"Total: ".concat((0,O.o_)(s.total)),"","Pagamento: ".concat(G(s.payment_method)),s.address?"Endereco: ".concat(s.address):null].filter(Boolean).join("\n");if(navigator.share)try{await navigator.share({title:"Comprovante - Pedido ".concat(s.order_number),text:t})}catch(e){}else try{await navigator.clipboard.writeText(t),alert("Comprovante copiado para a area de transferencia!")}catch(e){}}return(0,a.jsx)("div",{className:F().overlay,onClick:i,children:(0,a.jsxs)("div",{className:F().container,onClick:e=>e.stopPropagation(),ref:o,children:[(0,a.jsx)("button",{className:F().closeBtn,onClick:i,"aria-label":"Fechar",children:(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),(0,a.jsxs)("div",{className:F().receipt,id:"receipt-print-area",children:[(0,a.jsxs)("div",{className:F().receiptHeader,children:[(0,a.jsx)("div",{className:F().logo,children:"SuperBora"}),(0,a.jsx)("div",{className:F().receiptTitle,children:"Comprovante de pedido"})]}),(0,a.jsx)("div",{className:F().divider}),(0,a.jsxs)("div",{className:F().infoRow,children:[(0,a.jsx)("span",{className:F().infoLabel,children:"Pedido"}),(0,a.jsx)("span",{className:F().infoValue,children:s.order_number})]}),(0,a.jsxs)("div",{className:F().infoRow,children:[(0,a.jsx)("span",{className:F().infoLabel,children:"Data"}),(0,a.jsx)("span",{className:F().infoValue,children:U(s.date)})]}),(0,a.jsxs)("div",{className:F().infoRow,children:[(0,a.jsx)("span",{className:F().infoLabel,children:"Status"}),(0,a.jsx)("span",{className:F().infoValue,style:{textTransform:"capitalize"},children:"entregue"===s.status?"Entregue":s.status})]}),(0,a.jsx)("div",{className:F().divider}),(0,a.jsx)("div",{className:F().sectionTitle,children:"Estabelecimento"}),(0,a.jsx)("div",{className:F().storeName,children:null===(t=s.partner)||void 0===t?void 0:t.name}),(null===(r=s.partner)||void 0===r?void 0:r.address)&&(0,a.jsx)("div",{className:F().storeAddress,children:s.partner.address}),(0,a.jsx)("div",{className:F().divider}),(0,a.jsx)("div",{className:F().sectionTitle,children:"Itens"}),(0,a.jsxs)("div",{className:F().itemsTable,children:[(0,a.jsxs)("div",{className:F().itemsHeader,children:[(0,a.jsx)("span",{children:"Qtd"}),(0,a.jsx)("span",{children:"Item"}),(0,a.jsx)("span",{children:"Valor"})]}),s.items.map((e,t)=>(0,a.jsxs)("div",{className:F().itemRow,children:[(0,a.jsxs)("span",{className:F().itemQty,children:[e.quantity,"x"]}),(0,a.jsx)("span",{className:F().itemName,children:e.name}),(0,a.jsx)("span",{className:F().itemPrice,children:(0,O.o_)(e.total)})]},t))]}),(0,a.jsx)("div",{className:F().divider}),(0,a.jsxs)("div",{className:F().totalsSection,children:[(0,a.jsxs)("div",{className:F().totalRow,children:[(0,a.jsx)("span",{children:"Subtotal"}),(0,a.jsx)("span",{children:(0,O.o_)(s.subtotal)})]}),(0,a.jsxs)("div",{className:F().totalRow,children:[(0,a.jsx)("span",{children:"Taxa de entrega"}),(0,a.jsx)("span",{children:0===s.delivery_fee?"Gratis":(0,O.o_)(s.delivery_fee)})]}),s.service_fee>0&&(0,a.jsxs)("div",{className:F().totalRow,children:[(0,a.jsx)("span",{children:"Taxa de servico"}),(0,a.jsx)("span",{children:(0,O.o_)(s.service_fee)})]}),s.tip>0&&(0,a.jsxs)("div",{className:F().totalRow,children:[(0,a.jsx)("span",{children:"Gorjeta"}),(0,a.jsx)("span",{children:(0,O.o_)(s.tip)})]}),s.coupon_discount>0&&(0,a.jsxs)("div",{className:"".concat(F().totalRow," ").concat(F().discount),children:[(0,a.jsx)("span",{children:"Desconto"}),(0,a.jsxs)("span",{children:["-",(0,O.o_)(s.coupon_discount)]})]}),(0,a.jsxs)("div",{className:F().grandTotal,children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsx)("span",{children:(0,O.o_)(s.total)})]})]}),(0,a.jsx)("div",{className:F().divider}),(0,a.jsxs)("div",{className:F().infoRow,children:[(0,a.jsx)("span",{className:F().infoLabel,children:"Forma de pagamento"}),(0,a.jsx)("span",{className:F().infoValue,children:G(s.payment_method)})]}),s.address&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:F().dividerLight}),(0,a.jsx)("div",{className:F().sectionTitle,children:"Endereco de entrega"}),(0,a.jsx)("div",{className:F().addressText,children:s.address})]}),(0,a.jsxs)("div",{className:F().receiptFooter,children:[(0,a.jsx)("div",{children:"SuperBora - Delivery"}),(0,a.jsx)("div",{className:F().footerSmall,children:"Obrigado pela preferencia!"})]})]}),(0,a.jsxs)("div",{className:F().actions,children:[(0,a.jsxs)("button",{className:F().shareBtn,onClick:l,children:[(0,a.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"18",cy:"5",r:"3"}),(0,a.jsx)("circle",{cx:"6",cy:"12",r:"3"}),(0,a.jsx)("circle",{cx:"18",cy:"19",r:"3"}),(0,a.jsx)("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),(0,a.jsx)("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),"Compartilhar"]}),(0,a.jsxs)("button",{className:F().printBtn,onClick:function(){window.print()},children:[(0,a.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("polyline",{points:"6 9 6 2 18 2 18 9"}),(0,a.jsx)("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),(0,a.jsx)("rect",{x:"6",y:"14",width:"12",height:"8"})]}),"Salvar / Imprimir"]})]})]})})}function G(e){return({pix:"PIX",credito:"Cartao de credito",debito:"Cartao de debito",dinheiro:"Dinheiro",vale_refeicao:"Vale-refeicao",credit_card:"Cartao de credito",debit_card:"Cartao de debito",cash:"Dinheiro"})[e]||e||"Nao informado"}var Q=r(4609),J=r(7937),X=r(6939),Y=r(8321),Z=r.n(Y);let K=["Preciso de ajuda com meu pedido","Quero reportar um problema","Duvida sobre cobranca"],$={SENDING:"sending",SENT:"sent",DELIVERED:"delivered",READ:"read"};function ee(e){let{status:t}=e;return t===$.SENDING?(0,a.jsx)("span",{className:Z().readReceipt,children:(0,a.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",opacity:"0.5",children:(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10",strokeDasharray:"31.4",strokeDashoffset:"10",children:(0,a.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 12 12",to:"360 12 12",dur:"1s",repeatCount:"indefinite"})})})}):t===$.SENT?(0,a.jsx)("span",{className:Z().readReceipt,children:(0,a.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:(0,a.jsx)("path",{d:"M5 12l5 5L20 7"})})}):t===$.DELIVERED?(0,a.jsx)("span",{className:Z().readReceipt,children:(0,a.jsxs)("svg",{width:"18",height:"14",viewBox:"0 0 28 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[(0,a.jsx)("path",{d:"M2 12l5 5L17 7"}),(0,a.jsx)("path",{d:"M8 12l5 5L23 7"})]})}):t===$.READ?(0,a.jsx)("span",{className:"".concat(Z().readReceipt," ").concat(Z().readReceiptRead),children:(0,a.jsxs)("svg",{width:"18",height:"14",viewBox:"0 0 28 24",fill:"none",stroke:"#00A868",strokeWidth:"2.5",children:[(0,a.jsx)("path",{d:"M2 12l5 5L17 7"}),(0,a.jsx)("path",{d:"M8 12l5 5L23 7"})]})}):null}function et(e){let{who:t}=e;return(0,a.jsxs)("div",{className:Z().typingIndicator,children:[(0,a.jsxs)("span",{className:Z().typingDots,children:[(0,a.jsx)("span",{className:Z().typingDot,style:{animationDelay:"0ms"}}),(0,a.jsx)("span",{className:Z().typingDot,style:{animationDelay:"150ms"}}),(0,a.jsx)("span",{className:Z().typingDot,style:{animationDelay:"300ms"}})]}),(0,a.jsxs)("span",{className:Z().typingText,children:[t," esta digitando..."]})]})}function er(e){let{orderId:t,hasDriver:r,showSupport:s,userId:i}=e,[o,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)("customer"),[u,h]=(0,n.useState)([]),[_,m]=(0,n.useState)(!1),[p,x]=(0,n.useState)(""),[g,f]=(0,n.useState)(!1),[j,y]=(0,n.useState)({customer:0,delivery:0,support:0}),[b,N]=(0,n.useState)({}),S=(0,n.useRef)(null),k=(0,n.useRef)(null),C=(0,n.useRef)(null),O=(0,n.useRef)(0),[R,w]=(0,n.useState)(0),B=(0,n.useRef)({startY:0,velocity:0,lastY:0,lastTime:0}),{light:E,notification:T}=(0,Q.Cv)(),I=(0,X.p)(),L=j.customer+j.delivery+j.support,M=(0,n.useCallback)(()=>{if(i)return i;try{let e=localStorage.getItem("superbora_user");if(e)return JSON.parse(e).id}catch(e){console.warn("[OrderChat] Failed to parse user data from localStorage")}return null},[i]),P=(0,n.useCallback)(e=>{if(e&&e.order_id===parseInt(t)){if(e.chat_type!==c){y(t=>({...t,[e.chat_type]:(t[e.chat_type]||0)+1}));return}h(t=>new Set(t.map(e=>e.id)).has(e.id)?t:("customer"!==e.sender_type&&T(),[...t,e])),"customer"!==e.sender_type&&N(t=>{let r={...t};return delete r[e.sender_type],r})}},[t,c,T]),D=(0,n.useCallback)(e=>{var r;if(!e||e.order_id!==parseInt(t)||e.chat_type!==c||"customer"===e.sender_type)return;let a=e.sender_name||("shopper"===(r=e.sender_type)?"Loja":"delivery"===r?"Motorista":"support"===r||"admin"===r?"Suporte":"Alguem");e.is_typing?(N(t=>({...t,[e.sender_type]:a})),setTimeout(()=>{N(t=>{let r={...t};return delete r[e.sender_type],r})},5e3)):N(t=>{let r={...t};return delete r[e.sender_type],r})},[t,c]),A=(0,n.useCallback)(e=>{e&&e.order_id===parseInt(t)&&e.chat_type===c&&h(t=>t.map(t=>t.id<=e.last_read_id&&"customer"===t.sender_type?{...t,status:$.READ}:t))},[t,c]),W=(0,n.useCallback)(e=>{e&&e.order_id===parseInt(t)&&h(t=>t.map(t=>t.id===e.message_id&&"customer"===t.sender_type&&t.status!==$.READ?{...t,status:$.DELIVERED}:t))},[t]),{isConnected:z,send:V}=(0,J.ZP)({userId:M(),orderId:t,onChatMessage:P,onMessage:e=>{"typing_indicator"===e.type?D(e.data||e):"read_receipt"===e.type?A(e.data||e):"message_delivered"===e.type&&W(e.data||e)}}),H=(0,n.useCallback)(e=>{if(!z)return;let r=Date.now();e&&r-O.current<1e3||(O.current=r,V({type:"typing_indicator",order_id:parseInt(t),chat_type:c,is_typing:e}))},[z,V,t,c]),F=(0,n.useCallback)(()=>{if(!z||0===u.length)return;let e=u[u.length-1];e&&"customer"!==e.sender_type&&V({type:"mark_read",order_id:parseInt(t),chat_type:c,last_read_id:e.id}),y(e=>({...e,[c]:0}))},[z,V,t,c,u]),U=(0,n.useCallback)(e=>{if(!o)return;let t=e.touches[0];B.current={startY:t.clientY,velocity:0,lastY:t.clientY,lastTime:Date.now()}},[o]),q=(0,n.useCallback)(e=>{if(!o||!B.current.startY)return;let t=e.touches[0],r=Date.now(),a=r-B.current.lastTime,n=t.clientY-B.current.lastY;a>0&&(B.current.velocity=n/a),B.current.lastY=t.clientY,B.current.lastTime=r;let s=t.clientY-B.current.startY;s>0&&w(s)},[o]),G=(0,n.useCallback)(()=>{let e=B.current.velocity;(R>80||e>.5)&&o&&(E(),l(!1)),w(0),B.current={startY:0,velocity:0,lastY:0,lastTime:0}},[R,o,E]),Y=(0,n.useCallback)(async e=>{try{let r=await (0,v.SC)("/orders/chat.php",{order_id:t,chat_type:e||c});h(r.messages||[]),r.unread&&y(r.unread)}catch(e){console.error("Chat load error:",e)}},[t,c]);(0,n.useEffect)(()=>{o&&(m(!0),Y(c).finally(()=>m(!1)))},[o,c,Y]),(0,n.useEffect)(()=>{o&&u.length>0&&F()},[o,u,F]),(0,n.useEffect)(()=>{o&&S.current&&S.current.scrollIntoView({behavior:"smooth"})},[u,o]),(0,n.useEffect)(()=>{if(o)return;function e(){(0,v.SC)("/orders/chat.php",{order_id:t,chat_type:"customer"}).then(e=>{e.unread&&y(e.unread)}).catch(e=>{"AbortError"!==e.name&&console.warn("[OrderChat] Failed to fetch unread count")})}e();let r=setInterval(e,6e4);return()=>clearInterval(r)},[t,o]);let er=(0,n.useCallback)(e=>{let t=e.target.value;x(t),t.trim()?(H(!0),C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{H(!1)},2e3)):H(!1)},[H]);async function ea(e){if(e.preventDefault(),!p.trim()||g)return;let r=p.trim(),a="temp_".concat(Date.now()),n={id:a,message:r,sender_type:"customer",sender_name:"Voce",created_at:new Date().toISOString(),status:$.SENDING};h(e=>[...e,n]),x(""),H(!1),f(!0);try{let e=await (0,v.sg)("/orders/chat.php",{order_id:parseInt(t),message:r,chat_type:c});h(t=>t.map(t=>t.id===a?{...e,status:$.SENT}:t))}catch(e){h(e=>e.filter(e=>e.id!==a)),I(e.message||"Erro ao enviar mensagem")}finally{f(!1)}}function en(e){d(e),h([]),N({})}function es(e){return e?new Date(e).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):""}let ei=Object.values(b);return(0,a.jsxs)("div",{className:Z().chatSection,children:[(0,a.jsxs)("button",{className:Z().chatToggle,onClick:()=>l(!o),children:[(0,a.jsxs)("div",{className:Z().chatToggleLeft,children:[(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,a.jsx)("span",{children:"Mensagens"}),z&&(0,a.jsx)("span",{className:Z().chatConnectedDot,title:"Conectado em tempo real"})]}),(0,a.jsxs)("div",{className:Z().chatToggleRight,children:[L>0&&(0,a.jsx)("span",{className:Z().chatUnreadBadge,children:L}),(0,a.jsx)("svg",{className:"".concat(Z().chatChevron," ").concat(o?Z().chatChevronOpen:""),width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("polyline",{points:"6 9 12 15 18 9"})})]})]}),o&&(0,a.jsxs)("div",{onTouchStart:U,onTouchMove:q,onTouchEnd:G,style:{transform:R>0?"translateY(".concat(.3*R,"px)"):void 0,opacity:R>0?Math.max(.5,1-R/200):1,transition:0===R?"transform 200ms ease, opacity 200ms ease":"none"},children:[(0,a.jsxs)("div",{className:Z().chatTabs,children:[(0,a.jsxs)("button",{className:"".concat(Z().chatTab," ").concat("customer"===c?Z().chatTabActive:""),onClick:()=>en("customer"),children:["Loja",j.customer>0&&(0,a.jsx)("span",{className:Z().chatTabBadge,children:j.customer})]}),r&&(0,a.jsxs)("button",{className:"".concat(Z().chatTab," ").concat("delivery"===c?Z().chatTabActive:""),onClick:()=>en("delivery"),children:["Motorista",j.delivery>0&&(0,a.jsx)("span",{className:Z().chatTabBadge,children:j.delivery})]}),!1!==s&&(0,a.jsxs)("button",{className:"".concat(Z().chatTab," ").concat("support"===c?Z().chatTabActive:""),onClick:()=>en("support"),children:["Suporte",j.support>0&&(0,a.jsx)("span",{className:Z().chatTabBadge,children:j.support})]})]}),(0,a.jsxs)("div",{className:Z().chatMessages,ref:k,children:[_?(0,a.jsx)("div",{className:Z().chatLoading,children:(0,a.jsx)("div",{className:Z().spinner,style:{width:20,height:20}})}):0===u.length?(0,a.jsx)("div",{className:Z().chatEmpty,children:"customer"===c?"Nenhuma mensagem com a loja":"delivery"===c?"Nenhuma mensagem com o motorista":"Nenhuma mensagem com o suporte"}):u.map(e=>{var t;if("system"===e.sender_type)return(0,a.jsxs)("div",{className:Z().chatBubbleWrap,style:{alignSelf:"center",maxWidth:"90%"},children:[(0,a.jsx)("div",{className:Z().chatBubbleSystem,children:e.message}),(0,a.jsx)("div",{className:Z().chatBubbleTime,style:{textAlign:"center"},children:es(e.created_at)})]},e.id);let r="customer"===e.sender_type;return(0,a.jsxs)("div",{className:"".concat(Z().chatBubbleWrap," ").concat(r?Z().chatBubbleRight:Z().chatBubbleLeft),children:[!r&&(0,a.jsx)("div",{className:"".concat(Z().chatSenderName," ").concat("customer"===(t=e.sender_type)?Z().chatSenderCustomer:"shopper"===t?Z().chatSenderShopper:"delivery"===t?Z().chatSenderDelivery:"system"===t?Z().chatSenderSystem:"support"===t||"admin"===t?Z().chatSenderSupport:""),children:e.sender_name}),(0,a.jsx)("div",{className:"".concat(Z().chatBubble," ").concat("system"===e.sender_type?Z().chatBubbleSystem:"customer"===e.sender_type?Z().chatBubbleMine:"shopper"===e.sender_type?Z().chatBubbleStore:"delivery"===e.sender_type?Z().chatBubbleDriver:"support"===e.sender_type||"admin"===e.sender_type?Z().chatBubbleSupport:Z().chatBubbleStore),children:e.message}),(0,a.jsxs)("div",{className:Z().chatBubbleFooter,children:[(0,a.jsx)("span",{className:Z().chatBubbleTime,children:es(e.created_at)}),r&&(0,a.jsx)(ee,{status:e.status||$.SENT})]})]},e.id)}),ei.length>0&&(0,a.jsx)(et,{who:ei.join(", ")}),(0,a.jsx)("div",{ref:S})]}),"support"===c&&0===u.length&&!_&&(0,a.jsx)("div",{className:Z().chatQuickReplies,children:K.map(e=>(0,a.jsx)("button",{className:Z().chatQuickReplyBtn,onClick:()=>{x(e)},children:e},e))}),(0,a.jsxs)("form",{className:Z().chatInputBar,onSubmit:ea,children:[(0,a.jsx)("input",{className:Z().chatInput,value:p,onChange:er,placeholder:"customer"===c?"Mensagem para a loja...":"delivery"===c?"Mensagem para o motorista...":"Mensagem para o suporte...",maxLength:1e3,disabled:g}),(0,a.jsx)("button",{className:Z().chatSendBtn,type:"submit",disabled:g||!p.trim(),"aria-label":"Enviar",children:(0,a.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("path",{d:"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"})})})]})]})]})}function ea(e){let{orderId:t,onUpdate:r}=e,[s,i]=(0,n.useState)([]),[o,l]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null),u=(0,n.useCallback)(async()=>{try{let e=await (0,v.SC)("/orders/substitution.php",{order_id:t});i(e.substitutions||[])}catch(e){console.error("Substitution load error:",e)}finally{l(!1)}},[t]);async function h(e,t){let a=e.id||e.item_id;d(a);try{let n={action:t};e.id&&"substitution_table"===e.source?n.substitution_id=e.id:n.item_id=e.item_id,await (0,v.pE)("/orders/substitution.php",n),i(e=>e.map(e=>(e.id||e.item_id)===a?{...e,status:"accept"===t?"accepted":"rejected"}:e)),r&&r()}catch(e){alert(e.message||"Erro ao processar substituicao")}finally{d(null)}}if((0,n.useEffect)(()=>{u();let e=setInterval(u,15e3);return()=>clearInterval(e)},[u]),o||0===s.length)return null;let _=s.filter(e=>"pending"===e.status),m=s.filter(e=>"pending"!==e.status);return 0===_.length&&0===m.length?null:(0,a.jsxs)("div",{className:Z().subAlertSection,children:[_.map(e=>{let t=e.id||e.item_id,r=c===t;return(0,a.jsxs)("div",{className:Z().subAlertCard,children:[(0,a.jsxs)("div",{className:Z().subAlertHeader,children:[(0,a.jsxs)("svg",{className:Z().subAlertIcon,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),(0,a.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,a.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),(0,a.jsx)("div",{className:Z().subAlertTitle,children:"Item indisponivel - Substituicao sugerida"})]}),(0,a.jsxs)("div",{className:Z().subAlertBody,children:[(0,a.jsxs)("div",{className:Z().subAlertItem,children:[(0,a.jsx)("div",{className:"".concat(Z().subAlertItemName," ").concat(Z().subAlertItemStrike),children:e.original_item_name}),(0,a.jsx)("div",{className:Z().subAlertItemPrice,children:(0,O.o_)(e.original_price)})]}),(0,a.jsxs)("svg",{className:Z().subAlertArrow,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),(0,a.jsx)("polyline",{points:"12 5 19 12 12 19"})]}),(0,a.jsxs)("div",{className:Z().subAlertItem,children:[(0,a.jsx)("div",{className:Z().subAlertItemName,children:e.suggested_item_name}),(0,a.jsxs)("div",{className:Z().subAlertItemPrice,children:[(0,O.o_)(e.suggested_price),e.suggested_price!==e.original_price&&(0,a.jsxs)("span",{style:{marginLeft:6,fontSize:11,color:e.suggested_price>e.original_price?"#dc2626":"#15803d",fontWeight:600},children:[e.suggested_price>e.original_price?"+":"",(0,O.o_)(e.suggested_price-e.original_price)]})]})]})]}),e.shopper_note&&(0,a.jsxs)("div",{className:Z().subAlertNote,children:['Nota da loja: "',e.shopper_note,'"']}),(0,a.jsxs)("div",{className:Z().subAlertActions,children:[(0,a.jsx)("button",{className:Z().subAlertAccept,onClick:()=>h(e,"accept"),disabled:r,children:r?"Processando...":"Aceitar"}),(0,a.jsx)("button",{className:Z().subAlertReject,onClick:()=>h(e,"reject"),disabled:r,children:"Recusar"})]})]},"pending-".concat(t))}),m.map(e=>{let t=e.id||e.item_id,r="accepted"===e.status;return(0,a.jsx)("div",{className:Z().subAlertResolved,children:(0,a.jsxs)("div",{className:Z().subAlertResolvedRow,children:[(0,a.jsxs)("div",{className:Z().subAlertResolvedInfo,children:[(0,a.jsx)("div",{className:Z().subAlertResolvedOriginal,children:e.original_item_name}),r?(0,a.jsxs)("div",{className:Z().subAlertResolvedNew,children:[e.suggested_item_name," - ",(0,O.o_)(e.suggested_price)]}):(0,a.jsx)("div",{className:Z().subAlertResolvedNew,style:{textDecoration:"line-through",color:"var(--color-text-muted)"},children:"Removido do pedido"})]}),(0,a.jsx)("span",{className:r?Z().subAlertBadgeAccepted:Z().subAlertBadgeRejected,children:r?"Substituido":"Removido"})]})},"resolved-".concat(t))})]})}var en=r(2885),es=r.n(en);function ei(e){let{orderId:t,onClose:r,onSaved:s}=e,[i,o]=(0,n.useState)(!0),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(""),[h,_]=(0,n.useState)(null),[m,p]=(0,n.useState)([]),[x,g]=(0,n.useState)(!1),[f,j]=(0,n.useState)(""),y=(0,n.useRef)(null),b=(0,n.useCallback)(async()=>{o(!0),u("");try{let e=await (0,v.SC)("/orders/edit.php",{order_id:t});_(e.order),p(e.items.map(e=>({...e,removed:!1})))}catch(e){u(e.message||"Erro ao carregar itens do pedido")}finally{o(!1)}},[t]);function N(e,t){p(r=>r.map(r=>{if(r.product_id!==e)return r;let a=r.quantity+t;return a<=0?{...r,removed:!0,quantity:0}:a>r.estoque?r:{...r,quantity:a,removed:!1}}))}(0,n.useEffect)(()=>(b(),()=>{y.current&&clearTimeout(y.current)}),[b]);let S=m.filter(e=>!e.removed&&e.quantity>0),k=S.reduce((e,t)=>{var r;return e+(null!==(r=t.current_price)&&void 0!==r?r:t.price)*t.quantity},0),C=h?h.delivery_fee:0,R=h?h.service_fee:0,w=h?h.tip:0,B=h?h.coupon_discount:0,E=Math.max(0,k-B+C+R+w),[T,I]=(0,n.useState)([]);async function L(){if(0===S.length){u("O pedido deve ter pelo menos um item"),g(!1);return}if(h&&h.min_order_value>0&&k<h.min_order_value){u("Pedido minimo: ".concat((0,O.o_)(h.min_order_value))),g(!1);return}c(!0),u("");try{let e={order_id:t,items:S.map(e=>({product_id:e.product_id,quantity:e.quantity,notes:e.notes||""}))};await (0,v.pE)("/orders/edit.php",e),g(!1),j("Pedido atualizado com sucesso!"),y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{j(""),null==s||s(),null==r||r()},1500)}catch(e){u(e.message||"Erro ao salvar alteracoes"),g(!1)}finally{c(!1)}}return((0,n.useEffect)(()=>{h&&m.length>0&&0===T.length&&I(m.map(e=>({product_id:e.product_id,quantity:e.quantity,removed:!1})))},[h,m,T.length]),(()=>{if(!(!h||0===T.length||Math.abs(k-h.subtotal)>.01||m.some(e=>e.removed)))return m.some(e=>{let t=T.find(t=>t.product_id===e.product_id);return!t||t.quantity!==e.quantity})})(),i)?(0,a.jsx)("div",{className:es().overlay,children:(0,a.jsx)("div",{className:es().modal,children:(0,a.jsxs)("div",{className:es().loader,children:[(0,a.jsx)("div",{className:es().spinner}),(0,a.jsx)("span",{children:"Carregando itens..."})]})})}):(0,a.jsx)("div",{className:es().overlay,onClick:e=>{e.target!==e.currentTarget||l||null==r||r()},children:(0,a.jsxs)("div",{className:es().modal,children:[(0,a.jsxs)("div",{className:es().header,children:[(0,a.jsx)("button",{className:es().closeBtn,onClick:()=>!l&&(null==r?void 0:r()),type:"button","aria-label":"Fechar",children:(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),(0,a.jsx)("div",{className:es().headerTitle,children:"Editar pedido"}),(0,a.jsx)("div",{className:es().headerSub,children:null==h?void 0:h.order_number})]}),d&&(0,a.jsxs)("div",{className:es().errorBanner,children:[(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,a.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),d]}),(0,a.jsx)("div",{className:es().itemsList,children:m.map(e=>{var t,r;return(0,a.jsxs)("div",{className:"".concat(es().item," ").concat(e.removed?es().itemRemoved:""),children:[(0,a.jsxs)("div",{className:es().itemLeft,children:[e.image&&(0,a.jsx)("img",{src:e.image,alt:e.name||"Imagem do produto",className:es().itemImg}),(0,a.jsxs)("div",{className:es().itemInfo,children:[(0,a.jsx)("div",{className:es().itemName,children:e.name}),(0,a.jsxs)("div",{className:es().itemPrice,children:[(0,O.o_)(null!==(t=e.current_price)&&void 0!==t?t:e.price),e.current_price&&e.current_price!==e.price&&(0,a.jsx)("span",{className:es().itemPriceOld,children:(0,O.o_)(e.price)})]}),!e.available&&!e.removed&&(0,a.jsx)("div",{className:es().itemUnavailable,children:"Indisponivel"})]})]}),(0,a.jsxs)("div",{className:es().itemRight,children:[e.removed?(0,a.jsx)("button",{className:es().restoreBtn,onClick:()=>{var t;return t=e.product_id,void p(e=>e.map(e=>e.product_id===t?{...e,removed:!1,quantity:1}:e))},type:"button",children:"Restaurar"}):(0,a.jsxs)("div",{className:es().qtyControls,children:[(0,a.jsx)("button",{className:es().qtyBtn,onClick:()=>{var t;return e.quantity<=1?(t=e.product_id,void p(e=>e.map(e=>e.product_id===t?{...e,removed:!0,quantity:0}:e))):N(e.product_id,-1)},type:"button",children:e.quantity<=1?(0,a.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,a.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}):(0,a.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})}),(0,a.jsx)("span",{className:es().qtyValue,children:e.quantity}),(0,a.jsx)("button",{className:"".concat(es().qtyBtn," ").concat(es().qtyBtnAdd),onClick:()=>N(e.product_id,1),disabled:e.quantity>=e.estoque,type:"button",children:(0,a.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,a.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),!e.removed&&(0,a.jsx)("div",{className:es().itemTotal,children:(0,O.o_)((null!==(r=e.current_price)&&void 0!==r?r:e.price)*e.quantity)})]})]},e.product_id)})}),(0,a.jsxs)("button",{className:es().addItemsBtn,onClick:function(){if(h){try{localStorage.setItem("superbora_editing_order",JSON.stringify({order_id:t,partner_id:h.partner_id,partner_name:h.partner_name}))}catch(e){console.warn("[EditOrder] Failed to save editing order to localStorage")}window.location.href="/mercado/vitrine/loja?id=".concat(h.partner_id)}},type:"button",children:[(0,a.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,a.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Adicionar itens"]}),(0,a.jsxs)("div",{className:es().totals,children:[(0,a.jsxs)("div",{className:es().totalRow,children:[(0,a.jsx)("span",{children:"Subtotal"}),(0,a.jsx)("span",{children:(0,O.o_)(k)})]}),C>0&&(0,a.jsxs)("div",{className:es().totalRow,children:[(0,a.jsx)("span",{children:"Entrega"}),(0,a.jsx)("span",{children:(0,O.o_)(C)})]}),B>0&&(0,a.jsxs)("div",{className:es().totalRow,style:{color:"var(--color-accent)"},children:[(0,a.jsx)("span",{children:"Desconto"}),(0,a.jsxs)("span",{children:["-",(0,O.o_)(B)]})]}),(0,a.jsxs)("div",{className:es().totalFinal,children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsx)("span",{children:(0,O.o_)(E)})]})]}),(0,a.jsx)("button",{className:es().saveBtn,onClick:()=>g(!0),disabled:l||0===S.length,type:"button",children:l?"Salvando...":"Salvar alteracoes"}),x&&(0,a.jsx)("div",{className:es().confirmOverlay,onClick:()=>!l&&g(!1),children:(0,a.jsxs)("div",{className:es().confirmModal,onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:es().confirmTitle,children:"Confirmar alteracoes?"}),(0,a.jsxs)("div",{className:es().confirmText,children:["O pedido sera atualizado com ",S.length," ",1===S.length?"item":"itens",".",(0,a.jsx)("br",{}),"Novo total: ",(0,a.jsx)("strong",{children:(0,O.o_)(E)})]}),(0,a.jsxs)("div",{className:es().confirmActions,children:[(0,a.jsx)("button",{className:es().confirmCancel,onClick:()=>g(!1),disabled:l,type:"button",children:"Voltar"}),(0,a.jsx)("button",{className:es().confirmSave,onClick:L,disabled:l,type:"button",children:l?"Salvando...":"Confirmar"})]})]})}),f&&(0,a.jsx)("div",{className:es().toast,children:f})]})})}let eo=["Itens com defeito ou danificados","Itens errados entregues","Itens faltando no pedido","Qualidade abaixo do esperado","Pedido atrasou muito","Outro"];function el(e){let{orderId:t,items:r,orderTotal:s,onClose:i,onSubmitted:o}=e,[l,c]=(0,n.useState)({}),[d,u]=(0,n.useState)(""),[h,_]=(0,n.useState)(""),[m,p]=(0,n.useState)(!1),[x,g]=(0,n.useState)(!1),[f,j]=(0,n.useState)("");function y(e,t){let a=Math.min(r[e].quantity||1,Math.max(1,t));c(t=>({...t,[e]:a}))}let b=(0,n.useMemo)(()=>{let e=0;return Object.entries(l).forEach(t=>{let[a,n]=t,s=r[parseInt(a)];s&&(e+=(s.price||0)*n)}),Math.min(e,s||1/0)},[l,r,s]),N="Outro"===d?h:d+(h?" - ".concat(h):"");async function S(){if(0===Object.keys(l).length){j("Selecione pelo menos um item");return}if(!N||N.length<10){j("Descreva o motivo com mais detalhes (min. 10 caracteres)");return}j(""),g(!0);try{let e=Object.entries(l).map(e=>{let[t,a]=e,n=r[parseInt(t)];return{item_id:n.product_id||n.item_id||parseInt(t),product_id:n.product_id,quantity:a}}),a=await (0,v.sg)("/orders/refund.php",{order_id:t,reason:N,items:e});o&&a.refund&&o(a.refund)}catch(e){j(e.message||"Erro ao solicitar reembolso")}finally{g(!1)}}return(0,a.jsx)("div",{className:Z().cancelOverlay,onClick:()=>!x&&i(),children:(0,a.jsxs)("div",{className:Z().refundModal,onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:Z().refundModalHeader,children:[(0,a.jsx)("div",{className:Z().cancelModalTitle,children:"Solicitar reembolso"}),(0,a.jsx)("button",{className:Z().refundCloseBtn,onClick:()=>!x&&i(),children:(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,a.jsxs)("div",{className:Z().refundModalBody,children:[(0,a.jsxs)("div",{style:{marginBottom:16},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[(0,a.jsx)("div",{style:{fontWeight:600,fontSize:14},children:"Selecione os itens"}),(0,a.jsx)("button",{style:{fontSize:13,color:"var(--color-accent)",background:"none",border:"none",cursor:"pointer",fontWeight:600},onClick:function(){if(m)c({}),p(!1);else{let e={};r.forEach((t,r)=>{e[r]=t.quantity||1}),c(e),p(!0)}},children:m?"Desmarcar todos":"Selecionar todos"})]}),(0,a.jsx)("div",{className:Z().refundItemList,children:r.map((e,t)=>{let n=void 0!==l[t];return(0,a.jsxs)("div",{className:"".concat(Z().refundItem," ").concat(n?Z().refundItemSelected:""),onClick:()=>{c(e=>{let a={...e};return a[t]?delete a[t]:a[t]=r[t].quantity||1,a})},children:[(0,a.jsx)("div",{className:Z().refundItemCheck,children:(0,a.jsx)("div",{className:"".concat(Z().refundCheckbox," ").concat(n?Z().refundCheckboxChecked:""),children:n&&(0,a.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:(0,a.jsx)("polyline",{points:"20 6 9 17 4 12"})})})}),(0,a.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,a.jsx)("div",{style:{fontSize:14,fontWeight:500},children:e.name}),(0,a.jsxs)("div",{style:{fontSize:12,color:"var(--color-text-muted)"},children:[(0,O.o_)(e.price)," x ",e.quantity]})]}),n&&e.quantity>1&&(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:Z().refundQtyBtn,onClick:()=>y(t,(l[t]||1)-1),children:"-"}),(0,a.jsx)("span",{style:{fontSize:14,fontWeight:600,minWidth:20,textAlign:"center"},children:l[t]}),(0,a.jsx)("button",{className:Z().refundQtyBtn,onClick:()=>y(t,(l[t]||1)+1),children:"+"})]}),(0,a.jsx)("div",{style:{fontWeight:600,fontSize:14,whiteSpace:"nowrap",marginLeft:8},children:(0,O.o_)((e.price||0)*(l[t]||e.quantity))})]},e.id||e.product_id||t)})})]}),(0,a.jsxs)("div",{style:{marginBottom:16},children:[(0,a.jsx)("div",{style:{fontWeight:600,fontSize:14,marginBottom:8},children:"Motivo"}),(0,a.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginBottom:8},children:eo.map(e=>(0,a.jsx)("button",{className:"".concat(Z().refundReasonChip," ").concat(d===e?Z().refundReasonChipActive:""),onClick:()=>u(e),children:e},e))}),("Outro"===d||d)&&(0,a.jsx)("textarea",{className:Z().cancelModalTextarea,placeholder:"Outro"===d?"Descreva o motivo...":"Detalhes adicionais (opcional)",value:h,onChange:e=>_(e.target.value),maxLength:500,disabled:x,style:{minHeight:60}})]}),Object.keys(l).length>0&&(0,a.jsxs)("div",{className:Z().refundAmountBox,children:[(0,a.jsx)("span",{children:"Valor do reembolso"}),(0,a.jsx)("span",{className:Z().refundAmountValue,children:(0,O.o_)(b)})]}),b>0&&b<30&&(0,a.jsx)("div",{style:{fontSize:12,color:"var(--color-accent)",marginBottom:8},children:"Reembolsos abaixo de R$ 30,00 sao aprovados automaticamente."}),f&&(0,a.jsx)("div",{style:{fontSize:13,color:"var(--color-danger)",marginBottom:8},children:f})]}),(0,a.jsxs)("div",{className:Z().cancelModalActions,children:[(0,a.jsx)("button",{className:Z().cancelModalKeep,onClick:i,disabled:x,children:"Cancelar"}),(0,a.jsx)("button",{className:Z().refundSubmitBtn,onClick:S,disabled:x||0===Object.keys(l).length||!d,children:x?"Enviando...":"Solicitar reembolso"})]})]})})}let ec={moto:"Moto",carro:"Carro",bicicleta:"Bicicleta",bike:"Bicicleta",car:"Carro",motorcycle:"Moto"},ed={moto:"\uD83C\uDFCD",motorcycle:"\uD83C\uDFCD",carro:"\uD83D\uDE97",car:"\uD83D\uDE97",bicicleta:"\uD83D\uDEB2",bike:"\uD83D\uDEB2"};function eu(e){let{shopper:t,driver:r,flow:n}=e,s="mercado"===n?t:r||t;if(!s)return null;let i="mercado"===n?"Shopper":"Entregador",o=s.vehicle_type||null,l=s.vehicle_plate||null;return(0,a.jsxs)("div",{className:Z().detailSection,children:[(0,a.jsx)("div",{style:{fontWeight:600,fontSize:16,marginBottom:12},children:i}),(0,a.jsxs)("div",{className:Z().driverCard,children:[(0,a.jsx)("div",{className:Z().driverAvatar,children:s.photo?(0,a.jsx)("img",{src:s.photo,alt:s.name||i,className:Z().driverAvatarImg}):(0,a.jsx)("div",{className:Z().driverAvatarPlaceholder,children:(s.name||"?")[0].toUpperCase()})}),(0,a.jsxs)("div",{className:Z().driverDetails,children:[(0,a.jsx)("div",{className:Z().driverName,children:s.name}),s.rating>0&&(0,a.jsxs)("div",{className:Z().driverRating,children:[(0,a.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"#f59e0b",stroke:"none",children:(0,a.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),(0,a.jsx)("span",{children:Number(s.rating).toFixed(1)})]}),o&&(0,a.jsxs)("div",{className:Z().driverVehicle,children:[(0,a.jsx)("span",{children:ed[o]||"\uD83D\uDEF5"}),(0,a.jsx)("span",{children:ec[o]||o}),l&&(0,a.jsx)("span",{className:Z().driverPlate,children:l&&!(l.length<4)?l.slice(0,3)+"***":l||""})]})]}),s.phone&&(0,a.jsx)("a",{href:"tel:".concat(s.phone),className:Z().driverCallBtn,"aria-label":"Ligar",children:(0,a.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})})})]})]})}let eh=[{key:"wrong_items",label:"Itens errados",icon:"",desc:"Recebi itens diferentes do pedido"},{key:"missing_items",label:"Itens faltando",icon:"\uD83D\uDCE6",desc:"Faltaram itens no meu pedido"},{key:"damaged",label:"Itens danificados",icon:"\uD83D\uDCA5",desc:"Itens chegaram quebrados ou danificados"},{key:"quality",label:"Qualidade",icon:"\uD83D\uDC4E",desc:"Qualidade abaixo do esperado"},{key:"late",label:"Atraso",icon:"",desc:"Pedido demorou muito para chegar"},{key:"wrong_order",label:"Pedido trocado",icon:"\uD83D\uDD00",desc:"Recebi o pedido de outra pessoa"},{key:"other",label:"Outro",icon:"",desc:"Outro problema com o pedido"}],e_={open:"Aberto",in_progress:"Em analise",resolved:"Resolvido",closed:"Fechado"},em={open:"#f59e0b",in_progress:"#3b82f6",resolved:"#16a34a",closed:"#6b7280"};function ep(e){var t,r;let{orderId:s,onClose:i}=e,[o,l]=(0,n.useState)("categories"),[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(""),[_,m]=(0,n.useState)(!1),[p,x]=(0,n.useState)(""),[g,f]=(0,n.useState)([]),[j,y]=(0,n.useState)(!0),b=(0,n.useRef)(!0);async function N(){if(!c){x("Selecione uma categoria");return}if(!u.trim()||u.trim().length<10){x("Descreva o problema com mais detalhes (min. 10 caracteres)");return}x(""),m(!0);try{let e=await (0,v.sg)("/orders/help.php",{order_id:s,category:c,description:u.trim()});if(!b.current)return;e.problem&&f(t=>[e.problem,...t]),l("success")}catch(e){if(!b.current)return;x(e.message||"Erro ao enviar reclamacao")}finally{b.current&&m(!1)}}return(0,n.useEffect)(()=>(b.current=!0,()=>{b.current=!1}),[]),(0,n.useEffect)(()=>{(0,v.SC)("/orders/help.php",{order_id:s}).then(e=>{b.current&&f(e.problems||[])}).catch(e=>{"AbortError"!==e.name&&console.warn("[Help] Failed to load help history")}).finally(()=>{b.current&&y(!1)})},[s]),(0,a.jsx)("div",{className:Z().cancelOverlay,onClick:()=>!_&&i(),children:(0,a.jsxs)("div",{className:Z().helpModal,onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:Z().helpModalHeader,children:[(0,a.jsxs)("div",{className:Z().cancelModalTitle,children:["categories"===o&&"Ajuda com o pedido","form"===o&&"Descreva o problema","history"===o&&"Historico de problemas","success"===o&&"Problema reportado"]}),(0,a.jsx)("button",{className:Z().refundCloseBtn,onClick:()=>!_&&i(),children:(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,a.jsxs)("div",{className:Z().helpModalBody,children:["categories"===o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:Z().helpCategoryGrid,children:eh.map(e=>(0,a.jsxs)("button",{className:Z().helpCategoryCard,onClick:()=>{d(e.key),l("form")},children:[(0,a.jsx)("div",{className:Z().helpCategoryIcon,children:e.icon}),(0,a.jsx)("div",{className:Z().helpCategoryLabel,children:e.label}),(0,a.jsx)("div",{className:Z().helpCategoryDesc,children:e.desc})]},e.key))}),g.length>0&&(0,a.jsxs)("button",{className:Z().helpHistoryLink,onClick:()=>l("history"),children:["Ver problemas anteriores (",g.length,")"]})]}),"form"===o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:Z().helpSelectedCat,children:[(0,a.jsx)("span",{children:null===(t=eh.find(e=>e.key===c))||void 0===t?void 0:t.icon}),(0,a.jsx)("span",{children:null===(r=eh.find(e=>e.key===c))||void 0===r?void 0:r.label}),(0,a.jsx)("button",{className:Z().helpChangeCat,onClick:()=>l("categories"),children:"Mudar"})]}),(0,a.jsx)("textarea",{className:Z().cancelModalTextarea,placeholder:"Descreva o que aconteceu com detalhes...",value:u,onChange:e=>h(e.target.value),maxLength:2e3,disabled:_,style:{minHeight:100}}),(0,a.jsxs)("div",{style:{fontSize:12,color:"var(--color-text-muted)",marginBottom:12},children:[u.length,"/2000 caracteres"]}),p&&(0,a.jsx)("div",{style:{fontSize:13,color:"var(--color-danger)",marginBottom:8},children:p}),(0,a.jsxs)("div",{className:Z().cancelModalActions,children:[(0,a.jsx)("button",{className:Z().cancelModalKeep,onClick:()=>l("categories"),disabled:_,children:"Voltar"}),(0,a.jsx)("button",{className:Z().helpSubmitBtn,onClick:N,disabled:_,children:_?"Enviando...":"Enviar"})]})]}),"success"===o&&(0,a.jsxs)("div",{className:Z().helpSuccessContent,children:[(0,a.jsx)("div",{className:Z().helpSuccessIcon,children:(0,a.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#16a34a",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,a.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]})}),(0,a.jsx)("div",{className:Z().helpSuccessTitle,children:"Problema registrado!"}),(0,a.jsx)("div",{className:Z().helpSuccessText,children:"Nossa equipe ira analisar e responder o mais rapido possivel. Voce pode acompanhar pelo chat de suporte."}),(0,a.jsx)("button",{className:Z().helpSubmitBtn,onClick:i,children:"Fechar"})]}),"history"===o&&(0,a.jsxs)(a.Fragment,{children:[j?(0,a.jsx)("div",{className:Z().loader,children:(0,a.jsx)("div",{className:Z().spinner})}):0===g.length?(0,a.jsx)("div",{style:{textAlign:"center",padding:24,color:"var(--color-text-muted)"},children:"Nenhum problema reportado"}):(0,a.jsx)("div",{className:Z().helpHistoryList,children:g.map(e=>{var t;return(0,a.jsxs)("div",{className:Z().helpHistoryItem,children:[(0,a.jsxs)("div",{className:Z().helpHistoryTop,children:[(0,a.jsx)("span",{className:Z().helpHistoryCat,children:e.category_label}),(0,a.jsx)("span",{className:Z().helpHistoryStatus,style:{color:em[e.status]||"#6b7280"},children:e_[e.status]||e.status})]}),(0,a.jsx)("div",{className:Z().helpHistoryDesc,children:e.description}),e.resolution&&(0,a.jsxs)("div",{className:Z().helpHistoryResolution,children:["Resolucao: ",e.resolution]}),(0,a.jsx)("div",{className:Z().helpHistoryDate,children:(t=e.created_at)?new Date(t).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):""})]},e.id)})}),(0,a.jsx)("button",{className:Z().cancelModalKeep,onClick:()=>l("categories"),style:{marginTop:12,width:"100%"},children:"Voltar"})]})]})]})})}var ex=r(6477),ev=r(3290),eg=r(9146),ef=r(6971),ej=r(5086);let ey=[{key:"",label:"Todos"},{key:"pendente,confirmado,preparando,pronto,saiu_entrega",label:"Em andamento"},{key:"entregue",label:"Entregues"},{key:"cancelado",label:"Cancelados"}],eb={pendente:"Pendente",confirmado:"Confirmado",preparando:"Preparando",pronto:"Pronto",saiu_entrega:"Saiu p/ entrega",entregue:"Entregue",cancelado:"Cancelado",recusado:"Recusado"},eN=["pendente","confirmado","preparando","pronto","saiu_entrega","em_entrega","coletando","aceito"],eS=["saiu_entrega","em_entrega"],ek=["entregue","delivered"];function eC(e){return({pendente:Z().badgePendente,confirmado:Z().badgeConfirmado,preparando:Z().badgePreparando,pronto:Z().badgePronto,saiu_entrega:Z().badgeSaiuEntrega,entregue:Z().badgeEntregue,cancelado:Z().badgeCancelado,recusado:Z().badgeCancelado})[e]||Z().badgePendente}function eO(e){if(!e)return"";let t=new Date(e);return t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})+" "+t.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}let eR=l()(()=>Promise.all([r.e(1055),r.e(2140)]).then(r.bind(r,2140)),{loadableGenerated:{webpack:()=>[2140]},ssr:!1});function ew(){return(0,a.jsx)("div",{className:Z().page,children:(0,a.jsxs)("div",{className:Z().loader,children:[(0,a.jsx)("div",{className:Z().spinner}),(0,a.jsx)("div",{style:{marginTop:16,fontSize:14,color:"var(--color-text-muted)"},children:"Carregando pedidos..."})]})})}function eB(){return(0,a.jsx)(c.Z,{children:(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)(ew,{}),children:(0,a.jsx)(eE,{})})})}function eE(){let e=(0,s.useSearchParams)().get("id");return e?(0,a.jsx)(eM,{orderId:e}):(0,a.jsx)(eT,{})}function eT(){var e,t,r,o;let l=(0,s.useRouter)(),{addItem:c,clearCart:d}=(0,eg.iQ)(),{showToast:u}=(0,ef.z)(),[h,_]=(0,n.useState)([]),[m,p]=(0,n.useState)(!0),[x,g]=(0,n.useState)(""),[f,j]=(0,n.useState)(1),[y,b]=(0,n.useState)(null),[N,S]=(0,n.useState)("orders"),[k,C]=(0,n.useState)([]),[R,w]=(0,n.useState)(!1),[B,E]=(0,n.useState)(""),[T,I]=(0,n.useState)(null),[L,M]=(0,n.useState)(!1),[P,D]=(0,n.useState)(0),{orderUpdates:A,connected:W}=(0,ev.ZP)(),z=(0,n.useCallback)(()=>(p(!0),(0,v.SC)("/orders/list.php",{status:x,page:f,limit:10}).then(e=>{_(e.orders||[]),b(e.pagination)}).catch(e=>{console.error("Failed to load orders:",e),u("Erro ao carregar pedidos","error"),_([])}).finally(()=>p(!1))),[x,f,u]);(0,n.useEffect)(()=>{z()},[z]),(0,n.useEffect)(()=>{(0,v.SC)("/orders/list.php",{status:"entregue",page:1,limit:1}).then(e=>{e.orders&&e.orders.length>0&&I(e.orders[0])}).catch(e=>{"AbortError"!==e.name&&console.warn("[Orders] Failed to load last order for reorder")}),(0,v.SC)("/orders/savings.php").then(e=>D(e.total_savings||0)).catch(e=>{"AbortError"!==e.name&&console.warn("[Orders] Failed to load savings data")})},[]);let V=async e=>{if(!L){M(!0);try{let r=(await (0,v.SC)("/orders/detail.php",{id:e.id})).order;if(r&&r.items){var t;d();let e=r.partner_id,a=null===(t=r.partner)||void 0===t?void 0:t.name;r.items.forEach(t=>{let r={id:t.product_id,nome:t.name,preco:parseFloat(t.price),imagem:t.image,quantidade:t.quantity};for(let n=0;n<t.quantity;n++)c(r,e,a,null)}),l.push("/carrinho")}}catch(e){console.error("Erro ao refazer pedido:",e)}finally{M(!1)}}};(0,n.useEffect)(()=>{A&&0!==Object.keys(A).length&&_(e=>e.map(e=>{let t=A[String(e.id)]||A[e.id];return t&&t.status&&t.status!==e.status?{...e,status:t.status}:e}))},[A]);let H=(0,n.useCallback)(async()=>{await z()},[z]);return(0,a.jsx)(ex.Z,{onRefresh:H,children:(0,a.jsxs)("div",{className:Z().page,children:[(0,a.jsx)("div",{className:Z().header,children:(0,a.jsx)("div",{className:Z().title,children:"Meus pedidos"})}),T&&(0,a.jsxs)("div",{className:Z().reorderSection,children:[(0,a.jsx)("div",{className:Z().reorderTitle,children:"Peca de novo"}),(0,a.jsxs)("div",{className:Z().reorderCard,children:[(0,a.jsxs)("div",{className:Z().reorderTop,children:[(null===(e=T.partner)||void 0===e?void 0:e.logo)?(0,a.jsx)("img",{src:T.partner.logo,alt:(null===(t=T.partner)||void 0===t?void 0:t.name)||"Logo da loja",className:Z().reorderLogo}):(0,a.jsx)("div",{className:Z().reorderLogoPlaceholder,children:((null===(r=T.partner)||void 0===r?void 0:r.name)||"?")[0]}),(0,a.jsxs)("div",{className:Z().reorderInfo,children:[(0,a.jsx)("div",{className:Z().reorderPartner,children:null===(o=T.partner)||void 0===o?void 0:o.name}),(0,a.jsxs)("div",{className:Z().reorderMeta,children:[T.items_count," ",1===T.items_count?"item":"itens"," \xb7 ",(0,O.o_)(T.total)]})]})]}),(0,a.jsx)("button",{className:Z().reorderBtn,onClick:()=>V(T),disabled:L,children:L?"Adicionando...":"Adicionar a sacola"})]})]}),P>0&&(0,a.jsxs)("div",{className:Z().savingsBanner,children:[(0,a.jsx)("span",{className:Z().savingsIcon,children:"\uD83D\uDCB0"}),(0,a.jsxs)("span",{children:["Sua economia total: ",(0,a.jsx)("strong",{children:(0,O.o_)(P)})]})]}),(0,a.jsx)("div",{className:Z().filters,children:ey.map(e=>(0,a.jsx)("button",{className:"".concat(Z().filter," ").concat(x===e.key?Z().filterActive:""),onClick:()=>{g(e.key),j(1)},children:e.label},e.key))}),m?(0,a.jsx)("div",{className:Z().loader,children:(0,a.jsx)("div",{className:Z().spinner})}):0===h.length?(0,a.jsxs)("div",{className:Z().empty,children:[(0,a.jsx)("div",{className:Z().emptyIcon,children:(0,a.jsxs)("svg",{width:"56",height:"56",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[(0,a.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,a.jsx)("polyline",{points:"14 2 14 8 20 8"})]})}),(0,a.jsx)("div",{className:Z().emptyTitle,children:"Nenhum pedido encontrado"}),(0,a.jsx)("div",{className:Z().emptyText,children:"Faca seu primeiro pedido agora"}),(0,a.jsx)(i.default,{href:"/",className:Z().emptyBtn,children:"Ver lojas"})]}):(0,a.jsxs)(a.Fragment,{children:[h.map(e=>{var t,r,n,s;return(0,a.jsxs)("div",{className:Z().card,onClick:()=>l.push("/pedidos?id=".concat(e.id)),children:[(0,a.jsxs)("div",{className:Z().cardTop,children:[(null===(t=e.partner)||void 0===t?void 0:t.logo)?(0,a.jsx)("img",{src:e.partner.logo,alt:(null===(r=e.partner)||void 0===r?void 0:r.name)||"Logo da loja",className:Z().cardLogo}):(0,a.jsx)("div",{className:Z().cardLogoPlaceholder,children:((null===(n=e.partner)||void 0===n?void 0:n.name)||"?")[0]}),(0,a.jsxs)("div",{className:Z().cardInfo,children:[(0,a.jsx)("div",{className:Z().cardPartner,children:null===(s=e.partner)||void 0===s?void 0:s.name}),(0,a.jsx)("div",{className:Z().cardDate,children:eO(e.date)})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[eN.includes(e.status)&&W&&(0,a.jsxs)("span",{className:Z().liveBadge,children:[(0,a.jsx)("span",{className:Z().liveDot}),"Ao vivo"]}),(0,a.jsx)("span",{className:"".concat(Z().badge," ").concat(eC(e.status)),children:eb[e.status]||e.status})]})]}),(0,a.jsxs)("div",{className:Z().cardBottom,children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:Z().cardItems,children:[e.items_count," ",1===e.items_count?"item":"itens"]}),(0,a.jsx)("div",{className:Z().cardNumber,children:e.order_number})]}),(0,a.jsx)("div",{className:Z().cardTotal,children:(0,O.o_)(e.total)})]})]},e.id)}),y&&y.pages>1&&(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:8,marginTop:16},children:[f>1&&(0,a.jsx)("button",{className:Z().filter,onClick:()=>j(f-1),children:"Anterior"}),(0,a.jsxs)("span",{style:{padding:"8px 16px",fontSize:14,color:"var(--color-text-secondary)"},children:[f," de ",y.pages]}),f<y.pages&&(0,a.jsx)("button",{className:Z().filter,onClick:()=>j(f+1),children:"Proximo"})]})]})]})})}let eI=["pending","pendente","aceito","confirmed","confirmado"],eL=["pending","pendente","aceito"];function eM(e){var t,r,o,l,c,d,u;let{orderId:h}=e,_=(0,s.useRouter)(),{addItem:m,clearCart:p}=(0,eg.iQ)(),[g,f]=(0,n.useState)(null),[j,y]=(0,n.useState)(!0),[b,N]=(0,n.useState)(""),[S,k]=(0,n.useState)(null),[R,B]=(0,n.useState)(!1),[E,T]=(0,n.useState)(!1),[I,L]=(0,n.useState)(!1),[M,P]=(0,n.useState)(!1),[D,A]=(0,n.useState)(""),[W,z]=(0,n.useState)(!1),[V,H]=(0,n.useState)(""),[F,U]=(0,n.useState)(!1),[G,Q]=(0,n.useState)(!1),[J,X]=(0,n.useState)(!1),[Y,K]=(0,n.useState)(null),[$,ee]=(0,n.useState)(""),et=(0,n.useRef)(null),en=(0,n.useRef)(!0);(0,n.useEffect)(()=>(en.current=!0,()=>{en.current=!1}),[]);let{orderUpdates:es,shopperLocation:eo,connected:ec}=(0,ev.ZP)(h),ed=(0,n.useCallback)(()=>(y(!0),(0,v.SC)("/orders/detail.php",{id:h}).then(e=>{en.current&&f(e.order)}).catch(e=>{en.current&&N(e.message)}).finally(()=>{en.current&&y(!1)})),[h]);(0,n.useEffect)(()=>{h&&ed()},[h,ed]),(0,n.useEffect)(()=>{let e=es[parseInt(h)]||es[String(h)];e&&g&&e.status&&e.status!==g.status&&(f(t=>t?{...t,status:e.status}:t),ed())},[es,h,g,ed]);let eh=null==g?void 0:g.status;async function e_(){B(!0);try{let e=await (0,v.sg)("/orders/reorder.php",{order_id:parseInt(h)});e.items&&e.items.length>0&&(p(),setTimeout(()=>{e.items.forEach(t=>{for(let r=0;r<t.quantity;r++)m(t,e.partner_id,e.partner_name)}),e.unavailable&&e.unavailable.length>0&&alert("Alguns itens nao estao disponiveis:\n"+e.unavailable.map(e=>e.name+" - "+e.reason).join("\n")),_.push("/carrinho")},100))}catch(e){alert(e.message)}finally{B(!1)}}async function em(){z(!0);try{await (0,v.sg)("/orders/cancel.php",{order_id:parseInt(h),reason:D.trim()}),P(!1),A(""),H("Pedido cancelado com sucesso"),setTimeout(()=>H(""),3500),await ed()}catch(e){alert(e.message||"Erro ao cancelar pedido")}finally{z(!1)}}if((0,n.useEffect)(()=>{eh&&ek.includes(eh)&&(0,v.SC)("/orders/refund.php",{order_id:h}).then(e=>K(e.refund)).catch(e=>{"AbortError"!==e.name&&console.warn("[Orders] Failed to load refund status")})},[eh,h]),(0,n.useEffect)(()=>{if(eh&&eN.includes(eh))return e(),et.current=setInterval(e,3e4),()=>clearInterval(et.current);function e(){(0,v.SC)("/orders/eta.php",{order_id:h}).then(e=>k(e)).catch(e=>{"AbortError"!==e.name&&console.warn("[Orders] Failed to load ETA")})}},[eh,h]),j)return(0,a.jsx)("div",{className:Z().page,children:(0,a.jsx)("div",{className:Z().loader,children:(0,a.jsx)("div",{className:Z().spinner})})});if(b||!g)return(0,a.jsx)("div",{className:Z().page,children:(0,a.jsxs)("div",{className:Z().empty,children:[(0,a.jsx)("div",{className:Z().emptyTitle,children:"Pedido nao encontrado"}),(0,a.jsx)("div",{className:Z().emptyText,children:b}),(0,a.jsx)(i.default,{href:"/pedidos",className:Z().emptyBtn,children:"Ver meus pedidos"})]})});let ex=eN.includes(g.status),ef=eS.includes(g.status),ey=ek.includes(g.status),ew=eI.includes(g.status),eB=eL.includes(g.status);return(0,a.jsxs)("div",{className:Z().page,children:[(0,a.jsxs)("div",{className:Z().header,children:[(0,a.jsx)("button",{className:Z().backBtn,onClick:()=>_.push("/pedidos"),"aria-label":"Voltar para pedidos",children:(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:Z().title,children:"Pedido"})})]}),(0,a.jsxs)("div",{className:Z().detailSection,children:[(0,a.jsxs)("div",{className:Z().detailHeader,children:[(0,a.jsx)("span",{className:Z().orderNumber,children:g.order_number}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[ex&&ec&&(0,a.jsxs)("span",{className:Z().liveBadge,children:[(0,a.jsx)("span",{className:Z().liveDot}),"Ao vivo"]}),(0,a.jsx)("span",{className:"".concat(Z().badge," ").concat(eC(g.status)),children:eb[g.status]||g.status})]})]}),(0,a.jsxs)("div",{className:Z().detailPartner,children:[(null===(t=g.partner)||void 0===t?void 0:t.logo)?(0,a.jsx)("img",{src:g.partner.logo,alt:(null===(r=g.partner)||void 0===r?void 0:r.name)||"Logo da loja",className:Z().cardLogo}):(0,a.jsx)("div",{className:Z().cardLogoPlaceholder,children:((null===(o=g.partner)||void 0===o?void 0:o.name)||"?")[0]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{fontWeight:600},children:null===(l=g.partner)||void 0===l?void 0:l.name}),(0,a.jsx)("div",{style:{fontSize:12,color:"var(--color-text-muted)"},children:eO(g.date)})]})]}),g.address&&(0,a.jsxs)("div",{className:Z().addressInfo,children:[(0,a.jsxs)("svg",{className:Z().addressIcon,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,a.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),(0,a.jsx)("span",{children:g.address})]})]}),ex&&(0,a.jsx)(ea,{orderId:parseInt(h),onUpdate:ed}),"cancelado"!==g.status&&"recusado"!==g.status&&(0,a.jsxs)("div",{className:Z().detailSection,children:[(0,a.jsx)("div",{style:{fontWeight:600,fontSize:16,marginBottom:16},children:"Status do pedido"}),(0,a.jsx)(x,{status:g.status,flow:g.flow||"restaurante",timestamps:{pedido_feito:g.date,confirmado:g.confirmed_at,shopper_aceito:g.confirmed_at,coletando:g.preparing_at,preparando:g.preparing_at,em_entrega:g.dispatched_at,saiu_entrega:g.dispatched_at,entregue:g.delivered_at,current:g.status_updated_at||g.date}})]}),ex&&S&&S.eta_minutes>0&&(0,a.jsxs)("div",{className:Z().detailSection,children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[(0,a.jsx)("div",{style:{fontSize:28},children:"preparando"===g.status||"confirmado"===g.status||"aceito"===g.status?"\uD83C\uDF73":"pronto"===g.status?"":"\uD83D\uDEF5"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{fontSize:16,fontWeight:700},children:["Chegada estimada: ~",S.eta_minutes," min"]}),(0,a.jsxs)("div",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:[S.prep_time_remaining>0&&"Preparo: ~".concat(S.prep_time_remaining," min"),S.prep_time_remaining>0&&S.delivery_time>0&&" | ",S.delivery_time>0&&"Entrega: ~".concat(S.delivery_time," min"),S.distance_km>0&&" (".concat(S.distance_km," km)")]})]})]}),(0,a.jsx)("div",{style:{height:6,background:"var(--color-bg-muted)",borderRadius:3,overflow:"hidden"},children:(0,a.jsx)("div",{style:{height:"100%",background:"var(--color-accent)",borderRadius:3,transition:"width 0.5s",width:"".concat(Math.min(100,Math.max(5,100-S.eta_minutes/60*100)),"%")}})})]}),(g.shopper||g.driver)&&(0,a.jsx)(eu,{shopper:g.shopper,driver:g.driver,flow:g.flow}),ef&&(0,a.jsxs)("div",{className:Z().detailSection,children:[(0,a.jsx)("div",{style:{fontWeight:600,fontSize:16,marginBottom:12},children:"Rastreamento ao vivo"}),(0,a.jsx)(eR,{orderId:h})]}),g.timeline&&g.timeline.length>0&&(0,a.jsxs)("div",{className:Z().detailSection,children:[(0,a.jsx)("div",{style:{fontWeight:600,fontSize:16,marginBottom:16},children:"Acompanhamento"}),(0,a.jsx)("div",{className:Z().timeline,children:g.timeline.map((e,t)=>(0,a.jsxs)("div",{className:Z().timelineItem,children:[(0,a.jsx)("div",{className:"".concat(Z().timelineDot," ").concat(e.completed?Z().timelineDotDone:""," ").concat(e.current?Z().timelineDotCurrent:""," ").concat(e.error?Z().timelineDotError:"")}),t<g.timeline.length-1&&(0,a.jsx)("div",{className:"".concat(Z().timelineLine," ").concat(e.completed?Z().timelineLineDone:"")}),(0,a.jsx)("div",{className:"".concat(Z().timelineLabel," ").concat(e.completed?Z().timelineLabelDone:""),children:e.label}),e.date&&(0,a.jsx)("div",{className:Z().timelineDate,children:eO(e.date)})]},t))})]}),(ex||ey)&&(0,a.jsx)(er,{orderId:parseInt(h),hasDriver:ef,showSupport:!0}),(0,a.jsxs)("div",{className:Z().detailSection,children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},children:[(0,a.jsx)("div",{style:{fontWeight:600,fontSize:16},children:"Itens do pedido"}),eB&&(0,a.jsxs)("button",{onClick:()=>U(!0),style:{display:"inline-flex",alignItems:"center",gap:6,padding:"6px 14px",fontSize:13,fontWeight:600,color:"var(--color-accent)",background:"rgba(0,168,104,0.08)",border:"1.5px solid var(--color-accent)",borderRadius:8,cursor:"pointer",transition:"background 0.15s"},children:[(0,a.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,a.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Editar pedido"]})]}),g.items.map((e,t)=>(0,a.jsxs)("div",{className:Z().detailItem,children:[e.image&&(0,a.jsx)("img",{src:e.image,alt:e.name||"Produto",className:Z().detailItemImg}),(0,a.jsxs)("div",{className:Z().detailItemInfo,children:[(0,a.jsx)("div",{className:Z().detailItemName,children:e.name}),(0,a.jsxs)("div",{className:Z().detailItemQty,children:["Qtd: ",e.quantity," x ",(0,O.o_)(e.price)]})]}),(0,a.jsx)("div",{className:Z().detailItemPrice,children:(0,O.o_)(e.total)})]},t))]}),(0,a.jsxs)("div",{className:Z().detailSection,children:[(0,a.jsx)("div",{style:{fontWeight:600,fontSize:16,marginBottom:12},children:"Pagamento"}),(0,a.jsxs)("div",{className:Z().detailRow,children:[(0,a.jsx)("span",{children:"Subtotal"}),(0,a.jsx)("span",{children:(0,O.o_)(g.subtotal)})]}),(0,a.jsxs)("div",{className:Z().detailRow,children:[(0,a.jsx)("span",{children:"Entrega"}),(0,a.jsx)("span",{children:0===g.delivery_fee?"Gratis":(0,O.o_)(g.delivery_fee)})]}),g.tip>0&&(0,a.jsxs)("div",{className:Z().detailRow,children:[(0,a.jsx)("span",{children:"Gorjeta"}),(0,a.jsx)("span",{children:(0,O.o_)(g.tip)})]}),g.coupon_discount>0&&(0,a.jsxs)("div",{className:Z().detailRow,style:{color:"var(--color-accent)"},children:[(0,a.jsx)("span",{children:"Desconto"}),(0,a.jsxs)("span",{children:["-",(0,O.o_)(g.coupon_discount)]})]}),(0,a.jsxs)("div",{className:Z().detailTotal,children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsx)("span",{children:(0,O.o_)(g.total)})]}),g.original_total&&g.original_total!==g.total&&(0,a.jsxs)("div",{className:Z().priceAdjustment,children:[(0,a.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,a.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),(0,a.jsxs)("span",{children:["Valor ajustado de ",(0,O.o_)(g.original_total)," para ",(0,O.o_)(g.total)]})]}),(0,a.jsxs)("div",{style:{marginTop:8,fontSize:13,color:"var(--color-text-muted)"},children:["Pago com ","pix"===g.payment_method?"PIX":"credito"===g.payment_method?"Cartao de credito":g.payment_method]}),g.codigo_entrega&&(0,a.jsxs)("div",{style:{marginTop:12,padding:12,background:"var(--color-bg-muted)",borderRadius:8},children:[(0,a.jsx)("div",{style:{fontSize:12,color:"var(--color-text-muted)"},children:"Codigo de entrega"}),(0,a.jsx)("div",{style:{fontSize:20,fontWeight:700,fontFamily:"monospace",letterSpacing:4},children:g.codigo_entrega})]})]}),ey&&g.delivery_photo&&(0,a.jsxs)("div",{className:Z().detailSection,children:[(0,a.jsxs)("div",{className:Z().deliveryPhotoLabel,children:[(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,a.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,a.jsx)("polyline",{points:"21 15 16 10 5 21"})]}),"Foto da entrega"]}),(0,a.jsx)("img",{src:g.delivery_photo,alt:"Foto da entrega",className:Z().deliveryPhotoThumb,onClick:()=>T(!0)}),(0,a.jsx)("div",{className:Z().deliveryPhotoHint,children:"Toque para ampliar"}),g.delivery_photo_at&&(0,a.jsxs)("div",{className:Z().deliveryPhotoTime,children:["Registrada em ",eO(g.delivery_photo_at)]})]}),E&&g.delivery_photo&&(0,a.jsxs)("div",{className:Z().lightbox,onClick:()=>T(!1),role:"dialog","aria-modal":"true","aria-label":"Foto da entrega ampliada",children:[(0,a.jsx)("button",{className:Z().lightboxClose,onClick:()=>T(!1),children:(0,a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),(0,a.jsx)("img",{src:g.delivery_photo,alt:"Foto da entrega",className:Z().lightboxImg,onClick:e=>e.stopPropagation()})]}),ey&&(0,a.jsx)("div",{className:Z().detailSection,children:(0,a.jsx)(C,{orderId:parseInt(h),existingReview:g.review})}),ey&&"retirada"!==g.delivery_type&&(0,a.jsx)("div",{className:Z().detailSection,children:(0,a.jsx)(w,{orderId:parseInt(h),existingTip:g.post_delivery_tip||0,deliveredAt:g.delivered_at})}),ey&&(0,a.jsxs)("div",{className:Z().detailSection,children:[(0,a.jsx)("div",{style:{fontWeight:600,fontSize:16,marginBottom:12},children:"Reembolso"}),Y?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[(0,a.jsx)("span",{style:{fontSize:14},children:"Status do reembolso"}),(0,a.jsx)("span",{className:"".concat(Z().badge," ").concat("approved"===Y.status||"processed"===Y.status?Z().badgeEntregue:"rejected"===Y.status?Z().badgeCancelado:Z().badgePendente),children:"pending"===Y.status?"Pendente":"approved"===Y.status?"Aprovado":"rejected"===Y.status?"Recusado":"processed"===Y.status?"Processado":Y.status})]}),(0,a.jsxs)("div",{style:{fontSize:14,color:"var(--color-text-secondary)"},children:["Valor: ",(0,O.o_)(Y.amount)]}),Y.reason&&(0,a.jsxs)("div",{style:{fontSize:13,color:"var(--color-text-muted)",marginTop:4},children:["Motivo: ",Y.reason]}),Y.admin_note&&(0,a.jsxs)("div",{style:{fontSize:13,color:"var(--color-text-muted)",marginTop:4,fontStyle:"italic"},children:["Resposta: ",Y.admin_note]}),(0,a.jsxs)("div",{style:{fontSize:12,color:"var(--color-text-muted)",marginTop:4},children:["Solicitado em ",eO(Y.created_at)]})]}):(0,a.jsx)("div",{children:g.delivered_at&&Date.now()-new Date(g.delivered_at).getTime()<864e5?(0,a.jsxs)("button",{className:Z().refundBtn,onClick:()=>Q(!0),children:[(0,a.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("polyline",{points:"23 4 23 10 17 10"}),(0,a.jsx)("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),"Solicitar reembolso"]}):(0,a.jsx)("div",{style:{fontSize:13,color:"var(--color-text-muted)"},children:"O prazo para solicitar reembolso expirou (24h apos a entrega)."})})]}),(ey||ex)&&(0,a.jsx)("div",{style:{padding:"0 0 12px"},children:(0,a.jsxs)("button",{className:Z().helpBtn,onClick:()=>X(!0),children:[(0,a.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),(0,a.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),"Ajuda com o pedido"]})}),ey&&(0,a.jsxs)("div",{className:Z().actionBtns,children:[(0,a.jsxs)("button",{className:Z().receiptBtn,onClick:()=>L(!0),children:[(0,a.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,a.jsx)("polyline",{points:"14 2 14 8 20 8"}),(0,a.jsx)("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),(0,a.jsx)("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),(0,a.jsx)("polyline",{points:"10 9 9 9 8 9"})]}),"Ver comprovante"]}),(0,a.jsx)(ej.Z,{url:"https://superbora.com.br/mercado/vitrine/loja/?id=".concat((null===(c=g.partner)||void 0===c?void 0:c.id)||""),title:"Pedido no ".concat((null===(d=g.partner)||void 0===d?void 0:d.name)||"SuperBora"),text:"Pedi no ".concat((null===(u=g.partner)||void 0===u?void 0:u.name)||"SuperBora"," pelo SuperBora!"),variant:"button",size:16}),(0,a.jsx)("button",{className:Z().reorderBtn,onClick:e_,disabled:R,style:{flex:1,justifyContent:"center",padding:14,fontSize:14,borderRadius:"var(--radius-sm)"},children:R?(0,a.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)("span",{className:Z().spinner,style:{width:18,height:18}})," Carregando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("polyline",{points:"23 4 23 10 17 10"}),(0,a.jsx)("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),"Pedir novamente"]})})]}),ew&&(0,a.jsx)("div",{style:{padding:"0 0 20px"},children:(0,a.jsxs)("button",{className:Z().cancelBtn,onClick:()=>P(!0),children:[(0,a.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,a.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"Cancelar pedido"]})}),M&&(0,a.jsx)("div",{className:Z().cancelOverlay,onClick:()=>!W&&P(!1),role:"alertdialog","aria-modal":"true","aria-labelledby":"cancel-order-modal-title",children:(0,a.jsxs)("div",{className:Z().cancelModal,onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{id:"cancel-order-modal-title",className:Z().cancelModalTitle,children:"Cancelar pedido?"}),(0,a.jsxs)("div",{className:Z().cancelModalText,children:["Tem certeza que deseja cancelar o pedido ",g.order_number,"? Esta acao nao pode ser desfeita."]}),(0,a.jsx)("textarea",{className:Z().cancelModalTextarea,placeholder:"Motivo do cancelamento (opcional)",value:D,onChange:e=>A(e.target.value),maxLength:500,disabled:W}),(0,a.jsxs)("div",{className:Z().cancelModalActions,children:[(0,a.jsx)("button",{className:Z().cancelModalKeep,onClick:()=>P(!1),disabled:W,children:"Manter pedido"}),(0,a.jsx)("button",{className:Z().cancelModalConfirm,onClick:em,disabled:W,children:W?"Cancelando...":"Sim, cancelar"})]})]})}),V&&(0,a.jsx)("div",{className:Z().cancelToast,children:V}),I&&(0,a.jsx)(q,{order:g,onClose:()=>L(!1)}),F&&(0,a.jsx)(ei,{orderId:parseInt(h),onClose:()=>U(!1),onSaved:()=>ed()}),G&&(0,a.jsx)(el,{orderId:parseInt(h),items:g.items||[],orderTotal:g.total,onClose:()=>Q(!1),onSubmitted:e=>{K(e),Q(!1),ee("approved"===e.status?"Reembolso aprovado automaticamente!":"Reembolso enviado para analise"),setTimeout(()=>ee(""),4e3)}}),J&&(0,a.jsx)(ep,{orderId:parseInt(h),onClose:()=>X(!1)}),$&&(0,a.jsx)("div",{className:Z().cancelToast,children:$})]})}},7650:function(e,t,r){"use strict";function a(e){return null!=e&&"number"==typeof e&&Number.isFinite(e)?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e):"R$ 0,00"}function n(e){if(!e)return"";let t=String(e);if(t.length>20)return"";let r=t.replace(/\D/g,"");return 8===r.length&&/^\d{8}$/.test(r)?"".concat(r.slice(0,5),"-").concat(r.slice(5)):""}function s(e){if(null==e||"number"!=typeof e||!Number.isFinite(e)||e<0)return"";let t=Math.round(e);if(0===t)return"";if(t<60)return"".concat(t," min");let r=Math.floor(t/60),a=t%60;return a>0?"".concat(r,"h").concat(a,"min"):"".concat(r,"h")}function i(e){if(null==e)return"0.0";let t=Number(e);return Number.isFinite(t)?t.toFixed(1):"0.0"}function o(e){if(null==e)return"";let t=Number(e);return isNaN(t)?a(0):0===t?"Gratis":a(t)}r.d(t,{A6:function(){return i},ci:function(){return o},gN:function(){return s},hR:function(){return n},o_:function(){return a}})},5775:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let a=r(7043);r(7437),r(2265);let n=a._(r(5602));function s(e,t){var r;let a={loading:e=>{let{error:t,isLoading:r,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e);let s={...a,...t};return(0,n.default)({...s,modules:null==(r=s.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1523:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}});let a=r(8993);function n(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new a.BailoutToCSRError(t);return r}},5602:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let a=r(7437),n=r(2265),s=r(1523),i=r(49);function o(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},c=function(e){let t={...l,...e},r=(0,n.lazy)(()=>t.loader().then(o)),c=t.loading;function d(e){let o=c?(0,a.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,l=t.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(i.PreloadCss,{moduleIds:t.modules}):null,(0,a.jsx)(r,{...e})]}):(0,a.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(n.Suspense,{fallback:o,children:l})}return d.displayName="LoadableComponent",d}},49:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return s}});let a=r(7437),n=r(544);function s(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=(0,n.getExpectedRequestStore)("next/dynamic css"),s=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));s.push(...t)}}return 0===s.length?null:(0,a.jsx)(a.Fragment,{children:s.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},2885:function(e){e.exports={overlay:"EditOrderModal_overlay__PKJ8P",fadeIn:"EditOrderModal_fadeIn__dOjXP",modal:"EditOrderModal_modal__WSugH",slideUp:"EditOrderModal_slideUp__t16PY",header:"EditOrderModal_header__bWeuo",closeBtn:"EditOrderModal_closeBtn__ep_VZ",headerTitle:"EditOrderModal_headerTitle__yJ8XC",headerSub:"EditOrderModal_headerSub__1f_xR",errorBanner:"EditOrderModal_errorBanner__v3z9S",itemsList:"EditOrderModal_itemsList__syA2q",item:"EditOrderModal_item__e_s2O",itemRemoved:"EditOrderModal_itemRemoved__2Lw4y",itemLeft:"EditOrderModal_itemLeft__pUZi0",itemImg:"EditOrderModal_itemImg__qV_FL",itemInfo:"EditOrderModal_itemInfo__FOeO5",itemName:"EditOrderModal_itemName__FCPKz",itemPrice:"EditOrderModal_itemPrice__ufMTe",itemPriceOld:"EditOrderModal_itemPriceOld__iofO7",itemUnavailable:"EditOrderModal_itemUnavailable__S4p4V",itemRight:"EditOrderModal_itemRight__BcNX7",itemTotal:"EditOrderModal_itemTotal__bemlk",qtyControls:"EditOrderModal_qtyControls__tsf5t",qtyBtn:"EditOrderModal_qtyBtn__MeShM",qtyBtnAdd:"EditOrderModal_qtyBtnAdd__X4Zl9",qtyValue:"EditOrderModal_qtyValue__jeEcW",restoreBtn:"EditOrderModal_restoreBtn__xwu1A",addItemsBtn:"EditOrderModal_addItemsBtn__aNgjk",totals:"EditOrderModal_totals__klH0K",totalRow:"EditOrderModal_totalRow__t_q67",totalFinal:"EditOrderModal_totalFinal__UHeBl",saveBtn:"EditOrderModal_saveBtn__h7jLy",confirmOverlay:"EditOrderModal_confirmOverlay__56XzX",confirmModal:"EditOrderModal_confirmModal__sqlQR",confirmTitle:"EditOrderModal_confirmTitle__4pzyv",confirmText:"EditOrderModal_confirmText__GIMta",confirmActions:"EditOrderModal_confirmActions__ZDvI4",confirmCancel:"EditOrderModal_confirmCancel__FfYx_",confirmSave:"EditOrderModal_confirmSave__kU35m",toast:"EditOrderModal_toast__zi1Gb",toastIn:"EditOrderModal_toastIn____1NT",loader:"EditOrderModal_loader__eS3G6",spinner:"EditOrderModal_spinner__9Hx9H",spin:"EditOrderModal_spin__c66mZ"}},3098:function(e){e.exports={container:"OrderTimeline_container__Z2Oj0",timeline:"OrderTimeline_timeline__BktNO",step:"OrderTimeline_step__8WPgN",completed:"OrderTimeline_completed__WJ2M9",current:"OrderTimeline_current__hivN7",future:"OrderTimeline_future__HMnPD",circle:"OrderTimeline_circle__9H5dH",circleCompleted:"OrderTimeline_circleCompleted__IhtJ5",circleCurrent:"OrderTimeline_circleCurrent__W7o_k",pulse:"OrderTimeline_pulse__djDpE",circleFuture:"OrderTimeline_circleFuture__1rJDs",icon:"OrderTimeline_icon__1t6_d",label:"OrderTimeline_label__jHmQV",labelCompleted:"OrderTimeline_labelCompleted__5vWVO",labelCurrent:"OrderTimeline_labelCurrent__4tGeh",time:"OrderTimeline_time__g3_M3"}},8321:function(e){e.exports={page:"Orders_page__s84dz",header:"Orders_header__gY78e",backBtn:"Orders_backBtn__zJyQk",title:"Orders_title__2j4g7",filters:"Orders_filters__L_sRP",filter:"Orders_filter__c6pEa",filterActive:"Orders_filterActive__A95Nv",card:"Orders_card__wk7_m",cardTop:"Orders_cardTop__yXiVl",cardLogo:"Orders_cardLogo__Oiud6",cardLogoPlaceholder:"Orders_cardLogoPlaceholder__0BZBI",cardInfo:"Orders_cardInfo__duj_B",cardPartner:"Orders_cardPartner__vUP28",cardDate:"Orders_cardDate__z8Ga7",cardBottom:"Orders_cardBottom__vGV29",cardItems:"Orders_cardItems__gE0_P",cardTotal:"Orders_cardTotal__ipX_t",cardNumber:"Orders_cardNumber__LutSS",badge:"Orders_badge___6dP8",badgePendente:"Orders_badgePendente__JAdHZ",badgeConfirmado:"Orders_badgeConfirmado__LShqE",badgePreparando:"Orders_badgePreparando__Jx9mx",badgePronto:"Orders_badgePronto__kFMzO",badgeSaiuEntrega:"Orders_badgeSaiuEntrega__1Ke_a",badgeEntregue:"Orders_badgeEntregue__g35xb",badgeCancelado:"Orders_badgeCancelado__Xg7x_",detailSection:"Orders_detailSection__Fg__g",detailHeader:"Orders_detailHeader__Modau",orderNumber:"Orders_orderNumber__uns_u",detailPartner:"Orders_detailPartner__B_aEi",timeline:"Orders_timeline__9tXAH",timelineItem:"Orders_timelineItem__JwEQb",timelineDot:"Orders_timelineDot__XLA4S",timelineDotDone:"Orders_timelineDotDone__BGilb",timelineDotCurrent:"Orders_timelineDotCurrent__JyeWw",timelineDotError:"Orders_timelineDotError__Styfq",timelineLine:"Orders_timelineLine__Hm1Y_",timelineLineDone:"Orders_timelineLineDone__zEdgQ",timelineLabel:"Orders_timelineLabel__6mTbx",timelineLabelDone:"Orders_timelineLabelDone__VhpfH",timelineDate:"Orders_timelineDate__kobGe",detailItem:"Orders_detailItem__EMHa9",detailItemImg:"Orders_detailItemImg__JvyWZ",detailItemInfo:"Orders_detailItemInfo__djGPa",detailItemName:"Orders_detailItemName__t9vd4",detailItemQty:"Orders_detailItemQty__WgeKK",detailItemPrice:"Orders_detailItemPrice__0Od7o",detailRow:"Orders_detailRow__S_wxZ",detailTotal:"Orders_detailTotal__PHamy",empty:"Orders_empty__Kc5Sa",emptyIcon:"Orders_emptyIcon__Zcyy1",emptyTitle:"Orders_emptyTitle__B6Hqw",emptyText:"Orders_emptyText__AXA96",emptyBtn:"Orders_emptyBtn__EZDwV",loader:"Orders_loader__sTU6M",spinner:"Orders_spinner__XJaii",spin:"Orders_spin__Be9n0",reorderBtn:"Orders_reorderBtn__fGx5Q",addressInfo:"Orders_addressInfo__WI2rR",addressIcon:"Orders_addressIcon___YzJj",deliveryPhotoSection:"Orders_deliveryPhotoSection__TXoZE",deliveryPhotoLabel:"Orders_deliveryPhotoLabel__p1vxf",deliveryPhotoThumb:"Orders_deliveryPhotoThumb__YjZ2g",deliveryPhotoHint:"Orders_deliveryPhotoHint__7OHbZ",deliveryPhotoTime:"Orders_deliveryPhotoTime__JeDqr",lightbox:"Orders_lightbox__NbiJS",lbFadeIn:"Orders_lbFadeIn__9N3TO",lightboxImg:"Orders_lightboxImg__qoj8c",lightboxClose:"Orders_lightboxClose__ZNTE5",actionBtns:"Orders_actionBtns__Ewjd8",receiptBtn:"Orders_receiptBtn__j6UoE",chatSection:"Orders_chatSection__SmJc7",chatToggle:"Orders_chatToggle__TxxZQ",chatToggleLeft:"Orders_chatToggleLeft__utcrm",chatToggleRight:"Orders_chatToggleRight__G0Una",chatUnreadBadge:"Orders_chatUnreadBadge__R08Ok",chatChevron:"Orders_chatChevron__4O2OG",chatChevronOpen:"Orders_chatChevronOpen__yZztm",chatTabs:"Orders_chatTabs__KhoBS",chatTab:"Orders_chatTab__2EDXQ",chatTabActive:"Orders_chatTabActive__Co9A9",chatTabBadge:"Orders_chatTabBadge__ym51_",chatMessages:"Orders_chatMessages__yAagA",chatEmpty:"Orders_chatEmpty__K247x",chatBubbleWrap:"Orders_chatBubbleWrap__CpQL_",chatBubbleRight:"Orders_chatBubbleRight__8MQTQ",chatBubbleLeft:"Orders_chatBubbleLeft__Pxo6l",chatSenderName:"Orders_chatSenderName__sX8yH",chatSenderCustomer:"Orders_chatSenderCustomer__3ursL",chatSenderShopper:"Orders_chatSenderShopper__JNxXX",chatSenderDelivery:"Orders_chatSenderDelivery__1vbG2",chatSenderSystem:"Orders_chatSenderSystem__jSTd5",chatBubble:"Orders_chatBubble__8_Dcw",chatBubbleMine:"Orders_chatBubbleMine__JK__y",chatBubbleStore:"Orders_chatBubbleStore__XHWLg",chatBubbleDriver:"Orders_chatBubbleDriver__21Y2y",chatBubbleSystem:"Orders_chatBubbleSystem__Vt_a1",chatBubbleTime:"Orders_chatBubbleTime__9rZ43",chatInputBar:"Orders_chatInputBar__MX4I_",chatInput:"Orders_chatInput___DW4Q",chatSendBtn:"Orders_chatSendBtn__WQj9J",chatLoading:"Orders_chatLoading__9thHm",subAlertSection:"Orders_subAlertSection__DEhTa",subAlertCard:"Orders_subAlertCard__OHkXk",subAlertHeader:"Orders_subAlertHeader__OdBuF",subAlertIcon:"Orders_subAlertIcon__Kaq8P",subAlertTitle:"Orders_subAlertTitle__pppuh",subAlertBody:"Orders_subAlertBody__w_B4M",subAlertArrow:"Orders_subAlertArrow__0OAhe",subAlertItem:"Orders_subAlertItem__vltDA",subAlertItemName:"Orders_subAlertItemName__MN_I1",subAlertItemPrice:"Orders_subAlertItemPrice__tjx38",subAlertItemStrike:"Orders_subAlertItemStrike__daVQt",subAlertNote:"Orders_subAlertNote__WbxfU",subAlertActions:"Orders_subAlertActions__mhvzh",subAlertAccept:"Orders_subAlertAccept__pvnWI",subAlertReject:"Orders_subAlertReject__VMtqy",subAlertResolved:"Orders_subAlertResolved__XUl0_",subAlertResolvedRow:"Orders_subAlertResolvedRow__CtDoJ",subAlertResolvedInfo:"Orders_subAlertResolvedInfo__TIYTw",subAlertResolvedOriginal:"Orders_subAlertResolvedOriginal__EKEYQ",subAlertResolvedNew:"Orders_subAlertResolvedNew__XlM5E",subAlertBadgeAccepted:"Orders_subAlertBadgeAccepted__wUu1r",subAlertBadgeRejected:"Orders_subAlertBadgeRejected__mEGqC",cancelBtn:"Orders_cancelBtn__9hzHN",cancelOverlay:"Orders_cancelOverlay__vYBmD",cancelModal:"Orders_cancelModal__4j9zz",cancelModalTitle:"Orders_cancelModalTitle__MvfUT",cancelModalText:"Orders_cancelModalText__K4azO",cancelModalTextarea:"Orders_cancelModalTextarea__aHrex",cancelModalActions:"Orders_cancelModalActions__cfYQh",cancelModalKeep:"Orders_cancelModalKeep__4Zt6_",cancelModalConfirm:"Orders_cancelModalConfirm__ZsPKd",cancelToast:"Orders_cancelToast__xlcQE",toastSlideUp:"Orders_toastSlideUp__Nx9RX",editBtn:"Orders_editBtn__EGXGB",driverCard:"Orders_driverCard__NIn9x",driverAvatar:"Orders_driverAvatar__VFz6y",driverAvatarImg:"Orders_driverAvatarImg__RsNke",driverAvatarPlaceholder:"Orders_driverAvatarPlaceholder__8HOxI",driverDetails:"Orders_driverDetails__Ocpyj",driverName:"Orders_driverName__a_zVj",driverRating:"Orders_driverRating__W0h5a",driverVehicle:"Orders_driverVehicle__F82lw",driverPlate:"Orders_driverPlate__R28p8",driverCallBtn:"Orders_driverCallBtn__JDQ6_",helpModal:"Orders_helpModal__nBNhy",helpModalHeader:"Orders_helpModalHeader__68Qhz",helpModalBody:"Orders_helpModalBody__87obQ",helpCategoryGrid:"Orders_helpCategoryGrid__NgmHk",helpCategoryCard:"Orders_helpCategoryCard__2PBPq",helpCategoryIcon:"Orders_helpCategoryIcon__JhabF",helpCategoryLabel:"Orders_helpCategoryLabel__3LrNH",helpCategoryDesc:"Orders_helpCategoryDesc__VVFa0",helpSelectedCat:"Orders_helpSelectedCat__4YOEF",helpChangeCat:"Orders_helpChangeCat__Dj_K5",helpSubmitBtn:"Orders_helpSubmitBtn__7kaqL",helpHistoryLink:"Orders_helpHistoryLink__bI2eT",helpHistoryList:"Orders_helpHistoryList__Qs4wI",helpHistoryItem:"Orders_helpHistoryItem__UJABl",helpHistoryTop:"Orders_helpHistoryTop__Ran3w",helpHistoryCat:"Orders_helpHistoryCat__eyyfF",helpHistoryStatus:"Orders_helpHistoryStatus__ltuMk",helpHistoryDesc:"Orders_helpHistoryDesc__3ivHX",helpHistoryResolution:"Orders_helpHistoryResolution__23Uwe",helpHistoryDate:"Orders_helpHistoryDate__IsNRT",helpSuccessContent:"Orders_helpSuccessContent__9lRYK",helpSuccessIcon:"Orders_helpSuccessIcon__hCMb2",helpSuccessTitle:"Orders_helpSuccessTitle__JK2ro",helpSuccessText:"Orders_helpSuccessText__4UdES",helpBtn:"Orders_helpBtn__98LZ0",priceAdjustment:"Orders_priceAdjustment__z5U0q",chatBubbleSupport:"Orders_chatBubbleSupport__N9_bg",chatSenderSupport:"Orders_chatSenderSupport__OSHfs",chatQuickReplies:"Orders_chatQuickReplies__kSk2P",chatQuickReplyBtn:"Orders_chatQuickReplyBtn__RDdUY",refundModal:"Orders_refundModal__ZQh3w",refundModalHeader:"Orders_refundModalHeader__vfzID",refundModalBody:"Orders_refundModalBody__V_ggl",refundCloseBtn:"Orders_refundCloseBtn__cifAa",refundItemList:"Orders_refundItemList__2HU8t",refundItem:"Orders_refundItem__YHBtB",refundItemSelected:"Orders_refundItemSelected__mSwjA",refundItemCheck:"Orders_refundItemCheck__Pz0i3",refundCheckbox:"Orders_refundCheckbox__4SCJJ",refundCheckboxChecked:"Orders_refundCheckboxChecked__v_uBM",refundReasonChip:"Orders_refundReasonChip__OttLF",refundReasonChipActive:"Orders_refundReasonChipActive__GX9h8",refundAmountBox:"Orders_refundAmountBox__m_wQ_",refundAmountValue:"Orders_refundAmountValue__xcAkV",refundQtyBtn:"Orders_refundQtyBtn__ekcRm",refundBtn:"Orders_refundBtn__33SeH",refundSubmitBtn:"Orders_refundSubmitBtn__Qdkcj",liveBadge:"Orders_liveBadge__eJJWu",liveDot:"Orders_liveDot__A_g5Z",livePulse:"Orders_livePulse__4uEEx",chatConnectedDot:"Orders_chatConnectedDot__DLwjl",chatBubbleFooter:"Orders_chatBubbleFooter___e4tW",readReceipt:"Orders_readReceipt__KT7hC",readReceiptRead:"Orders_readReceiptRead__EoTd9",typingIndicator:"Orders_typingIndicator__2RqcI",typingDots:"Orders_typingDots__5Hytp",typingDot:"Orders_typingDot__c8H1H",typingBounce:"Orders_typingBounce__iUc_R",typingText:"Orders_typingText__x5hlr",reorderSection:"Orders_reorderSection__XvrWV",reorderTitle:"Orders_reorderTitle__AGQgw",reorderCard:"Orders_reorderCard__EDHkN",reorderTop:"Orders_reorderTop__eeWub",reorderLogo:"Orders_reorderLogo__Og17U",reorderLogoPlaceholder:"Orders_reorderLogoPlaceholder__VQp3I",reorderInfo:"Orders_reorderInfo__WIL2_",reorderPartner:"Orders_reorderPartner__P596x",reorderMeta:"Orders_reorderMeta__6HjUn",savingsBanner:"Orders_savingsBanner__Ei5En",savingsIcon:"Orders_savingsIcon__B_yea"}},4627:function(e){e.exports={container:"RatingSection_container__BkUDU",header:"RatingSection_header__WAjG2",subtitle:"RatingSection_subtitle__eqNIk",stars:"RatingSection_stars__825nq",star:"RatingSection_star__X360W",starIcon:"RatingSection_starIcon__Sg7u0",starEmpty:"RatingSection_starEmpty__i85eq",starFilled:"RatingSection_starFilled__9fcnB",commentWrap:"RatingSection_commentWrap___LVFh",commentLabel:"RatingSection_commentLabel__w5Muz",textarea:"RatingSection_textarea__i93i3",charCounter:"RatingSection_charCounter__y8QSK",submitBtn:"RatingSection_submitBtn__f3kxJ",success:"RatingSection_success__KcvyM",successIcon:"RatingSection_successIcon__gs7C6",successText:"RatingSection_successText__0gK0J",successSub:"RatingSection_successSub__ze8mu",error:"RatingSection_error__UR0M7",rated:"RatingSection_rated__tv4pM",ratedStars:"RatingSection_ratedStars__snXsJ",ratedStar:"RatingSection_ratedStar__aVcH1",ratedComment:"RatingSection_ratedComment__cderD",ratedPhoto:"RatingSection_ratedPhoto__F29GG",ratedPhotoImg:"RatingSection_ratedPhotoImg__FIN9C",photoBtn:"RatingSection_photoBtn__uzmun",photoPreviewWrap:"RatingSection_photoPreviewWrap__fPQ4G",photoPreviewImg:"RatingSection_photoPreviewImg__tXMlS",photoRemoveBtn:"RatingSection_photoRemoveBtn__iDyfq",photosGrid:"RatingSection_photosGrid__thXro",photoPreviewItem:"RatingSection_photoPreviewItem__w1Ktk",uploading:"RatingSection_uploading__l1Sg4",uploadOverlay:"RatingSection_uploadOverlay__fe_YP",uploadSpinner:"RatingSection_uploadSpinner__3Fr_9",spin:"RatingSection_spin__3e4ix",uploadPercent:"RatingSection_uploadPercent__WHofO",photoUploadArea:"RatingSection_photoUploadArea__ZjS1U",dragging:"RatingSection_dragging__IlOVo",photoUploadText:"RatingSection_photoUploadText__ze260",photoUploadHint:"RatingSection_photoUploadHint__PW4gZ",loadingSpinner:"RatingSection_loadingSpinner__pSwoD",ratedPhotos:"RatingSection_ratedPhotos__uTkxU"}},9365:function(e){e.exports={overlay:"ReceiptView_overlay__iZ41d",fadeIn:"ReceiptView_fadeIn__U4WSK",container:"ReceiptView_container__94mEX",slideUp:"ReceiptView_slideUp__paCy7",closeBtn:"ReceiptView_closeBtn__9XJFk",receipt:"ReceiptView_receipt__W3tq3",receiptHeader:"ReceiptView_receiptHeader__4Ob7W",logo:"ReceiptView_logo__ukYj8",receiptTitle:"ReceiptView_receiptTitle__BcHnd",divider:"ReceiptView_divider__sPmxD",dividerLight:"ReceiptView_dividerLight__KiuRN",infoRow:"ReceiptView_infoRow__Bat2w",infoLabel:"ReceiptView_infoLabel__CS210",infoValue:"ReceiptView_infoValue__rr_9O",sectionTitle:"ReceiptView_sectionTitle__T8Z5_",storeName:"ReceiptView_storeName__4juAb",storeAddress:"ReceiptView_storeAddress__EMbVF",itemsTable:"ReceiptView_itemsTable__a_6ro",itemsHeader:"ReceiptView_itemsHeader__H32SH",itemRow:"ReceiptView_itemRow__Jw5FI",itemQty:"ReceiptView_itemQty__9GNao",itemName:"ReceiptView_itemName__1hQew",itemPrice:"ReceiptView_itemPrice__4Be0Q",totalsSection:"ReceiptView_totalsSection__gBmGn",totalRow:"ReceiptView_totalRow__2mvL8",discount:"ReceiptView_discount__VPyqJ",grandTotal:"ReceiptView_grandTotal__Fgeyy",addressText:"ReceiptView_addressText__ylADd",receiptFooter:"ReceiptView_receiptFooter__6ggln",footerSmall:"ReceiptView_footerSmall__ClRwm",actions:"ReceiptView_actions__KI4LX",shareBtn:"ReceiptView_shareBtn__L90OR",printBtn:"ReceiptView_printBtn__rPoSU","receipt-print-area":"ReceiptView_receipt-print-area__Dj_x1"}},2472:function(e){e.exports={gallery:"PhotoGallery_gallery__WZARK",compact:"PhotoGallery_compact__v1qSk",thumbnail:"PhotoGallery_thumbnail__tjJh6",thumbImage:"PhotoGallery_thumbImage__6ffOd",moreOverlay:"PhotoGallery_moreOverlay__yWmx9",moreCount:"PhotoGallery_moreCount__DCXMp",moreLabel:"PhotoGallery_moreLabel__0sZ_W",countBadge:"PhotoGallery_countBadge__hFqmI",lightbox:"PhotoGallery_lightbox__TYbSq",fadeIn:"PhotoGallery_fadeIn__HcS5z",closeBtn:"PhotoGallery_closeBtn__VXVwN",lightboxContent:"PhotoGallery_lightboxContent__LXTPF",lightboxImage:"PhotoGallery_lightboxImage__W4PK7",scaleIn:"PhotoGallery_scaleIn__YWVoe",navBtn:"PhotoGallery_navBtn__1CaWU",navPrev:"PhotoGallery_navPrev__Ul42X",navNext:"PhotoGallery_navNext__pSL5N",dotsContainer:"PhotoGallery_dotsContainer__ljgoG",dot:"PhotoGallery_dot__XBEwd",dotActive:"PhotoGallery_dotActive__EwJFJ",counter:"PhotoGallery_counter__TUDK2",photosBadge:"PhotoGallery_photosBadge__YqUh9"}},3132:function(e){e.exports={wrapper:"PullToRefresh_wrapper__oonRh",indicator:"PullToRefresh_indicator__yKvRe",iconWrap:"PullToRefresh_iconWrap__CV41b",triggered:"PullToRefresh_triggered__9DfVk",spinning:"PullToRefresh_spinning__P0cZW",smoothSpin:"PullToRefresh_smoothSpin__1zkSQ",text:"PullToRefresh_text__UIB_c",content:"PullToRefresh_content__iedzH",progressRing:"PullToRefresh_progressRing__GPB_k",progressRingBg:"PullToRefresh_progressRingBg__T3oRE",progressRingFg:"PullToRefresh_progressRingFg__JMRWI",pulseEffect:"PullToRefresh_pulseEffect__167RJ",pullPulse:"PullToRefresh_pullPulse__TiKOT",successIndicator:"PullToRefresh_successIndicator__GfUhA",successPop:"PullToRefresh_successPop__BwDVn",drawCheck:"PullToRefresh_drawCheck___fHbG"}}},function(e){e.O(0,[1013,3498,5026,7648,9938,9617,2971,2117,1744],function(){return e(e.s=2320)}),_N_E=e.O()}]);