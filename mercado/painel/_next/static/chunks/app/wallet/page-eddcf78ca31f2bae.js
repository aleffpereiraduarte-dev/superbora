(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[597],{5300:function(e,a,s){Promise.resolve().then(s.bind(s,465))},465:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return x}});var t=s(7437),l=s(2265),i=s(4565),n=s(4477),r=s(6428),d=s(6971);function o(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0)}function c(e){return e?new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}function h(e){return e?new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}):""}function x(){return(0,t.jsx)(i.Z,{children:(0,t.jsx)(n.Z,{children:(0,t.jsx)(p,{})})})}function p(){var e,a,s,i;let{addNotification:n}=(0,d.l)(),[h,x]=(0,l.useState)("overview"),[p,g]=(0,l.useState)(null),[y,f]=(0,l.useState)([]),[b,N]=(0,l.useState)([]),[S,_]=(0,l.useState)(!0),[w,C]=(0,l.useState)(""),[k,z]=(0,l.useState)(!1),[W,R]=(0,l.useState)({valor:"",banco:"",agencia:"",conta:"",tipo_conta:"corrente",titular:"",cpf_cnpj:""}),[A,D]=(0,l.useState)(!1),[B,T]=(0,l.useState)(null),[V,F]=(0,l.useState)(!1),[P,q]=(0,l.useState)(""),[E,L]=(0,l.useState)(7),[M,I]=(0,l.useState)(null),[U,O]=(0,l.useState)(!1),[H,$]=(0,l.useState)(!1),[G,X]=(0,l.useState)(null),[Z,J]=(0,l.useState)("week"),[K,Q]=(0,l.useState)(""),[Y,ee]=(0,l.useState)(""),[ea,es]=(0,l.useState)(!1),[et,el]=(0,l.useState)(null),[ei,en]=(0,l.useState)(!1),[er,ed]=(0,l.useState)(""),[eo,ec]=(0,l.useState)(""),[eh,ex]=(0,l.useState)("all"),ep=(0,l.useCallback)(async()=>{_(!0),C("");try{var e,a,s,t;let l=await (0,r.SC)("/wallet.php");g({saldo_disponivel:null!==(a=null!==(e=l.saldo_disponivel)&&void 0!==e?e:l.available_balance)&&void 0!==a?a:0,saldo_pendente:null!==(t=null!==(s=l.saldo_pendente)&&void 0!==s?s:l.pending_balance)&&void 0!==t?t:0}),f(l.transactions||l.transacoes||[]),N(l.withdrawals||l.saques||[])}catch(e){C(e.message)}finally{_(!1)}},[]),em=(0,l.useCallback)(async()=>{try{let e=await (0,r.SC)("/anticipation.php");T(e)}catch(e){console.error("Erro ao carregar antecipacao:",e)}},[]),eu=(0,l.useCallback)(async()=>{es(!0);try{let e="/reconciliation.php?period=".concat(Z);"custom"===Z&&K&&Y&&(e+="&from=".concat(K,"&to=").concat(Y));let a=await (0,r.SC)(e);X(a)}catch(e){console.error("Erro ao carregar reconciliacao:",e)}finally{es(!1)}},[Z,K,Y]),ev=(0,l.useCallback)(async()=>{en(!0);try{let e=await (0,r.SC)("/payout-history.php");el(e)}catch(e){console.error("Erro ao carregar repasses:",e)}finally{en(!1)}},[]);async function ej(e){if(e.preventDefault(),!W.valor||0>=parseFloat(W.valor)){n("Informe um valor valido","error");return}if(parseFloat(W.valor)>((null==p?void 0:p.saldo_disponivel)||0)){n("Saldo insuficiente","error");return}D(!0);try{await (0,r.sg)("/wallet-withdraw.php",{valor:parseFloat(W.valor),banco:W.banco,agencia:W.agencia,conta:W.conta,tipo_conta:W.tipo_conta,titular:W.titular,cpf_cnpj:W.cpf_cnpj}),n("Saque solicitado com sucesso!","success"),z(!1),R({valor:"",banco:"",agencia:"",conta:"",tipo_conta:"corrente",titular:"",cpf_cnpj:""}),ep()}catch(e){n(e.message,"error")}finally{D(!1)}}async function eg(){if(!P||0>=parseFloat(P)){n("Informe um valor valido","error");return}O(!0);try{let e=await (0,r.sg)("/anticipation.php",{action:"simulate",amount:parseFloat(P),days_ahead:E});I(e.simulation)}catch(e){n(e.message,"error")}finally{O(!1)}}async function ey(){if(M){$(!0);try{await (0,r.sg)("/anticipation.php",{action:"confirm",amount:parseFloat(P),days_ahead:E}),n("Antecipacao solicitada com sucesso!","success"),F(!1),I(null),q(""),em(),ep()}catch(e){n(e.message,"error")}finally{$(!1)}}}async function ef(e){try{await (0,r.sg)("/reconciliation.php",{action:"verify",reconciliation_id:e}),n("Dia verificado com sucesso","success"),eu()}catch(e){n(e.message,"error")}}async function eb(){try{var e,a;await (0,r.sg)("/reconciliation.php",{action:"verify_all",start_date:null==G?void 0:null===(e=G.period)||void 0===e?void 0:e.start,end_date:null==G?void 0:null===(a=G.period)||void 0===a?void 0:a.end}),n("Todos os dias verificados","success"),eu()}catch(e){n(e.message,"error")}}(0,l.useEffect)(()=>{ep(),em()},[ep,em]),(0,l.useEffect)(()=>{"reconciliation"===h?eu():"payouts"===h&&ev()},[h,eu,ev]);let eN=y.filter(e=>{let a=(e.data||e.created_at||"").split(" ")[0].split("T")[0];return(!er||!(a<er))&&(!eo||!(a>eo))}),eS=b.filter(e=>"all"===eh||e.status===eh);return S?(0,t.jsx)("div",{className:"loading-screen",children:(0,t.jsx)("div",{className:"spinner"})}):w?(0,t.jsxs)("div",{className:"empty-state",children:[(0,t.jsx)("div",{className:"empty-state-title",children:"Erro ao carregar wallet"}),(0,t.jsx)("div",{className:"empty-state-text",children:w})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"page-header",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"page-title",children:"Wallet"}),(0,t.jsx)("p",{className:"page-subtitle",children:"Saldo, antecipacoes e reconciliacao financeira"})]}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:()=>z(!0),children:"Solicitar Saque"})]}),(0,t.jsxs)("div",{className:"wallet-grid",children:[(0,t.jsxs)("div",{className:"wallet-card",children:[(0,t.jsx)("div",{className:"wallet-label",children:"Saldo Disponivel"}),(0,t.jsx)("div",{className:"wallet-value wallet-value-success",children:o(null==p?void 0:p.saldo_disponivel)})]}),(0,t.jsxs)("div",{className:"wallet-card",children:[(0,t.jsx)("div",{className:"wallet-label",children:"Saldo Pendente"}),(0,t.jsx)("div",{className:"wallet-value wallet-value-warning",children:o(null==p?void 0:p.saldo_pendente)})]}),(0,t.jsxs)("div",{className:"wallet-card",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"#fff"},children:[(0,t.jsx)("div",{className:"wallet-label",style:{color:"rgba(255,255,255,0.8)"},children:"Disponivel para Antecipar"}),(0,t.jsx)("div",{className:"wallet-value",style:{color:"#fff"},children:o((null==B?void 0:null===(e=B.available)||void 0===e?void 0:e.total)||0)}),(0,t.jsx)("button",{className:"btn btn-sm",style:{marginTop:8,background:"rgba(255,255,255,0.2)",color:"#fff",border:"none"},onClick:()=>F(!0),disabled:!(null==B?void 0:null===(a=B.available)||void 0===a?void 0:a.total),children:"Simular Antecipacao"})]})]}),(0,t.jsx)("div",{className:"tabs",style:{marginBottom:24},children:[{key:"overview",label:"Visao Geral"},{key:"anticipation",label:"Antecipacao"},{key:"payouts",label:"Repasses"},{key:"reconciliation",label:"Reconciliacao"}].map(e=>(0,t.jsx)("button",{className:"tab ".concat(h===e.key?"tab-active":""),onClick:()=>x(e.key),children:e.label},e.key))}),"overview"===h&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m,{}),(0,t.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,t.jsxs)("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:8},children:[(0,t.jsxs)("h2",{className:"card-title",children:["Transacoes (",eN.length,")"]}),(0,t.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,t.jsx)("input",{type:"date",className:"form-input",style:{width:"auto",fontSize:13,padding:"6px 10px"},value:er,onChange:e=>ed(e.target.value)}),(0,t.jsx)("input",{type:"date",className:"form-input",style:{width:"auto",fontSize:13,padding:"6px 10px"},value:eo,onChange:e=>ec(e.target.value)}),eN.length>0&&(0,t.jsxs)("button",{className:"btn btn-sm btn-secondary",onClick:function(){let e=new Blob(["\uFEFFData,Descricao,Tipo,Valor\n"+eN.map(e=>{let a=c(e.data||e.created_at),s=(e.descricao||e.description||"-").replace(/,/g,";"),t=e.tipo||e.type,l=("credito"===e.tipo||"credit"===e.type?"":"-")+Math.abs(e.valor||e.amount).toFixed(2);return"".concat(a,",").concat(s,",").concat(t,",").concat(l)}).join("\n")],{type:"text/csv;charset=utf-8"}),a=URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download="transacoes_".concat(new Date().toISOString().split("T")[0],".csv"),s.click(),URL.revokeObjectURL(a)},children:[(0,t.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:4,verticalAlign:-2},children:(0,t.jsx)("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})}),"CSV"]})]})]}),0===eN.length?(0,t.jsx)("div",{className:"empty-state",children:(0,t.jsx)("div",{className:"empty-state-text",children:"Nenhuma transacao encontrada"})}):(0,t.jsx)("div",{className:"table-wrapper",style:{boxShadow:"none"},children:(0,t.jsxs)("table",{className:"table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Data"}),(0,t.jsx)("th",{children:"Descricao"}),(0,t.jsx)("th",{children:"Tipo"}),(0,t.jsx)("th",{style:{textAlign:"right"},children:"Valor"})]})}),(0,t.jsx)("tbody",{children:eN.slice(0,10).map((e,a)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:c(e.data||e.created_at)}),(0,t.jsx)("td",{children:e.descricao||e.description||"-"}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"badge ".concat("credito"===e.tipo||"credit"===e.type?"badge-success":"badge-danger"),children:e.tipo||e.type})}),(0,t.jsxs)("td",{style:{textAlign:"right",fontWeight:600,color:"credito"===e.tipo||"credit"===e.type?"var(--color-success)":"var(--color-danger)"},children:["credito"===e.tipo||"credit"===e.type?"+":"-",o(Math.abs(e.valor||e.amount))]})]},e.id||a))})]})})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:8},children:[(0,t.jsxs)("h2",{className:"card-title",children:["Historico de Saques (",eS.length,")"]}),(0,t.jsx)("div",{style:{display:"flex",gap:6},children:["all","pendente","aprovado","negado"].map(e=>(0,t.jsx)("button",{className:"btn btn-sm ".concat(eh===e?"btn-primary":"btn-secondary"),onClick:()=>ex(e),style:{fontSize:12},children:"all"===e?"Todos":e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),0===eS.length?(0,t.jsx)("div",{className:"empty-state",children:(0,t.jsx)("div",{className:"empty-state-text",children:"Nenhum saque encontrado"})}):(0,t.jsx)("div",{className:"table-wrapper",style:{boxShadow:"none"},children:(0,t.jsxs)("table",{className:"table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Data"}),(0,t.jsx)("th",{style:{textAlign:"right"},children:"Valor"}),(0,t.jsx)("th",{children:"Banco"}),(0,t.jsx)("th",{children:"Status"})]})}),(0,t.jsx)("tbody",{children:eS.map((e,a)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:c(e.data||e.created_at)}),(0,t.jsx)("td",{style:{textAlign:"right",fontWeight:600},children:o(e.valor||e.amount)}),(0,t.jsx)("td",{children:e.banco||e.bank||"-"}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"badge ".concat("aprovado"===e.status||"paid"===e.status?"badge-success":"pendente"===e.status||"pending"===e.status?"badge-warning":"badge-danger"),children:e.status})})]},e.id||a))})]})})]})]}),"anticipation"===h&&(0,t.jsx)(u,{anticipation:B,onOpenModal:()=>F(!0)}),"payouts"===h&&(0,t.jsx)(v,{payouts:et,loading:ei,onRefresh:ev}),"reconciliation"===h&&(0,t.jsx)(j,{reconciliation:G,loading:ea,period:Z,setPeriod:J,from:K,setFrom:Q,to:Y,setTo:ee,onRefresh:eu,onVerifyDay:ef,onVerifyAll:eb,onExportCSV:function(){var e;if(!(null==G?void 0:null===(e=G.reconciliations)||void 0===e?void 0:e.length))return;let a=new Blob(["\uFEFFData,Pedidos,Vendas,Comissao,Taxa Entrega,Descontos,Estornos,Gorjetas,Liquido,Status\n"+G.reconciliations.map(e=>"".concat(e.date,",").concat(e.total_orders,",").concat(e.total_sales.toFixed(2),",").concat(e.total_commission.toFixed(2),",").concat(e.total_delivery_fee.toFixed(2),",").concat(e.total_discounts.toFixed(2),",").concat(e.total_refunds.toFixed(2),",").concat(e.total_tips.toFixed(2),",").concat(e.net_amount.toFixed(2),",").concat(e.status)).join("\n")],{type:"text/csv;charset=utf-8"}),s=URL.createObjectURL(a),t=document.createElement("a");t.href=s,t.download="reconciliacao_".concat(G.period.start,"_").concat(G.period.end,".csv"),t.click(),URL.revokeObjectURL(s)}}),k&&(0,t.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&z(!1),children:(0,t.jsxs)("div",{className:"modal",children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsx)("h3",{className:"modal-title",children:"Solicitar Saque"}),(0,t.jsx)("button",{className:"modal-close",onClick:()=>z(!1),children:"\xd7"})]}),(0,t.jsxs)("form",{onSubmit:ej,children:[(0,t.jsxs)("div",{className:"modal-body",children:[(0,t.jsxs)("div",{style:{marginBottom:16,padding:12,background:"var(--color-success-bg)",borderRadius:"var(--radius-md)",fontSize:14},children:["Saldo disponivel: ",(0,t.jsx)("strong",{children:o(null==p?void 0:p.saldo_disponivel)})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Valor do Saque (R$)"}),(0,t.jsx)("input",{type:"number",step:"0.01",className:"form-input",value:W.valor,onChange:e=>R({...W,valor:e.target.value}),placeholder:"0.00",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Titular da Conta"}),(0,t.jsx)("input",{type:"text",className:"form-input",value:W.titular,onChange:e=>R({...W,titular:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"CPF/CNPJ"}),(0,t.jsx)("input",{type:"text",className:"form-input",value:W.cpf_cnpj,onChange:e=>R({...W,cpf_cnpj:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"form-row",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Banco"}),(0,t.jsx)("input",{type:"text",className:"form-input",value:W.banco,onChange:e=>R({...W,banco:e.target.value}),placeholder:"Ex: 001 - Banco do Brasil",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Tipo de Conta"}),(0,t.jsxs)("select",{className:"form-select",value:W.tipo_conta,onChange:e=>R({...W,tipo_conta:e.target.value}),children:[(0,t.jsx)("option",{value:"corrente",children:"Corrente"}),(0,t.jsx)("option",{value:"poupanca",children:"Poupanca"})]})]})]}),(0,t.jsxs)("div",{className:"form-row",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Agencia"}),(0,t.jsx)("input",{type:"text",className:"form-input",value:W.agencia,onChange:e=>R({...W,agencia:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Conta"}),(0,t.jsx)("input",{type:"text",className:"form-input",value:W.conta,onChange:e=>R({...W,conta:e.target.value}),required:!0})]})]})]}),(0,t.jsxs)("div",{className:"modal-footer",children:[(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>z(!1),children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:A,children:A?(0,t.jsx)("span",{className:"spinner-sm"}):"Solicitar Saque"})]})]})]})}),V&&(0,t.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&F(!1),children:(0,t.jsxs)("div",{className:"modal",style:{maxWidth:500},children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsx)("h3",{className:"modal-title",children:"Antecipar Recebiveis"}),(0,t.jsx)("button",{className:"modal-close",onClick:()=>{F(!1),I(null)},children:"\xd7"})]}),(0,t.jsxs)("div",{className:"modal-body",children:[(0,t.jsxs)("div",{style:{marginBottom:16,padding:12,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"var(--radius-md)",color:"#fff"},children:[(0,t.jsx)("div",{style:{fontSize:13,opacity:.9},children:"Disponivel para antecipacao"}),(0,t.jsx)("div",{style:{fontSize:24,fontWeight:700},children:o((null==B?void 0:null===(s=B.available)||void 0===s?void 0:s.total)||0)})]}),(0,t.jsxs)("div",{style:{marginBottom:16},children:[(0,t.jsx)("div",{style:{fontSize:13,color:"var(--color-text-secondary)",marginBottom:8},children:"Taxas por periodo:"}),(0,t.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:((null==B?void 0:B.fee_ranges)||[]).map((e,a)=>(0,t.jsxs)("div",{style:{padding:"6px 12px",background:"#f1f5f9",borderRadius:6,fontSize:12},children:[e.days_min===e.days_max?"".concat(e.days_min," dias"):"".concat(e.days_min,"-").concat(e.days_max," dias"),": ",(0,t.jsxs)("strong",{children:[e.fee_percent,"%"]})]},a))})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Valor a antecipar"}),(0,t.jsx)("input",{type:"number",step:"0.01",className:"form-input",value:P,onChange:e=>{q(e.target.value),I(null)},placeholder:"0.00",max:(null==B?void 0:null===(i=B.available)||void 0===i?void 0:i.total)||0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsxs)("label",{className:"form-label",children:["Prazo de antecipacao: ",E," dias"]}),(0,t.jsx)("input",{type:"range",min:"1",max:"30",value:E,onChange:e=>{L(parseInt(e.target.value)),I(null)},style:{width:"100%"}}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"#94a3b8"},children:[(0,t.jsx)("span",{children:"1 dia"}),(0,t.jsx)("span",{children:"30 dias"})]})]}),!M&&(0,t.jsx)("button",{className:"btn btn-primary",style:{width:"100%"},onClick:eg,disabled:U||!P,children:U?(0,t.jsx)("span",{className:"spinner-sm"}):"Simular Antecipacao"}),M&&(0,t.jsxs)("div",{style:{marginTop:16,padding:16,background:"#f8fafc",borderRadius:"var(--radius-md)",border:"2px solid var(--color-primary)"},children:[(0,t.jsx)("div",{style:{fontSize:14,fontWeight:600,marginBottom:12,color:"var(--color-primary)"},children:"Resumo da Antecipacao"}),(0,t.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,t.jsx)("span",{style:{color:"#64748b"},children:"Valor solicitado:"}),(0,t.jsx)("span",{style:{fontWeight:600},children:o(M.requested_amount)})]}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,t.jsxs)("span",{style:{color:"#64748b"},children:["Taxa (",M.fee_percent,"%):"]}),(0,t.jsxs)("span",{style:{fontWeight:600,color:"var(--color-danger)"},children:["-",o(M.fee_amount)]})]}),(0,t.jsxs)("div",{style:{borderTop:"1px solid #e2e8f0",paddingTop:8,display:"flex",justifyContent:"space-between"},children:[(0,t.jsx)("span",{style:{fontWeight:600},children:"Voce recebe:"}),(0,t.jsx)("span",{style:{fontWeight:700,fontSize:18,color:"var(--color-success)"},children:o(M.net_amount)})]})]})]})]}),M&&(0,t.jsxs)("div",{className:"modal-footer",children:[(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>I(null),children:"Voltar"}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:ey,disabled:H,children:H?(0,t.jsx)("span",{className:"spinner-sm"}):"Confirmar Antecipacao"})]})]})})]})}function m(){let[e,a]=(0,l.useState)(100),s=12*e/100,i=e-s;return(0,t.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsx)("h2",{className:"card-title",children:"Simulador de Taxas"})}),(0,t.jsxs)("div",{style:{padding:16},children:[(0,t.jsxs)("div",{className:"form-group",style:{maxWidth:300},children:[(0,t.jsx)("label",{className:"form-label",children:"Valor da Venda"}),(0,t.jsx)("input",{type:"number",className:"form-input",value:e,onChange:e=>a(Math.max(0,parseFloat(e.target.value)||0)),step:"10"})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:12,marginTop:16},children:[(0,t.jsxs)("div",{style:{padding:14,borderRadius:10,background:"#f8fafc",border:"1px solid var(--color-border)"},children:[(0,t.jsx)("div",{style:{fontSize:13,color:"var(--color-text-secondary)",marginBottom:4},children:"Valor da Venda"}),(0,t.jsx)("div",{style:{fontSize:20,fontWeight:700,color:"var(--color-text)"},children:o(e)})]}),(0,t.jsxs)("div",{style:{padding:14,borderRadius:10,background:"#fef2f2",border:"1px solid #fecaca"},children:[(0,t.jsxs)("div",{style:{fontSize:13,color:"#dc2626",marginBottom:4},children:["Comissao (",12,"%)"]}),(0,t.jsxs)("div",{style:{fontSize:20,fontWeight:700,color:"#dc2626"},children:["-",o(s)]})]}),(0,t.jsxs)("div",{style:{padding:14,borderRadius:10,background:"#f0fdf4",border:"1px solid #bbf7d0"},children:[(0,t.jsx)("div",{style:{fontSize:13,color:"#16a34a",marginBottom:4},children:"Voce Recebe"}),(0,t.jsx)("div",{style:{fontSize:20,fontWeight:700,color:"#16a34a"},children:o(i)})]})]})]})]})}function u(e){var a,s,l,i,n,r;let{anticipation:d,onOpenModal:x}=e;return d?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:16,marginBottom:24},children:[(0,t.jsxs)("div",{className:"card",style:{padding:16},children:[(0,t.jsx)("div",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:"Total Antecipado"}),(0,t.jsx)("div",{style:{fontSize:24,fontWeight:700,color:"var(--color-primary)"},children:o(null===(a=d.stats)||void 0===a?void 0:a.total_anticipated)})]}),(0,t.jsxs)("div",{className:"card",style:{padding:16},children:[(0,t.jsx)("div",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:"Antecipacoes Aprovadas"}),(0,t.jsx)("div",{style:{fontSize:24,fontWeight:700,color:"var(--color-success)"},children:(null===(s=d.stats)||void 0===s?void 0:s.approved_count)||0})]}),(0,t.jsxs)("div",{className:"card",style:{padding:16},children:[(0,t.jsx)("div",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:"Total em Taxas"}),(0,t.jsx)("div",{style:{fontSize:24,fontWeight:700,color:"var(--color-danger)"},children:o(null===(l=d.stats)||void 0===l?void 0:l.total_fees_paid)})]})]}),(0,t.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsx)("h2",{className:"card-title",children:"Disponivel por Periodo"})}),(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,padding:16},children:(d.available_by_period||[]).map((e,a)=>(0,t.jsxs)("div",{style:{padding:16,background:"#f8fafc",borderRadius:10,border:"1px solid var(--color-border)"},children:[(0,t.jsxs)("div",{style:{fontSize:12,color:"#64748b",marginBottom:4},children:[e.days_min===e.days_max?"".concat(e.days_min," dias"):"".concat(e.days_min,"-").concat(e.days_max," dias")," (",e.fee_percent,"% taxa)"]}),(0,t.jsx)("div",{style:{fontSize:18,fontWeight:700},children:o(e.available_amount)}),(0,t.jsxs)("div",{style:{fontSize:12,color:"#94a3b8",marginTop:4},children:["Liquido: ",o(e.net_amount)]})]},a))}),(0,t.jsx)("div",{style:{padding:"0 16px 16px"},children:(0,t.jsx)("button",{className:"btn btn-primary",onClick:x,disabled:!(null===(i=d.available)||void 0===i?void 0:i.total),children:"Solicitar Antecipacao"})})]}),(null===(n=d.upcoming_payouts)||void 0===n?void 0:n.length)>0&&(0,t.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsx)("h2",{className:"card-title",children:"Proximos Repasses"})}),(0,t.jsx)("div",{className:"table-wrapper",style:{boxShadow:"none"},children:(0,t.jsxs)("table",{className:"table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Data"}),(0,t.jsx)("th",{children:"Dias"}),(0,t.jsx)("th",{style:{textAlign:"right"},children:"Valor"})]})}),(0,t.jsx)("tbody",{children:d.upcoming_payouts.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:h(e.scheduled_date)}),(0,t.jsx)("td",{children:(0,t.jsxs)("span",{className:"badge badge-info",children:[e.days_until," dias"]})}),(0,t.jsx)("td",{style:{textAlign:"right",fontWeight:600},children:o(e.amount)})]},e.id))})]})})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsx)("h2",{className:"card-title",children:"Historico de Antecipacoes"})}),(null===(r=d.history)||void 0===r?void 0:r.length)?(0,t.jsx)("div",{className:"table-wrapper",style:{boxShadow:"none"},children:(0,t.jsxs)("table",{className:"table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Data"}),(0,t.jsx)("th",{children:"Dias"}),(0,t.jsx)("th",{style:{textAlign:"right"},children:"Solicitado"}),(0,t.jsx)("th",{style:{textAlign:"right"},children:"Taxa"}),(0,t.jsx)("th",{style:{textAlign:"right"},children:"Liquido"}),(0,t.jsx)("th",{children:"Status"})]})}),(0,t.jsx)("tbody",{children:d.history.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:c(e.requested_at)}),(0,t.jsx)("td",{children:e.days_ahead}),(0,t.jsx)("td",{style:{textAlign:"right"},children:o(e.requested_amount)}),(0,t.jsxs)("td",{style:{textAlign:"right",color:"var(--color-danger)"},children:["-",o(e.fee_amount)]}),(0,t.jsx)("td",{style:{textAlign:"right",fontWeight:600},children:o(e.net_amount)}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"badge ".concat("paid"===e.status?"badge-success":"rejected"===e.status?"badge-danger":"badge-warning"),children:"paid"===e.status?"Pago":"pending"===e.status?"Pendente":"approved"===e.status?"Aprovado":"rejected"===e.status?"Rejeitado":e.status})})]},e.id))})]})}):(0,t.jsx)("div",{className:"empty-state",children:(0,t.jsx)("div",{className:"empty-state-text",children:"Nenhuma antecipacao realizada"})})]})]}):(0,t.jsx)("div",{className:"loading-screen",children:(0,t.jsx)("div",{className:"spinner"})})}function v(e){var a,s,l,i,n,r;let{payouts:d,loading:c,onRefresh:x}=e;return c||!d?(0,t.jsx)("div",{className:"loading-screen",children:(0,t.jsx)("div",{className:"spinner"})}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:16,marginBottom:24},children:[(0,t.jsxs)("div",{className:"card",style:{padding:16},children:[(0,t.jsx)("div",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:"Total Recebido"}),(0,t.jsx)("div",{style:{fontSize:24,fontWeight:700,color:"var(--color-success)"},children:o(null===(a=d.stats)||void 0===a?void 0:a.total_paid)})]}),(0,t.jsxs)("div",{className:"card",style:{padding:16},children:[(0,t.jsx)("div",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:"A Receber"}),(0,t.jsx)("div",{style:{fontSize:24,fontWeight:700,color:"var(--color-warning)"},children:o(null===(s=d.stats)||void 0===s?void 0:s.pending_amount)})]}),(0,t.jsxs)("div",{className:"card",style:{padding:16},children:[(0,t.jsx)("div",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:"Repasses Concluidos"}),(0,t.jsx)("div",{style:{fontSize:24,fontWeight:700},children:(null===(l=d.stats)||void 0===l?void 0:l.completed_count)||0})]}),(0,t.jsxs)("div",{className:"card",style:{padding:16},children:[(0,t.jsx)("div",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:"Media por Repasse"}),(0,t.jsx)("div",{style:{fontSize:24,fontWeight:700},children:o(null===(i=d.stats)||void 0===i?void 0:i.avg_payout)})]})]}),(null===(n=d.upcoming)||void 0===n?void 0:n.length)>0&&(0,t.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsx)("h2",{className:"card-title",children:"Proximos Repasses Agendados"})}),(0,t.jsx)("div",{style:{display:"flex",gap:16,padding:16,overflowX:"auto"},children:d.upcoming.map(e=>(0,t.jsxs)("div",{style:{minWidth:160,padding:16,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:12,color:"#fff",flexShrink:0},children:[(0,t.jsx)("div",{style:{fontSize:12,opacity:.8},children:h(e.scheduled_date)}),(0,t.jsx)("div",{style:{fontSize:22,fontWeight:700,margin:"4px 0"},children:o(e.net_amount)}),(0,t.jsxs)("div",{style:{fontSize:11,background:"rgba(255,255,255,0.2)",padding:"2px 8px",borderRadius:20,display:"inline-block"},children:["em ",e.days_until," dias"]})]},e.id))})]}),d.config&&(0,t.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsx)("h2",{className:"card-title",children:"Configuracao de Repasse"})}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:12,padding:16},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:12,color:"#64748b"},children:"Frequencia"}),(0,t.jsx)("div",{style:{fontWeight:600},children:d.config.frequency_label})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:12,color:"#64748b"},children:"Valor Minimo"}),(0,t.jsx)("div",{style:{fontWeight:600},children:o(d.config.min_payout)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:12,color:"#64748b"},children:"Chave PIX"}),(0,t.jsx)("div",{style:{fontWeight:600},children:d.config.pix_key||"Nao configurada"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:12,color:"#64748b"},children:"Repasse Automatico"}),(0,t.jsx)("div",{style:{fontWeight:600},children:d.config.auto_payout?"Sim":"Nao"})]})]})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)("h2",{className:"card-title",children:"Historico de Repasses"}),(0,t.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:x,children:"Atualizar"})]}),(null===(r=d.payouts)||void 0===r?void 0:r.length)?(0,t.jsx)("div",{className:"table-wrapper",style:{boxShadow:"none"},children:(0,t.jsxs)("table",{className:"table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Data"}),(0,t.jsx)("th",{children:"Periodo"}),(0,t.jsx)("th",{style:{textAlign:"right"},children:"Valor"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{children:"Comprovante"})]})}),(0,t.jsx)("tbody",{children:d.payouts.map(e=>{var a,s;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:h(e.scheduled_date)}),(0,t.jsx)("td",{style:{fontSize:12,color:"#64748b"},children:(null===(a=e.period)||void 0===a?void 0:a.start)&&(null===(s=e.period)||void 0===s?void 0:s.end)?"".concat(h(e.period.start)," - ").concat(h(e.period.end)):"-"}),(0,t.jsx)("td",{style:{textAlign:"right",fontWeight:600},children:o(e.net_amount)}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"badge ".concat("completed"===e.status?"badge-success":"failed"===e.status?"badge-danger":"badge-warning"),children:e.status_label})}),(0,t.jsx)("td",{children:e.has_receipt?(0,t.jsxs)("a",{href:e.receipt_url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-secondary",children:[(0,t.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:4},children:(0,t.jsx)("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})}),"PDF"]}):(0,t.jsx)("span",{style:{fontSize:12,color:"#94a3b8"},children:"-"})})]},e.id)})})]})}):(0,t.jsx)("div",{className:"empty-state",children:(0,t.jsx)("div",{className:"empty-state-text",children:"Nenhum repasse encontrado"})})]})]})}function j(e){var a,s,i;let{reconciliation:n,loading:c,period:x,setPeriod:p,from:m,setFrom:u,to:v,setTo:j,onRefresh:g,onVerifyDay:y,onVerifyAll:f,onExportCSV:b}=e,[N,S]=(0,l.useState)(!1),[_,w]=(0,l.useState)(null),[C,k]=(0,l.useState)({type:"other",description:"",expected:"",actual:""}),{addNotification:z}=(0,d.l)();async function W(){if(!C.description){z("Descreva o problema","error");return}try{await (0,r.sg)("/reconciliation.php",{action:"dispute",reconciliation_id:_.id,dispute_type:C.type,description:C.description,expected_amount:C.expected?parseFloat(C.expected):null,actual_amount:C.actual?parseFloat(C.actual):null}),z("Disputa registrada com sucesso","success"),S(!1),k({type:"other",description:"",expected:"",actual:""}),g()}catch(e){z(e.message,"error")}}return c?(0,t.jsx)("div",{className:"loading-screen",children:(0,t.jsx)("div",{className:"spinner"})}):(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"card",style:{marginBottom:24},children:(0,t.jsxs)("div",{style:{padding:16,display:"flex",gap:12,alignItems:"flex-end",flexWrap:"wrap"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",style:{marginBottom:4},children:"Periodo"}),(0,t.jsxs)("select",{className:"form-select",value:x,onChange:e=>p(e.target.value),style:{minWidth:140},children:[(0,t.jsx)("option",{value:"today",children:"Hoje"}),(0,t.jsx)("option",{value:"week",children:"Ultimos 7 dias"}),(0,t.jsx)("option",{value:"month",children:"Este mes"}),(0,t.jsx)("option",{value:"last_month",children:"Mes passado"}),(0,t.jsx)("option",{value:"custom",children:"Personalizado"})]})]}),"custom"===x&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",style:{marginBottom:4},children:"De"}),(0,t.jsx)("input",{type:"date",className:"form-input",value:m,onChange:e=>u(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",style:{marginBottom:4},children:"Ate"}),(0,t.jsx)("input",{type:"date",className:"form-input",value:v,onChange:e=>j(e.target.value)})]})]}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:g,children:"Filtrar"}),(0,t.jsxs)("button",{className:"btn btn-secondary",onClick:b,children:[(0,t.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:4},children:(0,t.jsx)("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})}),"Exportar CSV"]})]})}),(null==n?void 0:n.totals)&&(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:12,marginBottom:24},children:[(0,t.jsxs)("div",{className:"card",style:{padding:14},children:[(0,t.jsx)("div",{style:{fontSize:12,color:"#64748b"},children:"Pedidos"}),(0,t.jsx)("div",{style:{fontSize:22,fontWeight:700},children:n.totals.total_orders})]}),(0,t.jsxs)("div",{className:"card",style:{padding:14},children:[(0,t.jsx)("div",{style:{fontSize:12,color:"#64748b"},children:"Vendas"}),(0,t.jsx)("div",{style:{fontSize:22,fontWeight:700},children:o(n.totals.total_sales)})]}),(0,t.jsxs)("div",{className:"card",style:{padding:14},children:[(0,t.jsx)("div",{style:{fontSize:12,color:"#dc2626"},children:"Comissao"}),(0,t.jsxs)("div",{style:{fontSize:22,fontWeight:700,color:"#dc2626"},children:["-",o(n.totals.total_commission)]})]}),(0,t.jsxs)("div",{className:"card",style:{padding:14},children:[(0,t.jsx)("div",{style:{fontSize:12,color:"#16a34a"},children:"Liquido"}),(0,t.jsx)("div",{style:{fontSize:22,fontWeight:700,color:"#16a34a"},children:o(n.totals.net_amount)})]}),(0,t.jsxs)("div",{className:"card",style:{padding:14},children:[(0,t.jsx)("div",{style:{fontSize:12,color:"#64748b"},children:"Verificados"}),(0,t.jsx)("div",{style:{fontSize:22,fontWeight:700,color:"var(--color-success)"},children:n.totals.verified_count})]}),(0,t.jsxs)("div",{className:"card",style:{padding:14},children:[(0,t.jsx)("div",{style:{fontSize:12,color:"#64748b"},children:"Pendentes"}),(0,t.jsx)("div",{style:{fontSize:22,fontWeight:700,color:"var(--color-warning)"},children:n.totals.pending_count})]})]}),(null==n?void 0:n.payouts_comparison)&&(0,t.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsx)("h2",{className:"card-title",children:"Comparacao: Vendas x Repasses"})}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:16,padding:16},children:[(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)("div",{style:{fontSize:12,color:"#64748b"},children:"Repasses Pagos"}),(0,t.jsx)("div",{style:{fontSize:20,fontWeight:700,color:"var(--color-success)"},children:o(n.payouts_comparison.paid)})]}),(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)("div",{style:{fontSize:12,color:"#64748b"},children:"Repasses Pendentes"}),(0,t.jsx)("div",{style:{fontSize:20,fontWeight:700,color:"var(--color-warning)"},children:o(n.payouts_comparison.pending)})]}),(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)("div",{style:{fontSize:12,color:"#64748b"},children:"Diferenca"}),(0,t.jsx)("div",{style:{fontSize:20,fontWeight:700,color:n.payouts_comparison.difference>=0?"var(--color-primary)":"var(--color-danger)"},children:o(n.payouts_comparison.difference)})]})]})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)("h2",{className:"card-title",children:"Reconciliacao Diaria"}),(null==n?void 0:null===(a=n.totals)||void 0===a?void 0:a.pending_count)>0&&(0,t.jsx)("button",{className:"btn btn-sm btn-success",onClick:f,children:"Verificar Todos"})]}),(null==n?void 0:null===(s=n.reconciliations)||void 0===s?void 0:s.length)?(0,t.jsx)("div",{className:"table-wrapper",style:{boxShadow:"none"},children:(0,t.jsxs)("table",{className:"table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Data"}),(0,t.jsx)("th",{children:"Dia"}),(0,t.jsx)("th",{style:{textAlign:"right"},children:"Pedidos"}),(0,t.jsx)("th",{style:{textAlign:"right"},children:"Vendas"}),(0,t.jsx)("th",{style:{textAlign:"right"},children:"Comissao"}),(0,t.jsx)("th",{style:{textAlign:"right"},children:"Liquido"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{children:"Acoes"})]})}),(0,t.jsx)("tbody",{children:n.reconciliations.map(e=>{var a;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:h(e.date)}),(0,t.jsx)("td",{style:{color:"#64748b"},children:e.day_name}),(0,t.jsx)("td",{style:{textAlign:"right"},children:e.total_orders}),(0,t.jsx)("td",{style:{textAlign:"right"},children:o(e.total_sales)}),(0,t.jsxs)("td",{style:{textAlign:"right",color:"#dc2626"},children:["-",o(e.total_commission)]}),(0,t.jsx)("td",{style:{textAlign:"right",fontWeight:600},children:o(e.net_amount)}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"badge ".concat("verified"===e.status?"badge-success":"disputed"===e.status?"badge-danger":"badge-warning"),children:"verified"===e.status?"Verificado":"disputed"===e.status?"Disputado":"Pendente"})}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{style:{display:"flex",gap:4},children:["pending"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"btn btn-sm btn-success",onClick:()=>y(e.id),title:"Verificar",children:(0,t.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,t.jsx)("polyline",{points:"20,6 9,17 4,12"})})}),(0,t.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>{w(e),S(!0)},title:"Disputar",children:(0,t.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,t.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})})]}),"disputed"===e.status&&(0,t.jsxs)("span",{style:{fontSize:11,color:"#dc2626"},children:[null===(a=e.dispute_reason)||void 0===a?void 0:a.substring(0,30),"..."]})]})})]},e.id)})})]})}):(0,t.jsx)("div",{className:"empty-state",children:(0,t.jsx)("div",{className:"empty-state-text",children:"Nenhum dado de reconciliacao"})})]}),(null==n?void 0:null===(i=n.open_disputes)||void 0===i?void 0:i.length)>0&&(0,t.jsxs)("div",{className:"card",style:{marginTop:24},children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsx)("h2",{className:"card-title",children:"Disputas em Aberto"})}),(0,t.jsx)("div",{className:"table-wrapper",style:{boxShadow:"none"},children:(0,t.jsxs)("table",{className:"table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Data"}),(0,t.jsx)("th",{children:"Tipo"}),(0,t.jsx)("th",{children:"Descricao"}),(0,t.jsx)("th",{children:"Status"})]})}),(0,t.jsx)("tbody",{children:n.open_disputes.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:h(e.date)}),(0,t.jsx)("td",{children:e.type}),(0,t.jsx)("td",{children:e.description}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"badge ".concat("investigating"===e.status?"badge-warning":"badge-info"),children:"investigating"===e.status?"Em analise":"Aberta"})})]},e.id))})]})})]}),N&&_&&(0,t.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&S(!1),children:(0,t.jsxs)("div",{className:"modal",style:{maxWidth:500},children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsxs)("h3",{className:"modal-title",children:["Registrar Disputa - ",h(_.date)]}),(0,t.jsx)("button",{className:"modal-close",onClick:()=>S(!1),children:"\xd7"})]}),(0,t.jsxs)("div",{className:"modal-body",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Tipo de Problema"}),(0,t.jsxs)("select",{className:"form-select",value:C.type,onChange:e=>k({...C,type:e.target.value}),children:[(0,t.jsx)("option",{value:"missing_order",children:"Pedido nao contabilizado"}),(0,t.jsx)("option",{value:"wrong_amount",children:"Valor incorreto"}),(0,t.jsx)("option",{value:"wrong_commission",children:"Comissao incorreta"}),(0,t.jsx)("option",{value:"wrong_refund",children:"Estorno incorreto"}),(0,t.jsx)("option",{value:"other",children:"Outro"})]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Descricao do Problema"}),(0,t.jsx)("textarea",{className:"form-input",rows:4,value:C.description,onChange:e=>k({...C,description:e.target.value}),placeholder:"Descreva o problema encontrado..."})]}),(0,t.jsxs)("div",{className:"form-row",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Valor Esperado (R$)"}),(0,t.jsx)("input",{type:"number",step:"0.01",className:"form-input",value:C.expected,onChange:e=>k({...C,expected:e.target.value}),placeholder:"0.00"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Valor Registrado (R$)"}),(0,t.jsx)("input",{type:"number",step:"0.01",className:"form-input",value:C.actual,onChange:e=>k({...C,actual:e.target.value}),placeholder:"0.00"})]})]})]}),(0,t.jsxs)("div",{className:"modal-footer",children:[(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>S(!1),children:"Cancelar"}),(0,t.jsx)("button",{className:"btn btn-danger",onClick:W,children:"Registrar Disputa"})]})]})})]})}}},function(e){e.O(0,[448,565,205,971,117,744],function(){return e(e.s=5300)}),_N_E=e.O()}]);