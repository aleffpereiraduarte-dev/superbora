(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{7823:function(s,e,a){Promise.resolve().then(a.bind(a,1732))},1732:function(s,e,a){"use strict";a.r(e),a.d(e,{default:function(){return r}});var i=a(7437),c=a(2265),l=a(4565),t=a(4477),d=a(6428),n=a(6971);function r(){return(0,i.jsx)(l.Z,{children:(0,i.jsx)(t.Z,{children:(0,i.jsx)(o,{})})})}function o(){let{addNotification:s}=(0,n.l)(),[e,a]=(0,c.useState)(null),[l,t]=(0,c.useState)(!0),r=s=>{let e=parseFloat(s);return isNaN(e)?"R$ 0,00":e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})};async function o(){try{let s=await (0,d.SC)("/financial-forecast.php");a(s)}catch(s){console.error(s)}t(!1)}if((0,c.useEffect)(()=>{o()},[]),l)return(0,i.jsx)("div",{style:{padding:60,textAlign:"center"},children:(0,i.jsx)("div",{className:"spinner"})});let h=(null==e?void 0:e.forecast)||[],x=(null==e?void 0:e.financial)||{},m=(null==e?void 0:e.day_averages)||[],v=(null==e?void 0:e.insights)||[],j={high:"#10b981",medium:"#f59e0b",low:"#ef4444"},N={high:"Alta",medium:"Media",low:"Baixa"};return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"page-header",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"page-title",children:"Previsao Financeira"}),(0,i.jsx)("p",{className:"page-subtitle",children:"Analise e projecoes com IA baseadas nos seus dados"})]})}),(0,i.jsxs)("div",{className:"stats-grid",children:[(0,i.jsxs)("div",{className:"stat-card stat-card-large",children:[(0,i.jsx)("div",{className:"stat-icon",style:{background:"#d1fae5"},children:(0,i.jsxs)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#10b981",strokeWidth:"2",children:[(0,i.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),(0,i.jsx)("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]})}),(0,i.jsxs)("div",{className:"stat-content",children:[(0,i.jsx)("div",{className:"stat-value",children:r(x.pending_payout)}),(0,i.jsx)("div",{className:"stat-label",children:"Saldo Pendente"})]})]}),(0,i.jsxs)("div",{className:"stat-card stat-card-large",children:[(0,i.jsx)("div",{className:"stat-icon",style:{background:"#dbeafe"},children:(0,i.jsxs)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#3b82f6",strokeWidth:"2",children:[(0,i.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,i.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,i.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,i.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),(0,i.jsxs)("div",{className:"stat-content",children:[(0,i.jsx)("div",{className:"stat-value",children:r(x.next_payout_estimate)}),(0,i.jsx)("div",{className:"stat-label",children:"Proximo Repasse (Est.)"})]})]}),(0,i.jsxs)("div",{className:"stat-card stat-card-large",children:[(0,i.jsx)("div",{className:"stat-icon",style:{background:"#ede9fe"},children:(0,i.jsxs)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#8b5cf6",strokeWidth:"2",children:[(0,i.jsx)("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),(0,i.jsx)("polyline",{points:"17 6 23 6 23 12"})]})}),(0,i.jsxs)("div",{className:"stat-content",children:[(0,i.jsx)("div",{className:"stat-value",children:r(x.month_projection)}),(0,i.jsx)("div",{className:"stat-label",children:"Projecao Mensal"})]})]}),(0,i.jsxs)("div",{className:"stat-card stat-card-large",children:[(0,i.jsx)("div",{className:"stat-icon",style:{background:"#fef3c7"},children:(0,i.jsxs)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#f59e0b",strokeWidth:"2",children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),(0,i.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}),(0,i.jsxs)("div",{className:"stat-content",children:[(0,i.jsxs)("div",{className:"stat-value",children:[x.commission_rate,"%"]}),(0,i.jsx)("div",{className:"stat-label",children:"Taxa de Comissao"})]})]})]}),v.length>0&&(0,i.jsxs)("div",{className:"card",style:{marginTop:24},children:[(0,i.jsx)("div",{className:"card-header",children:(0,i.jsx)("h2",{className:"card-title",children:"Insights da IA"})}),(0,i.jsx)("div",{className:"insights-row",children:v.map((s,e)=>(0,i.jsxs)("div",{className:"insight-card insight-".concat(s.type),children:[(0,i.jsx)("span",{className:"insight-icon",children:s.icon||"\uD83D\uDCA1"}),(0,i.jsx)("p",{children:s.message})]},e))})]}),(0,i.jsxs)("div",{className:"card",style:{marginTop:24},children:[(0,i.jsxs)("div",{className:"card-header",children:[(0,i.jsx)("h2",{className:"card-title",children:"Previsao dos Proximos 7 Dias"}),(0,i.jsxs)("span",{className:"data-points-badge",children:["Baseado em ",(null==e?void 0:e.data_points)||0," dias de dados"]})]}),0===h.length?(0,i.jsx)("div",{className:"empty-state-small",children:"Dados insuficientes para previsao"}):(0,i.jsx)("div",{className:"forecast-grid",children:h.map((s,e)=>(0,i.jsxs)("div",{className:"forecast-card",children:[(0,i.jsx)("div",{className:"forecast-day",children:s.day_name}),(0,i.jsx)("div",{className:"forecast-date",children:new Date(s.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}),(0,i.jsxs)("div",{className:"forecast-stats",children:[(0,i.jsxs)("div",{className:"forecast-stat",children:[(0,i.jsx)("span",{className:"forecast-stat-icon",children:"\uD83D\uDCE6"}),(0,i.jsx)("span",{className:"forecast-stat-value",children:s.predicted_orders}),(0,i.jsx)("span",{className:"forecast-stat-label",children:"pedidos"})]}),(0,i.jsxs)("div",{className:"forecast-stat",children:[(0,i.jsx)("span",{className:"forecast-stat-icon",children:"\uD83D\uDCB0"}),(0,i.jsx)("span",{className:"forecast-stat-value",children:r(s.predicted_revenue)}),(0,i.jsx)("span",{className:"forecast-stat-label",children:"receita"})]})]}),(0,i.jsxs)("div",{className:"forecast-confidence",style:{borderColor:j[s.confidence]},children:[(0,i.jsx)("span",{className:"confidence-dot",style:{background:j[s.confidence]}}),"Confianca: ",N[s.confidence]]})]},e))})]}),m.length>0&&(0,i.jsxs)("div",{className:"card",style:{marginTop:24},children:[(0,i.jsx)("div",{className:"card-header",children:(0,i.jsx)("h2",{className:"card-title",children:"Media por Dia da Semana"})}),(0,i.jsx)("div",{className:"day-averages-chart",children:m.map((s,e)=>{var a;return(0,i.jsxs)("div",{className:"day-average-bar",children:[(0,i.jsx)("div",{className:"day-average-fill",style:{height:"".concat(Math.min(100,s.avg_revenue/Math.max(...m.map(s=>s.avg_revenue||1))*100),"%")},children:(0,i.jsx)("span",{className:"day-average-value",children:r(s.avg_revenue)})}),(0,i.jsx)("span",{className:"day-average-label",children:(null===(a=s.day)||void 0===a?void 0:a.substring(0,3))||""}),(0,i.jsxs)("span",{className:"day-average-orders",children:[s.avg_orders," ped."]})]},e)})})]})]})}}},function(s){s.O(0,[448,565,205,971,117,744],function(){return s(s.s=7823)}),_N_E=s.O()}]);