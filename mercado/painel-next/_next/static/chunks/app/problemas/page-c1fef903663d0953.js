(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[451],{9127:function(e,o,r){Promise.resolve().then(r.bind(r,9988))},9988:function(e,o,r){"use strict";r.r(o),r.d(o,{default:function(){return k}});var t=r(7437),a=r(2265),l=r(4565),i=r(4477),n=r(6428);let s=[{key:"shopper",label:"Entregador",icon:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z",color:"#3b82f6",items:[{key:"shopper_late",label:"Atrasou para coletar"},{key:"shopper_rude",label:"Foi grosseiro"},{key:"shopper_damaged",label:"Danificou pedido"},{key:"shopper_no_show",label:"Nao apareceu"},{key:"shopper_wrong_delivery",label:"Entregou endereco errado"},{key:"shopper_ate_food",label:"Mexeu/consumiu itens"},{key:"shopper_fake_pickup",label:"Confirmou coleta sem coletar"},{key:"shopper_multiple_orders",label:"Priorizou outro pedido"},{key:"shopper_unprofessional",label:"Comportamento inadequado"},{key:"shopper_contact",label:"Nao atende telefone"}]},{key:"customer",label:"Cliente",icon:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z",color:"#ef4444",items:[{key:"customer_fraud",label:"Disputa fraudulenta"},{key:"customer_abuse",label:"Abuso de reembolso"},{key:"customer_no_show",label:"Cliente ausente"},{key:"customer_wrong_address",label:"Endereco falso/errado"},{key:"customer_rude",label:"Cliente grosseiro"},{key:"customer_scam",label:"Golpe (diz que nao recebeu)"},{key:"customer_chargeback",label:"Chargeback indevido"},{key:"customer_fake_complaint",label:"Reclamacao falsa"}]},{key:"order",label:"Pedido",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2",color:"#f59e0b",items:[{key:"order_cancelled_late",label:"Cancelamento tardio"},{key:"order_wrong_items_received",label:"Itens errados do fornecedor"},{key:"order_missing_items_stock",label:"Item sem estoque"},{key:"order_system_error",label:"Erro no sistema"},{key:"order_duplicate",label:"Pedido duplicado"},{key:"order_modification_late",label:"Modificacao tardia"},{key:"order_high_volume",label:"Volume alto demais"},{key:"order_printer_issue",label:"Impressora com problema"}]},{key:"financial",label:"Financeiro",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z",color:"#10b981",items:[{key:"financial_payment_delay",label:"Repasse atrasado"},{key:"financial_wrong_amount",label:"Valor incorreto"},{key:"financial_commission_error",label:"Comissao errada"},{key:"financial_tax_issue",label:"Problema fiscal"},{key:"financial_promotion_loss",label:"Prejuizo com promocao"},{key:"financial_refund_unfair",label:"Reembolso injusto"},{key:"financial_fee_unexpected",label:"Taxa inesperada"}]},{key:"platform",label:"Plataforma",icon:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",color:"#8b5cf6",items:[{key:"platform_app_bug",label:"Bug no painel"},{key:"platform_menu_sync",label:"Cardapio nao sincroniza"},{key:"platform_photos_issue",label:"Fotos com problema"},{key:"platform_reviews_unfair",label:"Avaliacao injusta"},{key:"platform_support_slow",label:"Suporte lento"},{key:"platform_visibility",label:"Loja sem visibilidade"}]}],d={open:{bg:"#dbeafe",text:"#1e40af"},in_progress:{bg:"#fef3c7",text:"#92400e"},resolved:{bg:"#d1fae5",text:"#065f46"},closed:{bg:"#e5e7eb",text:"#374151"}};function c(e){return e?new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}function p(e){let{stats:o}=e,r=[{label:"Total",value:o.total||0,color:"#6b7280"},{label:"Abertos",value:o.open||0,color:"#3b82f6"},{label:"Em andamento",value:o.in_progress||0,color:"#f59e0b"},{label:"Resolvidos",value:o.resolved||0,color:"#10b981"}];return(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12,marginBottom:20},children:r.map(e=>(0,t.jsxs)("div",{className:"card",style:{background:"var(--color-bg-card)",borderRadius:"var(--radius-md)",padding:16,textAlign:"center",borderTop:"3px solid ".concat(e.color)},children:[(0,t.jsx)("div",{style:{fontSize:28,fontWeight:700,color:e.color},children:e.value}),(0,t.jsx)("div",{style:{fontSize:13,color:"var(--color-text-secondary)",marginTop:4},children:e.label})]},e.label))})}function x(e){let{onSelect:o}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{style:{margin:"0 0 4px",fontSize:18,fontWeight:600},children:"Qual o tipo do problema?"}),(0,t.jsx)("p",{style:{margin:"0 0 16px",fontSize:14,color:"var(--color-text-secondary)"},children:"Selecione a categoria que melhor descreve sua situacao."}),(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:s.map(e=>(0,t.jsxs)("button",{onClick:()=>o(e),style:{display:"flex",alignItems:"center",gap:14,background:"var(--color-bg-card)",border:"none",borderLeft:"4px solid ".concat(e.color),borderRadius:"var(--radius-md)",padding:"18px 16px",cursor:"pointer",textAlign:"left",transition:"transform 0.15s, box-shadow 0.15s"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},onMouseLeave:e=>{e.currentTarget.style.transform="none",e.currentTarget.style.boxShadow="none"},children:[(0,t.jsx)("div",{style:{width:44,height:44,borderRadius:12,background:e.color+"18",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,t.jsx)("svg",{width:22,height:22,fill:"none",stroke:e.color,strokeWidth:1.8,strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:e.icon})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontWeight:600,fontSize:15,color:"var(--color-text-primary)"},children:e.label}),(0,t.jsxs)("div",{style:{fontSize:12,color:"var(--color-text-secondary)",marginTop:2},children:[e.items.length," opcoes"]})]})]},e.key))})]})}function h(e){let{category:o,onSelect:r,onBack:a}=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:a,style:{display:"inline-flex",alignItems:"center",gap:6,background:"none",border:"none",color:"var(--color-text-secondary)",fontSize:14,cursor:"pointer",padding:"0 0 12px"},children:[(0,t.jsx)("svg",{width:16,height:16,fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M15 19l-7-7 7-7"})}),"Voltar"]}),(0,t.jsxs)("h3",{style:{margin:"0 0 4px",fontSize:18,fontWeight:600},children:[(0,t.jsx)("span",{style:{color:o.color},children:o.label})," - Qual o problema?"]}),(0,t.jsx)("p",{style:{margin:"0 0 16px",fontSize:14,color:"var(--color-text-secondary)"},children:"Selecione a opcao que melhor descreve."}),(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:o.items.map(e=>(0,t.jsxs)("button",{onClick:()=>r(e),style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"var(--color-bg-card)",border:"none",borderRadius:"var(--radius-md)",padding:"14px 16px",cursor:"pointer",textAlign:"left",fontSize:14,fontWeight:500,color:"var(--color-text-primary)",transition:"background 0.15s"},onMouseEnter:e=>{e.currentTarget.style.background=o.color+"12"},onMouseLeave:e=>{e.currentTarget.style.background="var(--color-bg-card)"},children:[(0,t.jsx)("span",{children:e.label}),(0,t.jsx)("svg",{width:16,height:16,fill:"none",stroke:o.color,strokeWidth:2,viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M9 5l7 7-7 7"})})]},e.key))})]})}function u(e){let{orderId:o,onChange:r,onNext:a,onSkip:l,onBack:i}=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:i,style:{display:"inline-flex",alignItems:"center",gap:6,background:"none",border:"none",color:"var(--color-text-secondary)",fontSize:14,cursor:"pointer",padding:"0 0 12px"},children:[(0,t.jsx)("svg",{width:16,height:16,fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M15 19l-7-7 7-7"})}),"Voltar"]}),(0,t.jsx)("h3",{style:{margin:"0 0 4px",fontSize:18,fontWeight:600},children:"Pedido relacionado (opcional)"}),(0,t.jsx)("p",{style:{margin:"0 0 16px",fontSize:14,color:"var(--color-text-secondary)"},children:"Se o problema esta relacionado a um pedido, informe o numero."}),(0,t.jsx)("input",{type:"text",placeholder:"Ex: 12345",value:o,onChange:e=>r(e.target.value),style:{width:"100%",padding:"12px 14px",borderRadius:"var(--radius-md)",border:"1px solid var(--color-border)",background:"var(--color-bg-card)",color:"var(--color-text-primary)",fontSize:15,outline:"none",boxSizing:"border-box"}}),(0,t.jsxs)("div",{style:{display:"flex",gap:10,marginTop:20},children:[(0,t.jsx)("button",{className:"btn",onClick:l,style:{flex:1,padding:"12px 16px",fontSize:14,cursor:"pointer"},children:"Pular"}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:a,disabled:!o.trim(),style:{flex:1,padding:"12px 16px",fontSize:14,cursor:o.trim()?"pointer":"not-allowed",opacity:o.trim()?1:.5},children:"Continuar"})]})]})}function g(e){let{photos:o,onPhotosChange:r,onNext:l,onSkip:i,onBack:s}=e,d=(0,a.useRef)(null),[c,p]=(0,a.useState)(!1),x=async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a&&!(o.length>=3)){p(!0);try{let e=new FormData;e.append("photo",a);let t=await (0,n.zi)("/issue-upload.php",e);t.url&&r([...o,t.url])}catch(e){console.error("Upload failed:",e)}finally{p(!1),d.current&&(d.current.value="")}}},h=e=>{r(o.filter((o,r)=>r!==e))};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:s,style:{display:"inline-flex",alignItems:"center",gap:6,background:"none",border:"none",color:"var(--color-text-secondary)",fontSize:14,cursor:"pointer",padding:"0 0 12px"},children:[(0,t.jsx)("svg",{width:16,height:16,fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M15 19l-7-7 7-7"})}),"Voltar"]}),(0,t.jsx)("h3",{style:{margin:"0 0 4px",fontSize:18,fontWeight:600},children:"Fotos (opcional)"}),(0,t.jsx)("p",{style:{margin:"0 0 16px",fontSize:14,color:"var(--color-text-secondary)"},children:"Adicione ate 3 fotos como evidencia do problema."}),o.length>0&&(0,t.jsx)("div",{style:{display:"flex",gap:10,marginBottom:14,flexWrap:"wrap"},children:o.map((e,o)=>(0,t.jsxs)("div",{style:{position:"relative",width:90,height:90,borderRadius:"var(--radius-md)",overflow:"hidden",border:"1px solid var(--color-border)"},children:[(0,t.jsx)("img",{src:e,alt:"Foto ".concat(o+1),style:{width:"100%",height:"100%",objectFit:"cover"}}),(0,t.jsx)("button",{onClick:()=>h(o),style:{position:"absolute",top:4,right:4,width:22,height:22,borderRadius:"50%",background:"rgba(0,0,0,0.6)",border:"none",color:"#fff",fontSize:14,lineHeight:"22px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)("svg",{width:12,height:12,fill:"none",stroke:"#fff",strokeWidth:2.5,viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M6 18L18 6M6 6l12 12"})})})]},o))}),o.length<3&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{ref:d,type:"file",accept:"image/*",onChange:x,style:{display:"none"}}),(0,t.jsx)("button",{onClick:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.click()},disabled:c,style:{width:"100%",padding:"32px 16px",border:"2px dashed var(--color-border)",borderRadius:"var(--radius-md)",background:"transparent",cursor:c?"wait":"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:8,color:"var(--color-text-secondary)",transition:"border-color 0.15s"},onMouseEnter:e=>{e.currentTarget.style.borderColor="#3b82f6"},onMouseLeave:e=>{e.currentTarget.style.borderColor="var(--color-border)"},children:c?(0,t.jsx)("div",{style:{fontSize:14},children:"Enviando..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{width:28,height:28,fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 16V4m0 0l-4 4m4-4l4 4M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2"})}),(0,t.jsx)("span",{style:{fontSize:14,fontWeight:500},children:"Clique para selecionar foto"}),(0,t.jsxs)("span",{style:{fontSize:12},children:[o.length,"/3 fotos"]})]})})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:10,marginTop:20},children:[(0,t.jsx)("button",{className:"btn",onClick:i,style:{flex:1,padding:"12px 16px",fontSize:14,cursor:"pointer"},children:"Pular"}),o.length>0&&(0,t.jsx)("button",{className:"btn btn-primary",onClick:l,style:{flex:1,padding:"12px 16px",fontSize:14,cursor:"pointer"},children:"Continuar"})]})]})}function y(e){let{description:o,onChange:r,onSubmit:a,submitting:l,onBack:i}=e,n=o.trim().length>=5;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:i,style:{display:"inline-flex",alignItems:"center",gap:6,background:"none",border:"none",color:"var(--color-text-secondary)",fontSize:14,cursor:"pointer",padding:"0 0 12px"},children:[(0,t.jsx)("svg",{width:16,height:16,fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M15 19l-7-7 7-7"})}),"Voltar"]}),(0,t.jsx)("h3",{style:{margin:"0 0 4px",fontSize:18,fontWeight:600},children:"Descreva o problema"}),(0,t.jsx)("p",{style:{margin:"0 0 16px",fontSize:14,color:"var(--color-text-secondary)"},children:"Forne\xe7a detalhes para agilizar a analise (minimo 5 caracteres)."}),(0,t.jsx)("textarea",{value:o,onChange:e=>r(e.target.value),placeholder:"Descreva o que aconteceu com o maximo de detalhes...",rows:5,style:{width:"100%",padding:"12px 14px",borderRadius:"var(--radius-md)",border:"1px solid var(--color-border)",background:"var(--color-bg-card)",color:"var(--color-text-primary)",fontSize:14,resize:"vertical",outline:"none",fontFamily:"inherit",boxSizing:"border-box"}}),(0,t.jsxs)("div",{style:{fontSize:12,color:n?"var(--color-text-secondary)":"#ef4444",marginTop:6,textAlign:"right"},children:[o.trim().length," caracteres"]}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:a,disabled:!n||l,style:{width:"100%",padding:"14px 16px",fontSize:15,fontWeight:600,marginTop:12,cursor:n&&!l?"pointer":"not-allowed",opacity:n&&!l?1:.5},children:l?"Enviando...":"Enviar Reporte"})]})}function b(e){let{result:o,onRestart:r}=e;return(0,t.jsxs)("div",{style:{textAlign:"center",padding:"24px 0"},children:[(0,t.jsx)("div",{style:{width:64,height:64,borderRadius:"50%",background:"#d1fae5",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:(0,t.jsx)("svg",{width:32,height:32,fill:"none",stroke:"#059669",strokeWidth:2.5,viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("h3",{style:{margin:"0 0 8px",fontSize:20,fontWeight:700,color:"var(--color-text-primary)"},children:"Reporte enviado!"}),(0,t.jsx)("p",{style:{margin:"0 0 6px",fontSize:14,color:"var(--color-text-secondary)"},children:"Seu reporte foi registrado com sucesso."}),(null==o?void 0:o.id)&&(0,t.jsxs)("div",{style:{display:"inline-block",background:"var(--color-bg-card)",borderRadius:"var(--radius-md)",padding:"12px 24px",margin:"12px 0"},children:[(0,t.jsx)("div",{style:{fontSize:12,color:"var(--color-text-secondary)"},children:"Protocolo"}),(0,t.jsxs)("div",{style:{fontSize:22,fontWeight:700,color:"var(--color-text-primary)"},children:["#",o.id]}),o.severity&&(0,t.jsxs)("div",{style:{fontSize:12,color:"var(--color-text-secondary)",marginTop:4},children:["Severidade: ",(0,t.jsx)("strong",{children:o.severity})]})]}),(0,t.jsx)("p",{style:{margin:"16px 0 0",fontSize:13,color:"var(--color-text-secondary)"},children:'Acompanhe o status na aba "Meus Reports".'}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:r,style:{marginTop:20,padding:"12px 32px",fontSize:14,fontWeight:600,cursor:"pointer"},children:"Novo reporte"})]})}function m(e){let{onCreated:o}=e,[r,l]=(0,a.useState)("category"),[i,s]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),[p,m]=(0,a.useState)(""),[f,v]=(0,a.useState)([]),[j,k]=(0,a.useState)(""),[S,_]=(0,a.useState)(!1),[w,z]=(0,a.useState)(null),C=async()=>{if(!(j.trim().length<5)&&!S){_(!0);try{let e={subcategory:d.key,description:j.trim()};p.trim()&&(e.order_id=p.trim()),f.length>0&&(e.photo_urls=f);let r=await (0,n.sg)("/report-issue.php",e);z(r),l("success"),o&&o()}catch(e){console.error("Submit failed:",e),alert("Erro ao enviar reporte. Tente novamente.")}finally{_(!1)}}},M=["category","subcategory","order","photos","description"],W=M.indexOf(r),R="success"===r?100:Math.round((W+1)/M.length*100);return(0,t.jsxs)("div",{className:"card",style:{background:"var(--color-bg-card)",borderRadius:"var(--radius-md)",padding:20},children:["success"!==r&&(0,t.jsx)("div",{style:{height:4,background:"var(--color-border)",borderRadius:2,marginBottom:20,overflow:"hidden"},children:(0,t.jsx)("div",{style:{height:"100%",width:"".concat(R,"%"),background:"#3b82f6",borderRadius:2,transition:"width 0.3s ease"}})}),"category"===r&&(0,t.jsx)(x,{onSelect:e=>{s(e),l("subcategory")}}),"subcategory"===r&&i&&(0,t.jsx)(h,{category:i,onSelect:e=>{c(e),l("order")},onBack:()=>l("category")}),"order"===r&&(0,t.jsx)(u,{orderId:p,onChange:m,onNext:()=>l("photos"),onSkip:()=>{m(""),l("photos")},onBack:()=>l("subcategory")}),"photos"===r&&(0,t.jsx)(g,{photos:f,onPhotosChange:v,onNext:()=>l("description"),onSkip:()=>{v([]),l("description")},onBack:()=>l("order")}),"description"===r&&(0,t.jsx)(y,{description:j,onChange:k,onSubmit:C,submitting:S,onBack:()=>l("photos")}),"success"===r&&(0,t.jsx)(b,{result:w,onRestart:()=>{l("category"),s(null),c(null),m(""),v([]),k(""),_(!1),z(null)}})]})}function f(e){let{issue:o}=e,[r,l]=(0,a.useState)(!1),i=d[o.status]||d.closed,n="#6b7280";for(let e of s)if(e.items.some(e=>e.key===o.subcategory)){n=e.color;break}return(0,t.jsxs)("div",{className:"card",style:{background:"var(--color-bg-card)",borderRadius:"var(--radius-md)",padding:16,borderLeft:"4px solid ".concat(n),cursor:"pointer"},onClick:()=>l(!r),children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:10},children:[(0,t.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[(0,t.jsx)("span",{style:{fontWeight:600,fontSize:14,color:"var(--color-text-primary)"},children:o.label||o.subcategory}),(0,t.jsx)("span",{style:{display:"inline-block",padding:"2px 10px",borderRadius:999,fontSize:11,fontWeight:600,background:i.bg,color:i.text},children:o.status_label||o.status})]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginTop:6,fontSize:12,color:"var(--color-text-secondary)"},children:[(0,t.jsxs)("span",{children:["#",o.id]}),o.order_id&&(0,t.jsxs)("span",{children:["Pedido #",o.order_id]}),(0,t.jsx)("span",{children:c(o.created_at)})]}),!r&&o.description&&(0,t.jsx)("div",{style:{marginTop:8,fontSize:13,color:"var(--color-text-secondary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o.description})]}),(0,t.jsx)("svg",{width:16,height:16,fill:"none",stroke:"var(--color-text-secondary)",strokeWidth:2,viewBox:"0 0 24 24",style:{flexShrink:0,transition:"transform 0.2s",transform:r?"rotate(180deg)":"none"},children:(0,t.jsx)("path",{d:"M19 9l-7 7-7-7"})})]}),r&&(0,t.jsxs)("div",{style:{marginTop:14,paddingTop:14,borderTop:"1px solid var(--color-border)"},children:[o.description&&(0,t.jsxs)("div",{style:{marginBottom:12},children:[(0,t.jsx)("div",{style:{fontSize:12,fontWeight:600,color:"var(--color-text-secondary)",marginBottom:4},children:"Descricao"}),(0,t.jsx)("div",{style:{fontSize:13,color:"var(--color-text-primary)",whiteSpace:"pre-wrap"},children:o.description})]}),o.severity&&(0,t.jsxs)("div",{style:{marginBottom:12},children:[(0,t.jsx)("div",{style:{fontSize:12,fontWeight:600,color:"var(--color-text-secondary)",marginBottom:4},children:"Severidade"}),(0,t.jsx)("div",{style:{fontSize:13,color:"var(--color-text-primary)"},children:o.severity})]}),o.photo_urls&&o.photo_urls.length>0&&(0,t.jsxs)("div",{style:{marginBottom:12},children:[(0,t.jsx)("div",{style:{fontSize:12,fontWeight:600,color:"var(--color-text-secondary)",marginBottom:6},children:"Fotos"}),(0,t.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:o.photo_urls.map((e,o)=>(0,t.jsx)("img",{src:e,alt:"Evidencia ".concat(o+1),style:{width:80,height:80,objectFit:"cover",borderRadius:"var(--radius-md)",border:"1px solid var(--color-border)"}},o))})]}),o.resolution_note&&(0,t.jsxs)("div",{style:{padding:12,borderRadius:"var(--radius-md)",background:"#d1fae510",border:"1px solid #10b98130"},children:[(0,t.jsx)("div",{style:{fontSize:12,fontWeight:600,color:"#059669",marginBottom:4},children:"Resolucao"}),(0,t.jsx)("div",{style:{fontSize:13,color:"var(--color-text-primary)",whiteSpace:"pre-wrap"},children:o.resolution_note}),o.resolved_at&&(0,t.jsxs)("div",{style:{fontSize:11,color:"var(--color-text-secondary)",marginTop:6},children:["Resolvido em ",c(o.resolved_at)]})]})]})]})}function v(){let[e,o]=(0,a.useState)([]),[r,l]=(0,a.useState)(!0),[i,d]=(0,a.useState)(""),[c,p]=(0,a.useState)(""),[x,h]=(0,a.useState)(1),[u,g]=(0,a.useState)(1),y=(0,a.useCallback)(async()=>{l(!0);try{let e={action:"list",page:x};i&&(e.status=i),c&&(e.category=c);let r=await (0,n.SC)("/report-issue.php",e);o(r.issues||[]),g(r.pages||1)}catch(e){console.error("Failed to load issues:",e)}finally{l(!1)}},[i,c,x]);(0,a.useEffect)(()=>{y()},[y]),(0,a.useEffect)(()=>{h(1)},[i,c]);let b=[{value:"",label:"Todas categorias"},...s.map(e=>({value:e.key,label:e.label}))],m={padding:"8px 12px",borderRadius:"var(--radius-md)",border:"1px solid var(--color-border)",background:"var(--color-bg-card)",color:"var(--color-text-primary)",fontSize:13,outline:"none",cursor:"pointer"};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",gap:10,marginBottom:16,flexWrap:"wrap"},children:[(0,t.jsx)("select",{value:i,onChange:e=>d(e.target.value),style:m,children:[{value:"",label:"Todos"},{value:"open",label:"Abertos"},{value:"in_progress",label:"Em andamento"},{value:"resolved",label:"Resolvidos"},{value:"closed",label:"Fechados"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,t.jsx)("select",{value:c,onChange:e=>p(e.target.value),style:m,children:b.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),r?(0,t.jsx)("div",{style:{textAlign:"center",padding:"40px 0",color:"var(--color-text-secondary)"},children:"Carregando..."}):0===e.length?(0,t.jsxs)("div",{className:"card",style:{background:"var(--color-bg-card)",borderRadius:"var(--radius-md)",padding:"40px 16px",textAlign:"center",color:"var(--color-text-secondary)"},children:[(0,t.jsx)("svg",{width:40,height:40,fill:"none",stroke:"currentColor",strokeWidth:1.2,viewBox:"0 0 24 24",style:{margin:"0 auto 12px",display:"block",opacity:.4},children:(0,t.jsx)("path",{d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,t.jsx)("div",{style:{fontSize:14},children:"Nenhum reporte encontrado."})]}):(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:e.map(e=>(0,t.jsx)(f,{issue:e},e.id))}),u>1&&(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:12,marginTop:20},children:[(0,t.jsx)("button",{className:"btn",disabled:x<=1,onClick:()=>h(e=>Math.max(1,e-1)),style:{padding:"8px 16px",fontSize:13,cursor:x<=1?"not-allowed":"pointer",opacity:x<=1?.5:1},children:"Anterior"}),(0,t.jsxs)("span",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:[x," de ",u]}),(0,t.jsx)("button",{className:"btn",disabled:x>=u,onClick:()=>h(e=>Math.min(u,e+1)),style:{padding:"8px 16px",fontSize:13,cursor:x>=u?"not-allowed":"pointer",opacity:x>=u?.5:1},children:"Proximo"})]})]})}function j(){let[e,o]=(0,a.useState)("report"),[r,l]=(0,a.useState)({total:0,open:0,in_progress:0,resolved:0}),[i,s]=(0,a.useState)(0),d=(0,a.useCallback)(async()=>{try{let e=await (0,n.SC)("/report-issue.php",{action:"stats"});l(e)}catch(e){console.error("Failed to load stats:",e)}},[]);return(0,a.useEffect)(()=>{d()},[d,i]),(0,t.jsxs)("div",{style:{maxWidth:720,margin:"0 auto"},children:[(0,t.jsxs)("div",{style:{marginBottom:20},children:[(0,t.jsx)("h1",{style:{margin:0,fontSize:24,fontWeight:700,color:"var(--color-text-primary)"},children:"Reportar Problema"}),(0,t.jsx)("p",{style:{margin:"4px 0 0",fontSize:14,color:"var(--color-text-secondary)"},children:"Registre problemas com entregadores, clientes, pedidos, financeiro ou plataforma."})]}),(0,t.jsx)(p,{stats:r}),(0,t.jsxs)("div",{className:"tabs",style:{display:"flex",gap:0,marginBottom:20},children:[(0,t.jsx)("button",{className:"tab ".concat("report"===e?"active":""),onClick:()=>o("report"),style:{flex:1,padding:"12px 16px",fontSize:14,fontWeight:600,cursor:"pointer",background:"report"===e?"var(--color-bg-card)":"transparent",border:"none",borderBottom:"report"===e?"2px solid #3b82f6":"2px solid transparent",color:"report"===e?"#3b82f6":"var(--color-text-secondary)",transition:"all 0.2s"},children:(0,t.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[(0,t.jsx)("svg",{width:16,height:16,fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Reportar"]})}),(0,t.jsx)("button",{className:"tab ".concat("list"===e?"active":""),onClick:()=>o("list"),style:{flex:1,padding:"12px 16px",fontSize:14,fontWeight:600,cursor:"pointer",background:"list"===e?"var(--color-bg-card)":"transparent",border:"none",borderBottom:"list"===e?"2px solid #3b82f6":"2px solid transparent",color:"list"===e?"#3b82f6":"var(--color-text-secondary)",transition:"all 0.2s"},children:(0,t.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[(0,t.jsx)("svg",{width:16,height:16,fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"Meus Reports",r.open>0&&(0,t.jsx)("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",minWidth:20,height:20,borderRadius:999,background:"#ef4444",color:"#fff",fontSize:11,fontWeight:700,padding:"0 6px"},children:r.open})]})})]}),"report"===e&&(0,t.jsx)(m,{onCreated:()=>{s(e=>e+1)}}),"list"===e&&(0,t.jsx)(v,{},i)]})}function k(){return(0,t.jsx)(l.Z,{children:(0,t.jsx)(i.Z,{children:(0,t.jsx)(j,{})})})}}},function(e){e.O(0,[448,565,205,971,117,744],function(){return e(e.s=9127)}),_N_E=e.O()}]);