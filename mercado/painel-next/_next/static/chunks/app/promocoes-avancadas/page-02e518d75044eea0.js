(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[280],{3063:function(e,a,s){Promise.resolve().then(s.bind(s,5848))},5848:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return m}});var o=s(7437),t=s(29),i=s.n(t),r=s(2265),c=s(4565),l=s(4477),d=s(6428),n=s(6971);let p=[{value:1,label:"Dom",full:"Domingo"},{value:2,label:"Seg",full:"Segunda"},{value:3,label:"Ter",full:"Terca"},{value:4,label:"Qua",full:"Quarta"},{value:5,label:"Qui",full:"Quinta"},{value:6,label:"Sex",full:"Sexta"},{value:7,label:"Sab",full:"Sabado"}],x={happy_hour:{label:"Happy Hour",icon:"\uD83D\uDD50",color:"#FF9800",description:"Desconto automatico por horario"},bogo:{label:"BOGO",icon:"\uD83C\uDF81",color:"#4CAF50",description:"Compre X, Leve Y com desconto"},quantity_discount:{label:"Desconto Quantidade",icon:"\uD83D\uDCE6",color:"#2196F3",description:"Desconto ao comprar X+ unidades"}};function m(){return(0,o.jsx)(c.Z,{children:(0,o.jsx)(l.Z,{children:(0,o.jsx)(u,{})})})}function u(){var e,a,s;let{addNotification:t}=(0,n.l)(),[c,l]=(0,r.useState)([]),[m,u]=(0,r.useState)({}),[f,b]=(0,r.useState)(!0),[j,g]=(0,r.useState)("all"),[y,h]=(0,r.useState)(!1),[v,_]=(0,r.useState)(null),[w,k]=(0,r.useState)(!1),[N,z]=(0,r.useState)([]),[C,D]=(0,r.useState)([]),[q,S]=(0,r.useState)(""),[F,E]=(0,r.useState)([]),[P,A]=(0,r.useState)({type:"happy_hour",name:"",description:"",badge_text:"",badge_color:"#FF5722",discount_percent:20,start_time:"18:00",end_time:"20:00",days_of_week:[2,3,4,5,6],buy_quantity:1,get_quantity:1,get_discount_percent:100,min_quantity:3,quantity_discount_percent:15,applies_to:"all",product_ids:[],category_ids:[],valid_from:"",valid_until:"",status:1}),H=(0,r.useCallback)(async()=>{b(!0);try{let e="all"===j?"":j,a=await (0,d.SC)("/promotions-advanced.php?type=".concat(e));l(a.promotions||[]),u(a.stats||{})}catch(e){console.error(e),t("Erro ao carregar promocoes","error")}finally{b(!1)}},[j,t]),O=async()=>{try{let e=await (0,d.SC)("/categories.php");D(e.categories||[])}catch(e){console.error(e)}};(0,r.useEffect)(()=>{H(),O()},[H]);let I=async e=>{if(e.length<2){E([]);return}try{let a=await (0,d.SC)("/products.php",{search:e,limit:10});E(a.products||[])}catch(e){E([])}},T=function(){var e;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"happy_hour";_(null),A({type:a,name:"happy_hour"===a?"Happy Hour":"bogo"===a?"Leve 2 Pague 1":"Compre 3+ e Economize",description:"",badge_text:"",badge_color:(null===(e=x[a])||void 0===e?void 0:e.color)||"#FF5722",discount_percent:20,start_time:"18:00",end_time:"20:00",days_of_week:[2,3,4,5,6],buy_quantity:1,get_quantity:1,get_discount_percent:100,min_quantity:3,quantity_discount_percent:15,applies_to:"all",product_ids:[],category_ids:[],valid_from:new Date().toISOString().split("T")[0],valid_until:"",status:1}),h(!0)},B=e=>{_(e),A({type:e.type,name:e.name,description:e.description||"",badge_text:e.badge_text||"",badge_color:e.badge_color||"#FF5722",discount_percent:e.discount_percent||20,start_time:e.start_time?e.start_time.substring(0,5):"18:00",end_time:e.end_time?e.end_time.substring(0,5):"20:00",days_of_week:e.days_of_week?e.days_of_week.split(",").map(Number):[2,3,4,5,6],buy_quantity:e.buy_quantity||1,get_quantity:e.get_quantity||1,get_discount_percent:e.get_discount_percent||100,min_quantity:e.min_quantity||3,quantity_discount_percent:e.quantity_discount_percent||15,applies_to:e.applies_to||"all",product_ids:e.product_ids||[],category_ids:e.category_ids||[],valid_from:e.valid_from||"",valid_until:e.valid_until||"",status:e.status}),h(!0)},Q=async()=>{if(!P.name.trim()){t("Nome da promocao e obrigatorio","error");return}k(!0);try{let e={...P,days_of_week:P.days_of_week.join(",")};v&&(e.id=v.id),await (0,d.sg)("/promotions-advanced.php",e),t(v?"Promocao atualizada!":"Promocao criada!","success"),h(!1),H()}catch(e){t(e.message||"Erro ao salvar promocao","error")}finally{k(!1)}},L=async e=>{try{await (0,d.sg)("/promotions-advanced.php",{id:e.id,type:e.type,name:e.name,status:1===e.status?0:1}),t(1===e.status?"Promocao desativada":"Promocao ativada","success"),H()}catch(e){t("Erro ao alterar status","error")}},G=async e=>{if(confirm('Excluir promocao "'.concat(e.name,'"?')))try{await (0,d.apiDelete)("/promotions-advanced.php?id=".concat(e.id,"&permanent=1")),t("Promocao excluida","success"),H()}catch(e){t("Erro ao excluir","error")}},V=e=>{A(a=>({...a,days_of_week:a.days_of_week.includes(e)?a.days_of_week.filter(a=>a!==e):[...a.days_of_week,e].sort()}))},M=e=>{P.product_ids.includes(e.product_id||e.id)||A(a=>({...a,product_ids:[...a.product_ids,e.product_id||e.id]})),S(""),E([])},X=e=>{A(a=>({...a,product_ids:a.product_ids.filter(a=>a!==e)}))},Z=P.badge_text||("happy_hour"===P.type?"Happy Hour -".concat(P.discount_percent,"%"):"bogo"===P.type?P.get_discount_percent>=100?"Leve ".concat(P.buy_quantity+P.get_quantity," Pague ").concat(P.buy_quantity):"Compre ".concat(P.buy_quantity,", +").concat(P.get_quantity," com ").concat(P.get_discount_percent,"% OFF"):"quantity_discount"===P.type?"".concat(P.min_quantity,"+ = -").concat(P.quantity_discount_percent,"%"):"");return(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d",children:[(0,o.jsx)("div",{className:"jsx-413e00e1cf7a9a9d page-header",children:(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d",children:[(0,o.jsx)("h1",{className:"jsx-413e00e1cf7a9a9d page-title",children:"Promocoes Avancadas"}),(0,o.jsx)("p",{className:"jsx-413e00e1cf7a9a9d page-subtitle",children:"Happy Hour, BOGO e Descontos por Quantidade"})]})}),(0,o.jsx)("div",{className:"jsx-413e00e1cf7a9a9d promo-stats-grid",children:Object.entries(x).map(e=>{var a,s;let[t,i]=e;return(0,o.jsxs)("div",{onClick:()=>g(t),style:{borderColor:j===t?i.color:"transparent"},className:"jsx-413e00e1cf7a9a9d "+"promo-stat-card ".concat(j===t?"active":""),children:[(0,o.jsx)("div",{style:{backgroundColor:i.color+"20",color:i.color},className:"jsx-413e00e1cf7a9a9d promo-stat-icon",children:i.icon}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-stat-info",children:[(0,o.jsx)("div",{className:"jsx-413e00e1cf7a9a9d promo-stat-label",children:i.label}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-stat-value",children:[(null===(a=m[t])||void 0===a?void 0:a.active)||0," ativas",(0,o.jsxs)("span",{className:"jsx-413e00e1cf7a9a9d promo-stat-total",children:["/ ",(null===(s=m[t])||void 0===s?void 0:s.total)||0]})]})]}),(0,o.jsx)("button",{onClick:e=>{e.stopPropagation(),T(t)},style:{color:i.color,borderColor:i.color},className:"jsx-413e00e1cf7a9a9d btn btn-sm btn-outline",children:"+ Criar"})]},t)})}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-tabs",children:[(0,o.jsx)("button",{onClick:()=>g("all"),className:"jsx-413e00e1cf7a9a9d "+"promo-tab ".concat("all"===j?"active":""),children:"Todas"}),Object.entries(x).map(e=>{let[a,s]=e;return(0,o.jsxs)("button",{onClick:()=>g(a),className:"jsx-413e00e1cf7a9a9d "+"promo-tab ".concat(j===a?"active":""),children:[s.icon," ",s.label]},a)})]}),f?(0,o.jsx)("div",{className:"jsx-413e00e1cf7a9a9d loading-screen",children:(0,o.jsx)("div",{className:"jsx-413e00e1cf7a9a9d spinner"})}):0===c.length?(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d empty-state",children:[(0,o.jsx)("div",{className:"jsx-413e00e1cf7a9a9d empty-state-icon",children:"\uD83C\uDFAF"}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d empty-state-title",children:["Nenhuma promocao ","all"!==j?null===(e=x[j])||void 0===e?void 0:e.label:""]}),(0,o.jsx)("div",{className:"jsx-413e00e1cf7a9a9d empty-state-text",children:"Crie sua primeira promocao para atrair mais clientes"}),(0,o.jsxs)("div",{style:{display:"flex",gap:8,marginTop:16,justifyContent:"center"},className:"jsx-413e00e1cf7a9a9d",children:[(0,o.jsx)("button",{onClick:()=>T("happy_hour"),className:"jsx-413e00e1cf7a9a9d btn btn-primary",children:"Criar Happy Hour"}),(0,o.jsx)("button",{onClick:()=>T("bogo"),className:"jsx-413e00e1cf7a9a9d btn btn-secondary",children:"Criar BOGO"})]})]}):(0,o.jsx)("div",{className:"jsx-413e00e1cf7a9a9d promo-list",children:c.map(e=>{var a,s,t,i,r,c;return(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d "+"promo-card ".concat(1!==e.status?"inactive":""),children:[(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-card-header",children:[(0,o.jsx)("div",{style:{backgroundColor:e.badge_color||(null===(a=x[e.type])||void 0===a?void 0:a.color)||"#666"},className:"jsx-413e00e1cf7a9a9d promo-badge",children:e.badge_text||e.name}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-type-label",children:[null===(s=x[e.type])||void 0===s?void 0:s.icon," ",null===(t=x[e.type])||void 0===t?void 0:t.label]})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-card-body",children:[(0,o.jsx)("h3",{className:"jsx-413e00e1cf7a9a9d promo-name",children:e.name}),e.description&&(0,o.jsx)("p",{className:"jsx-413e00e1cf7a9a9d promo-description",children:e.description}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-details",children:["happy_hour"===e.type&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-detail",children:[(0,o.jsx)("span",{className:"jsx-413e00e1cf7a9a9d promo-detail-icon",children:"\uD83D\uDD50"}),(0,o.jsxs)("span",{className:"jsx-413e00e1cf7a9a9d",children:[null===(i=e.start_time)||void 0===i?void 0:i.substring(0,5)," - ",null===(r=e.end_time)||void 0===r?void 0:r.substring(0,5)]})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-detail",children:[(0,o.jsx)("span",{className:"jsx-413e00e1cf7a9a9d promo-detail-icon",children:"\uD83D\uDCC5"}),(0,o.jsx)("span",{className:"jsx-413e00e1cf7a9a9d",children:null===(c=e.days_of_week)||void 0===c?void 0:c.split(",").map(e=>{var a;return null===(a=p.find(a=>a.value===parseInt(e)))||void 0===a?void 0:a.label}).join(", ")})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-detail",children:[(0,o.jsx)("span",{className:"jsx-413e00e1cf7a9a9d promo-detail-icon",children:"\uD83D\uDCB0"}),(0,o.jsxs)("span",{className:"jsx-413e00e1cf7a9a9d",children:[e.discount_percent,"% de desconto"]})]})]}),"bogo"===e.type&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-detail",children:[(0,o.jsx)("span",{className:"jsx-413e00e1cf7a9a9d promo-detail-icon",children:"\uD83D\uDED2"}),(0,o.jsxs)("span",{className:"jsx-413e00e1cf7a9a9d",children:["Compre ",e.buy_quantity,", Leve +",e.get_quantity]})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-detail",children:[(0,o.jsx)("span",{className:"jsx-413e00e1cf7a9a9d promo-detail-icon",children:"\uD83D\uDCB0"}),(0,o.jsxs)("span",{className:"jsx-413e00e1cf7a9a9d",children:[e.get_discount_percent,"% OFF no extra"]})]})]}),"quantity_discount"===e.type&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-detail",children:[(0,o.jsx)("span",{className:"jsx-413e00e1cf7a9a9d promo-detail-icon",children:"\uD83D\uDCE6"}),(0,o.jsxs)("span",{className:"jsx-413e00e1cf7a9a9d",children:["Minimo ",e.min_quantity," unidades"]})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-detail",children:[(0,o.jsx)("span",{className:"jsx-413e00e1cf7a9a9d promo-detail-icon",children:"\uD83D\uDCB0"}),(0,o.jsxs)("span",{className:"jsx-413e00e1cf7a9a9d",children:[e.quantity_discount_percent,"% de desconto"]})]})]})]}),e.valid_until&&(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-validity",children:["Valido ate ",new Date(e.valid_until).toLocaleDateString("pt-BR")]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-status-row",children:[(0,o.jsx)("div",{className:"jsx-413e00e1cf7a9a9d "+"promo-status ".concat(e.is_active_now?"active":""),children:e.is_active_now?"\uD83D\uDFE2 Ativa agora":"âšª Inativa"}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-uses",children:[e.current_uses," usos",e.max_uses&&" / ".concat(e.max_uses)]})]})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d promo-card-footer",children:[(0,o.jsx)("button",{onClick:()=>L(e),className:"jsx-413e00e1cf7a9a9d "+"toggle-switch ".concat(1===e.status?"toggle-on":""),children:(0,o.jsx)("span",{className:"jsx-413e00e1cf7a9a9d toggle-knob"})}),(0,o.jsx)("button",{onClick:()=>B(e),className:"jsx-413e00e1cf7a9a9d btn btn-sm btn-secondary",children:"Editar"}),(0,o.jsx)("button",{onClick:()=>G(e),className:"jsx-413e00e1cf7a9a9d btn btn-sm btn-danger",children:"Excluir"})]})]},e.id)})}),y&&(0,o.jsx)("div",{onClick:e=>e.target===e.currentTarget&&h(!1),className:"jsx-413e00e1cf7a9a9d modal-overlay",children:(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d modal modal-lg",children:[(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d modal-header",children:[(0,o.jsxs)("h3",{className:"jsx-413e00e1cf7a9a9d modal-title",children:[null===(a=x[P.type])||void 0===a?void 0:a.icon," ",v?"Editar":"Nova"," ",null===(s=x[P.type])||void 0===s?void 0:s.label]}),(0,o.jsx)("button",{onClick:()=>h(!1),className:"jsx-413e00e1cf7a9a9d modal-close",children:"\xd7"})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d modal-body",children:[!v&&(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Tipo de Promocao"}),(0,o.jsx)("div",{className:"jsx-413e00e1cf7a9a9d promo-type-selector",children:Object.entries(x).map(e=>{let[a,s]=e;return(0,o.jsxs)("button",{type:"button",onClick:()=>A(e=>({...e,type:a})),style:{borderColor:P.type===a?s.color:"transparent"},className:"jsx-413e00e1cf7a9a9d "+"promo-type-btn ".concat(P.type===a?"active":""),children:[(0,o.jsx)("span",{className:"jsx-413e00e1cf7a9a9d promo-type-btn-icon",children:s.icon}),(0,o.jsx)("span",{className:"jsx-413e00e1cf7a9a9d promo-type-btn-label",children:s.label})]},a)})})]}),(0,o.jsx)("div",{className:"jsx-413e00e1cf7a9a9d form-row",children:(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Nome da Promocao"}),(0,o.jsx)("input",{type:"text",value:P.name,onChange:e=>A(a=>({...a,name:e.target.value})),placeholder:"Ex: Happy Hour de Verao",className:"jsx-413e00e1cf7a9a9d form-input"})]})}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Descricao (opcional)"}),(0,o.jsx)("textarea",{rows:2,value:P.description,onChange:e=>A(a=>({...a,description:e.target.value})),placeholder:"Descricao da promocao...",className:"jsx-413e00e1cf7a9a9d form-input"})]}),"happy_hour"===P.type&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Desconto (%)"}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d slider-container",children:[(0,o.jsx)("input",{type:"range",min:"5",max:"50",step:"5",value:P.discount_percent,onChange:e=>A(a=>({...a,discount_percent:parseInt(e.target.value)})),className:"jsx-413e00e1cf7a9a9d form-slider"}),(0,o.jsxs)("span",{className:"jsx-413e00e1cf7a9a9d slider-value",children:[P.discount_percent,"%"]})]})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-row",children:[(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Horario Inicio"}),(0,o.jsx)("input",{type:"time",value:P.start_time,onChange:e=>A(a=>({...a,start_time:e.target.value})),className:"jsx-413e00e1cf7a9a9d form-input"})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Horario Fim"}),(0,o.jsx)("input",{type:"time",value:P.end_time,onChange:e=>A(a=>({...a,end_time:e.target.value})),className:"jsx-413e00e1cf7a9a9d form-input"})]})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Dias da Semana"}),(0,o.jsx)("div",{className:"jsx-413e00e1cf7a9a9d days-selector",children:p.map(e=>(0,o.jsx)("button",{type:"button",onClick:()=>V(e.value),className:"jsx-413e00e1cf7a9a9d "+"day-btn ".concat(P.days_of_week.includes(e.value)?"active":""),children:e.label},e.value))})]})]}),"bogo"===P.type&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-row",children:[(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Compre"}),(0,o.jsx)("input",{type:"number",min:"1",max:"10",value:P.buy_quantity,onChange:e=>A(a=>({...a,buy_quantity:parseInt(e.target.value)||1})),className:"jsx-413e00e1cf7a9a9d form-input"})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Leve +"}),(0,o.jsx)("input",{type:"number",min:"1",max:"10",value:P.get_quantity,onChange:e=>A(a=>({...a,get_quantity:parseInt(e.target.value)||1})),className:"jsx-413e00e1cf7a9a9d form-input"})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Com desconto de (%)"}),(0,o.jsxs)("select",{value:P.get_discount_percent,onChange:e=>A(a=>({...a,get_discount_percent:parseInt(e.target.value)})),className:"jsx-413e00e1cf7a9a9d form-input",children:[(0,o.jsx)("option",{value:"100",className:"jsx-413e00e1cf7a9a9d",children:"100% (Gratis)"}),(0,o.jsx)("option",{value:"50",className:"jsx-413e00e1cf7a9a9d",children:"50%"}),(0,o.jsx)("option",{value:"25",className:"jsx-413e00e1cf7a9a9d",children:"25%"})]})]})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d bogo-preview",children:[(0,o.jsx)("strong",{className:"jsx-413e00e1cf7a9a9d",children:"Exemplo:"})," Cliente compra ",P.buy_quantity+P.get_quantity," unidades,",P.get_discount_percent>=100?" paga apenas ".concat(P.buy_quantity):" ".concat(P.get_quantity," sai(em) com ").concat(P.get_discount_percent,"% de desconto")]})]}),"quantity_discount"===P.type&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-row",children:[(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Quantidade Minima"}),(0,o.jsx)("input",{type:"number",min:"2",max:"20",value:P.min_quantity,onChange:e=>A(a=>({...a,min_quantity:parseInt(e.target.value)||2})),className:"jsx-413e00e1cf7a9a9d form-input"})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Desconto (%)"}),(0,o.jsx)("input",{type:"number",min:"5",max:"50",value:P.quantity_discount_percent,onChange:e=>A(a=>({...a,quantity_discount_percent:parseInt(e.target.value)||10})),className:"jsx-413e00e1cf7a9a9d form-input"})]})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d bogo-preview",children:[(0,o.jsx)("strong",{className:"jsx-413e00e1cf7a9a9d",children:"Exemplo:"})," Ao comprar ",P.min_quantity," ou mais unidades, cliente recebe ",P.quantity_discount_percent,"% de desconto em tudo"]})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Aplicar em"}),(0,o.jsxs)("select",{value:P.applies_to,onChange:e=>A(a=>({...a,applies_to:e.target.value})),className:"jsx-413e00e1cf7a9a9d form-input",children:[(0,o.jsx)("option",{value:"all",className:"jsx-413e00e1cf7a9a9d",children:"Todos os produtos"}),(0,o.jsx)("option",{value:"category",className:"jsx-413e00e1cf7a9a9d",children:"Categorias especificas"}),(0,o.jsx)("option",{value:"products",className:"jsx-413e00e1cf7a9a9d",children:"Produtos especificos"})]})]}),"category"===P.applies_to&&(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Categorias"}),(0,o.jsx)("div",{className:"jsx-413e00e1cf7a9a9d checkbox-group",children:C.map(e=>(0,o.jsxs)("label",{className:"jsx-413e00e1cf7a9a9d checkbox-label",children:[(0,o.jsx)("input",{type:"checkbox",checked:P.category_ids.includes(e.id),onChange:a=>{a.target.checked?A(a=>({...a,category_ids:[...a.category_ids,e.id]})):A(a=>({...a,category_ids:a.category_ids.filter(a=>a!==e.id)}))},className:"jsx-413e00e1cf7a9a9d"}),e.name]},e.id))})]}),"products"===P.applies_to&&(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Produtos"}),(0,o.jsx)("input",{type:"text",value:q,onChange:e=>{S(e.target.value),I(e.target.value)},placeholder:"Buscar produto...",className:"jsx-413e00e1cf7a9a9d form-input"}),F.length>0&&(0,o.jsx)("div",{className:"jsx-413e00e1cf7a9a9d search-results",children:F.map(e=>(0,o.jsx)("div",{onClick:()=>M(e),className:"jsx-413e00e1cf7a9a9d search-result-item",children:e.name},e.product_id||e.id))}),P.product_ids.length>0&&(0,o.jsx)("div",{className:"jsx-413e00e1cf7a9a9d selected-products",children:P.product_ids.map(e=>(0,o.jsxs)("span",{className:"jsx-413e00e1cf7a9a9d selected-product-tag",children:["Produto #",e,(0,o.jsx)("button",{type:"button",onClick:()=>X(e),className:"jsx-413e00e1cf7a9a9d",children:"\xd7"})]},e))})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-row",children:[(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Valido de"}),(0,o.jsx)("input",{type:"date",value:P.valid_from,onChange:e=>A(a=>({...a,valid_from:e.target.value})),className:"jsx-413e00e1cf7a9a9d form-input"})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Valido ate (opcional)"}),(0,o.jsx)("input",{type:"date",value:P.valid_until,onChange:e=>A(a=>({...a,valid_until:e.target.value})),className:"jsx-413e00e1cf7a9a9d form-input"})]})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d form-group",children:[(0,o.jsx)("label",{className:"jsx-413e00e1cf7a9a9d form-label",children:"Preview do Badge"}),(0,o.jsx)("div",{className:"jsx-413e00e1cf7a9a9d badge-preview-container",children:(0,o.jsx)("div",{style:{backgroundColor:P.badge_color},className:"jsx-413e00e1cf7a9a9d badge-preview",children:Z})}),(0,o.jsxs)("div",{style:{marginTop:8},className:"jsx-413e00e1cf7a9a9d form-row",children:[(0,o.jsx)("input",{type:"text",value:P.badge_text,onChange:e=>A(a=>({...a,badge_text:e.target.value})),placeholder:"Texto personalizado (deixe vazio para automatico)",className:"jsx-413e00e1cf7a9a9d form-input"}),(0,o.jsx)("input",{type:"color",value:P.badge_color,onChange:e=>A(a=>({...a,badge_color:e.target.value})),style:{width:60,padding:4},className:"jsx-413e00e1cf7a9a9d form-input form-color"})]})]})]}),(0,o.jsxs)("div",{className:"jsx-413e00e1cf7a9a9d modal-footer",children:[(0,o.jsx)("button",{type:"button",onClick:()=>h(!1),className:"jsx-413e00e1cf7a9a9d btn btn-secondary",children:"Cancelar"}),(0,o.jsx)("button",{type:"button",onClick:Q,disabled:w,className:"jsx-413e00e1cf7a9a9d btn btn-primary",children:w?(0,o.jsx)("span",{className:"jsx-413e00e1cf7a9a9d spinner-sm"}):v?"Salvar":"Criar Promocao"})]})]})}),(0,o.jsx)(i(),{id:"413e00e1cf7a9a9d",children:".promo-stats-grid.jsx-413e00e1cf7a9a9d{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;margin-bottom:24px}.promo-stat-card.jsx-413e00e1cf7a9a9d{background:white;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;padding:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:12px;cursor:pointer;border:2px solid transparent;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.1);-moz-box-shadow:0 1px 3px rgba(0,0,0,.1);box-shadow:0 1px 3px rgba(0,0,0,.1)}.promo-stat-card.jsx-413e00e1cf7a9a9d:hover{-webkit-box-shadow:0 4px 12px rgba(0,0,0,.15);-moz-box-shadow:0 4px 12px rgba(0,0,0,.15);box-shadow:0 4px 12px rgba(0,0,0,.15)}.promo-stat-card.active.jsx-413e00e1cf7a9a9d{background:#f8f9fa}.promo-stat-icon.jsx-413e00e1cf7a9a9d{width:48px;height:48px;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;font-size:24px}.promo-stat-info.jsx-413e00e1cf7a9a9d{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.promo-stat-label.jsx-413e00e1cf7a9a9d{font-weight:600;font-size:14px}.promo-stat-value.jsx-413e00e1cf7a9a9d{font-size:18px;font-weight:700;color:#333}.promo-stat-total.jsx-413e00e1cf7a9a9d{font-size:13px;font-weight:400;color:#888}.promo-tabs.jsx-413e00e1cf7a9a9d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px;margin-bottom:16px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.promo-tab.jsx-413e00e1cf7a9a9d{padding:8px 16px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;border:1px solid#ddd;background:white;cursor:pointer;font-size:14px;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.promo-tab.jsx-413e00e1cf7a9a9d:hover{border-color:#00A868}.promo-tab.active.jsx-413e00e1cf7a9a9d{background:#00A868;color:white;border-color:#00A868}.promo-list.jsx-413e00e1cf7a9a9d{display:grid;gap:16px}.promo-card.jsx-413e00e1cf7a9a9d{background:white;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;overflow:hidden;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.1);-moz-box-shadow:0 1px 3px rgba(0,0,0,.1);box-shadow:0 1px 3px rgba(0,0,0,.1)}.promo-card.inactive.jsx-413e00e1cf7a9a9d{opacity:.6}.promo-card-header.jsx-413e00e1cf7a9a9d{padding:12px 16px;background:#f8f9fa;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.promo-badge.jsx-413e00e1cf7a9a9d{display:inline-block;padding:4px 12px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;color:white;font-size:13px;font-weight:600}.promo-type-label.jsx-413e00e1cf7a9a9d{font-size:13px;color:#666}.promo-card-body.jsx-413e00e1cf7a9a9d{padding:16px}.promo-name.jsx-413e00e1cf7a9a9d{font-size:18px;font-weight:600;margin:0 0 4px}.promo-description.jsx-413e00e1cf7a9a9d{font-size:14px;color:#666;margin:0 0 12px}.promo-details.jsx-413e00e1cf7a9a9d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:12px;margin-bottom:12px}.promo-detail.jsx-413e00e1cf7a9a9d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:6px;font-size:14px;color:#333}.promo-detail-icon.jsx-413e00e1cf7a9a9d{font-size:16px}.promo-validity.jsx-413e00e1cf7a9a9d{font-size:12px;color:#888;margin-bottom:12px}.promo-status-row.jsx-413e00e1cf7a9a9d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding-top:12px;border-top:1px solid#eee}.promo-status.jsx-413e00e1cf7a9a9d{font-size:13px;color:#888}.promo-status.active.jsx-413e00e1cf7a9a9d{color:#00A868}.promo-uses.jsx-413e00e1cf7a9a9d{font-size:13px;color:#666}.promo-card-footer.jsx-413e00e1cf7a9a9d{padding:12px 16px;background:#f8f9fa;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.promo-type-selector.jsx-413e00e1cf7a9a9d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:12px}.promo-type-btn.jsx-413e00e1cf7a9a9d{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;padding:16px;border:2px solid#ddd;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;background:white;cursor:pointer;text-align:center;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.promo-type-btn.jsx-413e00e1cf7a9a9d:hover{border-color:#aaa}.promo-type-btn.active.jsx-413e00e1cf7a9a9d{background:#f8f9fa}.promo-type-btn-icon.jsx-413e00e1cf7a9a9d{display:block;font-size:28px;margin-bottom:8px}.promo-type-btn-label.jsx-413e00e1cf7a9a9d{font-size:14px;font-weight:600}.slider-container.jsx-413e00e1cf7a9a9d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:16px}.form-slider.jsx-413e00e1cf7a9a9d{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;height:8px;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;background:#ddd;outline:none}.form-slider.jsx-413e00e1cf7a9a9d::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;width:24px;height:24px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background:#00A868;cursor:pointer}.slider-value.jsx-413e00e1cf7a9a9d{font-size:24px;font-weight:700;color:#00A868;min-width:60px;text-align:right}.days-selector.jsx-413e00e1cf7a9a9d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.day-btn.jsx-413e00e1cf7a9a9d{width:44px;height:44px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;border:2px solid#ddd;background:white;cursor:pointer;font-size:12px;font-weight:600;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.day-btn.jsx-413e00e1cf7a9a9d:hover{border-color:#00A868}.day-btn.active.jsx-413e00e1cf7a9a9d{background:#00A868;border-color:#00A868;color:white}.bogo-preview.jsx-413e00e1cf7a9a9d{padding:12px;background:#f0f9f4;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;font-size:14px;color:#333}.checkbox-group.jsx-413e00e1cf7a9a9d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:12px}.checkbox-label.jsx-413e00e1cf7a9a9d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:6px;font-size:14px;cursor:pointer}.search-results.jsx-413e00e1cf7a9a9d{border:1px solid#ddd;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;max-height:200px;overflow-y:auto;margin-top:4px}.search-result-item.jsx-413e00e1cf7a9a9d{padding:10px 12px;cursor:pointer;font-size:14px;border-bottom:1px solid#f0f0f0}.search-result-item.jsx-413e00e1cf7a9a9d:hover{background:#f8f9fa}.selected-products.jsx-413e00e1cf7a9a9d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:8px;margin-top:8px}.selected-product-tag.jsx-413e00e1cf7a9a9d{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:6px;padding:4px 10px;background:#e8f5e9;-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px;font-size:13px}.selected-product-tag.jsx-413e00e1cf7a9a9d button.jsx-413e00e1cf7a9a9d{background:none;border:none;font-size:16px;cursor:pointer;color:#666}.badge-preview-container.jsx-413e00e1cf7a9a9d{padding:20px;background:#f8f9fa;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;text-align:center}.badge-preview.jsx-413e00e1cf7a9a9d{display:inline-block;padding:6px 16px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;color:white;font-size:14px;font-weight:600}.modal-lg.jsx-413e00e1cf7a9a9d{max-width:600px}.btn-outline.jsx-413e00e1cf7a9a9d{background:transparent}@media(max-width:768px){.promo-stats-grid.jsx-413e00e1cf7a9a9d{grid-template-columns:1fr}.promo-type-selector.jsx-413e00e1cf7a9a9d{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}}"})]})}}},function(e){e.O(0,[448,29,565,205,971,117,744],function(){return e(e.s=3063)}),_N_E=e.O()}]);