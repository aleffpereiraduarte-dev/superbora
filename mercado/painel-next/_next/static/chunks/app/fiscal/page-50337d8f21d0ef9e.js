(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6418],{8370:function(e,t,s){Promise.resolve().then(s.bind(s,9812))},9812:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(7437),i=s(2265),l=s(4565),r=s(4477),o=s(6428);function n(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0)}let d=["Janeiro","Fevereiro","Marco","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],c=[{key:"mei",label:"MEI"},{key:"simples_nacional",label:"Simples Nacional"},{key:"lucro_presumido",label:"Lucro Presumido"}];function x(){return(0,a.jsx)(l.Z,{children:(0,a.jsx)(r.Z,{children:(0,a.jsx)(h,{})})})}function h(){var e,t,s,l,r,x,h;let p=new Date,[m,u]=(0,i.useState)("".concat(p.getFullYear(),"-").concat(String(p.getMonth()+1).padStart(2,"0"))),[f,g]=(0,i.useState)("mensal"),[v,j]=(0,i.useState)("mei"),[y,b]=(0,i.useState)(null),[N,_]=(0,i.useState)(!0),[S,k]=(0,i.useState)(""),[w,C]=(0,i.useState)(null),[W,z]=(0,i.useState)(!1),[B,M]=(0,i.useState)(!1),[R,I]=(0,i.useState)(null),A=(0,i.useCallback)(async()=>{_(!0),k("");try{let e=await (0,o.SC)("/fiscal.php",{mes:m,tipo:f});b(e)}catch(e){k(e.message)}finally{_(!1)}},[m,f]);(0,i.useEffect)(()=>{A()},[A]);let F=(0,i.useCallback)(async()=>{z(!0);try{let e=await (0,o.SC)("/fiscal.php",{action:"notas",mes:m});C(e)}catch(e){console.error("Erro ao carregar notas:",e)}finally{z(!1)}},[m]),L=[];for(let e=p.getFullYear();e>=p.getFullYear()-3;e--)L.push(e);let E=parseInt(m.split("-")[0]),T=parseInt(m.split("-")[1]),q=(null==y?void 0:null===(e=y.impostos_estimados)||void 0===e?void 0:e[v])||null,P=(0,i.useMemo)(()=>{var e;return(null==y?void 0:null===(e=y.por_semana)||void 0===e?void 0:e.length)?Math.max(...y.por_semana.map(e=>e.valor),1):1},[y]),H=(0,i.useMemo)(()=>{var e;return(null==y?void 0:null===(e=y.por_forma_pagamento)||void 0===e?void 0:e.length)?Math.max(...y.por_forma_pagamento.map(e=>e.valor),1):1},[y]),V=(0,i.useMemo)(()=>{var e;return(null==y?void 0:null===(e=y.receita_mensal)||void 0===e?void 0:e.length)?Math.max(...y.receita_mensal.map(e=>e.valor),1):1},[y]);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"page-header",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"page-title",children:"Relatorio Fiscal"}),(0,a.jsx)("p",{className:"page-subtitle",children:"Resumo fiscal, estimativas de impostos e notas para NFC-e"})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[(0,a.jsxs)("button",{className:"btn btn-secondary",onClick:function(){let e=(0,o.LP)(),t="/api/mercado/partner/fiscal.php?action=export&mes=".concat(encodeURIComponent(m)),s=document.createElement("a");s.href=t,s.download="fiscal-".concat(m,".csv"),fetch(t,{headers:e?{Authorization:"Bearer ".concat(e)}:{},credentials:"include"}).then(e=>e.blob()).then(e=>{let t=URL.createObjectURL(e);s.href=t,s.click(),URL.revokeObjectURL(t)}).catch(e=>console.error("Export error:",e))},disabled:!y,style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:13},children:[(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})}),"Exportar CSV"]}),(0,a.jsxs)("button",{className:"btn btn-secondary",onClick:function(){M(!0),F()},style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:13},children:[(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),(0,a.jsx)("polyline",{points:"14 2 14 8 20 8"}),(0,a.jsx)("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),(0,a.jsx)("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),(0,a.jsx)("polyline",{points:"10 9 9 9 8 9"})]}),"Notas NFC-e"]})]})]}),(0,a.jsxs)("div",{className:"card",style:{marginBottom:24,padding:"16px 20px"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:16},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:[(0,a.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,a.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,a.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,a.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),(0,a.jsx)("span",{style:{fontWeight:600,color:"var(--color-text)"},children:"Periodo:"})]}),(0,a.jsx)("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:(0,a.jsx)("div",{className:"tabs",style:{marginBottom:0},children:["mensal","trimestral","anual"].map(e=>(0,a.jsx)("button",{className:"tab ".concat(f===e?"tab-active":""),onClick:()=>g(e),children:"mensal"===e?"Mensal":"trimestral"===e?"Trimestral":"Anual"},e))})})]}),(0,a.jsxs)("div",{style:{marginTop:16,display:"flex",gap:12,alignItems:"center",flexWrap:"wrap"},children:[(0,a.jsx)("select",{className:"form-select",style:{width:"auto",minWidth:140},value:T,onChange:e=>u("".concat(E,"-").concat(String(e.target.value).padStart(2,"0"))),children:d.map((e,t)=>(0,a.jsx)("option",{value:t+1,children:e},t))}),(0,a.jsx)("select",{className:"form-select",style:{width:"auto",minWidth:100},value:E,onChange:e=>u("".concat(e.target.value,"-").concat(String(T).padStart(2,"0"))),children:L.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(null==y?void 0:y.periodo)&&(0,a.jsxs)("span",{style:{fontSize:13,color:"var(--color-text-muted)"},children:[y.periodo.start_date," ate ",y.periodo.end_date]})]})]}),N?(0,a.jsx)("div",{className:"loading-screen",children:(0,a.jsx)("div",{className:"spinner"})}):S?(0,a.jsxs)("div",{className:"empty-state",children:[(0,a.jsx)("div",{className:"empty-state-title",children:"Erro ao carregar relatorio fiscal"}),(0,a.jsx)("div",{className:"empty-state-text",children:S})]}):y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"stats-grid",children:[(0,a.jsxs)("div",{className:"stat-card",children:[(0,a.jsx)("div",{className:"stat-card-icon",style:{background:"#eff6ff",color:"#2563eb"},children:(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("path",{d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsx)("div",{className:"stat-card-value",children:n(y.faturamento_bruto)}),(0,a.jsx)("div",{className:"stat-card-label",children:"Faturamento Bruto"})]}),(0,a.jsxs)("div",{className:"stat-card",children:[(0,a.jsx)("div",{className:"stat-card-icon",style:{background:"#fef2f2",color:"#dc2626"},children:(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("path",{d:"M15 3h4a2 2 0 012 2v14a2 2 0 01-2 2h-4M10 17l5-5-5-5M13.8 12H3"})})}),(0,a.jsxs)("div",{className:"stat-card-value",style:{color:"var(--color-danger)"},children:["-",n(y.comissoes)]}),(0,a.jsxs)("div",{className:"stat-card-label",children:["Comissoes (",y.comissao_rate,"%)"]})]}),(0,a.jsxs)("div",{className:"stat-card",children:[(0,a.jsx)("div",{className:"stat-card-icon",style:{background:"#f0fdf4",color:"#16a34a"},children:(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("polyline",{points:"20 12 20 22 4 22 4 12"}),(0,a.jsx)("rect",{x:"2",y:"7",width:"20",height:"5"}),(0,a.jsx)("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),(0,a.jsx)("path",{d:"M12 7H7.5a2.5 2.5 0 010-5C11 2 12 7 12 7z"}),(0,a.jsx)("path",{d:"M12 7h4.5a2.5 2.5 0 000-5C13 2 12 7 12 7z"})]})}),(0,a.jsx)("div",{className:"stat-card-value",style:{color:"var(--color-success)"},children:n(y.faturamento_liquido)}),(0,a.jsx)("div",{className:"stat-card-label",children:"Faturamento Liquido"})]}),(0,a.jsxs)("div",{className:"stat-card",children:[(0,a.jsx)("div",{className:"stat-card-icon",style:{background:"#f5f3ff",color:"#8b5cf6"},children:(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("path",{d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,a.jsx)("div",{className:"stat-card-value",children:(h=y.total_pedidos,new Intl.NumberFormat("pt-BR").format(h||0))}),(0,a.jsxs)("div",{className:"stat-card-label",children:["Pedidos | Ticket ",n(y.ticket_medio)]})]})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(380px, 1fr))",gap:24,marginBottom:24},children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsx)("h2",{className:"card-title",children:"Por Forma de Pagamento"})}),(null===(t=y.por_forma_pagamento)||void 0===t?void 0:t.length)>0?(0,a.jsx)("div",{style:{padding:"0 0 16px"},children:y.por_forma_pagamento.map((e,t)=>(0,a.jsxs)("div",{style:{padding:"10px 20px",display:"flex",alignItems:"center",gap:12},children:[(0,a.jsx)("div",{style:{minWidth:110,fontWeight:500,fontSize:14},children:e.forma}),(0,a.jsxs)("div",{style:{flex:1,position:"relative",height:28,background:"#f1f5f9",borderRadius:6,overflow:"hidden"},children:[(0,a.jsx)("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:"".concat(e.valor/H*100,"%"),background:0===t?"#2563eb":1===t?"#16a34a":2===t?"#f59e0b":"#8b5cf6",borderRadius:6,transition:"width 0.5s ease"}}),(0,a.jsx)("span",{style:{position:"absolute",left:8,top:"50%",transform:"translateY(-50%)",fontSize:12,fontWeight:600,color:e.valor/H>.4?"#fff":"#334155",zIndex:1},children:n(e.valor)})]}),(0,a.jsxs)("div",{style:{minWidth:60,textAlign:"right",fontSize:13,color:"var(--color-text-muted)"},children:[e.percentual,"% (",e.quantidade,")"]})]},t))}):(0,a.jsx)("div",{className:"empty-state",style:{padding:40},children:(0,a.jsx)("div",{className:"empty-state-text",children:"Sem dados de pagamento"})})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsx)("h2",{className:"card-title",children:"Receita por Semana"})}),(null===(s=y.por_semana)||void 0===s?void 0:s.length)>0?(0,a.jsx)("div",{style:{padding:"0 20px 16px"},children:y.por_semana.map((e,t)=>(0,a.jsxs)("div",{style:{marginBottom:12},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[(0,a.jsx)("span",{style:{fontSize:13,fontWeight:500},children:e.label}),(0,a.jsx)("span",{style:{fontSize:13,fontWeight:600},children:n(e.valor)})]}),(0,a.jsx)("div",{style:{position:"relative",height:24,background:"#f1f5f9",borderRadius:6,overflow:"hidden"},children:(0,a.jsx)("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:"".concat(e.valor/P*100,"%"),background:"linear-gradient(90deg, #2563eb, #3b82f6)",borderRadius:6,transition:"width 0.5s ease"}})}),(0,a.jsxs)("div",{style:{fontSize:11,color:"var(--color-text-muted)",marginTop:2},children:[e.inicio," a ",e.fim," - ",e.pedidos," pedidos"]})]},t))}):(0,a.jsx)("div",{className:"empty-state",style:{padding:40},children:(0,a.jsx)("div",{className:"empty-state-text",children:"Sem dados semanais"})})]})]}),(0,a.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,a.jsxs)("div",{className:"card-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:12},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"card-title",children:"Estimativa de Impostos"}),(0,a.jsx)("p",{style:{fontSize:12,color:"var(--color-text-muted)",margin:"4px 0 0"},children:"Valores estimados. Consulte seu contador para calculos precisos."})]}),(0,a.jsx)("div",{className:"tabs",style:{marginBottom:0},children:c.map(e=>(0,a.jsx)("button",{className:"tab ".concat(v===e.key?"tab-active":""),onClick:()=>j(e.key),children:e.label},e.key))})]}),(0,a.jsx)("div",{style:{padding:"0 20px 20px"},children:q&&(0,a.jsxs)("div",{children:["mei"===v&&(0,a.jsxs)("div",{style:{marginBottom:20},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,a.jsxs)("span",{style:{fontSize:14,fontWeight:500},children:["Limite MEI (",E,")"]}),(0,a.jsxs)("span",{style:{fontSize:14,fontWeight:600},children:[n(y.acumulado_ano)," / ",n(y.mei_limite)]})]}),(0,a.jsxs)("div",{style:{position:"relative",height:32,background:"#f1f5f9",borderRadius:8,overflow:"hidden"},children:[(0,a.jsx)("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:"".concat(Math.min(y.mei_percentual,100),"%"),background:y.mei_percentual>90?"#dc2626":y.mei_percentual>70?"#f59e0b":"#16a34a",borderRadius:8,transition:"width 0.5s ease"}}),(0,a.jsxs)("span",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",fontSize:13,fontWeight:700,color:y.mei_percentual>50?"#fff":"#334155",zIndex:1},children:[y.mei_percentual,"%"]})]}),y.mei_alerta&&(0,a.jsxs)("div",{style:{marginTop:8,padding:"8px 12px",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:8,fontSize:13,color:"#991b1b",display:"flex",alignItems:"center",gap:8},children:[(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),(0,a.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,a.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),"Atencao: Voce esta se aproximando do limite anual de faturamento do MEI!",y.mei_percentual>=100&&" Faturamento excedeu o limite. Necessario migrar de regime."]})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:16,marginBottom:16},children:[(0,a.jsxs)("div",{style:{padding:16,background:"#f8fafc",borderRadius:12,border:"1px solid #e2e8f0"},children:[(0,a.jsx)("div",{style:{fontSize:12,color:"var(--color-text-muted)",marginBottom:4},children:"Regime"}),(0,a.jsx)("div",{style:{fontSize:18,fontWeight:700},children:q.regime})]}),(0,a.jsxs)("div",{style:{padding:16,background:"#f8fafc",borderRadius:12,border:"1px solid #e2e8f0"},children:[(0,a.jsx)("div",{style:{fontSize:12,color:"var(--color-text-muted)",marginBottom:4},children:"Imposto Estimado"}),(0,a.jsx)("div",{style:{fontSize:18,fontWeight:700,color:null!==q.valor_estimado?"#dc2626":"#64748b"},children:null!==q.valor_estimado?n(q.valor_estimado):"N/A"})]}),void 0!==q.aliquota&&null!==q.aliquota&&0!==q.aliquota&&(0,a.jsxs)("div",{style:{padding:16,background:"#f8fafc",borderRadius:12,border:"1px solid #e2e8f0"},children:[(0,a.jsx)("div",{style:{fontSize:12,color:"var(--color-text-muted)",marginBottom:4},children:"Aliquota Efetiva"}),(0,a.jsxs)("div",{style:{fontSize:18,fontWeight:700},children:[q.aliquota,"%"]})]}),(0,a.jsxs)("div",{style:{padding:16,background:"#f8fafc",borderRadius:12,border:"1px solid #e2e8f0"},children:[(0,a.jsxs)("div",{style:{fontSize:12,color:"var(--color-text-muted)",marginBottom:4},children:["Faturamento Acumulado ",E]}),(0,a.jsx)("div",{style:{fontSize:18,fontWeight:700},children:n(y.acumulado_ano)})]})]}),(0,a.jsxs)("div",{style:{padding:"10px 14px",background:"#eff6ff",border:"1px solid #bfdbfe",borderRadius:8,fontSize:13,color:"#1e40af",lineHeight:1.5},children:[(0,a.jsx)("strong",{children:"Nota:"})," ",q.nota]})]})})]}),(0,a.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsxs)("h2",{className:"card-title",children:["Receita Mensal - ",E]})}),(null===(l=y.receita_mensal)||void 0===l?void 0:l.length)>0?(0,a.jsxs)("div",{style:{padding:"0 20px 20px"},children:[(0,a.jsx)("div",{style:{display:"flex",alignItems:"flex-end",gap:4,height:200,paddingTop:16},children:y.receita_mensal.map((e,t)=>{let s=V>0?e.valor/V*160:0,i=t+1===T&&E===p.getFullYear();return(0,a.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[e.valor>0&&(0,a.jsxs)("span",{style:{fontSize:10,color:"var(--color-text-muted)",whiteSpace:"nowrap"},children:[(e.valor/1e3).toFixed(1),"k"]}),(0,a.jsx)("div",{style:{width:"100%",maxWidth:40,height:Math.max(s,2),background:i?"#2563eb":e.valor>0?"#93c5fd":"#e2e8f0",borderRadius:"4px 4px 0 0",transition:"height 0.5s ease"}}),(0,a.jsx)("span",{style:{fontSize:11,color:i?"#2563eb":"var(--color-text-muted)",fontWeight:i?700:400},children:e.label})]},t)})}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:16,padding:"12px 0",borderTop:"1px solid var(--color-border)"},children:[(0,a.jsxs)("span",{style:{fontSize:14,fontWeight:500},children:["Total Acumulado ",E]}),(0,a.jsx)("span",{style:{fontSize:18,fontWeight:700,color:"var(--color-primary)"},children:n(y.acumulado_ano)})]})]}):(0,a.jsx)("div",{className:"empty-state",style:{padding:40},children:(0,a.jsx)("div",{className:"empty-state-text",children:"Sem dados mensais"})})]}),(0,a.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsx)("h2",{className:"card-title",children:"Resumo Financeiro do Periodo"})}),(0,a.jsx)("div",{style:{padding:"0 20px 20px"},children:(0,a.jsxs)("div",{style:{display:"grid",gap:0},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px 0",borderBottom:"1px solid var(--color-border)"},children:[(0,a.jsx)("span",{children:"Faturamento Bruto"}),(0,a.jsx)("span",{style:{fontWeight:600},children:n(y.faturamento_bruto)})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px 0",borderBottom:"1px solid var(--color-border)",color:"var(--color-danger)"},children:[(0,a.jsxs)("span",{children:["Comissoes SuperBora (",y.comissao_rate,"%)"]}),(0,a.jsxs)("span",{style:{fontWeight:600},children:["-",n(y.comissoes)]})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px 0",borderBottom:"1px solid var(--color-border)"},children:[(0,a.jsx)("span",{style:{fontWeight:700},children:"Faturamento Liquido"}),(0,a.jsx)("span",{style:{fontWeight:700,color:"var(--color-success)"},children:n(y.faturamento_liquido)})]}),(null==q?void 0:q.valor_estimado)!==null&&(null==q?void 0:q.valor_estimado)!==void 0&&(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px 0",borderBottom:"1px solid var(--color-border)",color:"#9333ea"},children:[(0,a.jsxs)("span",{children:["Imposto Estimado (",q.regime,")"]}),(0,a.jsxs)("span",{style:{fontWeight:600},children:["-",n(q.valor_estimado)]})]}),(null==q?void 0:q.valor_estimado)!==null&&(null==q?void 0:q.valor_estimado)!==void 0&&(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px 0",fontSize:18,fontWeight:700},children:[(0,a.jsx)("span",{children:"Resultado Estimado"}),(0,a.jsx)("span",{style:{color:"var(--color-success)"},children:n(y.faturamento_liquido-(q.valor_estimado||0))})]})]})})]}),B&&(0,a.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,a.jsxs)("div",{className:"card-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,a.jsxs)("h2",{className:"card-title",children:["Notas para NFC-e - ",null===(r=y.periodo)||void 0===r?void 0:r.label]}),(0,a.jsx)("button",{className:"btn btn-secondary",onClick:()=>M(!1),style:{fontSize:13,padding:"4px 12px"},children:"Fechar"})]}),W?(0,a.jsx)("div",{style:{padding:40,textAlign:"center"},children:(0,a.jsx)("div",{className:"spinner"})}):(null==w?void 0:null===(x=w.notas)||void 0===x?void 0:x.length)>0?(0,a.jsxs)("div",{className:"table-wrapper",style:{boxShadow:"none"},children:[(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Pedido"}),(0,a.jsx)("th",{children:"Data/Hora"}),(0,a.jsx)("th",{children:"Cliente"}),(0,a.jsx)("th",{style:{textAlign:"right"},children:"Subtotal"}),(0,a.jsx)("th",{style:{textAlign:"right"},children:"Entrega"}),(0,a.jsx)("th",{style:{textAlign:"right"},children:"Total"}),(0,a.jsx)("th",{children:"Pagamento"}),(0,a.jsx)("th",{children:"Itens"})]})}),(0,a.jsx)("tbody",{children:w.notas.map((e,t)=>{var s,i,l;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{style:{cursor:"pointer"},onClick:()=>I(R===e.order_id?null:e.order_id),children:[(0,a.jsxs)("td",{style:{fontWeight:600},children:["#",e.order_number||e.order_id]}),(0,a.jsx)("td",{style:{fontSize:13},children:e.data_hora?new Date(e.data_hora).toLocaleString("pt-BR"):e.data}),(0,a.jsx)("td",{children:e.cliente||"-"}),(0,a.jsx)("td",{style:{textAlign:"right"},children:n(e.subtotal)}),(0,a.jsx)("td",{style:{textAlign:"right"},children:n(e.taxa_entrega)}),(0,a.jsx)("td",{style:{textAlign:"right",fontWeight:600},children:n(e.total)}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{style:{display:"inline-block",padding:"2px 8px",borderRadius:4,fontSize:12,fontWeight:500,background:(null===(s=e.forma_pagamento)||void 0===s?void 0:s.toLowerCase().includes("pix"))?"#d1fae5":"#dbeafe",color:(null===(i=e.forma_pagamento)||void 0===i?void 0:i.toLowerCase().includes("pix"))?"#065f46":"#1e40af"},children:e.forma_pagamento||"N/A"})}),(0,a.jsx)("td",{children:(0,a.jsxs)("span",{style:{fontSize:13,color:"var(--color-text-muted)"},children:[e.total_items," ",R===e.order_id?"▲":"▼"]})})]},e.order_id),R===e.order_id&&(null===(l=e.items)||void 0===l?void 0:l.length)>0&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:8,style:{padding:"8px 20px 16px",background:"#f8fafc"},children:(0,a.jsxs)("table",{style:{width:"100%",fontSize:13},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{style:{textAlign:"left",padding:"4px 8px",fontWeight:600,borderBottom:"1px solid #e2e8f0"},children:"Produto"}),(0,a.jsx)("th",{style:{textAlign:"right",padding:"4px 8px",fontWeight:600,borderBottom:"1px solid #e2e8f0"},children:"Qtd"}),(0,a.jsx)("th",{style:{textAlign:"right",padding:"4px 8px",fontWeight:600,borderBottom:"1px solid #e2e8f0"},children:"Preco Unit."}),(0,a.jsx)("th",{style:{textAlign:"right",padding:"4px 8px",fontWeight:600,borderBottom:"1px solid #e2e8f0"},children:"Total"})]})}),(0,a.jsx)("tbody",{children:e.items.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{style:{padding:"4px 8px"},children:e.nome}),(0,a.jsx)("td",{style:{textAlign:"right",padding:"4px 8px"},children:e.quantidade}),(0,a.jsx)("td",{style:{textAlign:"right",padding:"4px 8px"},children:n(e.preco_unitario)}),(0,a.jsx)("td",{style:{textAlign:"right",padding:"4px 8px",fontWeight:500},children:n(e.total)})]},t))})]})})},"items-".concat(e.order_id))]})})})]}),(0,a.jsxs)("div",{style:{padding:"12px 20px",borderTop:"1px solid var(--color-border)",fontSize:13,color:"var(--color-text-muted)"},children:["Total: ",w.total_notas," pedidos no periodo"]})]}):(0,a.jsx)("div",{className:"empty-state",style:{padding:40},children:(0,a.jsx)("div",{className:"empty-state-text",children:"Nenhum pedido encontrado para emissao de NFC-e"})})]})]}):null]})}}},function(e){e.O(0,[3448,565,2205,2971,2117,1744],function(){return e(e.s=8370)}),_N_E=e.O()}]);