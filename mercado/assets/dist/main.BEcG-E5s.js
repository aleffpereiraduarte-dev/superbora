import{m as c,a as D,b as q,c as L,d as O,u as j,e as R,f as U,s as F,g as _,h as V,i as A,j as z,t as H}from"./shipping.CRkdE5c0.js";function W(e){e.directive("intersect",e.skipDuringClone((t,{value:a,expression:i,modifiers:n},{evaluateLater:r,cleanup:u})=>{let d=r(i),s={rootMargin:X(n),threshold:G(n)},o=new IntersectionObserver(g=>{g.forEach(h=>{h.isIntersecting!==(a==="leave")&&(d(),n.includes("once")&&o.disconnect())})},s);o.observe(t),u(()=>{o.disconnect()})}))}function G(e){if(e.includes("full"))return .99;if(e.includes("half"))return .5;if(!e.includes("threshold"))return 0;let t=e[e.indexOf("threshold")+1];return t==="100"?1:t==="0"?0:+`.${t}`}function P(e){let t=e.match(/^(-?[0-9]+)(px|%)?$/);return t?t[1]+(t[2]||"px"):void 0}function X(e){const t="margin",a="0px 0px 0px 0px",i=e.indexOf(t);if(i===-1)return a;let n=[];for(let r=1;r<5;r++)n.push(P(e[i+r]||""));return n=n.filter(r=>r!==void 0),n.length?n.join(" ").trim():a}var J=W;function C(e,t,a){B();let i=T(a),n=typeof t=="string"?Z(t):t;return window.Alpine&&window.Alpine.closestDataStack&&!e._x_dataStack&&(n._x_dataStack=window.Alpine.closestDataStack(e),n._x_dataStack&&window.Alpine.cloneNode(e,n)),i.patch(e,n),e}function Q(e,t,a,i={}){B();let n=T(i),r=e.parentNode,u=new k(e,t),d=typeof a=="string"?(()=>{let h=document.createElement("div");return h.insertAdjacentHTML("beforeend",a),h})():a,s=document.createComment("[morph-start]"),o=document.createComment("[morph-end]");d.insertBefore(s,d.firstChild),d.appendChild(o);let g=new k(s,o);window.Alpine&&window.Alpine.closestDataStack&&(d._x_dataStack=window.Alpine.closestDataStack(r),d._x_dataStack&&window.Alpine.cloneNode(r,d)),n.patchChildren(u,g)}function T(e={}){let t=n=>n.getAttribute("key"),a=()=>{},i={key:e.key||t,lookahead:e.lookahead||!1,updating:e.updating||a,updated:e.updated||a,removing:e.removing||a,removed:e.removed||a,adding:e.adding||a,added:e.added||a};return i.patch=function(n,r){if(i.differentElementNamesTypesOrKeys(n,r))return i.swapElements(n,r);let u=!1,d=!1,s=o=>i.skipUntilCondition=o;if(!Y(i.updating,()=>d=!0,s,n,r,()=>u=!0)){if(n.nodeType===1&&window.Alpine&&(window.Alpine.cloneNode(n,r),n._x_teleport&&r._x_teleport&&i.patch(n._x_teleport,r._x_teleport)),ee(r)){i.patchNodeValue(n,r),i.updated(n,r);return}u||i.patchAttributes(n,r),i.updated(n,r),d||i.patchChildren(n,r)}},i.differentElementNamesTypesOrKeys=function(n,r){return n.nodeType!=r.nodeType||n.nodeName!=r.nodeName||i.getKey(n)!=i.getKey(r)},i.swapElements=function(n,r){if(x(i.removing,n))return;let u=r.cloneNode(!0);x(i.adding,u)||(n.replaceWith(u),i.removed(n),i.added(u))},i.patchNodeValue=function(n,r){let u=r.nodeValue;n.nodeValue!==u&&(n.nodeValue=u)},i.patchAttributes=function(n,r){if(n._x_transitioning||n._x_isShown&&!r._x_isShown||!n._x_isShown&&r._x_isShown)return;let u=Array.from(n.attributes),d=Array.from(r.attributes);for(let s=u.length-1;s>=0;s--){let o=u[s].name;r.hasAttribute(o)||n.removeAttribute(o)}for(let s=d.length-1;s>=0;s--){let o=d[s].name,g=d[s].value;n.getAttribute(o)!==g&&n.setAttribute(o,g)}},i.patchChildren=function(n,r){let u=i.keyToMap(n.children),d={},s=S(r),o=S(n);for(;s;){te(s,o);let h=i.getKey(s),f=i.getKey(o);if(i.skipUntilCondition){let l=!o||i.skipUntilCondition(o),m=!s||i.skipUntilCondition(s);if(l&&m)i.skipUntilCondition=null;else{l||(o=o&&p(n,o)),m||(s=s&&p(r,s));continue}}if(!o)if(h&&d[h]){let l=d[h];n.appendChild(l),o=l,f=i.getKey(o)}else{if(!x(i.adding,s)){let l=s.cloneNode(!0);n.appendChild(l),i.added(l)}s=p(r,s);continue}let y=l=>l&&l.nodeType===8&&l.textContent==="[if BLOCK]><![endif]",b=l=>l&&l.nodeType===8&&l.textContent==="[if ENDBLOCK]><![endif]";if(y(s)&&y(o)){let l=0,m=o;for(;o;){let w=p(n,o);if(y(w))l++;else if(b(w)&&l>0)l--;else if(b(w)&&l===0){o=w;break}o=w}let N=o;l=0;let M=s;for(;s;){let w=p(r,s);if(y(w))l++;else if(b(w)&&l>0)l--;else if(b(w)&&l===0){s=w;break}s=w}let K=s,$=new k(m,N),I=new k(M,K);i.patchChildren($,I);continue}if(o.nodeType===1&&i.lookahead&&!o.isEqualNode(s)){let l=p(r,s),m=!1;for(;!m&&l;)l.nodeType===1&&o.isEqualNode(l)&&(m=!0,o=i.addNodeBefore(n,s,o),f=i.getKey(o)),l=p(r,l)}if(h!==f){if(!h&&f){d[f]=o,o=i.addNodeBefore(n,s,o),d[f].remove(),o=p(n,o),s=p(r,s);continue}if(h&&!f&&u[h]&&(o.replaceWith(u[h]),o=u[h],f=i.getKey(o)),h&&f){let l=u[h];if(l)d[f]=o,o.replaceWith(l),o=l,f=i.getKey(o);else{d[f]=o,o=i.addNodeBefore(n,s,o),d[f].remove(),o=p(n,o),s=p(r,s);continue}}}let E=o&&p(n,o);i.patch(o,s),s=s&&p(r,s),o=E}let g=[];for(;o;)x(i.removing,o)||g.push(o),o=p(n,o);for(;g.length;){let h=g.shift();h.remove(),i.removed(h)}},i.getKey=function(n){return n&&n.nodeType===1&&i.key(n)},i.keyToMap=function(n){let r={};for(let u of n){let d=i.getKey(u);d&&(r[d]=u)}return r},i.addNodeBefore=function(n,r,u){if(!x(i.adding,r)){let d=r.cloneNode(!0);return n.insertBefore(d,u),i.added(d),d}return r},i}C.step=()=>{};C.log=()=>{};function x(e,...t){let a=!1;return e(...t,()=>a=!0),a}function Y(e,t,a,...i){let n=!1;return e(...i,()=>n=!0,t,a),n}var v=!1;function Z(e){const t=document.createElement("template");return t.innerHTML=e,t.content.firstElementChild}function ee(e){return e.nodeType===3||e.nodeType===8}var k=class{constructor(e,t){this.startComment=e,this.endComment=t}get children(){let e=[],t=this.startComment.nextSibling;for(;t&&t!==this.endComment;)e.push(t),t=t.nextSibling;return e}appendChild(e){this.endComment.before(e)}get firstChild(){let e=this.startComment.nextSibling;if(e!==this.endComment)return e}nextNode(e){let t=e.nextSibling;if(t!==this.endComment)return t}insertBefore(e,t){return t.before(e),e}};function S(e){return e.firstChild}function p(e,t){let a;return e instanceof k?a=e.nextNode(t):a=t.nextSibling,a}function B(){if(v)return;v=!0;let e=Element.prototype.setAttribute,t=document.createElement("div");Element.prototype.setAttribute=function(i,n){if(!i.includes("@"))return e.call(this,i,n);t.innerHTML=`<span ${i}="${n}"></span>`;let r=t.firstElementChild.getAttributeNode(i);t.firstElementChild.removeAttributeNode(r),this.setAttributeNode(r)}}function te(e,t){let a=t&&t._x_bindings&&t._x_bindings.id;a&&e.setAttribute&&(e.setAttribute("id",a),e.id=a)}function ne(e){e.morph=C,e.morphBetween=Q}var ie=ne;function oe(){return{loading:!1,added:!1,async addToCart(e,t=1){this.loading=!0;try{await Alpine.store("cart").add(e,t),this.added=!0,setTimeout(()=>{this.added=!1},2e3)}catch(a){console.error("Error adding to cart:",a)}this.loading=!1},async quickView(e){Alpine.store("ui").openModal(`product-${e}`)}}}function re(){return{query:"",results:[],loading:!1,open:!1,selectedIndex:-1,_timeout:null,async search(){if(this.query.length<2){this.results=[],this.open=!1;return}this.loading=!0;try{const t=await(await fetch(`${window.SuperBora.api}/products/search?q=${encodeURIComponent(this.query)}`)).json();this.results=t.success?t.data||[]:[],this.open=this.results.length>0,this.selectedIndex=-1}catch(e){this.results=[],console.error("Search error:",e)}this.loading=!1},searchDebounced(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(()=>this.search(),300)},handleKeydown(e){if(this.open)switch(e.key){case"ArrowDown":e.preventDefault(),this.selectedIndex=Math.min(this.selectedIndex+1,this.results.length-1);break;case"ArrowUp":e.preventDefault(),this.selectedIndex=Math.max(this.selectedIndex-1,-1);break;case"Enter":e.preventDefault(),this.selectedIndex>=0?this.selectResult(this.results[this.selectedIndex]):this.query.length>=2&&this.submitSearch();break;case"Escape":this.close();break}},selectResult(e){this.open=!1,this.query="",window.location.href=e.url||`/produto/${e.id}`},submitSearch(){this.query.length>=2&&(window.location.href=`/busca?q=${encodeURIComponent(this.query)}`)},close(){this.open=!1,this.selectedIndex=-1},clear(){this.query="",this.results=[],this.open=!1,this.selectedIndex=-1},focus(){const e=this.$refs.input;e==null||e.focus()}}}function se(){return{toasts:[],init(){window.addEventListener("toast",(e=>{this.show(e.detail.message,e.detail.type,e.detail.duration)}))},show(e,t="info",a=3e3){const i=Date.now();this.toasts.push({id:i,message:e,type:t}),setTimeout(()=>{this.remove(i)},a)},remove(e){this.toasts=this.toasts.filter(t=>t.id!==e)},success(e,t){this.show(e,"success",t)},error(e,t){this.show(e,"error",t)},info(e,t){this.show(e,"info",t)},warning(e,t){this.show(e,"warning",t)},getIcon(e){switch(e){case"success":return`<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
          </svg>`;case"error":return`<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>`;case"warning":return`<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
          </svg>`;default:return`<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>`}},getClasses(e){const t="flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg animate-slide-up";switch(e){case"success":return`${t} bg-success-500 text-white`;case"error":return`${t} bg-danger-500 text-white`;case"warning":return`${t} bg-warning-500 text-white`;default:return`${t} bg-surface-800 text-white`}}}}function ae(e){return{name:e||"",get isOpen(){return Alpine.store("ui").modal===this.name},open(){Alpine.store("ui").openModal(this.name)},close(){Alpine.store("ui").closeModal()},toggle(){this.isOpen?this.close():this.open()},handleBackdropClick(t){t.target===t.currentTarget&&this.close()},handleKeydown(t){t.key==="Escape"&&this.close()}}}function le(){return{open:!1,toggle(){this.open=!this.open},close(){this.open=!1},handleClickOutside(e){const t=e.target;this.$el.contains(t)||this.close()},handleKeydown(e){e.key==="Escape"&&this.close()}}}window.SuperBora={api:"/api/v2",currency:"BRL",locale:"pt-BR",token:localStorage.getItem("sb_token"),version:"2.0.0",getHeaders(){const e={"Content-Type":"application/json",Accept:"application/json"};return this.token&&(e.Authorization=`Bearer ${this.token}`),e},setToken(e){this.token=e,e?localStorage.setItem("sb_token",e):localStorage.removeItem("sb_token")}};c.plugin(D);c.plugin(q);c.plugin(J);c.plugin(ie);c.plugin(L);c.store("cart",O);c.store("user",j);c.store("ui",R);c.store("addresses",U);c.store("shipping",F);c.data("productCard",oe);c.data("search",re);c.data("toast",se);c.data("modal",ae);c.data("dropdown",le);c.magic("money",()=>_);c.magic("date",()=>V);c.magic("api",()=>A);window.Alpine=c;c.start();document.addEventListener("DOMContentLoaded",()=>{window.htmx&&(window.htmx.config.defaultSwapStyle="innerHTML",window.htmx.config.defaultSettleDelay=100,window.htmx.config.useTemplateFragments=!0,window.htmx.config.globalViewTransitions=!0,document.body.addEventListener("htmx:configRequest",e=>{window.SuperBora.token&&(e.detail.headers.Authorization=`Bearer ${window.SuperBora.token}`)}),window.htmx.on("htmx:beforeRequest",()=>{c.store("ui").loading=!0}),window.htmx.on("htmx:afterRequest",()=>{c.store("ui").loading=!1}),window.htmx.on("htmx:responseError",e=>{var a;const t=((a=e.detail.xhr)==null?void 0:a.statusText)||"Erro na requisicao";c.store("ui").showToast(t,"error")}),window.htmx.on("htmx:afterSwap",e=>{c.initTree(e.detail.target)}))});document.addEventListener("alpine:init",async()=>{await c.store("user").init(),await c.store("cart").init()});window.formatMoney=_;window.debounce=z;window.throttle=H;window.api=A;console.log(`%cSuperBora v${window.SuperBora.version}`,"color: #FF6A00; font-size: 16px; font-weight: bold;");console.log("%cModern Frontend Stack: TypeScript + Alpine.js + HTMX + Tailwind CSS","color: #666;");
