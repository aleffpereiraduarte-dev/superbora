"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1006],{6428:function(e,t,n){n.d(t,{LP:function(){return r},QW:function(){return d},SC:function(){return c},o4:function(){return s},pE:function(){return u},sg:function(){return l}});let i="/api/mercado/admin",o="admin_token";function r(){try{return localStorage.getItem(o)}catch(e){return null}}function s(e){try{e?localStorage.setItem(o,e):localStorage.removeItem(o)}catch(e){}}function a(){let e=r(),t={"Content-Type":"application/json"};return e&&(t.Authorization="Bearer ".concat(e)),t}async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat(i).concat(e),o=Object.entries(t).filter(e=>{let[,t]=e;return null!=t&&""!==t}).map(e=>{let[t,n]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))}).join("&");o&&(n+="?".concat(o));let r=await fetch(n,{headers:a()});if(!r.ok)throw Error((await r.json().catch(()=>({message:"Erro de rede"}))).message||"HTTP ".concat(r.status));let s=await r.json();if(!1===s.success)throw Error(s.message||"Erro desconhecido");return void 0!==s.data?s.data:s}async function l(e,t){let n=await fetch("".concat(i).concat(e),{method:"POST",headers:a(),body:JSON.stringify(t)}),o=await n.json().catch(()=>null);if(!n.ok||o&&!1===o.success)throw Error((null==o?void 0:o.message)||"HTTP ".concat(n.status));return(null==o?void 0:o.data)!==void 0?o.data:o}async function u(e,t){let n=await fetch("".concat(i).concat(e),{method:"PUT",headers:a(),body:JSON.stringify(t)}),o=await n.json().catch(()=>null);if(!n.ok||o&&!1===o.success)throw Error((null==o?void 0:o.message)||"HTTP ".concat(n.status));return(null==o?void 0:o.data)!==void 0?o.data:o}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat(i).concat(e),o=Object.entries(t).filter(e=>{let[,t]=e;return null!=t&&""!==t}).map(e=>{let[t,n]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))}).join("&");o&&(n+="?".concat(o));let r=await fetch(n,{method:"DELETE",headers:a()}),s=await r.json().catch(()=>null);if(!r.ok||s&&!1===s.success)throw Error((null==s?void 0:s.message)||"HTTP ".concat(r.status));return(null==s?void 0:s.data)!==void 0?s.data:s}},8779:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(7437),o=n(2265),r=n(7128),s=n(9376);function a(e){let{children:t}=e,{isAuthenticated:n,loading:a}=(0,r.a)(),c=(0,s.useRouter)();return((0,o.useEffect)(()=>{a||n||c.push("/login/")},[a,n,c]),a)?(0,i.jsxs)("div",{className:"auth-loading",children:[(0,i.jsx)("div",{className:"auth-loading-spinner"}),(0,i.jsx)("p",{children:"Carregando..."})]}):n?(0,i.jsx)(i.Fragment,{children:t}):null}},4477:function(e,t,n){n.d(t,{Z:function(){return d}});var i=n(7437),o=n(9376),r=n(7648),s=n(8789),a=n(7128),c=n(8253),l=n(6971);let u=[{title:"Principal",items:[{label:"Dashboard",href:"/",icon:"&#9632;",section:"dashboard"}]},{title:"Operacoes",items:[{label:"Pedidos",href:"/pedidos/",icon:"&#128230;",section:"orders"},{label:"Despacho",href:"/dispatch/",icon:"&#128666;",section:"dispatch"},{label:"Tracking",href:"/tracking/",icon:"&#128205;",section:"tracking"},{label:"Mapa",href:"/mapa/",icon:"&#127758;",section:"map"}]},{title:"Financeiro",items:[{label:"Financeiro",href:"/financeiro/",icon:"&#128176;",section:"finance"},{label:"Comissoes",href:"/financeiro/comissoes/",icon:"&#128200;",section:"commissions"},{label:"Config Comissoes",href:"/comissoes/",icon:"&#9881;",section:"commissions"},{label:"Pagamentos",href:"/financeiro/pagamentos/",icon:"&#128179;",section:"payments"},{label:"Reembolsos",href:"/financeiro/reembolsos/",icon:"&#8634;",section:"refunds"},{label:"Precificacao",href:"/financeiro/precificacao/",icon:"&#128181;",section:"pricing"}]},{title:"Pessoas",items:[{label:"Clientes",href:"/clientes/",icon:"&#128100;",section:"clients"},{label:"Shoppers",href:"/shoppers/",icon:"&#128694;",section:"shoppers"},{label:"Workers",href:"/workers/",icon:"&#128119;",section:"workers"},{label:"Avaliacoes",href:"/avaliacoes/",icon:"&#11088;",section:"reviews"}]},{title:"Parceiros",items:[{label:"Mercados",href:"/mercados/",icon:"&#127979;",section:"markets"},{label:"Parceiros",href:"/parceiros/",icon:"&#129309;",section:"partners"},{label:"Categorias",href:"/categorias/",icon:"&#128193;",section:"config"}]},{title:"Marketing",items:[{label:"Cupons",href:"/cupons/",icon:"&#127915;",section:"coupons"},{label:"Promocoes",href:"/promocoes/",icon:"&#127873;",section:"promotions"},{label:"Notificacoes",href:"/notificacoes/",icon:"&#128276;",section:"notifications"}]},{title:"Premium",items:[{label:"SuperBora Club",href:"/assinaturas/",icon:"&#128081;",section:"subscriptions"},{label:"Corporativo",href:"/corporativo/",icon:"&#127970;",section:"corporate"},{label:"Stories",href:"/stories/",icon:"&#127902;",section:"stories"},{label:"Fotos Reviews",href:"/fotos-reviews/",icon:"&#128247;",section:"reviews"}]},{title:"Suporte",items:[{label:"Tickets",href:"/suporte/",icon:"&#127915;",section:"support"},{label:"Disputas",href:"/disputas/",icon:"&#9878;",section:"support"},{label:"IA Suporte",href:"/ia-suporte/",icon:"&#129302;",section:"support"},{label:"Problemas",href:"/problemas/",icon:"&#9888;",section:"support"},{label:"Reembolsos",href:"/reembolsos/",icon:"&#128176;",section:"financial"},{label:"Fraude",href:"/fraude/",icon:"&#128270;",section:"support"},{label:"CSAT",href:"/csat/",icon:"&#11088;",section:"support"},{label:"Chat Central",href:"/chat/",icon:"&#128172;",section:"chat"},{label:"Respostas",href:"/respostas-rapidas/",icon:"&#9889;",section:"support"},{label:"FAQ",href:"/faq/",icon:"&#10067;",section:"support"}]},{title:"Inteligencia",items:[{label:"Alertas",href:"/alertas/",icon:"&#128680;",section:"alerts"},{label:"Analise AI",href:"/inteligencia/",icon:"&#129302;",section:"intelligence"},{label:"Pricing AI",href:"/inteligencia/pricing/",icon:"&#128202;",section:"intelligence"},{label:"Widget",href:"/inteligencia/widget/",icon:"&#128736;",section:"intelligence"}]},{title:"Sistema",items:[{label:"Relatorios",href:"/relatorios/",icon:"&#128203;",section:"reports"},{label:"KPIs",href:"/kpis/",icon:"&#127942;",section:"kpis"},{label:"Logs",href:"/logs/",icon:"&#128209;",section:"logs"},{label:"Exportar",href:"/exportar/",icon:"&#128229;",section:"export"},{label:"Config",href:"/configuracoes/",icon:"&#9881;",section:"config"},{label:"Seguranca",href:"/seguranca/",icon:"&#128274;",section:"security"},{label:"Busca",href:"/busca/",icon:"&#128269;",section:"search"}]},{title:"Tools",items:[{label:"Editor",href:"/editor/",icon:"&#9998;",section:"editor"}]}];function d(){let{collapsed:e,toggle:t}=(0,s.A)(),{admin:n,logout:d}=(0,a.a)(),{hasPermission:f}=(0,c.q)(),{alertCount:h}=(0,l.l)(),p=(0,o.usePathname)(),m=e=>"/"===e?"/"===p||""===p:p.startsWith(e);return(0,i.jsxs)("aside",{className:"sidebar ".concat(e?"sidebar-collapsed":""),children:[(0,i.jsxs)("div",{className:"sidebar-header",children:[!e&&(0,i.jsx)("span",{className:"sidebar-logo",children:"SuperBora Suporte"}),(0,i.jsx)("button",{className:"sidebar-toggle",onClick:t,title:e?"Expandir":"Recolher",children:(0,i.jsx)("span",{dangerouslySetInnerHTML:{__html:e?"&#9654;":"&#9664;"}})})]}),(0,i.jsx)("nav",{className:"sidebar-nav",children:u.map(t=>{let n=t.items.filter(e=>f(e.section));return 0===n.length?null:(0,i.jsxs)("div",{className:"sidebar-section",children:[!e&&(0,i.jsx)("div",{className:"sidebar-section-title",children:t.title}),n.map(t=>(0,i.jsxs)(r.default,{href:""+t.href,className:"sidebar-item ".concat(m(t.href)?"sidebar-item-active":""),title:e?t.label:void 0,children:[(0,i.jsx)("span",{className:"sidebar-item-icon",dangerouslySetInnerHTML:{__html:t.icon}}),!e&&(0,i.jsx)("span",{className:"sidebar-item-label",children:t.label}),!e&&"Alertas"===t.label&&h>0&&(0,i.jsx)("span",{className:"sidebar-badge",children:h})]},t.href))]},t.title)})}),(0,i.jsxs)("div",{className:"sidebar-footer",children:[!e&&n&&(0,i.jsxs)("div",{className:"sidebar-admin-info",children:[(0,i.jsx)("div",{className:"sidebar-admin-name",children:n.name}),(0,i.jsx)("span",{className:"sidebar-role-badge",style:{backgroundColor:{admin:"#f97316",manager:"#3b82f6",support:"#8b5cf6"}[n.role]||"#6b7280"},children:n.role})]}),(0,i.jsxs)("button",{className:"sidebar-logout",onClick:d,title:"Sair",children:[(0,i.jsx)("span",{dangerouslySetInnerHTML:{__html:"&#9211;"}}),!e&&(0,i.jsx)("span",{children:"Sair"})]})]})]})}},7128:function(e,t,n){n.d(t,{H:function(){return a},a:function(){return c}});var i=n(7437),o=n(2265),r=n(6428);let s=(0,o.createContext)(null);function a(e){let{children:t}=e,[n,a]=(0,o.useState)(null),[c,l]=(0,o.useState)(!0),u=(0,o.useCallback)(async()=>{if(!(0,r.LP)()){l(!1);return}try{let e=await (0,r.SC)("/auth/session.php");e.admin?a({...e.admin,name:e.admin.nome||e.admin.name,admin_id:e.admin.admin_id||e.admin.id}):((0,r.o4)(null),a(null))}catch(e){(0,r.o4)(null),a(null)}finally{l(!1)}},[]);(0,o.useEffect)(()=>{u()},[u]);let d=async(e,t)=>{let n=await (0,r.sg)("/auth/login.php",{email:e,senha:t});if(n.token)return(0,r.o4)(n.token),a({admin_id:n.admin_id,name:n.nome||n.name,email:n.email,role:n.role}),n;throw Error(n.message||"Erro ao fazer login")};return(0,i.jsx)(s.Provider,{value:{admin:n,loading:c,isAuthenticated:!!n,login:d,logout:()=>{(0,r.o4)(null),a(null)},checkSession:u},children:t})}function c(){let e=(0,o.useContext)(s);if(!e)throw Error("useAuth must be inside AuthProvider");return e}},6971:function(e,t,n){n.d(t,{J:function(){return c},l:function(){return l}});var i=n(7437),o=n(2265),r=n(6428),s=n(7128);let a=(0,o.createContext)(null);function c(e){let{children:t}=e,{isAuthenticated:n}=(0,s.a)(),[c,l]=(0,o.useState)([]),[u,d]=(0,o.useState)([]),[f,h]=(0,o.useState)(0),p=(0,o.useRef)(0),m=(0,o.useRef)([]),b=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,i=++p.current;if(l(n=>[...n,{id:i,message:e,type:t}]),n>0){let e=setTimeout(()=>{l(e=>e.filter(e=>e.id!==i))},n);m.current.push(e)}},[]),g=(0,o.useCallback)(e=>{l(t=>t.filter(t=>t.id!==e))},[]),v=(0,o.useCallback)(e=>b(e,"success"),[b]),C=(0,o.useCallback)(e=>b(e,"error"),[b]),k=(0,o.useCallback)(e=>b(e,"warning"),[b]),x=(0,o.useCallback)(e=>b(e,"info"),[b]),j=(0,o.useCallback)(async()=>{if(n)try{let e=await (0,r.SC)("/alertas.php");d(e.alertas||[]),h(e.total||0)}catch(e){}},[n]);return(0,o.useEffect)(()=>{if(!n)return;j();let e=setInterval(j,3e4);return()=>clearInterval(e)},[n,j]),(0,o.useEffect)(()=>()=>{m.current.forEach(e=>clearTimeout(e)),m.current=[]},[]),(0,i.jsx)(a.Provider,{value:{toasts:c,alerts:u,alertCount:f,addToast:b,removeToast:g,success:v,error:C,warning:k,info:x,fetchAlerts:j},children:t})}function l(){let e=(0,o.useContext)(a);if(!e)throw Error("useNotification must be inside NotificationProvider");return e}},8253:function(e,t,n){n.d(t,{a:function(){return c},q:function(){return l}});var i=n(7437),o=n(2265),r=n(7128);let s=(0,o.createContext)(null),a={admin:["dashboard","orders","finance","clients","shoppers","workers","markets","partners","coupons","promotions","notifications","support","chat","alerts","intelligence","reports","kpis","logs","export","config","security","search","tracking","map","editor","dispatch","reviews","pricing","refunds","payments","commissions"],manager:["dashboard","orders","finance","clients","shoppers","workers","markets","partners","coupons","promotions","notifications","support","chat","alerts","intelligence","reports","kpis","logs","export","search","tracking","map","editor","dispatch","reviews","pricing","refunds","payments","commissions"],support:["dashboard","orders","clients","support","chat","search","reviews"]};function c(e){let{children:t}=e,{admin:n}=(0,r.a)(),c=(0,o.useMemo)(()=>{let e=(null==n?void 0:n.role)||"support",t=a[e]||a.support;return{role:e,permissions:t,hasPermission:e=>t.includes(e)}},[n]);return(0,i.jsx)(s.Provider,{value:c,children:t})}function l(){let e=(0,o.useContext)(s);if(!e)throw Error("useRole must be inside RoleProvider");return e}},8789:function(e,t,n){n.d(t,{A:function(){return c},H:function(){return a}});var i=n(7437),o=n(2265);let r=(0,o.createContext)(null),s="admin_sidebar_collapsed";function a(e){let{children:t}=e,[n,a]=(0,o.useState)(()=>"true"===localStorage.getItem(s));return(0,i.jsx)(r.Provider,{value:{collapsed:n,toggle:()=>{a(e=>{let t=!e;return localStorage.setItem(s,String(t)),t})}},children:t})}function c(){let e=(0,o.useContext)(r);if(!e)throw Error("useSidebar must be inside SidebarProvider");return e}}}]);