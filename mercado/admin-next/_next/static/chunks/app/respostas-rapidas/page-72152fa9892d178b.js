(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9844],{8190:function(e,a,t){Promise.resolve().then(t.bind(t,7588))},4445:function(e,a,t){"use strict";t.d(a,{Z:function(){return o}});var r=t(7437),s=t(8253);function o(e){let{section:a,children:t}=e,{hasPermission:o}=(0,s.q)();return o(a)?(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsxs)("div",{className:"role-denied",children:[(0,r.jsx)("div",{className:"role-denied-icon",children:"\uD83D\uDD12"}),(0,r.jsx)("h2",{children:"Acesso Negado"}),(0,r.jsx)("p",{children:"Voce nao tem permissao para acessar esta secao."}),(0,r.jsx)("p",{className:"role-denied-hint",children:"Contate o administrador para solicitar acesso."})]})}},1656:function(e,a,t){"use strict";t.d(a,{X:function(){return i},Z:function(){return o}});var r=t(7437);let s={success:"badge-success",warning:"badge-warning",danger:"badge-danger",info:"badge-info",neutral:"badge-neutral"};function o(e){let{label:a,variant:t="neutral"}=e;return(0,r.jsx)("span",{className:"badge ".concat(s[t]||s.neutral),children:a})}function i(e){return({pendente:"warning",confirmado:"info",preparando:"info",pronto:"info",coletado:"info",em_entrega:"warning",entregue:"success",cancelado:"danger",recusado:"danger",ativo:"success",inativo:"neutral",bloqueado:"danger",online:"success",offline:"neutral",aprovado:"success",reprovado:"danger",pago:"success",pendente_pagamento:"warning",processando:"info",aberto:"warning",resolvido:"success",fechado:"neutral"})[e]||"neutral"}},7714:function(e,a,t){"use strict";t.d(a,{Z:function(){return i}});var r=t(7437),s=t(2265);let o={sm:"400px",md:"560px",lg:"720px",xl:"960px"};function i(e){let{isOpen:a,onClose:t,title:i,children:n,size:l="md"}=e;return((0,s.useEffect)(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]),(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&a&&(null==t||t())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a,t]),a)?(0,r.jsx)("div",{className:"modal-overlay",onClick:t,children:(0,r.jsxs)("div",{className:"modal-container",style:{maxWidth:o[l]||o.md},onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h3",{className:"modal-title",children:i}),(0,r.jsx)("button",{className:"modal-close",onClick:t,children:"✕"})]}),(0,r.jsx)("div",{className:"modal-body",children:n})]})}):null}},6939:function(e,a,t){"use strict";t.d(a,{Z:function(){return i}});var r=t(7437),s=t(6971);let o={success:"&#10003;",error:"&#10007;",warning:"&#9888;",info:"&#8505;"};function i(){let{toasts:e,removeToast:a}=(0,s.l)();return 0===e.length?null:(0,r.jsx)("div",{className:"toast-container",children:e.map(e=>(0,r.jsxs)("div",{className:"toast toast-".concat(e.type),children:[(0,r.jsx)("span",{className:"toast-icon",dangerouslySetInnerHTML:{__html:o[e.type]||o.info}}),(0,r.jsx)("span",{className:"toast-message",children:e.message}),(0,r.jsx)("button",{className:"toast-close",onClick:()=>a(e.id),children:"✕"})]},e.id))})}},7588:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return b}});var r=t(7437),s=t(2265),o=t(8779),i=t(4477),n=t(4445),l=t(1656),d=t(7714),c=t(6939),m=t(8789),u=t(6971),p=t(6428);let g=[{value:"saudacao",label:"Saudacao"},{value:"pedido",label:"Pedido"},{value:"reembolso",label:"Reembolso"},{value:"entrega",label:"Entrega"},{value:"encerramento",label:"Encerramento"},{value:"escalacao",label:"Escalacao"},{value:"geral",label:"Geral"}],x={saudacao:"#10b981",pedido:"#3b82f6",reembolso:"#f59e0b",entrega:"#8b5cf6",encerramento:"#6b7280",escalacao:"#ef4444",geral:"#64748b"},h={saudacao:"Saudacao",pedido:"Pedido",reembolso:"Reembolso",entrega:"Entrega",encerramento:"Encerramento",escalacao:"Escalacao",geral:"Geral"};function v(){let{collapsed:e}=(0,m.A)(),{success:a,error:t}=(0,u.l)(),[o,n]=(0,s.useState)([]),[v,b]=(0,s.useState)(!0),[f,y]=(0,s.useState)("todas"),[j,N]=(0,s.useState)(""),[k,C]=(0,s.useState)(!1),[S,w]=(0,s.useState)(!1),[E,R]=(0,s.useState)(null),[z,W]=(0,s.useState)(!1),[B,T]=(0,s.useState)({titulo:"",mensagem:"",categoria:"geral",atalho:"",ativo:!0});(0,s.useEffect)(()=>{A()},[]);let A=async()=>{b(!0);try{let e=await (0,p.SC)("/quick-replies.php");n(e.replies||[])}catch(e){t("Erro ao carregar respostas rapidas")}finally{b(!1)}},_=()=>{T({titulo:"",mensagem:"",categoria:"geral",atalho:"",ativo:!0}),R(null)},L=e=>{R(e),T({titulo:e.titulo||"",mensagem:e.mensagem||"",categoria:e.categoria||"geral",atalho:e.atalho||"",ativo:void 0===e.ativo||!!Number(e.ativo)}),C(!0)},Z=e=>{R(e),w(!0)},I=async()=>{if(!B.titulo.trim()){t("O titulo e obrigatorio");return}if(!B.mensagem.trim()){t("A mensagem e obrigatoria");return}W(!0);try{let e={titulo:B.titulo.trim(),mensagem:B.mensagem.trim(),categoria:B.categoria,atalho:B.atalho.trim(),ativo:B.ativo?1:0};E&&(e.id=E.id),await (0,p.sg)("/quick-replies.php",e),a(E?"Resposta atualizada com sucesso":"Resposta criada com sucesso"),C(!1),_(),A()}catch(e){t("Erro: "+e.message)}finally{W(!1)}},q=async()=>{if(E){W(!0);try{await (0,p.QW)("/quick-replies.php?id=".concat(E.id)),a("Resposta excluida com sucesso"),w(!1),R(null),A()}catch(e){t("Erro: "+e.message)}finally{W(!1)}}},D=async e=>{try{await (0,p.sg)("/quick-replies.php",{id:e.id,titulo:e.titulo,mensagem:e.mensagem,categoria:e.categoria,atalho:e.atalho||"",ativo:e.ativo?0:1}),a(e.ativo?"Resposta desativada":"Resposta ativada"),A()}catch(e){t("Erro: "+e.message)}},O=async e=>{try{await navigator.clipboard.writeText(e.mensagem),a("Mensagem copiada para a area de transferencia");try{await (0,p.sg)("/quick-replies.php",{id:e.id,action:"use"}),A()}catch(e){}}catch(e){t("Erro ao copiar mensagem")}},H=o.filter(e=>{if("todas"!==f&&e.categoria!==f)return!1;if(j.trim()){let a=j.toLowerCase(),t=(e.titulo||"").toLowerCase().includes(a),r=(e.mensagem||"").toLowerCase().includes(a),s=(e.atalho||"").toLowerCase().includes(a);if(!t&&!r&&!s)return!1}return!0}),M={};H.forEach(e=>{let a=e.categoria||"geral";M[a]||(M[a]=[]),M[a].push(e)}),Object.keys(M).forEach(e=>{M[e].sort((e,a)=>(a.uso_count||0)-(e.uso_count||0))});let P=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150;return e?e.length>a?e.substring(0,a)+"...":e:""},F=[{value:"todas",label:"Todas"},...g],G={total:o.length,ativas:o.filter(e=>e.ativo&&0!==Number(e.ativo)).length,inativas:o.filter(e=>!e.ativo||0===Number(e.ativo)).length,totalUsos:o.reduce((e,a)=>e+(Number(a.uso_count)||0),0)};return(0,r.jsxs)("div",{className:"admin-layout",children:[(0,r.jsx)(i.Z,{}),(0,r.jsxs)("main",{className:"admin-main ".concat(e?"main-collapsed":""),children:[(0,r.jsxs)("div",{className:"page-header",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"page-title",children:"Respostas Rapidas"}),(0,r.jsx)("p",{className:"page-subtitle",children:"Gerenciar respostas prontas para atendimento ao cliente"})]}),(0,r.jsxs)("div",{className:"page-actions",children:[(0,r.jsx)("button",{className:"btn btn-secondary",onClick:A,children:"Atualizar"}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:()=>{_(),C(!0)},children:"Nova Resposta"})]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:16,marginBottom:24},children:[(0,r.jsxs)("div",{className:"card",style:{padding:16,textAlign:"center"},children:[(0,r.jsx)("div",{className:"text-sm text-muted",children:"Total Respostas"}),(0,r.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:700,color:"var(--primary)"},children:G.total})]}),(0,r.jsxs)("div",{className:"card",style:{padding:16,textAlign:"center"},children:[(0,r.jsx)("div",{className:"text-sm text-muted",children:"Ativas"}),(0,r.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:700,color:"#22c55e"},children:G.ativas})]}),(0,r.jsxs)("div",{className:"card",style:{padding:16,textAlign:"center"},children:[(0,r.jsx)("div",{className:"text-sm text-muted",children:"Inativas"}),(0,r.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:700,color:"#6b7280"},children:G.inativas})]}),(0,r.jsxs)("div",{className:"card",style:{padding:16,textAlign:"center"},children:[(0,r.jsx)("div",{className:"text-sm text-muted",children:"Total de Usos"}),(0,r.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:700,color:"#3b82f6"},children:G.totalUsos})]})]}),(0,r.jsx)("div",{style:{display:"flex",gap:8,overflowX:"auto",paddingBottom:4,marginBottom:16,borderBottom:"1px solid var(--border)"},children:F.map(e=>(0,r.jsxs)("button",{onClick:()=>y(e.value),style:{padding:"8px 16px",border:"none",background:f===e.value?"var(--primary)":"transparent",color:f===e.value?"#fff":"var(--text-secondary)",borderRadius:"8px 8px 0 0",cursor:"pointer",fontWeight:f===e.value?600:400,fontSize:"0.9rem",whiteSpace:"nowrap",transition:"all 0.2s"},children:[e.label,"todas"!==e.value&&(0,r.jsx)("span",{style:{marginLeft:6,fontSize:"0.75rem",opacity:.7},children:o.filter(a=>a.categoria===e.value).length})]},e.value))}),(0,r.jsx)("div",{style:{marginBottom:20},children:(0,r.jsx)("input",{className:"form-input",type:"text",placeholder:"Buscar por titulo, mensagem ou atalho...",value:j,onChange:e=>N(e.target.value),style:{maxWidth:480}})}),v&&(0,r.jsx)("div",{style:{textAlign:"center",padding:48,color:"var(--text-secondary)"},children:"Carregando respostas rapidas..."}),!v&&0===H.length&&(0,r.jsxs)("div",{style:{textAlign:"center",padding:48,color:"var(--text-secondary)",background:"var(--bg-card)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:[(0,r.jsx)("div",{style:{fontSize:"2rem",marginBottom:8},children:(0,r.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"inline-block",opacity:.5},children:(0,r.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}),(0,r.jsx)("p",{style:{fontWeight:500},children:"Nenhuma resposta rapida encontrada"}),(0,r.jsx)("p",{className:"text-sm text-muted",style:{marginTop:4},children:j?"Tente ajustar sua busca":'Crie a primeira resposta clicando em "Nova Resposta"'})]}),!v&&Object.keys(M).map(e=>(0,r.jsxs)("div",{style:{marginBottom:28},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:12},children:[(0,r.jsx)("span",{style:{width:4,height:24,borderRadius:2,background:x[e]||x.geral}}),(0,r.jsx)("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:600,color:"var(--text-primary)"},children:h[e]||e}),(0,r.jsxs)("span",{className:"text-sm text-muted",children:["(",M[e].length,")"]})]}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(360px, 1fr))",gap:12},children:M[e].map(e=>(0,r.jsxs)("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border)",borderRadius:"var(--radius, 8px)",padding:20,transition:"box-shadow 0.2s, border-color 0.2s",cursor:"default",opacity:e.ativo&&0!==Number(e.ativo)?1:.6,display:"flex",flexDirection:"column"},onMouseEnter:a=>{a.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.08)",a.currentTarget.style.borderColor=x[e.categoria]||x.geral},onMouseLeave:e=>{e.currentTarget.style.boxShadow="none",e.currentTarget.style.borderColor="var(--border)"},children:[(0,r.jsxs)("div",{style:{marginBottom:8},children:[(0,r.jsx)("div",{style:{fontWeight:600,fontSize:"1rem",color:"var(--text-primary)",marginBottom:6,lineHeight:1.4},children:e.titulo}),(0,r.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",lineHeight:1.5,whiteSpace:"pre-wrap"},children:P(e.mensagem)})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap",marginTop:"auto",marginBottom:12},children:[(0,r.jsx)("span",{style:{display:"inline-block",padding:"3px 10px",borderRadius:12,fontSize:"0.78rem",fontWeight:500,color:"#fff",background:x[e.categoria]||x.geral},children:h[e.categoria]||e.categoria}),e.atalho&&(0,r.jsx)("span",{style:{display:"inline-block",padding:"3px 10px",borderRadius:12,fontSize:"0.78rem",fontWeight:500,color:"var(--text-primary)",background:"var(--bg)",border:"1px solid var(--border)",fontFamily:"monospace"},children:e.atalho}),(0,r.jsx)(l.Z,{label:e.ativo&&0!==Number(e.ativo)?"Ativo":"Inativo",variant:e.ativo&&0!==Number(e.ativo)?"success":"neutral"}),(Number(e.uso_count)||0)>0&&(0,r.jsxs)("span",{style:{fontSize:"0.78rem",color:"var(--text-secondary)",display:"inline-flex",alignItems:"center",gap:4},children:[(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),e.uso_count,"x usado"]})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",paddingTop:12,borderTop:"1px solid var(--border)",gap:6},children:[(0,r.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>D(e),style:{fontSize:"0.8rem"},children:e.ativo&&0!==Number(e.ativo)?"Desativar":"Ativar"}),(0,r.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>O(e),style:{fontSize:"0.8rem"},children:"Copiar"}),(0,r.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>L(e),style:{fontSize:"0.8rem"},children:"Editar"}),(0,r.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>Z(e),style:{fontSize:"0.8rem"},children:"Excluir"})]})]},e.id))})]},e)),(0,r.jsxs)(d.Z,{isOpen:k,onClose:()=>{C(!1),_()},title:E?"Editar Resposta Rapida":"Nova Resposta Rapida",size:"md",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Titulo *"}),(0,r.jsx)("input",{className:"form-input",value:B.titulo,onChange:e=>T({...B,titulo:e.target.value}),placeholder:"Ex: Saudacao inicial do atendimento"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Mensagem *"}),(0,r.jsx)("textarea",{className:"form-textarea",value:B.mensagem,onChange:e=>T({...B,mensagem:e.target.value}),placeholder:"Digite a mensagem completa da resposta rapida...",rows:4,style:{resize:"vertical",minHeight:100}})]}),(0,r.jsxs)("div",{className:"grid-2 gap-4",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Categoria *"}),(0,r.jsx)("select",{className:"form-select",value:B.categoria,onChange:e=>T({...B,categoria:e.target.value}),children:g.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Atalho"}),(0,r.jsx)("input",{className:"form-input",value:B.atalho,onChange:e=>T({...B,atalho:e.target.value}),placeholder:"Ex: /ola"}),(0,r.jsx)("span",{className:"text-sm text-muted",children:"Comando rapido opcional (ex: /ola)"})]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Status"}),(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:10,cursor:"pointer",padding:"10px 0",fontSize:"0.9rem"},children:[(0,r.jsx)("input",{type:"checkbox",checked:B.ativo,onChange:e=>T({...B,ativo:e.target.checked}),style:{width:18,height:18,cursor:"pointer"}}),(0,r.jsx)("span",{children:B.ativo?"Ativo - disponivel para uso":"Inativo - oculto no atendimento"})]})]}),B.titulo.trim()&&(0,r.jsxs)("div",{style:{marginTop:8,padding:16,background:"var(--bg)",borderRadius:"var(--radius, 8px)",border:"1px solid var(--border)"},children:[(0,r.jsx)("div",{className:"text-sm text-muted",style:{marginBottom:8,fontWeight:500},children:"Pre-visualizacao"}),(0,r.jsx)("div",{style:{fontWeight:600,marginBottom:6,color:"var(--text-primary)"},children:B.titulo}),(0,r.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",lineHeight:1.5,whiteSpace:"pre-wrap"},children:B.mensagem||"(sem mensagem)"}),(0,r.jsxs)("div",{style:{marginTop:8,display:"flex",gap:8,alignItems:"center"},children:[(0,r.jsx)("span",{style:{display:"inline-block",padding:"2px 8px",borderRadius:10,fontSize:"0.75rem",fontWeight:500,color:"#fff",background:x[B.categoria]||x.geral},children:h[B.categoria]||B.categoria}),B.atalho.trim()&&(0,r.jsx)("span",{style:{display:"inline-block",padding:"2px 8px",borderRadius:10,fontSize:"0.75rem",fontWeight:500,color:"var(--text-primary)",background:"var(--bg-card)",border:"1px solid var(--border)",fontFamily:"monospace"},children:B.atalho})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",style:{justifyContent:"flex-end",marginTop:16},children:[(0,r.jsx)("button",{className:"btn btn-secondary",onClick:()=>{C(!1),_()},children:"Cancelar"}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:I,disabled:z,children:z?"Salvando...":E?"Salvar Alteracoes":"Criar Resposta"})]})]}),(0,r.jsx)(d.Z,{isOpen:S,onClose:()=>{w(!1),R(null)},title:"Excluir Resposta Rapida",size:"sm",children:E&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{padding:16,background:"var(--bg)",borderRadius:"var(--radius, 8px)",border:"1px solid var(--border)",marginBottom:16},children:[(0,r.jsx)("div",{style:{fontWeight:600,marginBottom:4,color:"var(--text-primary)"},children:E.titulo}),(0,r.jsxs)("div",{className:"text-sm text-muted",style:{marginBottom:4},children:["Categoria: ",h[E.categoria]||E.categoria]}),E.atalho&&(0,r.jsxs)("div",{className:"text-sm text-muted",children:["Atalho: ",(0,r.jsx)("code",{style:{padding:"1px 6px",background:"var(--bg-card)",borderRadius:4,fontSize:"0.8rem"},children:E.atalho})]})]}),(0,r.jsx)("div",{style:{padding:"8px 12px",background:"rgba(239, 68, 68, 0.08)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"var(--radius, 8px)",marginBottom:16,fontSize:"0.85rem",color:"#ef4444"},children:"Esta acao nao pode ser desfeita. A resposta sera removida permanentemente."}),(0,r.jsxs)("div",{className:"flex gap-2",style:{justifyContent:"flex-end"},children:[(0,r.jsx)("button",{className:"btn btn-secondary",onClick:()=>{w(!1),R(null)},children:"Cancelar"}),(0,r.jsx)("button",{className:"btn btn-danger",onClick:q,disabled:z,children:z?"Excluindo...":"Confirmar Exclusao"})]})]})})]}),(0,r.jsx)(c.Z,{})]})}function b(){return(0,r.jsx)(o.Z,{children:(0,r.jsx)(n.Z,{section:"support",children:(0,r.jsx)(v,{})})})}}},function(e){e.O(0,[3448,1006,2971,2117,1744],function(){return e(e.s=8190)}),_N_E=e.O()}]);