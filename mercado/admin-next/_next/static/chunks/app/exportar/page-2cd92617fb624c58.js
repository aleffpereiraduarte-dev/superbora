(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3271],{396:function(e,t,n){Promise.resolve().then(n.bind(n,7344))},7344:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n(7437),r=n(2265),s=n(8779),o=n(4477),c=n(6428);function l(){let[e,t]=(0,r.useState)("orders"),[n,l]=(0,r.useState)("csv"),[i,d]=(0,r.useState)(new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0]),[h,u]=(0,r.useState)(new Date().toISOString().split("T")[0]);return(0,a.jsx)(s.Z,{children:(0,a.jsxs)("div",{style:{display:"flex",minHeight:"100vh"},children:[(0,a.jsx)(o.Z,{}),(0,a.jsxs)("main",{className:"main-content",children:[(0,a.jsx)("h1",{children:"Exportar Dados"}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Tipo de Dados"}),(0,a.jsxs)("select",{className:"form-input",value:e,onChange:e=>t(e.target.value),children:[(0,a.jsx)("option",{value:"orders",children:"Pedidos"}),(0,a.jsx)("option",{value:"customers",children:"Clientes"}),(0,a.jsx)("option",{value:"shoppers",children:"Shoppers"}),(0,a.jsx)("option",{value:"financial",children:"Financeiro"})]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Formato"}),(0,a.jsxs)("select",{className:"form-input",value:n,onChange:e=>l(e.target.value),children:[(0,a.jsx)("option",{value:"csv",children:"CSV"}),(0,a.jsx)("option",{value:"json",children:"JSON"})]})]}),(0,a.jsxs)("div",{className:"form-row",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"De"}),(0,a.jsx)("input",{type:"date",className:"form-input",value:i,onChange:e=>d(e.target.value)})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"At\xe9"}),(0,a.jsx)("input",{type:"date",className:"form-input",value:h,onChange:e=>u(e.target.value)})]})]}),(0,a.jsx)("button",{className:"btn btn-primary",onClick:function(){let t="/api/mercado/admin/exportar.php?type=".concat(e,"&format=").concat(n,"&date_from=").concat(i,"&date_to=").concat(h);"csv"===n?fetch(t,{headers:(0,c.$V)()}).then(e=>{if(!e.ok)throw Error("HTTP ".concat(e.status));return e.blob()}).then(t=>{let n=document.createElement("a");n.href=URL.createObjectURL(t),n.download="export_".concat(e,"_").concat(i,".csv"),n.click(),URL.revokeObjectURL(n.href)}).catch(e=>console.error("Export failed:",e)):fetch(t,{headers:(0,c.$V)()}).then(e=>{if(!e.ok)throw Error("HTTP ".concat(e.status));return e.json()}).then(t=>{let n=new Blob([JSON.stringify(t.data,null,2)],{type:"application/json"}),a=document.createElement("a");a.href=URL.createObjectURL(n),a.download="export_".concat(e,"_").concat(i,".json"),a.click(),URL.revokeObjectURL(a.href)}).catch(e=>console.error("Export failed:",e))},children:"Exportar"})]})]})]})})}}},function(e){e.O(0,[3448,1006,2971,2117,1744],function(){return e(e.s=396)}),_N_E=e.O()}]);