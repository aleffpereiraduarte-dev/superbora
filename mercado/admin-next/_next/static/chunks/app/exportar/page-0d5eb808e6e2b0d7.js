(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3271],{396:function(e,t,a){Promise.resolve().then(a.bind(a,7344))},9646:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var n=a(7437),s=a(4477),r=a(8779),c=a(6939),o=a(8789);function l(e){let{children:t,title:a,subtitle:l,actions:i,guard:d=!0}=e,{collapsed:u}=(0,o.A)(),h=(0,n.jsxs)("div",{className:"admin-layout",children:[(0,n.jsx)(s.Z,{}),(0,n.jsxs)("main",{className:"admin-main ".concat(u?"main-collapsed":""),children:[(a||l||i)&&(0,n.jsxs)("div",{className:"page-header",children:[(0,n.jsxs)("div",{children:[a&&(0,n.jsx)("h1",{className:"page-title",children:a}),l&&(0,n.jsx)("p",{className:"page-subtitle",children:l})]}),i&&(0,n.jsx)("div",{className:"page-actions",children:i})]}),t]}),(0,n.jsx)(c.Z,{})]});return d?(0,n.jsx)(r.Z,{children:h}):h}},7344:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var n=a(7437),s=a(2265),r=a(9646),c=a(6428);function o(){let[e,t]=(0,s.useState)("orders"),[a,o]=(0,s.useState)("csv"),[l,i]=(0,s.useState)(new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0]),[d,u]=(0,s.useState)(new Date().toISOString().split("T")[0]);return(0,n.jsx)(r.Z,{title:"Exportar Dados",children:(0,n.jsxs)("div",{className:"card",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Tipo de Dados"}),(0,n.jsxs)("select",{className:"form-input",value:e,onChange:e=>t(e.target.value),children:[(0,n.jsx)("option",{value:"orders",children:"Pedidos"}),(0,n.jsx)("option",{value:"customers",children:"Clientes"}),(0,n.jsx)("option",{value:"shoppers",children:"Shoppers"}),(0,n.jsx)("option",{value:"financial",children:"Financeiro"})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Formato"}),(0,n.jsxs)("select",{className:"form-input",value:a,onChange:e=>o(e.target.value),children:[(0,n.jsx)("option",{value:"csv",children:"CSV"}),(0,n.jsx)("option",{value:"json",children:"JSON"})]})]}),(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"De"}),(0,n.jsx)("input",{type:"date",className:"form-input",value:l,onChange:e=>i(e.target.value)})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"At\xe9"}),(0,n.jsx)("input",{type:"date",className:"form-input",value:d,onChange:e=>u(e.target.value)})]})]}),(0,n.jsx)("button",{className:"btn btn-primary",onClick:function(){let t="/api/mercado/admin/exportar.php?type=".concat(e,"&format=").concat(a,"&date_from=").concat(l,"&date_to=").concat(d);"csv"===a?fetch(t,{headers:(0,c.$V)()}).then(e=>{if(!e.ok)throw Error("HTTP ".concat(e.status));return e.blob()}).then(t=>{let a=document.createElement("a");a.href=URL.createObjectURL(t),a.download="export_".concat(e,"_").concat(l,".csv"),a.click(),URL.revokeObjectURL(a.href)}).catch(e=>console.error("Export failed:",e)):fetch(t,{headers:(0,c.$V)()}).then(e=>{if(!e.ok)throw Error("HTTP ".concat(e.status));return e.json()}).then(t=>{let a=new Blob([JSON.stringify(t.data,null,2)],{type:"application/json"}),n=document.createElement("a");n.href=URL.createObjectURL(a),n.download="export_".concat(e,"_").concat(l,".json"),n.click(),URL.revokeObjectURL(n.href)}).catch(e=>console.error("Export failed:",e))},children:"Exportar"})]})})}}},function(e){e.O(0,[3448,5783,2971,2117,1744],function(){return e(e.s=396)}),_N_E=e.O()}]);