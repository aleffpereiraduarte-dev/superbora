(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3219],{1789:function(e,a,t){Promise.resolve().then(t.bind(t,1173))},4445:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(7437),r=t(8253);function l(e){let{section:a,children:t}=e,{hasPermission:l}=(0,r.q)();return l(a)?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsxs)("div",{className:"role-denied",children:[(0,s.jsx)("div",{className:"role-denied-icon",children:"\uD83D\uDD12"}),(0,s.jsx)("h2",{children:"Acesso Negado"}),(0,s.jsx)("p",{children:"Voce nao tem permissao para acessar esta secao."}),(0,s.jsx)("p",{className:"role-denied-hint",children:"Contate o administrador para solicitar acesso."})]})}},7714:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});var s=t(7437),r=t(2265);let l={sm:"400px",md:"560px",lg:"720px",xl:"960px"};function n(e){let{isOpen:a,onClose:t,title:n,children:i,size:d="md"}=e;return((0,r.useEffect)(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]),(0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&a&&(null==t||t())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a,t]),a)?(0,s.jsx)("div",{className:"modal-overlay",onClick:t,children:(0,s.jsxs)("div",{className:"modal-container",style:{maxWidth:l[d]||l.md},onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h3",{className:"modal-title",children:n}),(0,s.jsx)("button",{className:"modal-close",onClick:t,children:"✕"})]}),(0,s.jsx)("div",{className:"modal-body",children:i})]})}):null}},6939:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});var s=t(7437),r=t(6971);let l={success:"&#10003;",error:"&#10007;",warning:"&#9888;",info:"&#8505;"};function n(){let{toasts:e,removeToast:a}=(0,r.l)();return 0===e.length?null:(0,s.jsx)("div",{className:"toast-container",children:e.map(e=>(0,s.jsxs)("div",{className:"toast toast-".concat(e.type),children:[(0,s.jsx)("span",{className:"toast-icon",dangerouslySetInnerHTML:{__html:l[e.type]||l.info}}),(0,s.jsx)("span",{className:"toast-message",children:e.message}),(0,s.jsx)("button",{className:"toast-close",onClick:()=>a(e.id),children:"✕"})]},e.id))})}},1173:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return g}});var s=t(7437),r=t(2265),l=t(8779),n=t(4477),i=t(4445),d=t(7714),o=t(6939),c=t(8789),u=t(6971),p=t(6428);let m=[{type:"hero",label:"Hero Banner",icon:"&#127912;",defaultData:{title:"Titulo Principal",subtitle:"Subtitulo descritivo",buttonText:"Saiba Mais",buttonLink:"#",bgColor:"#1e293b",textColor:"#ffffff"}},{type:"text",label:"Texto",icon:"&#128221;",defaultData:{content:"Insira o texto aqui...",align:"left"}},{type:"image",label:"Imagem",icon:"&#128247;",defaultData:{src:"",alt:"Imagem",width:"100%",caption:""}},{type:"products",label:"Produtos",icon:"&#128722;",defaultData:{title:"Produtos em Destaque",category:"",limit:4,layout:"grid"}},{type:"banner",label:"Banner Promocional",icon:"&#128227;",defaultData:{title:"Promocao Especial",description:"Aproveite!",imageUrl:"",link:"#",bgColor:"#f97316"}},{type:"categories",label:"Categorias",icon:"&#128194;",defaultData:{title:"Categorias",layout:"grid",limit:6}},{type:"testimonials",label:"Depoimentos",icon:"&#128172;",defaultData:{title:"O que dizem nossos clientes",items:[]}},{type:"spacer",label:"Espacador",icon:"&#8597;",defaultData:{height:40}}];function x(){let{collapsed:e}=(0,c.A)(),{success:a,error:t}=(0,u.l)(),[l,i]=(0,r.useState)([]),[x,g]=(0,r.useState)(null),[h,b]=(0,r.useState)(!1),[y,j]=(0,r.useState)({}),[f,v]=(0,r.useState)(!1),[N,C]=(0,r.useState)("Nova Pagina"),[k,D]=(0,r.useState)(null),w=e=>{let a=m.find(a=>a.type===e);a&&i([...l,{id:"block_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),type:e,data:{...a.defaultData}}])},S=e=>{i(l.filter(a=>a.id!==e)),x===e&&g(null)},A=(e,a)=>{let t=[...l],s=e+a;s<0||s>=t.length||([t[e],t[s]]=[t[s],t[e]],i(t))},_=e=>{let a={...e,id:"block_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),data:{...e.data}},t=l.findIndex(a=>a.id===e.id),s=[...l];s.splice(t+1,0,a),i(s)},E=e=>{g(e.id),j({...e.data}),b(!0)},R=e=>{D(e)},P=(e,a)=>{if(e.preventDefault(),null===k||k===a)return;let t=[...l],[s]=t.splice(k,1);t.splice(a,0,s),i(t),D(a)},T=()=>{D(null)},B=async()=>{v(!0);try{await (0,p.sg)("/page-builder.php",{action:"save",name:N,blocks:l}),a("Pagina salva com sucesso")}catch(e){t("Erro: "+e.message)}finally{v(!1)}},I=async()=>{v(!0);try{await (0,p.sg)("/page-builder.php",{action:"publish",name:N,blocks:l}),a("Pagina publicada com sucesso")}catch(e){t("Erro: "+e.message)}finally{v(!1)}},M=e=>{let a=e.data;switch(e.type){case"hero":return(0,s.jsxs)("div",{style:{background:a.bgColor||"#1e293b",color:a.textColor||"#fff",padding:"40px 24px",borderRadius:8,textAlign:"center"},children:[(0,s.jsx)("h2",{style:{margin:"0 0 8px",fontSize:"1.5rem"},children:a.title}),(0,s.jsx)("p",{style:{margin:"0 0 16px",opacity:.8},children:a.subtitle}),a.buttonText&&(0,s.jsx)("button",{style:{padding:"8px 24px",borderRadius:6,background:"#f97316",color:"#fff",border:"none",cursor:"pointer"},children:a.buttonText})]});case"text":return(0,s.jsx)("div",{style:{padding:16,textAlign:a.align||"left"},children:(0,s.jsx)("p",{style:{margin:0,whiteSpace:"pre-wrap"},children:a.content})});case"image":return(0,s.jsxs)("div",{style:{padding:16,textAlign:"center"},children:[a.src?(0,s.jsx)("img",{src:a.src,alt:a.alt||"",style:{maxWidth:a.width||"100%",borderRadius:8}}):(0,s.jsx)("div",{style:{padding:40,background:"var(--bg)",borderRadius:8,border:"2px dashed var(--border)"},children:(0,s.jsxs)("p",{className:"text-muted",children:["Imagem: ",a.alt||"Sem URL definida"]})}),a.caption&&(0,s.jsx)("p",{className:"text-sm text-muted",style:{marginTop:8},children:a.caption})]});case"products":return(0,s.jsxs)("div",{style:{padding:16},children:[(0,s.jsx)("h3",{style:{marginBottom:12},children:a.title}),(0,s.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(a.limit||4,", 1fr)"),gap:12},children:[...Array(Math.min(a.limit||4,6))].map((e,a)=>(0,s.jsxs)("div",{style:{padding:16,background:"var(--bg)",borderRadius:8,border:"1px solid var(--border)",textAlign:"center"},children:[(0,s.jsx)("div",{style:{width:60,height:60,background:"var(--border)",borderRadius:8,margin:"0 auto 8px"}}),(0,s.jsxs)("p",{className:"text-sm",style:{margin:0},children:["Produto ",a+1]})]},a))})]});case"banner":return(0,s.jsxs)("div",{style:{background:a.bgColor||"#f97316",color:"#fff",padding:"24px",borderRadius:8,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{style:{margin:"0 0 4px"},children:a.title}),(0,s.jsx)("p",{style:{margin:0,opacity:.9},children:a.description})]}),(0,s.jsx)("button",{style:{padding:"8px 20px",borderRadius:6,background:"rgba(255,255,255,0.2)",color:"#fff",border:"1px solid rgba(255,255,255,0.3)",cursor:"pointer"},children:"Ver"})]});case"categories":return(0,s.jsxs)("div",{style:{padding:16},children:[(0,s.jsx)("h3",{style:{marginBottom:12},children:a.title}),(0,s.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(a.limit||6,", 1fr)"),gap:8},children:[...Array(Math.min(a.limit||6,8))].map((e,a)=>(0,s.jsxs)("div",{style:{padding:12,background:"var(--bg)",borderRadius:8,border:"1px solid var(--border)",textAlign:"center"},children:[(0,s.jsx)("div",{style:{width:40,height:40,background:"var(--border)",borderRadius:"50%",margin:"0 auto 6px"}}),(0,s.jsxs)("p",{className:"text-xs",style:{margin:0},children:["Categoria ",a+1]})]},a))})]});case"testimonials":return(0,s.jsxs)("div",{style:{padding:16},children:[(0,s.jsx)("h3",{style:{marginBottom:12},children:a.title}),(0,s.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[1,2,3].map(e=>(0,s.jsxs)("div",{style:{padding:16,background:"var(--bg)",borderRadius:8,border:"1px solid var(--border)"},children:[(0,s.jsx)("p",{className:"text-sm",style:{fontStyle:"italic"},children:'"Depoimento exemplo..."'}),(0,s.jsxs)("p",{className:"text-xs text-muted",children:["- Cliente ",e]})]},e))})]});case"spacer":return(0,s.jsx)("div",{style:{height:a.height||40,background:"repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(255,255,255,0.03) 5px, rgba(255,255,255,0.03) 10px)"}});default:return(0,s.jsx)("div",{style:{padding:16},children:(0,s.jsxs)("p",{className:"text-muted",children:["Bloco desconhecido: ",e.type]})})}};return(0,s.jsxs)("div",{className:"admin-layout",children:[(0,s.jsx)(n.Z,{}),(0,s.jsxs)("main",{className:"admin-main ".concat(e?"main-collapsed":""),children:[(0,s.jsxs)("div",{className:"page-header",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"page-title",children:"Page Builder"}),(0,s.jsx)("p",{className:"page-subtitle",children:"Construtor visual de paginas"})]}),(0,s.jsxs)("div",{className:"page-actions",children:[(0,s.jsx)("input",{className:"form-input",value:N,onChange:e=>C(e.target.value),placeholder:"Nome da pagina",style:{width:200}}),(0,s.jsx)("button",{className:"btn btn-secondary",onClick:B,disabled:f,children:f?"Salvando...":"Salvar Rascunho"}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:I,disabled:f||0===l.length,children:"Publicar"})]})]}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"260px 1fr",gap:16,minHeight:600},children:[(0,s.jsxs)("div",{className:"card",style:{padding:16,height:"fit-content",position:"sticky",top:16},children:[(0,s.jsx)("h3",{className:"card-title mb-4",children:"Blocos"}),(0,s.jsx)("p",{className:"text-xs text-muted mb-4",children:"Clique para adicionar um bloco"}),(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:m.map(e=>(0,s.jsxs)("button",{onClick:()=>w(e.type),style:{display:"flex",alignItems:"center",gap:10,padding:"10px 12px",borderRadius:"var(--radius)",border:"1px solid var(--border)",background:"var(--bg)",color:"var(--text)",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},children:[(0,s.jsx)("span",{dangerouslySetInnerHTML:{__html:e.icon},style:{fontSize:"1.2rem"}}),(0,s.jsx)("span",{className:"text-sm",children:e.label})]},e.type))})]}),(0,s.jsx)("div",{children:0===l.length?(0,s.jsxs)("div",{className:"card",style:{textAlign:"center",padding:"4rem",border:"2px dashed var(--border)"},children:[(0,s.jsx)("p",{style:{fontSize:"2rem",marginBottom:8},children:"\uD83D\uDCC4"}),(0,s.jsx)("p",{className:"text-muted",children:"Pagina vazia. Adicione blocos usando o painel ao lado."})]}):(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:l.map((e,a)=>{let t=m.find(a=>a.type===e.type);return(0,s.jsxs)("div",{draggable:!0,onDragStart:()=>R(a),onDragOver:e=>P(e,a),onDragEnd:T,style:{borderRadius:"var(--radius)",border:"2px solid ".concat(x===e.id?"var(--primary)":"var(--border)"),background:"var(--card-bg)",overflow:"hidden",opacity:k===a?.5:1,transition:"opacity 0.2s"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"var(--bg)",borderBottom:"1px solid var(--border)",cursor:"grab"},children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{style:{cursor:"grab",color:"var(--text-dim)"},children:"⋮⋮"}),(0,s.jsx)("span",{dangerouslySetInnerHTML:{__html:(null==t?void 0:t.icon)||""}}),(0,s.jsx)("strong",{className:"text-sm",children:(null==t?void 0:t.label)||e.type})]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>A(a,-1),disabled:0===a,title:"Mover para cima",children:"▲"}),(0,s.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>A(a,1),disabled:a===l.length-1,title:"Mover para baixo",children:"▼"}),(0,s.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>E(e),title:"Editar",children:"✎"}),(0,s.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>_(e),title:"Duplicar",children:"\uD83D\uDCCB"}),(0,s.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>S(e.id),title:"Remover",children:"✕"})]})]}),(0,s.jsx)("div",{onClick:()=>g(e.id),style:{cursor:"pointer"},children:M(e)})]},e.id)})})})]}),(0,s.jsxs)(d.Z,{isOpen:h,onClose:()=>b(!1),title:"Editar Bloco",size:"lg",children:[(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:Object.entries(y).map(e=>{let[a,t]=e;if("object"==typeof t&&!Array.isArray(t)||Array.isArray(t))return null;let r=a.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase());return"boolean"==typeof t?(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)("label",{className:"flex items-center gap-2",style:{cursor:"pointer"},children:[(0,s.jsx)("input",{type:"checkbox",checked:t,onChange:e=>j({...y,[a]:e.target.checked})}),(0,s.jsx)("span",{className:"form-label",style:{margin:0},children:r})]})},a):"number"==typeof t?(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:r}),(0,s.jsx)("input",{className:"form-input",type:"number",value:t,onChange:e=>j({...y,[a]:Number(e.target.value)})})]},a):"content"===a||"description"===a?(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:r}),(0,s.jsx)("textarea",{className:"form-textarea",value:t||"",onChange:e=>j({...y,[a]:e.target.value}),rows:4})]},a):"align"===a||"layout"===a?(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:r}),(0,s.jsx)("select",{className:"form-select",value:t||"",onChange:e=>j({...y,[a]:e.target.value}),children:"align"===a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:"left",children:"Esquerda"}),(0,s.jsx)("option",{value:"center",children:"Centro"}),(0,s.jsx)("option",{value:"right",children:"Direita"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:"grid",children:"Grid"}),(0,s.jsx)("option",{value:"carousel",children:"Carrossel"}),(0,s.jsx)("option",{value:"list",children:"Lista"})]})})]},a):a.includes("Color")||a.includes("color")||"bgColor"===a?(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:r}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"color",value:t||"#000000",onChange:e=>j({...y,[a]:e.target.value}),style:{width:40,height:36,border:"none",background:"transparent",cursor:"pointer"}}),(0,s.jsx)("input",{className:"form-input",value:t||"",onChange:e=>j({...y,[a]:e.target.value}),style:{flex:1}})]})]},a):(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:r}),(0,s.jsx)("input",{className:"form-input",value:t||"",onChange:e=>j({...y,[a]:e.target.value})})]},a)})}),(0,s.jsxs)("div",{className:"flex gap-2",style:{justifyContent:"flex-end",marginTop:16},children:[(0,s.jsx)("button",{className:"btn btn-secondary",onClick:()=>b(!1),children:"Cancelar"}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>{i(l.map(e=>e.id===x?{...e,data:{...y}}:e)),b(!1)},children:"Salvar Alteracoes"})]})]})]}),(0,s.jsx)(o.Z,{})]})}function g(){return(0,s.jsx)(l.Z,{children:(0,s.jsx)(i.Z,{section:"editor",children:(0,s.jsx)(x,{})})})}}},function(e){e.O(0,[3448,1006,2971,2117,1744],function(){return e(e.s=1789)}),_N_E=e.O()}]);