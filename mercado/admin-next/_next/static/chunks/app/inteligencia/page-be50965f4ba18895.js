(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6674],{2241:function(e,a,s){Promise.resolve().then(s.bind(s,3738))},4445:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});var n=s(7437),i=s(8253);function r(e){let{section:a,children:s}=e,{hasPermission:r}=(0,i.q)();return r(a)?(0,n.jsx)(n.Fragment,{children:s}):(0,n.jsxs)("div",{className:"role-denied",children:[(0,n.jsx)("div",{className:"role-denied-icon",children:"\uD83D\uDD12"}),(0,n.jsx)("h2",{children:"Acesso Negado"}),(0,n.jsx)("p",{children:"Voce nao tem permissao para acessar esta secao."}),(0,n.jsx)("p",{className:"role-denied-hint",children:"Contate o administrador para solicitar acesso."})]})}},1656:function(e,a,s){"use strict";s.d(a,{X:function(){return l},Z:function(){return r}});var n=s(7437);let i={success:"badge-success",warning:"badge-warning",danger:"badge-danger",info:"badge-info",neutral:"badge-neutral"};function r(e){let{label:a,variant:s="neutral"}=e;return(0,n.jsx)("span",{className:"badge ".concat(i[s]||i.neutral),children:a})}function l(e){return({pendente:"warning",confirmado:"info",preparando:"info",pronto:"info",coletado:"info",em_entrega:"warning",entregue:"success",cancelado:"danger",recusado:"danger",ativo:"success",inativo:"neutral",bloqueado:"danger",online:"success",offline:"neutral",aprovado:"success",reprovado:"danger",pago:"success",pendente_pagamento:"warning",processando:"info",aberto:"warning",resolvido:"success",fechado:"neutral"})[e]||"neutral"}},3197:function(e,a,s){"use strict";s.d(a,{Z:function(){return i}});var n=s(7437);function i(e){let{icon:a,label:s,value:i,change:r,color:l="var(--accent)"}=e,t=r&&parseFloat(r)>=0;return(0,n.jsxs)("div",{className:"stats-card",style:{borderTopColor:l},children:[(0,n.jsxs)("div",{className:"stats-card-header",children:[(0,n.jsx)("span",{className:"stats-card-icon",style:{color:l},dangerouslySetInnerHTML:{__html:a||"&#128202;"}}),(0,n.jsx)("span",{className:"stats-card-label",children:s})]}),(0,n.jsx)("div",{className:"stats-card-value",children:null!=i?i:"-"}),null!=r&&(0,n.jsxs)("div",{className:"stats-card-change ".concat(t?"change-positive":"change-negative"),children:[t?"&#9650;":"&#9660;"," ",r,"%"]})]})}},3738:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return p}});var n=s(7437),i=s(2265),r=s(8779),l=s(4477),t=s(4445),c=s(1656),d=s(3197),o=s(6939),u=s(8789),g=s(6971),m=s(6428);function h(){let{collapsed:e}=(0,u.A)(),{error:a}=(0,g.l)(),[r,t]=(0,i.useState)(null),[h,p]=(0,i.useState)([]),[x,f]=(0,i.useState)(null),[v,b]=(0,i.useState)(!0),j=(0,i.useRef)(null),N=(0,i.useRef)(null);(0,i.useEffect)(()=>{y()},[]),(0,i.useEffect)(()=>{if(!x||!j.current)return;let e=!1;return Promise.all([s.e(7674),s.e(2153)]).then(s.bind(s,4084)).then(a=>{let{Chart:s,registerables:n}=a;if(e)return;s.register(...n),N.current&&N.current.destroy();let i=x.labels||x.dates||[],r=[];(x.orders||x.pedidos)&&r.push({label:"Pedidos",data:x.orders||x.pedidos,borderColor:"#f97316",backgroundColor:"rgba(249,115,22,0.1)",fill:!0,tension:.4}),(x.revenue||x.receita)&&r.push({label:"Receita",data:x.revenue||x.receita,borderColor:"#22c55e",backgroundColor:"rgba(34,197,94,0.1)",fill:!0,tension:.4,yAxisID:"y1"}),N.current=new s(j.current,{type:"line",data:{labels:i,datasets:r},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#94a3b8"}}},scales:{x:{ticks:{color:"#64748b"},grid:{color:"rgba(51,65,85,0.5)"}},y:{ticks:{color:"#64748b"},grid:{color:"rgba(51,65,85,0.5)"},beginAtZero:!0,position:"left"},...r.length>1?{y1:{ticks:{color:"#22c55e"},grid:{display:!1},beginAtZero:!0,position:"right"}}:{}}}})}),()=>{e=!0}},[x]),(0,i.useEffect)(()=>()=>{N.current&&N.current.destroy()},[]);let y=async()=>{b(!0);try{let[e,a]=await Promise.allSettled([(0,m.SC)("/inteligencia.php"),(0,m.SC)("/inteligencia.php?section=trends")]);"fulfilled"===e.status&&(t(e.value),p(e.value.suggestions||e.value.sugestoes||[])),"fulfilled"===a.status&&f(a.value.trends||a.value)}catch(e){a("Erro ao carregar inteligencia")}finally{b(!1)}},C=e=>({high:"danger",alta:"danger",medium:"warning",media:"warning",low:"info",baixa:"info"})[e]||"neutral";return(0,n.jsxs)("div",{className:"admin-layout",children:[(0,n.jsx)(l.Z,{}),(0,n.jsxs)("main",{className:"admin-main ".concat(e?"main-collapsed":""),children:[(0,n.jsxs)("div",{className:"page-header",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"page-title",children:"Inteligencia"}),(0,n.jsx)("p",{className:"page-subtitle",children:"Analise de dados e insights com IA"})]}),(0,n.jsxs)("div",{className:"page-actions",children:[(0,n.jsx)("a",{href:"/inteligencia/pricing",className:"btn btn-secondary",children:"Precificacao"}),(0,n.jsx)("a",{href:"/inteligencia/widget",className:"btn btn-secondary",children:"Widget"}),(0,n.jsx)("button",{className:"btn btn-primary",onClick:y,children:"Atualizar Analise"})]})]}),v?(0,n.jsx)("div",{className:"loading-spinner"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"stats-grid mb-6",style:{gridTemplateColumns:"repeat(4, 1fr)"},children:[(0,n.jsx)(d.Z,{icon:"\uD83D\uDCC8",label:"Score Geral",value:(null==r?void 0:r.score)||(null==r?void 0:r.score_geral)||"-",color:"#3b82f6"}),(0,n.jsx)(d.Z,{icon:"\uD83D\uDCCA",label:"Tendencia",value:(null==r?void 0:r.trend)||(null==r?void 0:r.tendencia)||"Estavel",color:"#22c55e"}),(0,n.jsx)(d.Z,{icon:"âš ",label:"Anomalias",value:(null==r?void 0:r.anomalies)||(null==r?void 0:r.anomalias)||0,color:"#f97316"}),(0,n.jsx)(d.Z,{icon:"\uD83D\uDCA1",label:"Sugestoes",value:h.length,color:"#8b5cf6"})]}),(0,n.jsxs)("div",{className:"card mb-6",children:[(0,n.jsx)("div",{className:"card-header",children:(0,n.jsx)("h3",{className:"card-title",children:"Tendencias - Ultimos 30 dias"})}),(0,n.jsx)("div",{style:{height:320},children:(0,n.jsx)("canvas",{ref:j})})]}),(0,n.jsxs)("div",{className:"card mb-6",children:[(0,n.jsx)("h3",{className:"card-title mb-4",children:"Sugestoes da IA"}),0===h.length?(0,n.jsx)("p",{className:"text-muted",children:"Nenhuma sugestao no momento"}):(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:h.map((e,a)=>(0,n.jsxs)("div",{style:{padding:"12px 16px",borderRadius:"var(--radius)",border:"1px solid var(--border)",background:"var(--bg)"},children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,n.jsx)("strong",{className:"text-sm",children:e.title||e.titulo||"Sugestao ".concat(a+1)}),(0,n.jsx)(c.Z,{label:e.priority||e.prioridade||"media",variant:C(e.priority||e.prioridade)}),e.category&&(0,n.jsx)(c.Z,{label:e.category||e.categoria,variant:"info"})]}),(0,n.jsx)("p",{className:"text-sm text-muted",style:{margin:0},children:e.description||e.descricao||e.message||e.mensagem||""}),e.impact&&(0,n.jsxs)("span",{className:"text-xs",style:{color:"var(--success)",marginTop:4,display:"block"},children:["Impacto estimado: ",e.impact||e.impacto]})]},a))})]}),(null==r?void 0:r.insights)&&(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("h3",{className:"card-title mb-4",children:"Insights Adicionais"}),(0,n.jsx)("div",{className:"detail-grid",children:Object.entries(r.insights).map(e=>{let[a,s]=e;return(0,n.jsxs)("div",{className:"detail-item",children:[(0,n.jsx)("span",{className:"detail-label",children:a.replace(/_/g," ")}),(0,n.jsx)("span",{className:"detail-value",children:"object"==typeof s?JSON.stringify(s):String(s)})]},a)})})]})]})]}),(0,n.jsx)(o.Z,{})]})}function p(){return(0,n.jsx)(r.Z,{children:(0,n.jsx)(t.Z,{section:"intelligence",children:(0,n.jsx)(h,{})})})}}},function(e){e.O(0,[3448,5783,2971,2117,1744],function(){return e(e.s=2241)}),_N_E=e.O()}]);