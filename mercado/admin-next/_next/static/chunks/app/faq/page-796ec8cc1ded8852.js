(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[799],{8694:function(e,a,t){Promise.resolve().then(t.bind(t,7835))},4445:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});var r=t(7437),s=t(8253);function n(e){let{section:a,children:t}=e,{hasPermission:n}=(0,s.q)();return n(a)?(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsxs)("div",{className:"role-denied",children:[(0,r.jsx)("div",{className:"role-denied-icon",children:"\uD83D\uDD12"}),(0,r.jsx)("h2",{children:"Acesso Negado"}),(0,r.jsx)("p",{children:"Voce nao tem permissao para acessar esta secao."}),(0,r.jsx)("p",{className:"role-denied-hint",children:"Contate o administrador para solicitar acesso."})]})}},1656:function(e,a,t){"use strict";t.d(a,{X:function(){return i},Z:function(){return n}});var r=t(7437);let s={success:"badge-success",warning:"badge-warning",danger:"badge-danger",info:"badge-info",neutral:"badge-neutral"};function n(e){let{label:a,variant:t="neutral"}=e;return(0,r.jsx)("span",{className:"badge ".concat(s[t]||s.neutral),children:a})}function i(e){return({pendente:"warning",confirmado:"info",preparando:"info",pronto:"info",coletado:"info",em_entrega:"warning",entregue:"success",cancelado:"danger",recusado:"danger",ativo:"success",inativo:"neutral",bloqueado:"danger",online:"success",offline:"neutral",aprovado:"success",reprovado:"danger",pago:"success",pendente_pagamento:"warning",processando:"info",aberto:"warning",resolvido:"success",fechado:"neutral"})[e]||"neutral"}},7714:function(e,a,t){"use strict";t.d(a,{Z:function(){return i}});var r=t(7437),s=t(2265);let n={sm:"400px",md:"560px",lg:"720px",xl:"960px"};function i(e){let{isOpen:a,onClose:t,title:i,children:o,size:l="md"}=e;return((0,s.useEffect)(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]),(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&a&&(null==t||t())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a,t]),a)?(0,r.jsx)("div",{className:"modal-overlay",onClick:t,children:(0,r.jsxs)("div",{className:"modal-container",style:{maxWidth:n[l]||n.md},onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h3",{className:"modal-title",children:i}),(0,r.jsx)("button",{className:"modal-close",onClick:t,children:"âœ•"})]}),(0,r.jsx)("div",{className:"modal-body",children:o})]})}):null}},7835:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return f}});var r=t(7437),s=t(2265),n=t(8779),i=t(4477),o=t(4445),l=t(7714),d=t(1656),c=t(6939),m=t(8789),u=t(6971),g=t(6428);let p=[{value:"pedido",label:"Pedido"},{value:"entrega",label:"Entrega"},{value:"pagamento",label:"Pagamento"},{value:"conta",label:"Conta"},{value:"reembolso",label:"Reembolso"},{value:"fidelidade",label:"Fidelidade"},{value:"cupom",label:"Cupom"},{value:"geral",label:"Geral"}],x={pedido:"#3b82f6",entrega:"#f97316",pagamento:"#10b981",conta:"#8b5cf6",reembolso:"#ef4444",fidelidade:"#f59e0b",cupom:"#ec4899",geral:"#6b7280"},v={pedido:"Pedido",entrega:"Entrega",pagamento:"Pagamento",conta:"Conta",reembolso:"Reembolso",fidelidade:"Fidelidade",cupom:"Cupom",geral:"Geral"};function h(){let{collapsed:e}=(0,m.A)(),{success:a,error:t}=(0,u.l)(),[n,o]=(0,s.useState)([]),[h,f]=(0,s.useState)(!0),[b,y]=(0,s.useState)("todas"),[j,N]=(0,s.useState)(""),[C,k]=(0,s.useState)(!1),[S,w]=(0,s.useState)(!1),[A,z]=(0,s.useState)(null),[E,W]=(0,s.useState)(!1),[B,F]=(0,s.useState)({categoria:"pedido",pergunta:"",resposta:"",ordem:0,ativo:!0});(0,s.useEffect)(()=>{P()},[]);let P=async()=>{f(!0);try{let e=await (0,g.SC)("/faq.php");o(e.faqs||e.data||[])}catch(e){t("Erro ao carregar FAQs")}finally{f(!1)}},T=()=>{F({categoria:"pedido",pergunta:"",resposta:"",ordem:0,ativo:!0}),z(null)},R=e=>{z(e),F({categoria:e.categoria||"geral",pergunta:e.pergunta||"",resposta:e.resposta||"",ordem:e.ordem||0,ativo:void 0===e.ativo||!!Number(e.ativo)}),k(!0)},I=e=>{z(e),w(!0)},Q=async()=>{if(!B.pergunta.trim()){t("A pergunta e obrigatoria");return}if(!B.resposta.trim()){t("A resposta e obrigatoria");return}W(!0);try{let e={pergunta:B.pergunta.trim(),resposta:B.resposta.trim(),categoria:B.categoria,ordem:Number(B.ordem),ativo:B.ativo?1:0};A&&(e.id=A.id),await (0,g.sg)("/faq.php",e),a(A?"FAQ atualizada com sucesso":"FAQ criada com sucesso"),k(!1),T(),P()}catch(e){t("Erro: "+e.message)}finally{W(!1)}},Z=async()=>{if(A){W(!0);try{await (0,g.QW)("/faq.php?id=".concat(A.id)),a("FAQ excluida com sucesso"),w(!1),z(null),P()}catch(e){t("Erro: "+e.message)}finally{W(!1)}}},q=async e=>{try{await (0,g.sg)("/faq.php",{id:e.id,pergunta:e.pergunta,resposta:e.resposta,categoria:e.categoria,ordem:e.ordem,ativo:e.ativo?0:1}),a(e.ativo?"FAQ desativada":"FAQ ativada"),P()}catch(e){t("Erro: "+e.message)}},_=n.filter(e=>{if("todas"!==b&&e.categoria!==b)return!1;if(j.trim()){let a=j.toLowerCase(),t=(e.pergunta||"").toLowerCase().includes(a),r=(e.resposta||"").toLowerCase().includes(a);if(!t&&!r)return!1}return!0}),D={};_.forEach(e=>{let a=e.categoria||"geral";D[a]||(D[a]=[]),D[a].push(e)}),Object.keys(D).forEach(e=>{D[e].sort((e,a)=>(e.ordem||0)-(a.ordem||0))});let L=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120;return e?e.length>a?e.substring(0,a)+"...":e:""},O=[{value:"todas",label:"Todas"},...p],H={total:n.length,ativas:n.filter(e=>e.ativo&&0!==Number(e.ativo)).length,inativas:n.filter(e=>!e.ativo||0===Number(e.ativo)).length,categorias:new Set(n.map(e=>e.categoria)).size};return(0,r.jsxs)("div",{className:"admin-layout",children:[(0,r.jsx)(i.Z,{}),(0,r.jsxs)("main",{className:"admin-main ".concat(e?"main-collapsed":""),children:[(0,r.jsxs)("div",{className:"page-header",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"page-title",children:"Perguntas Frequentes (FAQ)"}),(0,r.jsx)("p",{className:"page-subtitle",children:"Gerenciar perguntas e respostas para clientes"})]}),(0,r.jsxs)("div",{className:"page-actions",children:[(0,r.jsx)("button",{className:"btn btn-secondary",onClick:P,children:"Atualizar"}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:()=>{T();let e=n.reduce((e,a)=>Math.max(e,a.ordem||0),0);F(a=>({...a,ordem:e+1})),k(!0)},children:"Nova Pergunta"})]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:16,marginBottom:24},children:[(0,r.jsxs)("div",{className:"card",style:{padding:16,textAlign:"center"},children:[(0,r.jsx)("div",{className:"text-sm text-muted",children:"Total FAQs"}),(0,r.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:700,color:"var(--primary)"},children:H.total})]}),(0,r.jsxs)("div",{className:"card",style:{padding:16,textAlign:"center"},children:[(0,r.jsx)("div",{className:"text-sm text-muted",children:"Ativas"}),(0,r.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:700,color:"var(--success)"},children:H.ativas})]}),(0,r.jsxs)("div",{className:"card",style:{padding:16,textAlign:"center"},children:[(0,r.jsx)("div",{className:"text-sm text-muted",children:"Inativas"}),(0,r.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:700,color:"var(--text-dim)"},children:H.inativas})]}),(0,r.jsxs)("div",{className:"card",style:{padding:16,textAlign:"center"},children:[(0,r.jsx)("div",{className:"text-sm text-muted",children:"Categorias"}),(0,r.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:700,color:"var(--info)"},children:H.categorias})]})]}),(0,r.jsx)("div",{style:{display:"flex",gap:8,overflowX:"auto",paddingBottom:4,marginBottom:16,borderBottom:"1px solid var(--border)"},children:O.map(e=>(0,r.jsxs)("button",{onClick:()=>y(e.value),style:{padding:"8px 16px",border:"none",background:b===e.value?"var(--primary)":"transparent",color:b===e.value?"#fff":"var(--text-secondary)",borderRadius:"8px 8px 0 0",cursor:"pointer",fontWeight:b===e.value?600:400,fontSize:"0.9rem",whiteSpace:"nowrap",transition:"all 0.2s"},children:[e.label,"todas"!==e.value&&(0,r.jsx)("span",{style:{marginLeft:6,fontSize:"0.75rem",opacity:.7},children:n.filter(a=>a.categoria===e.value).length})]},e.value))}),(0,r.jsx)("div",{style:{marginBottom:20},children:(0,r.jsx)("input",{className:"form-input",type:"text",placeholder:"Buscar por pergunta ou resposta...",value:j,onChange:e=>N(e.target.value),style:{maxWidth:480}})}),h&&(0,r.jsx)("div",{style:{textAlign:"center",padding:48,color:"var(--text-secondary)"},children:"Carregando FAQs..."}),!h&&0===_.length&&(0,r.jsxs)("div",{style:{textAlign:"center",padding:48,color:"var(--text-secondary)",background:"var(--bg-card)",borderRadius:"var(--radius)",border:"1px solid var(--border)"},children:[(0,r.jsx)("div",{style:{fontSize:"2rem",marginBottom:8},children:"?"}),(0,r.jsx)("p",{style:{fontWeight:500},children:"Nenhuma FAQ encontrada"}),(0,r.jsx)("p",{className:"text-sm text-muted",style:{marginTop:4},children:j?"Tente ajustar sua busca":'Crie a primeira pergunta clicando em "Nova Pergunta"'})]}),!h&&Object.keys(D).map(e=>(0,r.jsxs)("div",{style:{marginBottom:28},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:12},children:[(0,r.jsx)("span",{style:{width:4,height:24,borderRadius:2,background:x[e]||x.geral}}),(0,r.jsx)("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:600,color:"var(--text-primary)"},children:v[e]||e}),(0,r.jsxs)("span",{className:"text-sm text-muted",children:["(",D[e].length,")"]})]}),(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:D[e].map(e=>(0,r.jsxs)("div",{style:{background:"var(--bg-card)",border:"1px solid var(--border)",borderRadius:"var(--radius, 8px)",padding:20,transition:"box-shadow 0.2s, border-color 0.2s",cursor:"default",opacity:e.ativo&&0!==Number(e.ativo)?1:.6},onMouseEnter:a=>{a.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.08)",a.currentTarget.style.borderColor=x[e.categoria]||x.geral},onMouseLeave:e=>{e.currentTarget.style.boxShadow="none",e.currentTarget.style.borderColor="var(--border)"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12,marginBottom:8},children:[(0,r.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,r.jsx)("div",{style:{fontWeight:600,fontSize:"1rem",color:"var(--text-primary)",marginBottom:6,lineHeight:1.4},children:e.pergunta}),(0,r.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",lineHeight:1.5},children:L(e.resposta)})]}),(0,r.jsx)("div",{style:{display:"flex",alignItems:"center",gap:8,flexShrink:0},children:(0,r.jsx)("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:28,height:28,borderRadius:"50%",background:"var(--bg)",fontWeight:600,fontSize:"0.8rem",color:"var(--text-secondary)",border:"1px solid var(--border)"},children:e.ordem})})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:12,paddingTop:12,borderTop:"1px solid var(--border)",flexWrap:"wrap",gap:8},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,r.jsx)("span",{style:{display:"inline-block",padding:"3px 10px",borderRadius:12,fontSize:"0.78rem",fontWeight:500,color:"#fff",background:x[e.categoria]||x.geral},children:v[e.categoria]||e.categoria}),(0,r.jsx)(d.Z,{label:e.ativo&&0!==Number(e.ativo)?"Ativo":"Inativo",variant:e.ativo&&0!==Number(e.ativo)?"success":"neutral"})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,r.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>q(e),style:{fontSize:"0.8rem"},children:e.ativo&&0!==Number(e.ativo)?"Desativar":"Ativar"}),(0,r.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>R(e),style:{fontSize:"0.8rem"},children:"Editar"}),(0,r.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>I(e),style:{fontSize:"0.8rem"},children:"Excluir"})]})]})]},e.id))})]},e)),(0,r.jsxs)(l.Z,{isOpen:C,onClose:()=>{k(!1),T()},title:A?"Editar Pergunta":"Nova Pergunta",size:"md",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Categoria *"}),(0,r.jsx)("select",{className:"form-select",value:B.categoria,onChange:e=>F({...B,categoria:e.target.value}),children:p.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Pergunta *"}),(0,r.jsx)("input",{className:"form-input",value:B.pergunta,onChange:e=>F({...B,pergunta:e.target.value}),placeholder:"Ex: Como acompanhar meu pedido?"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Resposta *"}),(0,r.jsx)("textarea",{className:"form-textarea",value:B.resposta,onChange:e=>F({...B,resposta:e.target.value}),placeholder:"Digite a resposta completa para esta pergunta...",rows:6,style:{resize:"vertical",minHeight:120}})]}),(0,r.jsxs)("div",{className:"grid-2 gap-4",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Ordem de exibicao"}),(0,r.jsx)("input",{className:"form-input",type:"number",min:"0",value:B.ordem,onChange:e=>F({...B,ordem:e.target.value})}),(0,r.jsx)("span",{className:"text-sm text-muted",children:"Menor numero aparece primeiro"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Status"}),(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:10,cursor:"pointer",padding:"10px 0",fontSize:"0.9rem"},children:[(0,r.jsx)("input",{type:"checkbox",checked:B.ativo,onChange:e=>F({...B,ativo:e.target.checked}),style:{width:18,height:18,cursor:"pointer"}}),(0,r.jsx)("span",{children:B.ativo?"Ativo - visivel para clientes":"Inativo - oculto para clientes"})]})]})]}),B.pergunta.trim()&&(0,r.jsxs)("div",{style:{marginTop:8,padding:16,background:"var(--bg)",borderRadius:"var(--radius, 8px)",border:"1px solid var(--border)"},children:[(0,r.jsx)("div",{className:"text-sm text-muted",style:{marginBottom:8,fontWeight:500},children:"Pre-visualizacao"}),(0,r.jsx)("div",{style:{fontWeight:600,marginBottom:6,color:"var(--text-primary)"},children:B.pergunta}),(0,r.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",lineHeight:1.5,whiteSpace:"pre-wrap"},children:B.resposta||"(sem resposta)"}),(0,r.jsx)("div",{style:{marginTop:8},children:(0,r.jsx)("span",{style:{display:"inline-block",padding:"2px 8px",borderRadius:10,fontSize:"0.75rem",fontWeight:500,color:"#fff",background:x[B.categoria]||x.geral},children:v[B.categoria]||B.categoria})})]}),(0,r.jsxs)("div",{className:"flex gap-2",style:{justifyContent:"flex-end",marginTop:16},children:[(0,r.jsx)("button",{className:"btn btn-secondary",onClick:()=>{k(!1),T()},children:"Cancelar"}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:Q,disabled:E,children:E?"Salvando...":A?"Salvar Alteracoes":"Criar Pergunta"})]})]}),(0,r.jsx)(l.Z,{isOpen:S,onClose:()=>{w(!1),z(null)},title:"Excluir Pergunta",size:"sm",children:A&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{padding:16,background:"var(--bg)",borderRadius:"var(--radius, 8px)",border:"1px solid var(--border)",marginBottom:16},children:[(0,r.jsx)("div",{style:{fontWeight:600,marginBottom:4,color:"var(--text-primary)"},children:A.pergunta}),(0,r.jsxs)("div",{className:"text-sm text-muted",children:["Categoria: ",v[A.categoria]||A.categoria]})]}),(0,r.jsx)("div",{style:{padding:"8px 12px",background:"var(--danger-bg)",border:"1px solid var(--danger)",borderRadius:"var(--radius, 8px)",marginBottom:16,fontSize:"0.85rem",color:"var(--danger)"},children:"Esta acao nao pode ser desfeita. A pergunta sera removida permanentemente."}),(0,r.jsxs)("div",{className:"flex gap-2",style:{justifyContent:"flex-end"},children:[(0,r.jsx)("button",{className:"btn btn-secondary",onClick:()=>{w(!1),z(null)},children:"Cancelar"}),(0,r.jsx)("button",{className:"btn btn-danger",onClick:Z,disabled:E,children:E?"Excluindo...":"Confirmar Exclusao"})]})]})})]}),(0,r.jsx)(c.Z,{})]})}function f(){return(0,r.jsx)(n.Z,{children:(0,r.jsx)(o.Z,{section:"support",children:(0,r.jsx)(h,{})})})}}},function(e){e.O(0,[3448,5783,2971,2117,1744],function(){return e(e.s=8694)}),_N_E=e.O()}]);