(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[451],{2447:function(e,o,t){Promise.resolve().then(t.bind(t,9988))},6428:function(e,o,t){"use strict";t.d(o,{B9:function(){return d},LP:function(){return n},SC:function(){return s},o4:function(){return i},pE:function(){return u},sg:function(){return c}});let r="/api/mercado/shopper",a="shopper_token";function n(){try{return localStorage.getItem(a)}catch(e){return null}}function i(e){try{e?localStorage.setItem(a,e):localStorage.removeItem(a)}catch(e){}}function l(){let e=n();return e?{Authorization:"Bearer ".concat(e)}:{}}async function s(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="".concat(r).concat(e),a=Object.entries(o).filter(e=>{let[,o]=e;return null!=o&&""!==o}).map(e=>{let[o,t]=e;return"".concat(encodeURIComponent(o),"=").concat(encodeURIComponent(t))}).join("&");a&&(t+="?".concat(a));let n=await fetch(t,{credentials:"include",headers:l()});if(!n.ok){let e=await n.json().catch(()=>null);throw Error((null==e?void 0:e.message)||"API error: ".concat(n.status," ").concat(n.statusText))}let i=await n.json();if(!i.success)throw Error(i.message||"Erro desconhecido na API");return i.data}async function c(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=await fetch("".concat(r).concat(e),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",...l()},body:JSON.stringify(o)}),a=await t.json().catch(()=>null);if(!t.ok||!(null==a?void 0:a.success))throw Error((null==a?void 0:a.message)||"API error: ".concat(t.status));return a.data}async function d(e,o){let t=await fetch("".concat(r).concat(e),{method:"POST",credentials:"include",headers:l(),body:o}),a=await t.json().catch(()=>null);if(!t.ok||!(null==a?void 0:a.success))throw Error((null==a?void 0:a.message)||"API error: ".concat(t.status));return a.data}async function u(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=await fetch("".concat(r).concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json",...l()},body:JSON.stringify(o)}),a=await t.json().catch(()=>null);if(!t.ok||!(null==a?void 0:a.success))throw Error((null==a?void 0:a.message)||"API error: ".concat(t.status));return a.data}},8779:function(e,o,t){"use strict";t.d(o,{Z:function(){return l}});var r=t(7437),a=t(2265),n=t(9376),i=t(7128);function l(e){let{children:o}=e,{isAuthenticated:t,loading:l}=(0,i.a)(),s=(0,n.useRouter)();return((0,a.useEffect)(()=>{if(!l&&!t){let e=window.location.pathname;s.push("/login?return=".concat(encodeURIComponent(e)))}},[l,t,s]),l)?(0,r.jsxs)("div",{className:"loading-screen",children:[(0,r.jsx)("div",{className:"spinner"}),(0,r.jsx)("p",{className:"loading-text",children:"Carregando..."})]}):t?o:null}},2277:function(e,o,t){"use strict";t.d(o,{Z:function(){return s}});var r=t(7437),a=t(9376),n=t(7648),i=t(6971);let l=[{href:"/",label:"Home",icon:(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,r.jsx)("polyline",{points:"9 22 9 12 15 12 15 22"})]})},{href:"/pedidos",label:"Pedidos",icon:(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,r.jsx)("polyline",{points:"14 2 14 8 20 8"}),(0,r.jsx)("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),(0,r.jsx)("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]})},{href:"/ganhos",label:"Ganhos",icon:(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),(0,r.jsx)("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]})},{href:"/chat",label:"Chat",icon:(0,r.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})},{href:"/perfil",label:"Perfil",icon:(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,r.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})}];function s(){let e=(0,a.usePathname)(),{unreadCount:o}=(0,i.l)();return(0,r.jsx)("nav",{className:"bottom-nav",children:l.map(t=>{var a;return(0,r.jsxs)(n.default,{href:t.href,className:"bottom-nav-item ".concat(("/"===(a=t.href)?"/"===e||""===e:e.startsWith(a))?"active":""),children:[(0,r.jsxs)("span",{className:"bottom-nav-icon",children:[t.icon,"/"===t.href&&o>0&&(0,r.jsx)("span",{className:"bottom-nav-badge",children:o>99?"99+":o})]}),(0,r.jsx)("span",{className:"bottom-nav-label",children:t.label})]},t.href)})})}},7128:function(e,o,t){"use strict";t.d(o,{H:function(){return l},a:function(){return s}});var r=t(7437),a=t(2265),n=t(6428);let i=(0,a.createContext)(null);function l(e){let{children:o}=e,[t,l]=(0,a.useState)(null),[s,c]=(0,a.useState)(!0),d=(0,a.useCallback)(async()=>{if(!(0,n.LP)()){l(null),c(!1);return}try{let e=await (0,n.SC)("/auth/session.php");e.authenticated&&e.shopper?l(e.shopper):((0,n.o4)(null),l(null))}catch(e){(0,n.o4)(null),l(null)}finally{c(!1)}},[]);(0,a.useEffect)(()=>{d()},[d]);let u=(0,a.useCallback)(async(e,o)=>{let t=await (0,n.sg)("/auth/login.php",{email:e,senha:o});(0,n.o4)(t.token);let r=t.shopper||{id:t.shopper_id,nome:t.nome,email:t.email,telefone:t.telefone,foto:t.foto,saldo:t.saldo,status:t.status};return l(r),r},[]),h=(0,a.useCallback)(()=>{(0,n.o4)(null),l(null)},[]);return(0,r.jsx)(i.Provider,{value:{shopper:t,loading:s,isAuthenticated:!!t,login:u,logout:h,refreshSession:d},children:o})}function s(){let e=(0,a.useContext)(i);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},6971:function(e,o,t){"use strict";t.d(o,{J:function(){return c},l:function(){return d}});var r=t(7437),a=t(2265),n=t(7128),i=t(6428);let l=(0,a.createContext)(null),s=0;function c(e){let{children:o}=e,[t,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(0),h=(0,a.useRef)(0),p=(0,a.useRef)({}),{isAuthenticated:f}=(0,n.a)(),g=(0,a.useCallback)(function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,r=++s;return c(t=>[...t,{id:r,message:e,type:o}]),t>0&&(p.current[r]=setTimeout(()=>{c(e=>e.filter(e=>e.id!==r)),delete p.current[r]},t)),r},[]),x=(0,a.useCallback)(e=>{c(o=>o.filter(o=>o.id!==e)),p.current[e]&&(clearTimeout(p.current[e]),delete p.current[e])},[]),b=(0,a.useCallback)(e=>g(e,"success"),[g]),v=(0,a.useCallback)(e=>g(e,"error"),[g]),m=(0,a.useCallback)(e=>g(e,"warning"),[g]),y=(0,a.useCallback)(e=>g(e,"info"),[g]);return(0,a.useEffect)(()=>{if(!f){u(0),h.current=0;return}let e=!1;async function o(){try{var o,t;let r=(0,i.LP)();if(!r)return;let a=await fetch("/api/mercado/notifications/list.php?unread=1",{credentials:"include",headers:{Authorization:"Bearer ".concat(r)}});if(!a.ok)return;let n=await a.json();if(!n.success)return;let l=null!==(t=null===(o=n.data)||void 0===o?void 0:o.unread_count)&&void 0!==t?t:0;e||(u(l),l>h.current&&g("Nova notificacao","info"),h.current=l)}catch(e){}}o();let t=setInterval(o,3e4);return()=>{e=!0,clearInterval(t)}},[f,g]),(0,a.useEffect)(()=>()=>{Object.values(p.current).forEach(e=>clearTimeout(e))},[]),(0,r.jsxs)(l.Provider,{value:{notifications:t,addNotification:g,removeNotification:x,success:b,error:v,warning:m,info:y,unreadCount:d},children:[o,t.length>0&&(0,r.jsx)("div",{className:"toast-container",children:t.map(e=>(0,r.jsxs)("div",{className:"toast toast-".concat(e.type),onClick:()=>x(e.id),children:[(0,r.jsxs)("span",{className:"toast-icon",children:["success"===e.type&&"✓","error"===e.type&&"✗","warning"===e.type&&"⚠","info"===e.type&&"ℹ"]}),(0,r.jsx)("span",{className:"toast-message",children:e.message})]},e.id))})]})}function d(){let e=(0,a.useContext)(l);if(!e)throw Error("useNotification must be used within NotificationProvider");return e}},9988:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return f}});var r=t(7437),a=t(2265),n=t(9376),i=t(6428),l=t(6971),s=t(8779),c=t(2277);let d=[{key:"pickup",label:"Coleta na Loja",icon:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4",color:"#8b5cf6",items:[{key:"pickup_store_closed",label:"Loja fechada ao chegar"},{key:"pickup_long_wait",label:"Espera muito longa (>20min)"},{key:"pickup_order_not_ready",label:"Pedido nao estava pronto"},{key:"pickup_wrong_items",label:"Loja entregou itens errados"},{key:"pickup_missing_items",label:"Itens faltando no pacote"},{key:"pickup_store_rude",label:"Funcionario grosseiro"},{key:"pickup_packaging_bad",label:"Embalagem inadequada"},{key:"pickup_store_not_found",label:"Nao encontrou a loja"},{key:"pickup_store_refused",label:"Loja recusou entregar"}]},{key:"delivery",label:"Entrega ao Cliente",icon:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z M15 11a3 3 0 11-6 0 3 3 0 016 0z",color:"#3b82f6",items:[{key:"delivery_address_wrong",label:"Endereco incorreto/inexistente"},{key:"delivery_customer_absent",label:"Cliente ausente"},{key:"delivery_no_access",label:"Sem acesso ao local (portaria)"},{key:"delivery_customer_rude",label:"Cliente grosseiro/agressivo"},{key:"delivery_refused",label:"Cliente recusou pedido"},{key:"delivery_unsafe_area",label:"Area insegura"},{key:"delivery_long_distance",label:"Distancia muito maior que indicada"},{key:"delivery_instructions_unclear",label:"Instrucoes confusas"}]},{key:"vehicle",label:"Veiculo/Equipamento",icon:"M13 10V3L4 14h7v7l9-11h-7z",color:"#f59e0b",items:[{key:"vehicle_breakdown",label:"Veiculo quebrou"},{key:"vehicle_flat_tire",label:"Pneu furou"},{key:"vehicle_accident",label:"Acidente de transito"},{key:"vehicle_theft",label:"Roubo/furto do veiculo"},{key:"equipment_bag_damaged",label:"Bag termica danificada"},{key:"equipment_phone_issue",label:"Celular com problema"}]},{key:"financial",label:"Financeiro",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z",color:"#10b981",items:[{key:"financial_wrong_payment",label:"Valor recebido incorreto"},{key:"financial_no_payment",label:"Nao recebeu pagamento"},{key:"financial_bonus_missing",label:"Bonus nao creditado"},{key:"financial_tip_missing",label:"Gorjeta nao recebida"},{key:"financial_fuel_cost",label:"Custo de combustivel alto"},{key:"financial_toll_not_paid",label:"Pedagio nao reembolsado"},{key:"financial_tax_help",label:"Duvida sobre imposto"},{key:"financial_deduction_unfair",label:"Desconto injusto"}]},{key:"app",label:"App/Plataforma",icon:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z",color:"#6366f1",items:[{key:"app_crash",label:"App travou/fechou"},{key:"app_gps_wrong",label:"GPS com localizacao errada"},{key:"app_notifications",label:"Nao recebe notificacoes"},{key:"app_order_disappeared",label:"Pedido sumiu do app"},{key:"app_cant_confirm",label:"Nao consegue confirmar entrega"},{key:"app_chat_broken",label:"Chat nao funciona"},{key:"app_login_issue",label:"Problema para fazer login"}]},{key:"safety",label:"Seguranca",icon:"M20.618 5.984A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",color:"#ef4444",items:[{key:"safety_assault",label:"Assalto/agressao"},{key:"safety_harassment",label:"Assedio"},{key:"safety_theft_of_delivery",label:"Roubo da entrega"},{key:"safety_dog_attack",label:"Ataque de animal"},{key:"safety_weather_extreme",label:"Condicao climatica extrema"},{key:"safety_traffic_incident",label:"Incidente no transito"},{key:"safety_threats",label:"Ameacas"}]},{key:"account",label:"Conta/Suporte",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.066 2.573c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.066-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z",color:"#64748b",items:[{key:"account_deactivated",label:"Conta desativada sem motivo"},{key:"account_documents",label:"Problema com documentos"},{key:"account_rating_unfair",label:"Avaliacao injusta"},{key:"account_schedule_issue",label:"Problema com escala/horario"},{key:"account_region_change",label:"Mudanca de regiao"},{key:"support_no_response",label:"Suporte nao responde"},{key:"support_unresolved",label:"Problema nao resolvido"}]}],u={critical:{bg:"#fef2f2",text:"#dc2626"},high:{bg:"#fff7ed",text:"#ea580c"},medium:{bg:"#fffbeb",text:"#d97706"},low:{bg:"#f0fdf4",text:"#16a34a"}},h={open:{label:"Aberto",color:"#3b82f6"},in_progress:{label:"Em Analise",color:"#f59e0b"},resolved:{label:"Resolvido",color:"#10b981"},closed:{label:"Fechado",color:"#64748b"}};function p(){let e=(0,n.useSearchParams)().get("order_id")||"",{success:o,error:t}=(0,l.l)(),s=(0,a.useRef)(null),[c,p]=(0,a.useState)("reportar"),[f,g]=(0,a.useState)(0),[x,b]=(0,a.useState)(null),[v,m]=(0,a.useState)(""),[y,j]=(0,a.useState)(e),[k,_]=(0,a.useState)(""),[S,w]=(0,a.useState)([]),[C,z]=(0,a.useState)([]),[R,B]=(0,a.useState)([]),[W,P]=(0,a.useState)(!1),[A,L]=(0,a.useState)(!1),[I,N]=(0,a.useState)(null),[M,E]=(0,a.useState)(!1),[T,D]=(0,a.useState)([]),[O,F]=(0,a.useState)(null),[H,V]=(0,a.useState)(""),[q,U]=(0,a.useState)(""),[X,Z]=(0,a.useState)(1),[G,J]=(0,a.useState)(1),[Q,K]=(0,a.useState)(null);(0,a.useEffect)(()=>{"historico"===c&&($(),Y())},[c,H,q,X]);let Y=(0,a.useCallback)(async()=>{try{let e=await (0,i.SC)("/problemas.php",{action:"stats"});F(e)}catch(e){}},[]),$=(0,a.useCallback)(async()=>{E(!0);try{let e={action:"list",page:X,limit:15};H&&(e.status=H),q&&(e.category=q);let o=await (0,i.SC)("/problemas.php",e);D(o.reports||[]),J(o.pages||1)}catch(e){console.error("Load reports error:",e)}finally{E(!1)}},[H,q,X]);async function ee(){let e=[];for(let o of S)try{L(!0);let t=new FormData;t.append("photo",o);let r=await (0,i.B9)("/problem-upload.php",t);(null==r?void 0:r.url)&&e.push(r.url)}catch(e){console.error("Photo upload error:",e)}return L(!1),B(e),e}async function eo(){if(!k.trim()||k.trim().length<5){t("Descreva o problema (min. 5 caracteres)");return}P(!0);try{let e=R;S.length>0&&0===R.length&&(e=await ee());let t={subcategory:v,description:k.trim(),photo_urls:e};y&&(t.order_id=parseInt(y,10)||0);let r=await (0,i.sg)("/problemas.php",t);N((null==r?void 0:r.id)||null),g(5),o("Problema reportado com sucesso!")}catch(e){t(e.message||"Erro ao enviar")}finally{P(!1)}}function et(){g(0),b(null),m(""),j(e),_(""),w([]),z([]),B([]),N(null)}function er(e){if(!e)return"--";try{return new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(o){return e}}function ea(e){for(let o of d){let t=o.items.find(o=>o.key===e);if(t)return t.label}return e}let en=Math.min(100,f/5*100);return(0,r.jsxs)("div",{className:"page",style:{paddingBottom:80},children:[(0,r.jsx)("div",{className:"page-header",children:(0,r.jsx)("h1",{style:{fontSize:20,fontWeight:700},children:"Problemas"})}),(0,r.jsx)("div",{style:{display:"flex",gap:0,marginBottom:16,borderRadius:10,overflow:"hidden",border:"1px solid var(--color-border, #e5e7eb)"},children:[{key:"reportar",label:"Reportar"},{key:"historico",label:"Meus Reportes"}].map(e=>(0,r.jsx)("button",{onClick:()=>{p(e.key),"reportar"===e.key&&et()},style:{flex:1,padding:"10px 0",fontSize:14,fontWeight:600,border:"none",cursor:"pointer",background:c===e.key?"var(--color-primary, #6c5ce7)":"var(--color-bg-card, #fff)",color:c===e.key?"#fff":"var(--color-text-secondary, #6b7280)",transition:"all .2s"},children:e.label},e.key))}),"reportar"===c?(0,r.jsxs)(r.Fragment,{children:[f>0&&f<5&&(0,r.jsxs)("div",{style:{marginBottom:16},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"var(--color-text-muted, #9ca3af)",marginBottom:4},children:[(0,r.jsxs)("span",{children:["Passo ",f," de ",5]}),(0,r.jsxs)("span",{children:[Math.round(en),"%"]})]}),(0,r.jsx)("div",{style:{height:4,borderRadius:2,background:"var(--color-border, #e5e7eb)"},children:(0,r.jsx)("div",{style:{height:"100%",width:"".concat(en,"%"),borderRadius:2,background:"var(--color-primary, #6c5ce7)",transition:"width .3s"}})})]}),f>0&&f<5&&(0,r.jsxs)("button",{onClick:()=>g(e=>e-1),style:{display:"flex",alignItems:"center",gap:4,background:"none",border:"none",color:"var(--color-primary, #6c5ce7)",fontSize:14,fontWeight:500,cursor:"pointer",padding:0,marginBottom:12},children:[(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:(0,r.jsx)("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Voltar"]}),0===f&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontSize:15,fontWeight:600,marginBottom:12},children:"Qual tipo de problema?"}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10},children:d.map(e=>(0,r.jsxs)("button",{onClick:()=>{b(e),m(""),g(1)},style:{display:"flex",flexDirection:"column",alignItems:"center",gap:8,padding:"16px 8px",borderRadius:12,border:"1px solid var(--color-border, #e5e7eb)",background:"var(--color-bg-card, #fff)",cursor:"pointer",transition:"all .2s"},children:[(0,r.jsx)("div",{style:{width:44,height:44,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:e.color+"18"},children:(0,r.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:e.color,strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:e.icon})})}),(0,r.jsx)("div",{style:{fontSize:13,fontWeight:600,textAlign:"center",color:"var(--color-text, #111)"},children:e.label}),(0,r.jsxs)("div",{style:{fontSize:11,color:"var(--color-text-muted, #9ca3af)"},children:[e.items.length," tipos"]})]},e.key))})]}),1===f&&x&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontSize:15,fontWeight:600,marginBottom:4},children:x.label}),(0,r.jsx)("div",{style:{fontSize:13,color:"var(--color-text-secondary, #6b7280)",marginBottom:12},children:"Selecione o problema especifico"}),(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:x.items.map(e=>(0,r.jsxs)("button",{onClick:()=>{m(e.key),g(2)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 14px",borderRadius:10,border:"1px solid var(--color-border, #e5e7eb)",background:"var(--color-bg-card, #fff)",cursor:"pointer",transition:"all .15s"},children:[(0,r.jsx)("span",{style:{fontSize:14,fontWeight:500,color:"var(--color-text, #111)"},children:e.label}),(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-text-muted, #9ca3af)",strokeWidth:"2",strokeLinecap:"round",children:(0,r.jsx)("path",{d:"M9 18l6-6-6-6"})})]},e.key))})]}),2===f&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontSize:15,fontWeight:600,marginBottom:4},children:"Pedido relacionado"}),(0,r.jsx)("div",{style:{fontSize:13,color:"var(--color-text-secondary, #6b7280)",marginBottom:12},children:"Opcional - informe o ID do pedido se aplicavel"}),(0,r.jsxs)("div",{className:"card",style:{padding:16},children:[(0,r.jsx)("input",{type:"text",inputMode:"numeric",className:"form-input",placeholder:"Ex: 12345",value:y,onChange:e=>j(e.target.value.replace(/\D/g,"")),style:{fontSize:16,textAlign:"center",padding:"14px 16px"}}),(0,r.jsx)("div",{style:{fontSize:12,color:"var(--color-text-muted, #9ca3af)",marginTop:8,textAlign:"center"},children:"Deixe vazio se nao tem pedido associado"})]}),(0,r.jsx)("button",{onClick:()=>g(3),style:{width:"100%",padding:"14px 0",marginTop:16,borderRadius:10,border:"none",background:"var(--color-primary, #6c5ce7)",color:"#fff",fontSize:15,fontWeight:600,cursor:"pointer"},children:"Continuar"})]}),3===f&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontSize:15,fontWeight:600,marginBottom:4},children:"Fotos de evidencia"}),(0,r.jsx)("div",{style:{fontSize:13,color:"var(--color-text-secondary, #6b7280)",marginBottom:12},children:"Opcional - adicione ate 5 fotos"}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8,marginBottom:16},children:[C.map((e,o)=>(0,r.jsxs)("div",{style:{position:"relative",aspectRatio:"1",borderRadius:10,overflow:"hidden",border:"1px solid var(--color-border, #e5e7eb)"},children:[(0,r.jsx)("img",{src:e,alt:"Foto ".concat(o+1),style:{width:"100%",height:"100%",objectFit:"cover"}}),(0,r.jsx)("button",{onClick:()=>{w(e=>e.filter((e,t)=>t!==o)),z(e=>e.filter((e,t)=>t!==o)),B(e=>e.filter((e,t)=>t!==o))},style:{position:"absolute",top:4,right:4,width:24,height:24,borderRadius:"50%",background:"rgba(0,0,0,0.6)",color:"#fff",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12},children:"X"})]},o)),S.length<5&&(0,r.jsxs)("button",{onClick:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.click()},style:{aspectRatio:"1",borderRadius:10,border:"2px dashed var(--color-border, #d1d5db)",background:"var(--color-bg-page, #f9fafb)",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:4},children:[(0,r.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-text-muted, #9ca3af)",strokeWidth:"1.5",strokeLinecap:"round",children:(0,r.jsx)("path",{d:"M12 5v14M5 12h14"})}),(0,r.jsx)("span",{style:{fontSize:11,color:"var(--color-text-muted, #9ca3af)"},children:"Foto"})]})]}),(0,r.jsx)("input",{ref:s,type:"file",accept:"image/*",capture:"environment",onChange:function(e){var o;let r=null===(o=e.target.files)||void 0===o?void 0:o[0];if(!r)return;if(S.length>=5){t("Maximo de 5 fotos");return}let a=new FileReader;a.onloadend=()=>{w(e=>[...e,r]),z(e=>[...e,a.result]),a.onloadend=null,a.onerror=null},a.onerror=()=>{a.onloadend=null,a.onerror=null},a.readAsDataURL(r),s.current&&(s.current.value="")},style:{display:"none"}}),(0,r.jsx)("button",{onClick:()=>g(4),style:{width:"100%",padding:"14px 0",borderRadius:10,border:"none",background:"var(--color-primary, #6c5ce7)",color:"#fff",fontSize:15,fontWeight:600,cursor:"pointer"},children:S.length>0?"Continuar com ".concat(S.length," foto").concat(S.length>1?"s":""):"Pular fotos"})]}),4===f&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontSize:15,fontWeight:600,marginBottom:4},children:"Descreva o problema"}),(0,r.jsx)("div",{style:{fontSize:13,color:"var(--color-text-secondary, #6b7280)",marginBottom:12},children:"Quanto mais detalhes, melhor poderemos ajudar"}),(0,r.jsxs)("div",{className:"card",style:{padding:12,marginBottom:12},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[x&&(0,r.jsx)("div",{style:{width:28,height:28,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:x.color+"18"},children:(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:x.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:x.icon})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontSize:13,fontWeight:600},children:null==x?void 0:x.label}),(0,r.jsx)("div",{style:{fontSize:12,color:"var(--color-text-secondary, #6b7280)"},children:ea(v)})]})]}),y&&(0,r.jsxs)("div",{style:{fontSize:12,color:"var(--color-text-muted, #9ca3af)",marginTop:4},children:["Pedido #",y]}),S.length>0&&(0,r.jsxs)("div",{style:{fontSize:12,color:"var(--color-text-muted, #9ca3af)",marginTop:2},children:[S.length," foto",S.length>1?"s":""," anexada",S.length>1?"s":""]})]}),(0,r.jsx)("textarea",{className:"form-textarea",placeholder:"Descreva o que aconteceu com detalhes...",value:k,onChange:e=>_(e.target.value),rows:5,style:{fontSize:15,padding:14,borderRadius:10}}),(0,r.jsxs)("div",{style:{fontSize:11,color:"var(--color-text-muted, #9ca3af)",marginTop:4,textAlign:"right"},children:[k.length,"/3000"]}),(0,r.jsx)("button",{onClick:eo,disabled:W||A,style:{width:"100%",padding:"14px 0",marginTop:12,borderRadius:10,border:"none",background:W?"var(--color-text-muted, #9ca3af)":"var(--color-primary, #6c5ce7)",color:"#fff",fontSize:15,fontWeight:600,cursor:W?"not-allowed":"pointer",opacity:W?.7:1},children:A?"Enviando fotos...":W?"Enviando...":"Enviar Reporte"})]}),5===f&&(0,r.jsxs)("div",{style:{textAlign:"center",padding:"32px 16px"},children:[(0,r.jsx)("div",{style:{width:64,height:64,borderRadius:"50%",margin:"0 auto 16px",background:"#10b98120",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#10b981",strokeWidth:"2",strokeLinecap:"round",children:(0,r.jsx)("path",{d:"M20 6L9 17l-5-5"})})}),(0,r.jsx)("div",{style:{fontSize:18,fontWeight:700,marginBottom:6},children:"Reporte Enviado!"}),I&&(0,r.jsxs)("div",{style:{fontSize:14,color:"var(--color-text-secondary, #6b7280)",marginBottom:4},children:["Protocolo #",I]}),(0,r.jsx)("div",{style:{fontSize:13,color:"var(--color-text-muted, #9ca3af)",marginBottom:24},children:"Vamos analisar e responder o mais rapido possivel"}),(0,r.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,r.jsx)("button",{onClick:et,style:{flex:1,padding:"12px 0",borderRadius:10,border:"1px solid var(--color-border, #e5e7eb)",background:"var(--color-bg-card, #fff)",color:"var(--color-text, #111)",fontSize:14,fontWeight:600,cursor:"pointer"},children:"Novo Reporte"}),(0,r.jsx)("button",{onClick:()=>{p("historico"),et()},style:{flex:1,padding:"12px 0",borderRadius:10,border:"none",background:"var(--color-primary, #6c5ce7)",color:"#fff",fontSize:14,fontWeight:600,cursor:"pointer"},children:"Ver Meus Reportes"})]})]})]}):(0,r.jsxs)(r.Fragment,{children:[O&&(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8,marginBottom:16},children:[{label:"Total",value:O.total,color:"#6366f1"},{label:"Abertos",value:O.open,color:"#3b82f6"},{label:"Analise",value:O.in_progress,color:"#f59e0b"},{label:"Resolvidos",value:O.resolved,color:"#10b981"}].map(e=>{var o;return(0,r.jsxs)("div",{style:{textAlign:"center",padding:"10px 4px",borderRadius:10,background:"var(--color-bg-card, #fff)",border:"1px solid var(--color-border, #e5e7eb)"},children:[(0,r.jsx)("div",{style:{fontSize:18,fontWeight:700,color:e.color},children:null!==(o=e.value)&&void 0!==o?o:0}),(0,r.jsx)("div",{style:{fontSize:10,color:"var(--color-text-muted, #9ca3af)",marginTop:2},children:e.label})]},e.label)})}),(0,r.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:12,overflowX:"auto",WebkitOverflowScrolling:"touch"},children:[(0,r.jsxs)("select",{value:H,onChange:e=>{V(e.target.value),Z(1)},style:{padding:"8px 12px",borderRadius:8,border:"1px solid var(--color-border, #e5e7eb)",background:"var(--color-bg-card, #fff)",fontSize:13,color:"var(--color-text, #111)",minWidth:100},children:[(0,r.jsx)("option",{value:"",children:"Todos status"}),(0,r.jsx)("option",{value:"open",children:"Aberto"}),(0,r.jsx)("option",{value:"in_progress",children:"Em Analise"}),(0,r.jsx)("option",{value:"resolved",children:"Resolvido"}),(0,r.jsx)("option",{value:"closed",children:"Fechado"})]}),(0,r.jsxs)("select",{value:q,onChange:e=>{U(e.target.value),Z(1)},style:{padding:"8px 12px",borderRadius:8,border:"1px solid var(--color-border, #e5e7eb)",background:"var(--color-bg-card, #fff)",fontSize:13,color:"var(--color-text, #111)",minWidth:120},children:[(0,r.jsx)("option",{value:"",children:"Todas categorias"}),d.map(e=>(0,r.jsx)("option",{value:e.key,children:e.label},e.key))]})]}),M?(0,r.jsx)("div",{children:[1,2,3].map(e=>(0,r.jsx)("div",{className:"skeleton-card",style:{height:80,marginBottom:8,borderRadius:10}},e))}):0===T.length?(0,r.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px"},children:[(0,r.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-text-muted, #d1d5db)",strokeWidth:"1.2",style:{margin:"0 auto 12px",display:"block"},children:[(0,r.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),(0,r.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,r.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),(0,r.jsx)("div",{style:{fontSize:15,fontWeight:600,marginBottom:4},children:"Nenhum reporte"}),(0,r.jsx)("div",{style:{fontSize:13,color:"var(--color-text-muted, #9ca3af)"},children:"Seus reportes aparecer\xe3o aqui"})]}):(0,r.jsxs)(r.Fragment,{children:[T.map(e=>{let o=function(e){for(let o of d)if(o.items.some(o=>o.key===e))return o;return null}(e.subcategory||e.type),t=h[e.status]||h.open,a=Q===e.id;return(0,r.jsxs)("div",{onClick:()=>K(a?null:e.id),style:{marginBottom:8,borderRadius:10,border:"1px solid var(--color-border, #e5e7eb)",background:"var(--color-bg-card, #fff)",overflow:"hidden",cursor:"pointer"},children:[(0,r.jsxs)("div",{style:{padding:"12px 14px"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:8},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,flex:1,minWidth:0},children:[o&&(0,r.jsx)("div",{style:{width:32,height:32,borderRadius:"50%",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",background:o.color+"18"},children:(0,r.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:o.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:o.icon})})}),(0,r.jsxs)("div",{style:{minWidth:0},children:[(0,r.jsx)("div",{style:{fontSize:14,fontWeight:600,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.label||ea(e.subcategory||e.type)}),(0,r.jsxs)("div",{style:{fontSize:12,color:"var(--color-text-muted, #9ca3af)"},children:[er(e.created_at),e.order_id?" \xb7 #".concat(e.order_id):""]})]})]}),(0,r.jsx)("span",{style:{padding:"3px 8px",borderRadius:6,fontSize:11,fontWeight:600,background:t.color+"18",color:t.color,whiteSpace:"nowrap"},children:t.label})]}),e.severity&&(0,r.jsx)("div",{style:{marginTop:6},children:(0,r.jsx)("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:10,fontWeight:600,background:(u[e.severity]||u.medium).bg,color:(u[e.severity]||u.medium).text},children:"critical"===e.severity?"CRITICO":"high"===e.severity?"ALTO":"medium"===e.severity?"MEDIO":"BAIXO"})})]}),a&&(0,r.jsxs)("div",{style:{padding:"0 14px 14px",borderTop:"1px solid var(--color-border, #e5e7eb)",paddingTop:12},children:[e.description&&(0,r.jsx)("p",{style:{fontSize:13,color:"var(--color-text-secondary, #6b7280)",lineHeight:1.5,marginBottom:8},children:e.description}),e.photo_urls&&e.photo_urls.length>0&&(0,r.jsx)("div",{style:{display:"flex",gap:6,marginBottom:8,overflowX:"auto"},children:e.photo_urls.map((e,o)=>(0,r.jsx)("img",{src:e,alt:"Foto ".concat(o+1),style:{width:80,height:80,borderRadius:8,objectFit:"cover",flexShrink:0}},o))}),e.resolution_note&&(0,r.jsxs)("div",{style:{padding:"8px 12px",borderRadius:8,background:"var(--color-bg-page, #f9fafb)",borderLeft:"3px solid #10b981"},children:[(0,r.jsx)("div",{style:{fontSize:11,fontWeight:600,color:"#10b981",marginBottom:4},children:"Resposta do Suporte"}),(0,r.jsx)("div",{style:{fontSize:13,color:"var(--color-text-secondary, #6b7280)",lineHeight:1.5},children:e.resolution_note}),e.resolved_at&&(0,r.jsxs)("div",{style:{fontSize:11,color:"var(--color-text-muted, #9ca3af)",marginTop:4},children:["Resolvido em ",er(e.resolved_at)]})]}),(0,r.jsxs)("div",{style:{fontSize:12,color:"var(--color-text-muted, #9ca3af)",marginTop:8},children:["ID: #",e.id,e.category&&" \xb7 ".concat((d.find(o=>o.key===e.category)||{}).label||e.category)]})]})]},e.id)}),G>1&&(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:12,marginTop:16},children:[(0,r.jsx)("button",{disabled:X<=1,onClick:()=>Z(e=>e-1),style:{padding:"8px 14px",borderRadius:8,border:"1px solid var(--color-border, #e5e7eb)",background:"var(--color-bg-card, #fff)",cursor:X<=1?"not-allowed":"pointer",opacity:X<=1?.4:1,fontSize:13},children:"Anterior"}),(0,r.jsxs)("span",{style:{fontSize:13,color:"var(--color-text-secondary, #6b7280)"},children:[X,"/",G]}),(0,r.jsx)("button",{disabled:X>=G,onClick:()=>Z(e=>e+1),style:{padding:"8px 14px",borderRadius:8,border:"1px solid var(--color-border, #e5e7eb)",background:"var(--color-bg-card, #fff)",cursor:X>=G?"not-allowed":"pointer",opacity:X>=G?.4:1,fontSize:13},children:"Proximo"})]})]})]})]})}function f(){return(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{className:"loading-screen",children:(0,r.jsx)("div",{className:"spinner"})}),children:(0,r.jsx)(p,{})}),(0,r.jsx)(c.Z,{})]})}}},function(e){e.O(0,[448,971,117,744],function(){return e(e.s=2447)}),_N_E=e.O()}]);