(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3144],{447:function(e,a,s){Promise.resolve().then(s.bind(s,4059))},4059:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return c}});var l=s(7437),n=s(2265),t=s(4565),o=s(4477),r=s(6428);let i=[{key:"perfil",label:"Perfil"},{key:"horarios",label:"Horarios"},{key:"entrega",label:"Entrega"},{key:"pagamentos",label:"Pagamentos"},{key:"pedidos",label:"Pedidos"}];function c(){return(0,l.jsx)(t.Z,{children:(0,l.jsx)(o.Z,{children:(0,l.jsx)(d,{})})})}function d(){let[e,a]=(0,n.useState)("perfil"),[s,t]=(0,n.useState)(null),[o,c]=(0,n.useState)(!0),[d,p]=(0,n.useState)(!1),[v,j]=(0,n.useState)(""),[f,b]=(0,n.useState)("");async function y(){c(!0);try{let e=await (0,r.SC)("/profile.php");t(e)}catch(e){j(e.message)}finally{c(!1)}}async function N(e){p(!0),j(""),b("");try{await (0,r.sg)("/profile.php",e),b("Salvo com sucesso!"),setTimeout(()=>b(""),3e3),await y()}catch(e){j(e.message)}finally{p(!1)}}return((0,n.useEffect)(()=>{y()},[]),o)?(0,l.jsx)("div",{className:"loading-screen",children:(0,l.jsx)("div",{className:"spinner"})}):v&&!s?(0,l.jsxs)("div",{className:"empty-state",children:[(0,l.jsx)("div",{className:"empty-state-title",children:"Erro ao carregar perfil"}),(0,l.jsx)("div",{className:"empty-state-text",children:v})]}):(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"page-header",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"page-title",children:"Minha Loja"}),(0,l.jsx)("p",{className:"page-subtitle",children:"Gerencie o perfil e configuracoes do seu estabelecimento"})]})}),f&&(0,l.jsx)("div",{className:"toast-inline toast-inline-success",children:f}),v&&s&&(0,l.jsx)("div",{className:"toast-inline toast-inline-error",children:v}),(0,l.jsx)("div",{className:"tabs",children:i.map(s=>(0,l.jsx)("button",{className:"tab ".concat(e===s.key?"tab-active":""),onClick:()=>{a(s.key),j(""),b("")},children:s.label},s.key))}),"perfil"===e&&(0,l.jsx)(m,{profile:s,onSave:N,saving:d,onReload:y}),"horarios"===e&&(0,l.jsx)(u,{profile:s,onSave:N,saving:d}),"entrega"===e&&(0,l.jsx)(h,{profile:s,onSave:N,saving:d}),"pagamentos"===e&&(0,l.jsx)(g,{profile:s,onSave:N,saving:d}),"pedidos"===e&&(0,l.jsx)(x,{profile:s,onSave:N,saving:d})]})}function m(e){let{profile:a,onSave:s,saving:t,onReload:o}=e,[i,c]=(0,n.useState)((null==a?void 0:a.trade_name)||""),[d,m]=(0,n.useState)((null==a?void 0:a.description)||""),[p,u]=(0,n.useState)((null==a?void 0:a.phone)||""),[h,g]=(0,n.useState)((null==a?void 0:a.whatsapp)||""),[x,v]=(0,n.useState)(null),j=(0,n.useRef)(null),f=(0,n.useRef)(null);async function b(e,a){if(a){v(e);try{let s=new FormData;s.append("file",a),s.append("type",e),await (0,r.zi)("/upload.php",s),o()}catch(e){alert(e.message)}finally{v(null)}}}return(0,l.jsxs)("div",{className:"card",children:[(0,l.jsx)("div",{className:"card-header",children:(0,l.jsx)("h2",{className:"card-title",children:"Perfil do Estabelecimento"})}),(0,l.jsxs)("div",{className:"upload-section",children:[(0,l.jsxs)("div",{className:"upload-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Logo"}),(0,l.jsxs)("div",{className:"upload-preview upload-logo-preview",onClick:()=>{var e;return null===(e=j.current)||void 0===e?void 0:e.click()},children:[(null==a?void 0:a.logo)?(0,l.jsx)("img",{src:a.logo,alt:"Logo"}):(0,l.jsxs)("div",{className:"upload-placeholder",children:[(0,l.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,l.jsx)("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"})}),(0,l.jsx)("span",{children:"Enviar logo"})]}),"logo"===x&&(0,l.jsx)("div",{className:"upload-overlay",children:(0,l.jsx)("div",{className:"spinner-sm"})})]}),(0,l.jsx)("input",{ref:j,type:"file",accept:"image/jpeg,image/png,image/webp",hidden:!0,onChange:e=>b("logo",e.target.files[0])})]}),(0,l.jsxs)("div",{className:"upload-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Banner"}),(0,l.jsxs)("div",{className:"upload-preview upload-banner-preview",onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},children:[(null==a?void 0:a.banner)?(0,l.jsx)("img",{src:a.banner,alt:"Banner"}):(0,l.jsxs)("div",{className:"upload-placeholder",children:[(0,l.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,l.jsx)("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"})}),(0,l.jsx)("span",{children:"Enviar banner"})]}),"banner"===x&&(0,l.jsx)("div",{className:"upload-overlay",children:(0,l.jsx)("div",{className:"spinner-sm"})})]}),(0,l.jsx)("input",{ref:f,type:"file",accept:"image/jpeg,image/png,image/webp",hidden:!0,onChange:e=>b("banner",e.target.files[0])})]})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Nome Fantasia"}),(0,l.jsx)("input",{className:"form-input",value:i,onChange:e=>c(e.target.value),placeholder:"Nome visivel para clientes"})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Descricao"}),(0,l.jsx)("textarea",{className:"form-input",rows:3,value:d,onChange:e=>m(e.target.value),placeholder:"Descreva seu estabelecimento..."})]}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Telefone"}),(0,l.jsx)("input",{className:"form-input",value:p,onChange:e=>u(e.target.value),placeholder:"(11) 99999-9999"})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"WhatsApp"}),(0,l.jsx)("input",{className:"form-input",value:h,onChange:e=>g(e.target.value),placeholder:"(11) 99999-9999"})]})]}),(0,l.jsx)("button",{className:"btn btn-primary",disabled:t,onClick:()=>s({trade_name:i,description:d,phone:p,whatsapp:h}),children:t?"Salvando...":"Salvar Perfil"})]})}let p=[{key:"seg",label:"Segunda-feira"},{key:"ter",label:"Terca-feira"},{key:"qua",label:"Quarta-feira"},{key:"qui",label:"Quinta-feira"},{key:"sex",label:"Sexta-feira"},{key:"sab",label:"Sabado"},{key:"dom",label:"Domingo"}];function u(e){let{profile:a,onSave:s,saving:t}=e,o=(null==a?void 0:a.horarios)||{},[r,i]=(0,n.useState)(o.opens_at||"08:00"),[c,d]=(0,n.useState)(o.closes_at||"22:00"),[m,u]=(0,n.useState)(!!o.open_sunday),[h,g]=(0,n.useState)(o.sunday_opens_at||"09:00"),[x,v]=(0,n.useState)(o.sunday_closes_at||"18:00"),[j,f]=(0,n.useState)(!!o.weekly_hours),b={};p.forEach(e=>{"dom"===e.key?b[e.key]={open:!!o.open_sunday,opens_at:o.sunday_opens_at||"09:00",closes_at:o.sunday_closes_at||"18:00"}:b[e.key]={open:!0,opens_at:o.opens_at||"08:00",closes_at:o.closes_at||"22:00"}});let[y,N]=(0,n.useState)(o.weekly_hours||b);function _(e,a,s){N(l=>({...l,[e]:{...l[e],[a]:s}}))}return(0,l.jsxs)("div",{className:"card",children:[(0,l.jsxs)("div",{className:"card-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:12},children:[(0,l.jsx)("h2",{className:"card-title",children:"Horario de Funcionamento"}),(0,l.jsxs)("div",{className:"toggle-row",style:{gap:8},children:[(0,l.jsx)("span",{style:{fontSize:13,color:"var(--color-text-secondary)"},children:"Por dia da semana"}),(0,l.jsx)("button",{className:"toggle-switch ".concat(j?"toggle-on":""),onClick:()=>f(!j),type:"button",children:(0,l.jsx)("span",{className:"toggle-knob"})})]})]}),j?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{style:{marginBottom:12},children:(0,l.jsx)("button",{className:"btn btn-secondary",onClick:function(){let e=y[p[0].key],a={};p.forEach(s=>{a[s.key]={...e}}),N(a)},type:"button",style:{fontSize:13},children:"Copiar Segunda para todos os dias"})}),p.map(e=>{let a=y[e.key]||{open:!0,opens_at:"08:00",closes_at:"22:00"};return(0,l.jsxs)("div",{className:"weekly-hours-row",children:[(0,l.jsx)("div",{className:"weekly-hours-day",children:e.label}),(0,l.jsx)("button",{className:"toggle-switch ".concat(a.open?"toggle-on":""),onClick:()=>_(e.key,"open",!a.open),type:"button",title:a.open?"Aberto":"Fechado",children:(0,l.jsx)("span",{className:"toggle-knob"})}),a.open?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{type:"time",className:"form-input",style:{width:130,flex:"none"},value:a.opens_at,onChange:a=>_(e.key,"opens_at",a.target.value)}),(0,l.jsx)("span",{style:{color:"var(--color-text-secondary)",fontSize:13},children:"ate"}),(0,l.jsx)("input",{type:"time",className:"form-input",style:{width:130,flex:"none"},value:a.closes_at,onChange:a=>_(e.key,"closes_at",a.target.value)})]}):(0,l.jsx)("span",{style:{color:"var(--color-text-muted)",fontSize:13,fontStyle:"italic"},children:"Fechado"})]},e.key)})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Abre as"}),(0,l.jsx)("input",{type:"time",className:"form-input",value:r,onChange:e=>i(e.target.value)})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Fecha as"}),(0,l.jsx)("input",{type:"time",className:"form-input",value:c,onChange:e=>d(e.target.value)})]})]}),(0,l.jsx)("div",{className:"form-group",style:{marginTop:16},children:(0,l.jsxs)("div",{className:"toggle-row",children:[(0,l.jsx)("span",{className:"form-label",style:{marginBottom:0},children:"Aberto aos Domingos"}),(0,l.jsx)("button",{className:"toggle-switch ".concat(m?"toggle-on":""),onClick:()=>u(!m),type:"button",children:(0,l.jsx)("span",{className:"toggle-knob"})})]})}),m&&(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Domingo abre as"}),(0,l.jsx)("input",{type:"time",className:"form-input",value:h,onChange:e=>g(e.target.value)})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Domingo fecha as"}),(0,l.jsx)("input",{type:"time",className:"form-input",value:x,onChange:e=>v(e.target.value)})]})]})]}),(0,l.jsx)("button",{className:"btn btn-primary",disabled:t,style:{marginTop:16},onClick:function(){if(j){let e=y.seg||{},a=y.dom||{};s({opens_at:e.opens_at||"08:00",closes_at:e.closes_at||"22:00",open_sunday:a.open?1:0,sunday_opens_at:a.opens_at||"09:00",sunday_closes_at:a.closes_at||"18:00",weekly_hours:y})}else s({opens_at:r,closes_at:c,open_sunday:m?1:0,sunday_opens_at:h,sunday_closes_at:x,weekly_hours:null})},children:t?"Salvando...":"Salvar Horarios"})]})}function h(e){let{profile:a,onSave:s,saving:t}=e,o=(null==a?void 0:a.entrega)||{},[r,i]=(0,n.useState)(o.delivery_fee||0),[c,d]=(0,n.useState)(o.free_delivery_above||0),[m,p]=(0,n.useState)(o.min_order_value||0),[u,h]=(0,n.useState)(o.delivery_radius_km||5),[g,x]=(0,n.useState)(o.tempo_preparo||30),[v,j]=(0,n.useState)(!1!==o.aceita_retirada),[f,b]=(0,n.useState)(!!o.entrega_propria),[y,N]=(0,n.useState)(!1!==o.aceita_boraum);return(0,l.jsxs)("div",{className:"card",children:[(0,l.jsx)("div",{className:"card-header",children:(0,l.jsx)("h2",{className:"card-title",children:"Configuracoes de Entrega"})}),(0,l.jsxs)("div",{style:{marginBottom:20,padding:16,background:"#f8f9fa",borderRadius:8},children:[(0,l.jsx)("h3",{style:{margin:"0 0 12px",fontSize:15,fontWeight:600},children:"Opcoes de Entrega"}),(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[(0,l.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[(0,l.jsx)("input",{type:"checkbox",checked:v,onChange:e=>j(e.target.checked)}),(0,l.jsxs)("span",{children:[(0,l.jsx)("strong",{children:"Retirada no local"})," - Cliente retira no seu estabelecimento (comissao 10%)"]})]}),(0,l.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[(0,l.jsx)("input",{type:"checkbox",checked:f,onChange:e=>b(e.target.checked)}),(0,l.jsxs)("span",{children:[(0,l.jsx)("strong",{children:"Entrega propria"})," - Voce entrega com seu entregador (comissao 10%)"]})]}),(0,l.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[(0,l.jsx)("input",{type:"checkbox",checked:y,onChange:e=>N(e.target.checked)}),(0,l.jsxs)("span",{children:[(0,l.jsx)("strong",{children:"Entrega BoraUm"})," - Entregador da plataforma busca e entrega (comissao 18%)"]})]})]}),!v&&!f&&!y&&(0,l.jsx)("div",{style:{color:"#dc3545",marginTop:8,fontSize:13},children:"Selecione pelo menos uma opcao de entrega."})]}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Taxa de Entrega (R$)"}),(0,l.jsx)("input",{type:"number",step:"0.50",min:"0",className:"form-input",value:r,onChange:e=>i(e.target.value)})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Frete Gratis acima de (R$)"}),(0,l.jsx)("input",{type:"number",step:"1",min:"0",className:"form-input",value:c,onChange:e=>d(e.target.value)}),(0,l.jsx)("div",{className:"form-hint",children:"0 = sem frete gratis"})]})]}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Pedido Minimo (R$)"}),(0,l.jsx)("input",{type:"number",step:"1",min:"0",className:"form-input",value:m,onChange:e=>p(e.target.value)})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Raio de Entrega (km)"}),(0,l.jsx)("input",{type:"number",step:"0.5",min:"1",className:"form-input",value:u,onChange:e=>h(e.target.value)})]})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Tempo de Preparo (minutos)"}),(0,l.jsx)("input",{type:"number",step:"5",min:"5",className:"form-input",style:{maxWidth:200},value:g,onChange:e=>x(e.target.value)})]}),(0,l.jsx)("button",{className:"btn btn-primary",disabled:t||!v&&!f&&!y,style:{marginTop:8},onClick:()=>s({delivery_fee:parseFloat(r),free_delivery_above:parseFloat(c),min_order_value:parseFloat(m),delivery_radius_km:parseFloat(u),tempo_preparo:parseInt(g),aceita_retirada:v?1:0,entrega_propria:f?1:0,aceita_boraum:y?1:0}),children:t?"Salvando...":"Salvar Entrega"})]})}function g(e){let{profile:a,onSave:s,saving:t}=e,o=(null==a?void 0:a.pagamentos)||{},[r,i]=(0,n.useState)(!!o.accepts_pix),[c,d]=(0,n.useState)(!!o.accepts_card);return(0,l.jsxs)("div",{className:"card",children:[(0,l.jsx)("div",{className:"card-header",children:(0,l.jsx)("h2",{className:"card-title",children:"Formas de Pagamento"})}),(0,l.jsxs)("div",{className:"toggle-section",children:[(0,l.jsxs)("div",{className:"toggle-row",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"toggle-row-label",children:"Aceitar PIX"}),(0,l.jsx)("div",{className:"toggle-row-desc",children:"Receba pagamentos via PIX"})]}),(0,l.jsx)("button",{className:"toggle-switch ".concat(r?"toggle-on":""),onClick:()=>i(!r),type:"button",children:(0,l.jsx)("span",{className:"toggle-knob"})})]}),(0,l.jsxs)("div",{className:"toggle-row",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"toggle-row-label",children:"Aceitar Cartao"}),(0,l.jsx)("div",{className:"toggle-row-desc",children:"Receba pagamentos com cartao de credito/debito"})]}),(0,l.jsx)("button",{className:"toggle-switch ".concat(c?"toggle-on":""),onClick:()=>d(!c),type:"button",children:(0,l.jsx)("span",{className:"toggle-knob"})})]})]}),(0,l.jsx)("button",{className:"btn btn-primary",disabled:t,style:{marginTop:16},onClick:()=>s({accepts_pix:r?1:0,accepts_card:c?1:0}),children:t?"Salvando...":"Salvar Pagamentos"})]})}function x(e){let{profile:a,onSave:s,saving:t}=e,[o,r]=(0,n.useState)(!!(null==a?void 0:a.auto_accept));return(0,l.jsxs)("div",{className:"card",children:[(0,l.jsx)("div",{className:"card-header",children:(0,l.jsx)("h2",{className:"card-title",children:"Configuracoes de Pedidos"})}),(0,l.jsx)("div",{className:"toggle-section",children:(0,l.jsxs)("div",{className:"toggle-row",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"toggle-row-label",children:"Aceitar pedidos automaticamente"}),(0,l.jsx)("div",{className:"toggle-row-desc",children:"Pedidos serao confirmados automaticamente sem necessidade de acao manual"})]}),(0,l.jsx)("button",{className:"toggle-switch ".concat(o?"toggle-on":""),onClick:()=>r(!o),type:"button",children:(0,l.jsx)("span",{className:"toggle-knob"})})]})}),o&&(0,l.jsxs)("div",{style:{padding:"12px 16px",background:"#fef9c3",borderRadius:8,fontSize:13,color:"#854d0e",marginTop:12,display:"flex",alignItems:"flex-start",gap:8},children:[(0,l.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{flexShrink:0,marginTop:1},children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,l.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,l.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),(0,l.jsx)("span",{children:'Com esta opcao ativada, todos os novos pedidos serao aceitos automaticamente e o status mudara para "Aceito" sem necessidade de confirmacao manual. Certifique-se de que sua loja esta preparada para atender os pedidos imediatamente.'})]}),(0,l.jsx)("button",{className:"btn btn-primary",disabled:t,style:{marginTop:16},onClick:()=>s({auto_accept:o?1:0}),children:t?"Salvando...":"Salvar Configuracoes"})]})}}},function(e){e.O(0,[3448,565,2205,2971,2117,1744],function(){return e(e.s=447)}),_N_E=e.O()}]);