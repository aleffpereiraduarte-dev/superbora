(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1157],{2132:function(e,t,i){Promise.resolve().then(i.bind(i,7290))},7290:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return h}});var o=i(7437),a=i(2265),n=i(4565),s=i(4477),r=i(7128),l=i(6428);let d={IMPORT:"import",COMPARE:"compare",DESCRIPTIONS:"descriptions",PRICES:"prices",ANALYSIS:"analysis",COMBOS:"combos",NUTRITION:"nutrition",PHOTO:"photo",ENHANCE:"enhance"},c={[d.IMPORT]:{label:"Importar Cardapio",icon:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",desc:"Fotos, PDF ou texto → produtos automaticamente",color:"#2563eb"},[d.COMPARE]:{label:"Comparar Cardapio",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4",desc:"Upload novo cardapio e compare com o atual",color:"#8b5cf6"},[d.DESCRIPTIONS]:{label:"Gerar Descricoes",icon:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z",desc:"Descricoes apetitosas com IA",color:"#7c3aed"},[d.PRICES]:{label:"Sugerir Precos",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z",desc:"Precos otimizados com dados de vendas",color:"#059669"},[d.ANALYSIS]:{label:"Analise do Cardapio",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",desc:"Diagnostico completo com score e sugestoes",color:"#dc2626"},[d.COMBOS]:{label:"Sugerir Combos",icon:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",desc:"Combos lucrativos baseados em vendas",color:"#ea580c"},[d.NUTRITION]:{label:"Info Nutricional",icon:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z",desc:"Estimativas de calorias e nutrientes",color:"#0891b2"},[d.PHOTO]:{label:"Analisar Foto",icon:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z M15 13a3 3 0 11-6 0 3 3 0 016 0z",desc:"Foto → nome, descricao, categoria",color:"#be185d"},[d.ENHANCE]:{label:"Melhorar Tudo",icon:"M13 10V3L4 14h7v7l9-11h-7z",desc:"Gerar descricoes para todos os produtos",color:"#4f46e5"}},p=[{value:"appetizing",label:"Apetitoso",emoji:""},{value:"professional",label:"Profissional",emoji:""},{value:"casual",label:"Casual",emoji:""},{value:"gourmet",label:"Gourmet",emoji:""},{value:"fun",label:"Divertido",emoji:""}];function h(){return(0,o.jsx)(n.Z,{children:(0,o.jsx)(s.Z,{children:(0,o.jsx)(g,{})})})}function g(){let{partner:e}=(0,r.a)(),[t,i]=(0,a.useState)(null),[n,s]=(0,a.useState)(!1),[h,g]=(0,a.useState)(""),[b,k]=(0,a.useState)(null),[C,w]=(0,a.useState)([]),[A,N]=(0,a.useState)(!1),_=(0,a.useRef)(null),[B,R]=(0,a.useState)(!1),[W,I]=(0,a.useState)([]),[P,T]=(0,a.useState)({}),[E,L]=(0,a.useState)("upload"),[M,O]=(0,a.useState)(null),[D,F]=(0,a.useState)([]),[H,V]=(0,a.useState)(""),G=(0,a.useRef)(null),[q,U]=(0,a.useState)("upload"),[$,Y]=(0,a.useState)(null),[J,Z]=(0,a.useState)({}),[Q,X]=(0,a.useState)("appetizing"),[K,ee]=(0,a.useState)([]),[et,ei]=(0,a.useState)({}),eo=(0,a.useRef)(null),ea=(0,a.useCallback)(async()=>{if(!(C.length>0)){N(!0);try{let e=await (0,l.SC)("/produtos.php");w(e.products||e||[])}catch(e){console.error("Failed to load products:",e)}N(!1)}},[C.length]);async function en(e){if(!e||0===e.length)return;let t=Array.from(e),i=["image/jpeg","image/png","image/webp","image/gif"],o="application/pdf";for(let e of t){if(!i.includes(e.type)&&e.type!==o){g("Formato nao suportado. Use JPEG, PNG, WebP, GIF ou PDF.");return}if(e.size>20971520){g('Arquivo "'.concat(e.name,'" muito grande. Max 20 MB.'));return}}if(t.length>10){g("Maximo de 10 arquivos por vez.");return}F(t.map(e=>({name:e.name,type:e.type,size:e.size,url:e.type.startsWith("image/")?URL.createObjectURL(e):null}))),g(""),L("processing");let a=t.some(e=>e.type===o),n=t.length;V(a?"Convertendo PDF e analisando com IA...":n>1?"Analisando ".concat(n," paginas com IA..."):"Analisando cardapio com IA...");try{let e=new FormData,i=t.find(e=>e.type===o);i?e.append("pdf",i):1===t.length?e.append("image",t[0]):t.forEach(t=>e.append("images[]",t));let a=(await (0,l.zi)("/ai-menu.php",e)).categories||[];I(a);let n={};a.forEach((e,t)=>(e.products||[]).forEach((e,i)=>{n["".concat(t,"-").concat(i)]=!0})),T(n),L("review")}catch(e){g(e.message||"Erro ao processar"),L("upload")}}async function es(e){if(e.trim()){g(""),L("processing");try{let t=(await (0,l.sg)("/ai-menu.php",{text:e})).categories||[];I(t);let i={};t.forEach((e,t)=>(e.products||[]).forEach((e,o)=>{i["".concat(t,"-").concat(o)]=!0})),T(i),L("review")}catch(e){g(e.message||"Erro ao processar"),L("upload")}}}async function er(e){if(!e||0===e.length)return;let t=Array.from(e);g(""),U("processing"),V("Comparando cardapio novo com o atual...");try{let e=new FormData,i=t.find(e=>"application/pdf"===e.type);i?e.append("pdf",i):1===t.length?e.append("image",t[0]):t.forEach(t=>e.append("images[]",t));let o=await (0,l.zi)("/ai-menu-compare.php",e);Y(o);let a={};(o.new_items||[]).forEach((e,t)=>{a["new-".concat(t)]=!0}),(o.price_changes||[]).forEach((e,t)=>{a["price-".concat(t)]=!0}),(o.removed_items||[]).forEach((e,t)=>{a["remove-".concat(t)]=!1}),Z(a),U("review")}catch(e){g(e.message||"Erro ao comparar"),U("upload")}}async function el(e){if(e.trim()){g(""),U("processing"),V("Comparando cardapio com o atual...");try{let t=await (0,l.sg)("/ai-menu-compare.php",{text:e});Y(t);let i={};(t.new_items||[]).forEach((e,t)=>{i["new-".concat(t)]=!0}),(t.price_changes||[]).forEach((e,t)=>{i["price-".concat(t)]=!0}),(t.removed_items||[]).forEach((e,t)=>{i["remove-".concat(t)]=!1}),Z(i),U("review")}catch(e){g(e.message||"Erro ao comparar"),U("upload")}}}async function ed(){U("syncing");let e={add:[],update_prices:[],deactivate:[]};if($&&(($.new_items||[]).forEach((t,i)=>{J["new-".concat(i)]&&e.add.push({name:t.name,description:t.description||"",price:t.price,category:t.category||"Geral"})}),($.price_changes||[]).forEach((t,i)=>{J["price-".concat(i)]&&e.update_prices.push({product_id:t.product_id,new_price:t.new_price})}),($.removed_items||[]).forEach((t,i)=>{J["remove-".concat(i)]&&e.deactivate.push(t.product_id)})),0===e.add.length+e.update_prices.length+e.deactivate.length){g("Selecione pelo menos 1 acao"),U("review");return}try{let t=await (0,l.sg)("/ai-menu-sync.php",{actions:e}),i=t.data||t;Y(e=>({...e,syncResult:{added:i.added||0,updated:i.price_updated||0,deactivated:i.deactivated||0}})),U("done")}catch(e){g(e.message||"Erro ao sincronizar"),U("review")}}async function ec(){L("importing");let e={categories:[]};if(W.forEach((t,i)=>{let o=(t.products||[]).filter((e,t)=>P["".concat(i,"-").concat(t)]);o.length>0&&e.categories.push({name:t.name,products:o})}),0===e.categories.length){g("Selecione pelo menos 1 produto"),L("review");return}try{let t=await (0,l.sg)("/ai-menu-confirm.php",e);O(t),L("done")}catch(e){g(e.message||"Erro ao importar"),L("review")}}async function ep(){if(0===K.length){g("Selecione pelo menos 1 produto");return}s(!0),g("");try{let e=C.filter(e=>K.includes(e.product_id||e.id)),t=await (0,l.sg)("/ai-tools.php",{action:"generate_descriptions",products:e.map(e=>({id:e.product_id||e.id,nome:e.name||e.nome,descricao:e.description||e.descricao||"",preco:e.price||e.preco,categoria:e.category_name||e.categoria||""})),style:Q});k(t)}catch(e){g(e.message||"Erro")}s(!1)}async function eh(){s(!0),g("");try{let e=await (0,l.sg)("/ai-tools.php",{action:"suggest_prices"});k(e)}catch(e){g(e.message||"Erro")}s(!1)}async function eg(){s(!0),g("");try{let e=await (0,l.sg)("/ai-tools.php",{action:"menu_analysis"});k(e)}catch(e){g(e.message||"Erro")}s(!1)}async function ex(){s(!0),g("");try{let e=await (0,l.sg)("/ai-tools.php",{action:"suggest_combos"});k(e)}catch(e){g(e.message||"Erro")}s(!1)}async function ef(){if(0===K.length){g("Selecione pelo menos 1 produto");return}s(!0),g("");try{let e=C.filter(e=>K.includes(e.product_id||e.id)),t=await (0,l.sg)("/ai-tools.php",{action:"nutritional_info",products:e.map(e=>({nome:e.name||e.nome,descricao:e.description||e.descricao||""}))});k(t)}catch(e){g(e.message||"Erro")}s(!1)}async function eu(e){if(e){s(!0),g("");try{let t=new FormData;t.append("image",e),t.append("action","photo_analysis");let i=await (0,l.zi)("/ai-tools.php",t);k(i)}catch(e){g(e.message||"Erro")}s(!1)}}async function em(){s(!0),g("");try{let e=await (0,l.sg)("/ai-tools.php",{action:"bulk_enhance",only_empty_descriptions:!0,limit:30});k(e)}catch(e){g(e.message||"Erro")}s(!1)}async function ey(e,t){try{await (0,l.sg)("/ai-tools.php",{action:"apply_description",product_id:e,description:t}),ei(t=>({...t,[e]:!0}))}catch(e){g(e.message||"Erro ao aplicar")}}async function ej(e){s(!0);try{await (0,l.sg)("/ai-tools.php",{action:"apply_bulk",items:e.map(e=>({id:e.id,descricao:e.descricao||e.description}))});let t={};e.forEach(e=>{t[e.id]=!0}),ei(e=>({...e,...t}))}catch(e){g(e.message||"Erro ao aplicar")}s(!1)}let eb=Object.values(P).filter(Boolean).length,ev=e=>parseFloat(e||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"});return(0,o.jsxs)("div",{className:"page-container",children:[(0,o.jsxs)("div",{className:"page-header",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"page-title",children:"Cardapio com IA"}),(0,o.jsx)("p",{className:"page-subtitle",children:"Ferramentas inteligentes para otimizar seu cardapio"})]}),t&&(0,o.jsx)("button",{className:"btn btn-secondary",onClick:()=>{i(null),k(null),g(""),ee([])},children:"Voltar"})]}),h&&(0,o.jsxs)("div",{className:"alert alert-error",style:{marginBottom:16},children:[h,(0,o.jsx)("button",{onClick:()=>g(""),style:{marginLeft:8,background:"none",border:"none",cursor:"pointer",color:"inherit"},children:"x"})]}),!t&&(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:16},children:Object.entries(c).map(e=>{let[t,a]=e;return(0,o.jsxs)("button",{onClick:()=>{i(t),g(""),k(null),ei({}),[d.DESCRIPTIONS,d.PRICES,d.NUTRITION,d.COMBOS,d.ANALYSIS,d.ENHANCE].includes(t)&&ea(),t===d.IMPORT&&(L("upload"),I([]),T({}),O(null),F([])),t===d.COMPARE&&(U("upload"),Y(null),Z({}),F([]))},style:{background:"#fff",border:"1px solid #e2e8f0",borderRadius:12,padding:24,cursor:"pointer",textAlign:"left",transition:"all 0.2s",borderLeft:"4px solid ".concat(a.color)},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},onMouseOut:e=>{e.currentTarget.style.transform="",e.currentTarget.style.boxShadow=""},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[(0,o.jsx)("div",{style:{width:40,height:40,borderRadius:10,background:"".concat(a.color,"15"),display:"flex",alignItems:"center",justifyContent:"center"},children:(0,o.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:a.color,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,o.jsx)("path",{d:a.icon})})}),(0,o.jsx)("span",{style:{fontSize:16,fontWeight:600,color:"#1e293b"},children:a.label})]}),(0,o.jsx)("p",{style:{fontSize:13,color:"#64748b",margin:0,lineHeight:1.5},children:a.desc})]},t)})}),t===d.IMPORT&&(0,o.jsx)(S,{step:E,categories:W,setCategories:I,selectedProducts:P,setSelectedProducts:T,selectedCount:eb,importResult:M,fileInputRef:_,dragOver:B,setDragOver:R,onFiles:en,onText:es,onConfirm:ec,onReset:()=>{L("upload"),I([]),T({}),O(null),F([]),g("")},formatPrice:ev,uploadedFiles:D,processingText:H}),t===d.COMPARE&&(0,o.jsx)(z,{step:q,result:$,selections:J,setSelections:Z,fileInputRef:G,dragOver:B,setDragOver:R,onFiles:er,onText:el,onConfirm:ed,onReset:()=>{U("upload"),Y(null),Z({}),F([]),g("")},formatPrice:ev,processingText:H}),t===d.DESCRIPTIONS&&(0,o.jsx)("div",{children:b?(0,o.jsx)(f,{descriptions:b.descriptions||[],appliedDescs:et,onApply:ey,onApplyAll:()=>ej(b.descriptions||[]),loading:n}):(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"card",style:{marginBottom:16},children:[(0,o.jsx)("h3",{style:{fontSize:16,fontWeight:600,marginBottom:12},children:"Estilo das Descricoes"}),(0,o.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:p.map(e=>(0,o.jsx)("button",{onClick:()=>X(e.value),style:{padding:"8px 16px",borderRadius:20,border:"2px solid ".concat(Q===e.value?"#2563eb":"#e2e8f0"),background:Q===e.value?"#eff6ff":"#fff",cursor:"pointer",fontSize:13,fontWeight:Q===e.value?600:400,color:Q===e.value?"#2563eb":"#64748b"},children:e.label},e.value))})]}),(0,o.jsx)(x,{products:C,loading:A,selected:K,setSelected:ee}),(0,o.jsx)("div",{style:{marginTop:16,textAlign:"right"},children:(0,o.jsx)("button",{className:"btn btn-primary",onClick:ep,disabled:n||0===K.length,children:n?"Gerando...":"Gerar Descricoes (".concat(K.length,")")})})]})}),t===d.PRICES&&(0,o.jsx)("div",{children:b?(0,o.jsx)(u,{data:b}):(0,o.jsxs)("div",{className:"card",style:{textAlign:"center",padding:32},children:[(0,o.jsx)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#059669",strokeWidth:"1.5",style:{margin:"0 auto 16px"},children:(0,o.jsx)("path",{d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,o.jsx)("h3",{style:{fontSize:18,fontWeight:600,marginBottom:8},children:"Analise de Precos com IA"}),(0,o.jsx)("p",{style:{color:"#64748b",fontSize:14,marginBottom:24},children:"A IA vai analisar seus precos atuais, volume de vendas e sugerir ajustes para maximizar receita."}),(0,o.jsx)("button",{className:"btn btn-primary",onClick:eh,disabled:n,children:n?"Analisando...":"Analisar Precos"})]})}),t===d.ANALYSIS&&(0,o.jsx)("div",{children:b?(0,o.jsx)(m,{data:b}):(0,o.jsxs)("div",{className:"card",style:{textAlign:"center",padding:32},children:[(0,o.jsx)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#dc2626",strokeWidth:"1.5",style:{margin:"0 auto 16px"},children:(0,o.jsx)("path",{d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,o.jsx)("h3",{style:{fontSize:18,fontWeight:600,marginBottom:8},children:"Diagnostico Completo do Cardapio"}),(0,o.jsx)("p",{style:{color:"#64748b",fontSize:14,marginBottom:24},children:"Analise profunda: variedade, precos, descricoes, categorias e estrategia. Receba um score e acoes para melhorar."}),(0,o.jsx)("button",{className:"btn btn-primary",onClick:eg,disabled:n,children:n?"Analisando...":"Iniciar Diagnostico"})]})}),t===d.COMBOS&&(0,o.jsx)("div",{children:b?(0,o.jsx)(y,{data:b,formatPrice:ev}):(0,o.jsxs)("div",{className:"card",style:{textAlign:"center",padding:32},children:[(0,o.jsx)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#ea580c",strokeWidth:"1.5",style:{margin:"0 auto 16px"},children:(0,o.jsx)("path",{d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,o.jsx)("h3",{style:{fontSize:18,fontWeight:600,marginBottom:8},children:"Sugestoes de Combos Inteligentes"}),(0,o.jsx)("p",{style:{color:"#64748b",fontSize:14,marginBottom:24},children:"A IA analisa seus produtos e dados de vendas para sugerir combos lucrativos e atraentes."}),(0,o.jsx)("button",{className:"btn btn-primary",onClick:ex,disabled:n,children:n?"Analisando...":"Gerar Sugestoes de Combos"})]})}),t===d.NUTRITION&&(0,o.jsx)("div",{children:b?(0,o.jsx)(j,{data:b}):(0,o.jsxs)("div",{children:[(0,o.jsx)(x,{products:C,loading:A,selected:K,setSelected:ee}),(0,o.jsx)("div",{style:{marginTop:16,textAlign:"right"},children:(0,o.jsx)("button",{className:"btn btn-primary",onClick:ef,disabled:n||0===K.length,children:n?"Estimando...":"Estimar Nutricional (".concat(K.length,")")})})]})}),t===d.PHOTO&&(0,o.jsx)("div",{children:b?(0,o.jsx)(v,{data:b}):(0,o.jsxs)("div",{className:"card",children:[(0,o.jsxs)("div",{style:{border:"2px dashed #cbd5e1",borderRadius:12,padding:48,textAlign:"center",background:"#fafbfc",cursor:"pointer",transition:"all 0.2s"},onClick:()=>{var e;return null===(e=eo.current)||void 0===e?void 0:e.click()},children:[(0,o.jsx)("input",{ref:eo,type:"file",accept:"image/*",style:{display:"none"},onChange:e=>eu(e.target.files[0])}),(0,o.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#94a3b8",strokeWidth:"1.5",style:{margin:"0 auto 16px"},children:[(0,o.jsx)("path",{d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("circle",{cx:"12",cy:"13",r:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,o.jsx)("p",{style:{fontSize:16,fontWeight:500,color:"#374151"},children:n?"Analisando foto...":"Clique para enviar foto de um produto"}),(0,o.jsx)("p",{style:{fontSize:13,color:"#94a3b8",marginTop:8},children:"A IA identifica o produto, sugere nome, descricao e avalia a qualidade da foto"})]}),n&&(0,o.jsx)("div",{className:"spinner",style:{margin:"16px auto"}})]})}),t===d.ENHANCE&&(0,o.jsx)("div",{children:b?(0,o.jsx)(f,{descriptions:(b.enhanced||[]).map(e=>({id:e.id,name:e.nome,description:e.descricao})),appliedDescs:et,onApply:ey,onApplyAll:()=>ej(b.enhanced||[]),loading:n,showCount:b.count}):(0,o.jsxs)("div",{className:"card",style:{textAlign:"center",padding:32},children:[(0,o.jsx)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4f46e5",strokeWidth:"1.5",style:{margin:"0 auto 16px"},children:(0,o.jsx)("path",{d:"M13 10V3L4 14h7v7l9-11h-7z",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,o.jsx)("h3",{style:{fontSize:18,fontWeight:600,marginBottom:8},children:"Melhorar Todos os Produtos"}),(0,o.jsx)("p",{style:{color:"#64748b",fontSize:14,marginBottom:24},children:"Gera descricoes automaticas para todos os produtos que ainda nao tem descricao. Voce revisa antes de aplicar."}),(0,o.jsx)("button",{className:"btn btn-primary",onClick:em,disabled:n,children:n?"Gerando descricoes...":"Gerar Descricoes em Massa"})]})}),n&&t&&![d.IMPORT,d.PHOTO].includes(t)&&(0,o.jsxs)("div",{style:{position:"fixed",bottom:24,right:24,background:"#1e293b",color:"#fff",padding:"12px 20px",borderRadius:12,display:"flex",alignItems:"center",gap:10,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:1e3},children:[(0,o.jsx)("div",{className:"spinner",style:{width:18,height:18,borderWidth:2}}),(0,o.jsx)("span",{style:{fontSize:14},children:"IA processando..."})]})]})}function x(e){let{products:t,loading:i,selected:n,setSelected:s}=e,[r,l]=(0,a.useState)(""),d=t.filter(e=>(e.name||e.nome||"").toLowerCase().includes(r.toLowerCase()));return i?(0,o.jsx)("div",{className:"card",style:{textAlign:"center",padding:32},children:(0,o.jsx)("div",{className:"spinner"})}):(0,o.jsxs)("div",{className:"card",style:{padding:0},children:[(0,o.jsxs)("div",{style:{padding:"12px 16px",borderBottom:"1px solid #e2e8f0",display:"flex",gap:12,alignItems:"center"},children:[(0,o.jsx)("input",{className:"form-input",placeholder:"Buscar produtos...",value:r,onChange:e=>l(e.target.value),style:{flex:1,margin:0}}),(0,o.jsx)("button",{onClick:function(){n.length===d.length?s([]):s(d.map(e=>e.product_id||e.id))},style:{fontSize:13,color:"#2563eb",background:"none",border:"none",cursor:"pointer",whiteSpace:"nowrap"},children:n.length===d.length?"Desmarcar Todos":"Selecionar Todos"}),(0,o.jsxs)("span",{style:{fontSize:12,color:"#94a3b8",whiteSpace:"nowrap"},children:[n.length," selecionado(s)"]})]}),(0,o.jsxs)("div",{style:{maxHeight:400,overflowY:"auto"},children:[d.map(e=>{let t=e.product_id||e.id,i=e.name||e.nome,a=e.price||e.preco,r=e.description||e.descricao||"",l=n.includes(t);return(0,o.jsxs)("div",{onClick:()=>{s(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},style:{padding:"10px 16px",borderBottom:"1px solid #f1f5f9",cursor:"pointer",display:"flex",alignItems:"center",gap:12,background:l?"#eff6ff":"#fff"},children:[(0,o.jsx)("input",{type:"checkbox",checked:l,readOnly:!0,style:{accentColor:"#2563eb"}}),(0,o.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,o.jsx)("div",{style:{fontSize:14,fontWeight:500,color:"#1e293b"},children:i}),r?(0,o.jsx)("div",{style:{fontSize:12,color:"#64748b",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r}):(0,o.jsx)("div",{style:{fontSize:12,color:"#f59e0b",fontStyle:"italic"},children:"Sem descricao"})]}),(0,o.jsx)("span",{style:{fontSize:13,color:"#64748b",whiteSpace:"nowrap"},children:parseFloat(a||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]},t)}),0===d.length&&(0,o.jsx)("div",{style:{padding:24,textAlign:"center",color:"#94a3b8"},children:"Nenhum produto encontrado"})]})]})}function f(e){let{descriptions:t,appliedDescs:i,onApply:a,onApplyAll:n,loading:s,showCount:r}=e,l=t.filter(e=>!i[e.id]);return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"card",style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)("span",{style:{fontSize:15,fontWeight:600},children:[null!=r?r:t.length," descricao(oes) gerada(s)"]}),l.length>0&&(0,o.jsxs)("button",{className:"btn btn-primary",onClick:n,disabled:s,children:["Aplicar Todas (",l.length,")"]})]}),t.map((e,t)=>{let n=i[e.id];return(0,o.jsxs)("div",{className:"card",style:{marginBottom:12,borderLeft:"4px solid ".concat(n?"#16a34a":"#7c3aed")},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8},children:[(0,o.jsx)("h4",{style:{fontSize:15,fontWeight:600,margin:0},children:e.name||e.nome}),n?(0,o.jsx)("span",{style:{fontSize:12,color:"#16a34a",fontWeight:600,padding:"2px 8px",background:"#f0fdf4",borderRadius:12},children:"Aplicada"}):(0,o.jsx)("button",{onClick:()=>a(e.id,e.description||e.descricao),className:"btn btn-secondary",style:{fontSize:12,padding:"4px 12px"},children:"Aplicar"})]}),(0,o.jsx)("p",{style:{fontSize:14,color:"#374151",margin:0,lineHeight:1.6},children:e.description||e.descricao}),e.short_description&&(0,o.jsxs)("p",{style:{fontSize:12,color:"#94a3b8",marginTop:4,fontStyle:"italic"},children:["Curta: ",e.short_description]})]},t)})]})}function u(e){let{data:t}=e,i=t.suggestions||[];return(0,o.jsxs)("div",{children:[t.resumo&&(0,o.jsx)("div",{className:"card",style:{marginBottom:16,background:"#fffbeb",borderLeft:"4px solid #f59e0b"},children:(0,o.jsx)("p",{style:{margin:0,fontSize:14,color:"#92400e",lineHeight:1.6},children:t.resumo})}),(0,o.jsx)("div",{className:"card",style:{padding:0,overflow:"hidden"},children:(0,o.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{style:{background:"#f8fafc",color:"#64748b",fontSize:12},children:[(0,o.jsx)("th",{style:{padding:"10px 14px",textAlign:"left"},children:"Produto"}),(0,o.jsx)("th",{style:{padding:"10px 14px",textAlign:"right"},children:"Atual"}),(0,o.jsx)("th",{style:{padding:"10px 14px",textAlign:"right"},children:"Sugerido"}),(0,o.jsx)("th",{style:{padding:"10px 14px",textAlign:"right"},children:"Variacao"}),(0,o.jsx)("th",{style:{padding:"10px 14px",textAlign:"center"},children:"Confianca"}),(0,o.jsx)("th",{style:{padding:"10px 14px",textAlign:"left"},children:"Racional"})]})}),(0,o.jsx)("tbody",{children:i.map((e,t)=>{let i=e.preco_sugerido>e.preco_atual;return(0,o.jsxs)("tr",{style:{borderBottom:"1px solid #f1f5f9"},children:[(0,o.jsx)("td",{style:{padding:"10px 14px",fontWeight:500},children:e.nome}),(0,o.jsxs)("td",{style:{padding:"10px 14px",textAlign:"right"},children:["R$ ",parseFloat(e.preco_atual).toFixed(2)]}),(0,o.jsxs)("td",{style:{padding:"10px 14px",textAlign:"right",fontWeight:600,color:i?"#059669":"#dc2626"},children:["R$ ",parseFloat(e.preco_sugerido).toFixed(2)]}),(0,o.jsxs)("td",{style:{padding:"10px 14px",textAlign:"right",color:i?"#059669":"#dc2626"},children:[i?"+":"",parseFloat(e.variacao_pct||0).toFixed(1),"%"]}),(0,o.jsx)("td",{style:{padding:"10px 14px",textAlign:"center"},children:(0,o.jsx)("span",{style:{padding:"2px 8px",borderRadius:12,fontSize:11,fontWeight:600,background:"alta"===e.confianca?"#dcfce7":"media"===e.confianca?"#fef9c3":"#fee2e2",color:"alta"===e.confianca?"#166534":"media"===e.confianca?"#854d0e":"#991b1b"},children:e.confianca})}),(0,o.jsx)("td",{style:{padding:"10px 14px",fontSize:12,color:"#64748b",maxWidth:200},children:e.racional})]},t)})})]})})]})}function m(e){let{data:t}=e,i=t.score_geral||0,a=i>=80?"#16a34a":i>=60?"#f59e0b":"#dc2626",n=[{label:"Variedade",value:t.nota_variedade||0},{label:"Precos",value:t.nota_precos||0},{label:"Descricoes",value:t.nota_descricoes||0},{label:"Categorias",value:t.nota_categorias||0},{label:"Estrategia",value:t.nota_estrategia||0}];return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"card",style:{textAlign:"center",marginBottom:16,padding:32},children:[(0,o.jsx)("div",{style:{width:120,height:120,borderRadius:"50%",margin:"0 auto 16px",background:"conic-gradient(".concat(a," ").concat(3.6*i,"deg, #e2e8f0 0deg)"),display:"flex",alignItems:"center",justifyContent:"center"},children:(0,o.jsxs)("div",{style:{width:96,height:96,borderRadius:"50%",background:"#fff",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[(0,o.jsx)("span",{style:{fontSize:32,fontWeight:700,color:a},children:i}),(0,o.jsx)("span",{style:{fontSize:11,color:"#94a3b8"},children:"/ 100"})]})}),(0,o.jsx)("h3",{style:{fontSize:18,fontWeight:600,color:a},children:"Score do Cardapio"}),(0,o.jsx)("div",{style:{display:"flex",gap:12,justifyContent:"center",flexWrap:"wrap",marginTop:16},children:n.map(e=>(0,o.jsxs)("div",{style:{flex:"1 1 120px",maxWidth:160},children:[(0,o.jsx)("div",{style:{fontSize:12,color:"#64748b",marginBottom:4},children:e.label}),(0,o.jsx)("div",{style:{height:8,background:"#f1f5f9",borderRadius:4,overflow:"hidden"},children:(0,o.jsx)("div",{style:{height:"100%",width:"".concat(e.value,"%"),background:e.value>=70?"#16a34a":e.value>=50?"#f59e0b":"#dc2626",borderRadius:4,transition:"width 0.5s"}})}),(0,o.jsx)("div",{style:{fontSize:13,fontWeight:600,marginTop:2},children:e.value})]},e.label))})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:16},children:[(0,o.jsxs)("div",{className:"card",style:{borderLeft:"4px solid #16a34a"},children:[(0,o.jsx)("h4",{style:{fontSize:14,fontWeight:600,color:"#16a34a",marginBottom:8},children:"Pontos Fortes"}),(t.pontos_fortes||[]).map((e,t)=>(0,o.jsxs)("p",{style:{fontSize:13,color:"#374151",margin:"4px 0",lineHeight:1.5},children:["+ ",e]},t))]}),(0,o.jsxs)("div",{className:"card",style:{borderLeft:"4px solid #dc2626"},children:[(0,o.jsx)("h4",{style:{fontSize:14,fontWeight:600,color:"#dc2626",marginBottom:8},children:"Pontos Fracos"}),(t.pontos_fracos||[]).map((e,t)=>(0,o.jsxs)("p",{style:{fontSize:13,color:"#374151",margin:"4px 0",lineHeight:1.5},children:["- ",e]},t))]})]}),(t.acoes_imediatas||[]).length>0&&(0,o.jsxs)("div",{className:"card",style:{marginBottom:16},children:[(0,o.jsx)("h4",{style:{fontSize:15,fontWeight:600,marginBottom:12},children:"Acoes Recomendadas"}),t.acoes_imediatas.map((e,i)=>(0,o.jsxs)("div",{style:{padding:"12px 0",borderBottom:i<t.acoes_imediatas.length-1?"1px solid #f1f5f9":"none",display:"flex",gap:12},children:[(0,o.jsx)("span",{style:{padding:"2px 8px",borderRadius:12,fontSize:11,fontWeight:600,height:"fit-content",background:"alta"===e.prioridade?"#fee2e2":"media"===e.prioridade?"#fef9c3":"#dcfce7",color:"alta"===e.prioridade?"#991b1b":"media"===e.prioridade?"#854d0e":"#166534"},children:e.prioridade}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{style:{margin:0,fontSize:14,fontWeight:500,color:"#1e293b"},children:e.acao}),(0,o.jsx)("p",{style:{margin:"2px 0 0",fontSize:12,color:"#64748b"},children:e.impacto})]})]},i))]}),(t.sugestoes_novos_produtos||[]).length>0&&(0,o.jsxs)("div",{className:"card",children:[(0,o.jsx)("h4",{style:{fontSize:15,fontWeight:600,marginBottom:12},children:"Produtos Sugeridos para Adicionar"}),(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:12},children:t.sugestoes_novos_produtos.map((e,t)=>(0,o.jsxs)("div",{style:{padding:12,background:"#f8fafc",borderRadius:8,border:"1px solid #e2e8f0"},children:[(0,o.jsx)("div",{style:{fontSize:14,fontWeight:600,color:"#1e293b"},children:e.nome}),(0,o.jsxs)("div",{style:{fontSize:12,color:"#059669",fontWeight:500},children:["R$ ",parseFloat(e.preco_sugerido||0).toFixed(2)]}),(0,o.jsx)("div",{style:{fontSize:12,color:"#64748b",marginTop:4},children:e.justificativa})]},t))})]})]})}function y(e){let{data:t,formatPrice:i}=e,a=t.combos||[],n=t.dicas||[];return(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:16},children:a.map((e,t)=>(0,o.jsxs)("div",{className:"card",style:{borderTop:"4px solid ".concat(["#2563eb","#7c3aed","#059669","#ea580c","#dc2626","#0891b2","#be185d","#4f46e5"][t%8])},children:[(0,o.jsx)("h4",{style:{fontSize:16,fontWeight:600,marginBottom:4},children:e.nome}),(0,o.jsx)("p",{style:{fontSize:13,color:"#64748b",marginBottom:12},children:e.descricao}),(0,o.jsx)("div",{style:{marginBottom:12},children:(e.produtos||[]).map((e,t)=>(0,o.jsxs)("div",{style:{fontSize:13,padding:"4px 0",display:"flex",alignItems:"center",gap:6},children:[(0,o.jsx)("span",{style:{width:6,height:6,borderRadius:"50%",background:"#2563eb",flexShrink:0}}),e.nome]},t))}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderTop:"1px solid #f1f5f9"},children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("span",{style:{fontSize:12,color:"#94a3b8",textDecoration:"line-through"},children:["R$ ",parseFloat(e.preco_separado||0).toFixed(2)]}),(0,o.jsxs)("span",{style:{fontSize:18,fontWeight:700,color:"#059669",marginLeft:8},children:["R$ ",parseFloat(e.preco_combo||0).toFixed(2)]})]}),(0,o.jsxs)("span",{style:{fontSize:12,fontWeight:600,color:"#dc2626",background:"#fee2e2",padding:"2px 8px",borderRadius:12},children:["-",parseFloat(e.economia_pct||0).toFixed(0),"%"]})]}),(0,o.jsx)("p",{style:{fontSize:11,color:"#94a3b8",margin:"4px 0 0"},children:e.justificativa})]},t))}),n.length>0&&(0,o.jsxs)("div",{className:"card",style:{marginTop:16,background:"#fffbeb",borderLeft:"4px solid #f59e0b"},children:[(0,o.jsx)("h4",{style:{fontSize:14,fontWeight:600,color:"#92400e",marginBottom:8},children:"Dicas para Combos"}),n.map((e,t)=>(0,o.jsxs)("p",{style:{fontSize:13,color:"#78350f",margin:"4px 0"},children:["* ",e]},t))]})]})}function j(e){let{data:t}=e,i=t.nutritional_info||[];return(0,o.jsxs)("div",{children:[t.aviso&&(0,o.jsx)("div",{className:"card",style:{marginBottom:16,background:"#fffbeb",borderLeft:"4px solid #f59e0b"},children:(0,o.jsx)("p",{style:{margin:0,fontSize:13,color:"#92400e"},children:t.aviso})}),(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:16},children:i.map((e,t)=>(0,o.jsxs)("div",{className:"card",children:[(0,o.jsx)("h4",{style:{fontSize:15,fontWeight:600,marginBottom:4},children:e.nome}),(0,o.jsxs)("div",{style:{fontSize:12,color:"#94a3b8",marginBottom:12},children:["Porcao: ",e.porcao]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8,marginBottom:12},children:[(0,o.jsx)(b,{label:"Calorias",value:e.calorias,unit:"kcal",max:800,color:"#dc2626"}),(0,o.jsx)(b,{label:"Proteinas",value:e.proteinas_g,unit:"g",max:50,color:"#2563eb"}),(0,o.jsx)(b,{label:"Carbos",value:e.carboidratos_g,unit:"g",max:100,color:"#f59e0b"}),(0,o.jsx)(b,{label:"Gorduras",value:e.gorduras_g,unit:"g",max:40,color:"#ea580c"}),(0,o.jsx)(b,{label:"Fibras",value:e.fibras_g,unit:"g",max:15,color:"#059669"}),(0,o.jsx)(b,{label:"Sodio",value:e.sodio_mg,unit:"mg",max:2e3,color:"#7c3aed"})]}),(e.alergenos||[]).length>0&&(0,o.jsxs)("div",{style:{marginBottom:8},children:[(0,o.jsx)("span",{style:{fontSize:11,color:"#dc2626",fontWeight:600},children:"Alergenos: "}),e.alergenos.map((e,t)=>(0,o.jsx)("span",{style:{fontSize:11,padding:"1px 6px",background:"#fee2e2",color:"#991b1b",borderRadius:8,marginRight:4},children:e},t))]}),e.dica_saude&&(0,o.jsx)("p",{style:{fontSize:12,color:"#059669",margin:0,fontStyle:"italic"},children:e.dica_saude})]},t))})]})}function b(e){let{label:t,value:i,unit:a,max:n,color:s}=e,r=Math.min((i||0)/n*100,100);return(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:11,color:"#64748b",marginBottom:2},children:t}),(0,o.jsxs)("div",{style:{fontSize:14,fontWeight:600,color:"#1e293b"},children:[i||0,a]}),(0,o.jsx)("div",{style:{height:4,background:"#f1f5f9",borderRadius:2,marginTop:2},children:(0,o.jsx)("div",{style:{height:"100%",width:"".concat(r,"%"),background:s,borderRadius:2}})})]})}function v(e){let{data:t}=e,i=t.qualidade_foto||{};return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"card",style:{marginBottom:16},children:[(0,o.jsx)("h3",{style:{fontSize:18,fontWeight:600,marginBottom:4},children:t.produto_identificado||"Produto"}),t.categoria_sugerida&&(0,o.jsx)("span",{style:{fontSize:12,padding:"2px 8px",background:"#eff6ff",color:"#2563eb",borderRadius:12},children:t.categoria_sugerida}),(0,o.jsx)("p",{style:{fontSize:14,color:"#374151",marginTop:12,lineHeight:1.6},children:t.descricao_sugerida}),t.preco_estimado>0&&(0,o.jsxs)("p",{style:{fontSize:14,color:"#059669",fontWeight:600},children:["Preco estimado: R$ ",parseFloat(t.preco_estimado).toFixed(2)]})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,o.jsxs)("div",{className:"card",children:[(0,o.jsx)("h4",{style:{fontSize:15,fontWeight:600,marginBottom:12},children:"Qualidade da Foto"}),(0,o.jsxs)("div",{style:{textAlign:"center",marginBottom:12},children:[(0,o.jsx)("span",{style:{fontSize:36,fontWeight:700,color:(i.nota||0)>=7?"#16a34a":(i.nota||0)>=5?"#f59e0b":"#dc2626"},children:i.nota||0}),(0,o.jsx)("span",{style:{fontSize:16,color:"#94a3b8"},children:"/10"})]}),(0,o.jsxs)("div",{style:{fontSize:13},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[(0,o.jsx)("span",{style:{color:"#64748b"},children:"Iluminacao"}),(0,o.jsx)("span",{style:{fontWeight:500},children:i.iluminacao||"-"})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[(0,o.jsx)("span",{style:{color:"#64748b"},children:"Angulo"}),(0,o.jsx)("span",{style:{fontWeight:500},children:i.angulo||"-"})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[(0,o.jsx)("span",{style:{color:"#64748b"},children:"Composicao"}),(0,o.jsx)("span",{style:{fontWeight:500},children:i.composicao||"-"})]})]}),(i.dicas||[]).length>0&&(0,o.jsx)("div",{style:{marginTop:12,padding:8,background:"#fffbeb",borderRadius:8},children:i.dicas.map((e,t)=>(0,o.jsxs)("p",{style:{fontSize:12,color:"#92400e",margin:"2px 0"},children:["* ",e]},t))})]}),(0,o.jsxs)("div",{className:"card",children:[(0,o.jsx)("h4",{style:{fontSize:15,fontWeight:600,marginBottom:12},children:"Detalhes Identificados"}),(t.ingredientes_visiveis||[]).length>0&&(0,o.jsxs)("div",{style:{marginBottom:12},children:[(0,o.jsx)("div",{style:{fontSize:12,color:"#64748b",marginBottom:4},children:"Ingredientes"}),(0,o.jsx)("div",{style:{display:"flex",gap:4,flexWrap:"wrap"},children:t.ingredientes_visiveis.map((e,t)=>(0,o.jsx)("span",{style:{fontSize:12,padding:"2px 8px",background:"#f0fdf4",color:"#166534",borderRadius:12},children:e},t))})]}),(t.tags||[]).length>0&&(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:12,color:"#64748b",marginBottom:4},children:"Tags"}),(0,o.jsx)("div",{style:{display:"flex",gap:4,flexWrap:"wrap"},children:t.tags.map((e,t)=>(0,o.jsx)("span",{style:{fontSize:12,padding:"2px 8px",background:"#eff6ff",color:"#2563eb",borderRadius:12},children:e},t))})]})]})]})]})}function S(e){let{step:t,categories:i,setCategories:n,selectedProducts:s,setSelectedProducts:r,selectedCount:l,importResult:d,fileInputRef:c,dragOver:p,setDragOver:h,onFiles:g,onText:x,onConfirm:f,onReset:u,formatPrice:m,uploadedFiles:y,processingText:j}=e,[b,v]=(0,a.useState)("");function S(e,t,i,o){n(a=>{let n=[...a];return n[e]={...n[e],products:[...n[e].products]},n[e].products[t]={...n[e].products[t],[i]:o},n})}if("upload"===t)return(0,o.jsxs)("div",{className:"card",children:[(0,o.jsxs)("div",{style:{border:"2px dashed ".concat(p?"#2563eb":"#cbd5e1"),borderRadius:12,padding:48,textAlign:"center",background:p?"#eff6ff":"#fafbfc",cursor:"pointer"},onClick:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.click()},onDragOver:e=>{e.preventDefault(),h(!0)},onDragLeave:()=>h(!1),onDrop:e=>{e.preventDefault(),h(!1),g(e.dataTransfer.files)},children:[(0,o.jsx)("input",{ref:c,type:"file",accept:"image/jpeg,image/png,image/webp,image/gif,application/pdf",multiple:!0,style:{display:"none"},onChange:e=>{g(e.target.files),e.target.value=""}}),(0,o.jsx)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#94a3b8",strokeWidth:"1.5",style:{margin:"0 auto 16px"},children:(0,o.jsx)("path",{d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,o.jsx)("p",{style:{fontSize:16,fontWeight:500,color:"#374151"},children:"Arraste fotos ou PDF do cardapio"}),(0,o.jsx)("p",{style:{fontSize:13,color:"#94a3b8",marginTop:8},children:"Multiplas fotos, PDF (ate 10 paginas) ou GIF (max 20 MB cada)"}),(0,o.jsxs)("div",{style:{display:"flex",gap:8,justifyContent:"center",marginTop:12},children:[(0,o.jsx)("span",{style:{fontSize:11,padding:"2px 8px",background:"#eff6ff",color:"#2563eb",borderRadius:8},children:"JPEG"}),(0,o.jsx)("span",{style:{fontSize:11,padding:"2px 8px",background:"#eff6ff",color:"#2563eb",borderRadius:8},children:"PNG"}),(0,o.jsx)("span",{style:{fontSize:11,padding:"2px 8px",background:"#eff6ff",color:"#2563eb",borderRadius:8},children:"WebP"}),(0,o.jsx)("span",{style:{fontSize:11,padding:"2px 8px",background:"#fef3c7",color:"#92400e",borderRadius:8},children:"PDF"})]})]}),(0,o.jsx)("div",{style:{textAlign:"center",margin:"24px 0",color:"#94a3b8",fontSize:13},children:"ou descreva em texto"}),(0,o.jsx)("textarea",{className:"form-input",rows:4,placeholder:"Ex: Pizza Margherita R$29,90, Pizza Calabresa R$32,90...",value:b,onChange:e=>v(e.target.value),style:{resize:"vertical",marginBottom:12}}),(0,o.jsx)("button",{className:"btn btn-primary btn-block",disabled:!b.trim(),onClick:()=>x(b),children:"Analisar com IA"})]});if("processing"===t)return(0,o.jsxs)("div",{className:"card",style:{textAlign:"center",padding:48},children:[(0,o.jsx)("div",{className:"spinner",style:{margin:"0 auto 16px"}}),(0,o.jsx)("h3",{style:{fontSize:18,fontWeight:600,marginBottom:8},children:j||"Analisando cardapio com IA..."}),(0,o.jsx)("p",{style:{color:"#64748b",fontSize:14},children:"Pode levar ate 60 segundos para multiplas paginas."}),y.length>0&&(0,o.jsx)("div",{style:{display:"flex",gap:8,justifyContent:"center",marginTop:16,flexWrap:"wrap"},children:y.map((e,t)=>(0,o.jsx)("div",{style:{width:60,height:60,borderRadius:8,overflow:"hidden",border:"2px solid #e2e8f0",display:"flex",alignItems:"center",justifyContent:"center",background:"#f8fafc"},children:e.url?(0,o.jsx)("img",{src:e.url,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,o.jsx)("span",{style:{fontSize:10,color:"#94a3b8",textAlign:"center"},children:"PDF"})},t))})]});if("review"===t){let e=i.reduce((e,t)=>e+(t.products||[]).length,0),t=i.reduce((e,t)=>e+(t.products||[]).filter(e=>"low"===e.confidence).length,0),a=i.reduce((e,t)=>e+(t.products||[]).filter(e=>e.photo_region).length,0);return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"card",style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:12},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[(0,o.jsxs)("span",{style:{fontSize:15,fontWeight:600},children:[l," de ",e," produto(s)"]}),t>0&&(0,o.jsxs)("span",{style:{fontSize:12,padding:"2px 8px",background:"#fef9c3",color:"#854d0e",borderRadius:12},children:[t," com baixa confianca"]}),a>0&&(0,o.jsxs)("span",{style:{fontSize:12,padding:"2px 8px",background:"#dbeafe",color:"#1e40af",borderRadius:12},children:[a," com foto detectada"]})]}),(0,o.jsxs)("button",{className:"btn btn-primary",onClick:f,disabled:0===l,children:["Importar ",l," Produto(s)"]})]}),i.map((e,t)=>(0,o.jsxs)("div",{className:"card",style:{marginBottom:16,padding:0,overflow:"hidden"},children:[(0,o.jsxs)("div",{style:{padding:"10px 16px",background:"#f8fafc",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,o.jsx)("input",{type:"checkbox",checked:(e.products||[]).every((e,i)=>s["".concat(t,"-").concat(i)]),onChange:()=>(function(e){let t=i[e],o=(t.products||[]).every((t,i)=>s["".concat(e,"-").concat(i)]),a={...s};(t.products||[]).forEach((t,i)=>{a["".concat(e,"-").concat(i)]=!o}),r(a)})(t),style:{accentColor:"#2563eb"}}),(0,o.jsx)("span",{style:{fontWeight:600,fontSize:15},children:e.name})]}),(0,o.jsxs)("span",{style:{fontSize:12,color:"#94a3b8"},children:[(e.products||[]).length," produtos"]})]}),(0,o.jsx)("div",{style:{overflowX:"auto"},children:(0,o.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{style:{background:"#fafbfc",color:"#64748b",fontSize:12},children:[(0,o.jsx)("th",{style:{padding:"8px 12px",width:40}}),(0,o.jsx)("th",{style:{padding:"8px 12px",textAlign:"left"},children:"Produto"}),(0,o.jsx)("th",{style:{padding:"8px 12px",textAlign:"left"},children:"Descricao"}),(0,o.jsx)("th",{style:{padding:"8px 12px",textAlign:"right",width:120},children:"Preco"}),(0,o.jsx)("th",{style:{padding:"8px 12px",textAlign:"center",width:80},children:"Status"})]})}),(0,o.jsx)("tbody",{children:(e.products||[]).map((e,i)=>{let a="low"===e.confidence,n=!!e.photo_region,l=!!e.price_note;return(0,o.jsxs)("tr",{style:{borderBottom:"1px solid #f1f5f9",opacity:s["".concat(t,"-").concat(i)]?1:.4,background:a?"#fffbeb":"transparent"},children:[(0,o.jsx)("td",{style:{padding:"8px 12px"},children:(0,o.jsx)("input",{type:"checkbox",checked:!!s["".concat(t,"-").concat(i)],onChange:()=>(function(e,t){let i="".concat(e,"-").concat(t);r(e=>({...e,[i]:!e[i]}))})(t,i),style:{accentColor:"#2563eb"}})}),(0,o.jsxs)("td",{style:{padding:"8px 12px"},children:[(0,o.jsx)("input",{className:"form-input",value:e.name,onChange:e=>S(t,i,"name",e.target.value),style:{fontSize:13,padding:"4px 8px",border:"1px solid ".concat(a?"#f59e0b":"#e2e8f0"),borderRadius:4}}),e.uncertain_text&&(0,o.jsxs)("div",{style:{fontSize:11,color:"#b45309",marginTop:2},children:['Texto incerto: "',e.uncertain_text,'"']})]}),(0,o.jsx)("td",{style:{padding:"8px 12px"},children:(0,o.jsx)("input",{className:"form-input",value:e.description||"",onChange:e=>S(t,i,"description",e.target.value),placeholder:"Descricao",style:{fontSize:13,padding:"4px 8px",border:"1px solid #e2e8f0",borderRadius:4}})}),(0,o.jsxs)("td",{style:{padding:"8px 12px",textAlign:"right"},children:[(0,o.jsx)("input",{type:"number",className:"form-input",value:e.price||0,onChange:e=>S(t,i,"price",parseFloat(e.target.value)||0),step:"0.01",min:"0",style:{fontSize:13,padding:"4px 8px",width:100,textAlign:"right",border:"1px solid #e2e8f0",borderRadius:4}}),l&&(0,o.jsx)("div",{style:{fontSize:10,color:"#6b7280",marginTop:2},children:e.price_note})]}),(0,o.jsx)("td",{style:{padding:"8px 12px",textAlign:"center"},children:(0,o.jsxs)("div",{style:{display:"flex",gap:4,justifyContent:"center",flexWrap:"wrap"},children:[a&&(0,o.jsx)("span",{title:"Baixa confianca — verifique",style:{fontSize:10,padding:"1px 6px",background:"#fef9c3",color:"#854d0e",borderRadius:8},children:"?"}),n&&(0,o.jsx)("span",{title:"Foto do produto detectada",style:{fontSize:10,padding:"1px 6px",background:"#dbeafe",color:"#1e40af",borderRadius:8},children:"img"}),e.is_combo&&(0,o.jsx)("span",{title:"Combo identificado",style:{fontSize:10,padding:"1px 6px",background:"#f0fdf4",color:"#166534",borderRadius:8},children:"combo"})]})})]},i)})})]})})]},t))]})}return"importing"===t?(0,o.jsxs)("div",{className:"card",style:{textAlign:"center",padding:48},children:[(0,o.jsx)("div",{className:"spinner",style:{margin:"0 auto 16px"}}),(0,o.jsx)("h3",{style:{fontSize:18,fontWeight:600},children:"Importando produtos..."})]}):"done"===t&&d?(0,o.jsxs)("div",{className:"card",style:{textAlign:"center",padding:48},children:[(0,o.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#16a34a",strokeWidth:"2",style:{margin:"0 auto 16px"},children:[(0,o.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("polyline",{points:"22 4 12 14.01 9 11.01",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,o.jsx)("h3",{style:{fontSize:20,fontWeight:600,color:"#16a34a",marginBottom:8},children:"Importacao Concluida!"}),(0,o.jsxs)("div",{style:{color:"#64748b",fontSize:14,lineHeight:1.8},children:[(0,o.jsxs)("p",{children:[d.products_created," produto(s) criado(s)"]}),(0,o.jsxs)("p",{children:[d.categories_created," categoria(s) criada(s)"]}),d.option_groups_created>0&&(0,o.jsxs)("p",{children:[d.option_groups_created," grupo(s) de opcao"]}),d.photos_extracted>0&&(0,o.jsxs)("p",{children:[d.photos_extracted," foto(s) extraida(s)"]})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:12,justifyContent:"center",marginTop:24},children:[(0,o.jsx)("button",{className:"btn btn-primary",onClick:()=>window.location.href="/painel/produtos",children:"Ver Produtos"}),(0,o.jsx)("button",{className:"btn btn-secondary",onClick:u,children:"Importar Outro"})]})]}):null}function z(e){let{step:t,result:i,selections:n,setSelections:s,fileInputRef:r,dragOver:l,setDragOver:d,onFiles:c,onText:p,onConfirm:h,onReset:g,formatPrice:x,processingText:f}=e,[u,m]=(0,a.useState)("");if("upload"===t)return(0,o.jsxs)("div",{className:"card",children:[(0,o.jsx)("div",{style:{marginBottom:16,padding:12,background:"#f0f9ff",borderRadius:8,border:"1px solid #bae6fd"},children:(0,o.jsx)("p",{style:{margin:0,fontSize:13,color:"#0369a1"},children:"Upload o novo cardapio e a IA comparara com seus produtos atuais, mostrando o que mudou."})}),(0,o.jsxs)("div",{style:{border:"2px dashed ".concat(l?"#8b5cf6":"#cbd5e1"),borderRadius:12,padding:48,textAlign:"center",background:l?"#f5f3ff":"#fafbfc",cursor:"pointer"},onClick:()=>{var e;return null===(e=r.current)||void 0===e?void 0:e.click()},onDragOver:e=>{e.preventDefault(),d(!0)},onDragLeave:()=>d(!1),onDrop:e=>{e.preventDefault(),d(!1),c(e.dataTransfer.files)},children:[(0,o.jsx)("input",{ref:r,type:"file",accept:"image/jpeg,image/png,image/webp,image/gif,application/pdf",multiple:!0,style:{display:"none"},onChange:e=>{c(e.target.files),e.target.value=""}}),(0,o.jsx)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#94a3b8",strokeWidth:"1.5",style:{margin:"0 auto 16px"},children:(0,o.jsx)("path",{d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,o.jsx)("p",{style:{fontSize:16,fontWeight:500,color:"#374151"},children:"Arraste o novo cardapio"}),(0,o.jsx)("p",{style:{fontSize:13,color:"#94a3b8",marginTop:8},children:"Fotos, PDF ou multiplas paginas"})]}),(0,o.jsx)("div",{style:{textAlign:"center",margin:"24px 0",color:"#94a3b8",fontSize:13},children:"ou descreva em texto"}),(0,o.jsx)("textarea",{className:"form-input",rows:4,placeholder:"Cole o novo cardapio aqui...",value:u,onChange:e=>m(e.target.value),style:{resize:"vertical",marginBottom:12}}),(0,o.jsx)("button",{className:"btn btn-primary btn-block",disabled:!u.trim(),onClick:()=>p(u),children:"Comparar com IA"})]});if("processing"===t)return(0,o.jsxs)("div",{className:"card",style:{textAlign:"center",padding:48},children:[(0,o.jsx)("div",{className:"spinner",style:{margin:"0 auto 16px"}}),(0,o.jsx)("h3",{style:{fontSize:18,fontWeight:600,marginBottom:8},children:f||"Comparando..."}),(0,o.jsx)("p",{style:{color:"#64748b",fontSize:14},children:"Analisando diferencas entre o novo cardapio e o atual."})]});if("review"===t&&i){let e=i.new_items||[],t=i.price_changes||[],a=i.removed_items||[],r=i.unchanged||[],l=Object.values(n).filter(Boolean).length;return(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12,marginBottom:16},children:[{label:"Novos",count:e.length,color:"#16a34a",bg:"#f0fdf4"},{label:"Preco alterado",count:t.length,color:"#f59e0b",bg:"#fffbeb"},{label:"Removidos",count:a.length,color:"#dc2626",bg:"#fef2f2"},{label:"Sem mudanca",count:r.length,color:"#64748b",bg:"#f8fafc"}].map(e=>(0,o.jsxs)("div",{className:"card",style:{textAlign:"center",background:e.bg,padding:16},children:[(0,o.jsx)("div",{style:{fontSize:28,fontWeight:700,color:e.color},children:e.count}),(0,o.jsx)("div",{style:{fontSize:12,color:e.color},children:e.label})]},e.label))}),e.length>0&&(0,o.jsxs)("div",{className:"card",style:{marginBottom:16,padding:0,overflow:"hidden",borderLeft:"4px solid #16a34a"},children:[(0,o.jsx)("div",{style:{padding:"10px 16px",background:"#f0fdf4",borderBottom:"1px solid #dcfce7"},children:(0,o.jsxs)("span",{style:{fontWeight:600,color:"#166534"},children:["Novos Produtos (",e.length,")"]})}),e.map((e,t)=>(0,o.jsxs)("div",{style:{padding:"10px 16px",borderBottom:"1px solid #f1f5f9",display:"flex",alignItems:"center",gap:12},children:[(0,o.jsx)("input",{type:"checkbox",checked:!!n["new-".concat(t)],onChange:()=>s(e=>({...e,["new-".concat(t)]:!e["new-".concat(t)]})),style:{accentColor:"#16a34a"}}),(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("span",{style:{fontWeight:500},children:e.name}),e.description&&(0,o.jsxs)("span",{style:{fontSize:12,color:"#64748b",marginLeft:8},children:["— ",e.description]})]}),(0,o.jsx)("span",{style:{fontWeight:600,color:"#059669"},children:x(e.price)})]},t))]}),t.length>0&&(0,o.jsxs)("div",{className:"card",style:{marginBottom:16,padding:0,overflow:"hidden",borderLeft:"4px solid #f59e0b"},children:[(0,o.jsx)("div",{style:{padding:"10px 16px",background:"#fffbeb",borderBottom:"1px solid #fef3c7"},children:(0,o.jsxs)("span",{style:{fontWeight:600,color:"#854d0e"},children:["Alteracoes de Preco (",t.length,")"]})}),t.map((e,t)=>(0,o.jsxs)("div",{style:{padding:"10px 16px",borderBottom:"1px solid #f1f5f9",display:"flex",alignItems:"center",gap:12},children:[(0,o.jsx)("input",{type:"checkbox",checked:!!n["price-".concat(t)],onChange:()=>s(e=>({...e,["price-".concat(t)]:!e["price-".concat(t)]})),style:{accentColor:"#f59e0b"}}),(0,o.jsx)("span",{style:{flex:1,fontWeight:500},children:e.name}),(0,o.jsx)("span",{style:{fontSize:13,color:"#94a3b8",textDecoration:"line-through"},children:x(e.old_price)}),(0,o.jsx)("span",{style:{fontWeight:600,color:e.new_price>e.old_price?"#dc2626":"#059669"},children:x(e.new_price)})]},t))]}),a.length>0&&(0,o.jsxs)("div",{className:"card",style:{marginBottom:16,padding:0,overflow:"hidden",borderLeft:"4px solid #dc2626"},children:[(0,o.jsx)("div",{style:{padding:"10px 16px",background:"#fef2f2",borderBottom:"1px solid #fecaca"},children:(0,o.jsxs)("span",{style:{fontWeight:600,color:"#991b1b"},children:["Possivelmente Removidos (",a.length,")"]})}),a.map((e,t)=>(0,o.jsxs)("div",{style:{padding:"10px 16px",borderBottom:"1px solid #f1f5f9",display:"flex",alignItems:"center",gap:12},children:[(0,o.jsx)("input",{type:"checkbox",checked:!!n["remove-".concat(t)],onChange:()=>s(e=>({...e,["remove-".concat(t)]:!e["remove-".concat(t)]})),style:{accentColor:"#dc2626"}}),(0,o.jsx)("span",{style:{flex:1,fontWeight:500,color:"#991b1b",textDecoration:"line-through"},children:e.name}),(0,o.jsx)("span",{style:{fontSize:13,color:"#94a3b8"},children:x(e.price)})]},t))]}),(0,o.jsxs)("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[(0,o.jsx)("button",{className:"btn btn-secondary",onClick:g,children:"Cancelar"}),(0,o.jsxs)("button",{className:"btn btn-primary",onClick:h,disabled:0===l,children:["Aplicar ",l," Alteracao(oes)"]})]})]})}if("syncing"===t)return(0,o.jsxs)("div",{className:"card",style:{textAlign:"center",padding:48},children:[(0,o.jsx)("div",{className:"spinner",style:{margin:"0 auto 16px"}}),(0,o.jsx)("h3",{style:{fontSize:18,fontWeight:600},children:"Sincronizando cardapio..."})]});if("done"===t&&(null==i?void 0:i.syncResult)){let e=i.syncResult;return(0,o.jsxs)("div",{className:"card",style:{textAlign:"center",padding:48},children:[(0,o.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#16a34a",strokeWidth:"2",style:{margin:"0 auto 16px"},children:[(0,o.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("polyline",{points:"22 4 12 14.01 9 11.01",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,o.jsx)("h3",{style:{fontSize:20,fontWeight:600,color:"#16a34a",marginBottom:8},children:"Sincronizacao Concluida!"}),(0,o.jsxs)("div",{style:{color:"#64748b",fontSize:14,lineHeight:1.8},children:[e.added>0&&(0,o.jsxs)("p",{children:[e.added," produto(s) adicionado(s)"]}),e.updated>0&&(0,o.jsxs)("p",{children:[e.updated," preco(s) atualizado(s)"]}),e.deactivated>0&&(0,o.jsxs)("p",{children:[e.deactivated," produto(s) desativado(s)"]})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:12,justifyContent:"center",marginTop:24},children:[(0,o.jsx)("button",{className:"btn btn-primary",onClick:()=>window.location.href="/painel/produtos",children:"Ver Produtos"}),(0,o.jsx)("button",{className:"btn btn-secondary",onClick:g,children:"Comparar Outro"})]})]})}return null}}},function(e){e.O(0,[3448,565,2205,2971,2117,1744],function(){return e(e.s=2132)}),_N_E=e.O()}]);