(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4074],{7995:function(e,a,s){Promise.resolve().then(s.bind(s,524))},524:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return d}});var l=s(7437),t=s(2265),n=s(4565),r=s(4477),i=s(6428),o=s(6971);let c=[{value:"admin",label:"Admin",className:"role-admin"},{value:"gerente",label:"Gerente",className:"role-gerente"},{value:"atendente",label:"Atendente",className:"role-atendente"}];function d(){return(0,l.jsx)(n.Z,{children:(0,l.jsx)(r.Z,{children:(0,l.jsx)(m,{})})})}function m(){let{addNotification:e}=(0,o.l)(),[a,s]=(0,t.useState)([]),[n,r]=(0,t.useState)(!0),[d,m]=(0,t.useState)(!1),[h,u]=(0,t.useState)(!1),[x,p]=(0,t.useState)(null),[j,v]=(0,t.useState)({name:"",email:"",role:"atendente",password:""});async function b(){try{let e=await (0,i.SC)("/team.php");s(e.members||[])}catch(e){console.error(e)}r(!1)}async function N(a){if(a.preventDefault(),!j.name||!j.email){e("Nome e email sao obrigatorios","error");return}u(!0);try{let a={...j};x&&(a.id=x.id),a.password||delete a.password,await (0,i.sg)("/team.php",a),e(x?"Membro atualizado!":"Membro adicionado!","success"),m(!1),await b()}catch(a){e(a.message||"Erro ao salvar","error")}finally{u(!1)}}async function f(a){try{await (0,i.sg)("/team.php",{id:a.id,name:a.name,email:a.email,role:a.role,status:1==a.status?0:1}),e(1==a.status?"Membro desativado":"Membro reativado","success"),await b()}catch(a){e(a.message||"Erro","error")}}(0,t.useEffect)(()=>{b()},[]);let g=e=>{let a=c.find(a=>a.value===e)||c[2];return(0,l.jsx)("span",{className:"role-badge ".concat(a.className),children:a.label})};return n?(0,l.jsx)("div",{style:{padding:60,textAlign:"center"},children:(0,l.jsx)("div",{className:"spinner"})}):(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"page-header",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"page-title",children:"Equipe"}),(0,l.jsx)("p",{className:"page-subtitle",children:"Gerencie os membros da sua equipe"})]}),(0,l.jsx)("button",{className:"btn btn-primary",onClick:function(){p(null),v({name:"",email:"",role:"atendente",password:""}),m(!0)},children:"+ Convidar Membro"})]}),(0,l.jsxs)("div",{className:"info-note",children:[(0,l.jsxs)("svg",{className:"info-note-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,l.jsx)("path",{d:"M12 16v-4M12 8h.01"})]}),(0,l.jsx)("span",{children:"Login separado para membros da equipe em breve. Por enquanto, gerencie os membros aqui."})]}),(0,l.jsx)("div",{className:"card",children:0===a.length?(0,l.jsxs)("div",{className:"empty-state",children:[(0,l.jsx)("div",{className:"empty-state-icon",children:(0,l.jsx)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:(0,l.jsx)("path",{d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})})}),(0,l.jsx)("div",{className:"empty-state-text",children:"Nenhum membro na equipe"}),(0,l.jsx)("p",{style:{color:"var(--color-text-secondary)",fontSize:14},children:"Adicione membros para gerenciar sua loja em equipe"})]}):(0,l.jsx)("div",{className:"table-responsive",children:(0,l.jsxs)("table",{className:"table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Nome"}),(0,l.jsx)("th",{children:"Email"}),(0,l.jsx)("th",{children:"Funcao"}),(0,l.jsx)("th",{children:"Status"}),(0,l.jsx)("th",{children:"Acoes"})]})}),(0,l.jsx)("tbody",{children:a.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{style:{fontWeight:500},children:e.name}),(0,l.jsx)("td",{style:{color:"var(--color-text-secondary)",fontSize:13},children:e.email}),(0,l.jsx)("td",{children:g(e.role)}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{className:"status-badge ".concat(1==e.status?"status-active":"status-inactive"),children:1==e.status?"Ativo":"Inativo"})}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{style:{display:"flex",gap:6},children:[(0,l.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>{p(e),v({name:e.name,email:e.email,role:e.role,password:""}),m(!0)},children:"Editar"}),(0,l.jsx)("button",{className:"btn btn-sm ".concat(1==e.status?"btn-danger":"btn-primary"),onClick:()=>f(e),children:1==e.status?"Desativar":"Ativar"})]})})]},e.id))})]})})}),d&&(0,l.jsx)("div",{className:"modal-overlay",onClick:()=>m(!1),children:(0,l.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)("div",{className:"modal-header",children:[(0,l.jsx)("h3",{className:"modal-title",children:x?"Editar Membro":"Convidar Membro"}),(0,l.jsx)("button",{className:"modal-close",onClick:()=>m(!1),children:"\xd7"})]}),(0,l.jsx)("div",{className:"modal-body",children:(0,l.jsxs)("form",{onSubmit:N,children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Nome"}),(0,l.jsx)("input",{type:"text",className:"form-input",value:j.name,onChange:e=>v(a=>({...a,name:e.target.value})),placeholder:"Nome completo"})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Email"}),(0,l.jsx)("input",{type:"email",className:"form-input",value:j.email,onChange:e=>v(a=>({...a,email:e.target.value})),placeholder:"email@exemplo.com"})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Funcao"}),(0,l.jsx)("select",{className:"form-input",value:j.role,onChange:e=>v(a=>({...a,role:e.target.value})),children:c.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:x?"Nova Senha (opcional)":"Senha"}),(0,l.jsx)("input",{type:"password",className:"form-input",value:j.password,onChange:e=>v(a=>({...a,password:e.target.value})),placeholder:x?"Deixe em branco para manter":"Minimo 6 caracteres"})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[(0,l.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>m(!1),children:"Cancelar"}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?"Salvando...":x?"Salvar":"Convidar"})]})]})})]})})]})}}},function(e){e.O(0,[3448,565,2205,2971,2117,1744],function(){return e(e.s=7995)}),_N_E=e.O()}]);