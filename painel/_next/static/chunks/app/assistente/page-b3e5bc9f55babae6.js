(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7485],{5108:function(e,s,a){Promise.resolve().then(a.bind(a,2899))},2899:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return l}});var i=a(7437),t=a(2265),n=a(4565),r=a(4477),c=a(6428),o=a(6971);function l(){return(0,i.jsx)(n.Z,{children:(0,i.jsx)(r.Z,{children:(0,i.jsx)(d,{})})})}function d(){let{addNotification:e}=(0,o.l)(),[s,a]=(0,t.useState)([]),[n,r]=(0,t.useState)(""),[l,d]=(0,t.useState)(!0),[h,u]=(0,t.useState)(!1),[m,x]=(0,t.useState)([]),g=(0,t.useRef)(null),p=()=>{var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};async function v(){try{let e=await (0,c.SC)("/ai-assistant.php");a(e.history||[])}catch(e){console.error(e)}d(!1)}async function j(s){let i=s||n.trim();if(i){r(""),u(!0),a(e=>[...e,{role:"user",message:i,created_at:new Date().toISOString()}]);try{let e=await (0,c.sg)("/ai-assistant.php",{message:i,context:"general"});a(s=>[...s,{role:"assistant",message:e.response,created_at:new Date().toISOString()}]),x(e.suggestions||[])}catch(s){e(s.message||"Erro ao enviar mensagem","error")}finally{u(!1)}}}async function N(){if(confirm("Limpar todo o historico de conversa?"))try{await (0,c.apiDelete)("/ai-assistant.php"),a([]),e("Historico limpo!","success")}catch(s){e("Erro ao limpar historico","error")}}return((0,t.useEffect)(()=>{p()},[s]),(0,t.useEffect)(()=>{v()},[]),l)?(0,i.jsx)("div",{style:{padding:60,textAlign:"center"},children:(0,i.jsx)("div",{className:"spinner"})}):(0,i.jsxs)("div",{className:"ai-assistant-container",children:[(0,i.jsxs)("div",{className:"page-header",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"page-title",children:"Assistente IA"}),(0,i.jsx)("p",{className:"page-subtitle",children:"Seu consultor de negocios inteligente"})]}),s.length>0&&(0,i.jsx)("button",{className:"btn btn-secondary",onClick:N,children:"Limpar Historico"})]}),(0,i.jsxs)("div",{className:"ai-chat-container",children:[(0,i.jsx)("div",{className:"ai-messages",children:0===s.length?(0,i.jsxs)("div",{className:"ai-welcome",children:[(0,i.jsx)("div",{className:"ai-avatar-large",children:(0,i.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[(0,i.jsx)("path",{d:"M12 2a2 2 0 012 2c0 .74-.4 1.387-1 1.732V7h1a7 7 0 017 7v1h.5a1.5 1.5 0 010 3H19v1a2 2 0 01-2 2H7a2 2 0 01-2-2v-1H3.5a1.5 1.5 0 010-3H4v-1a7 7 0 017-7h1V5.732A2 2 0 0112 2z"}),(0,i.jsx)("circle",{cx:"9",cy:"13",r:"1.25",fill:"currentColor"}),(0,i.jsx)("circle",{cx:"15",cy:"13",r:"1.25",fill:"currentColor"}),(0,i.jsx)("path",{d:"M9 17c.83.67 2 1 3 1s2.17-.33 3-1"})]})}),(0,i.jsx)("h2",{children:"Ola! Sou o Assistente IA do SuperBora"}),(0,i.jsx)("p",{children:"Posso te ajudar a entender seus dados, melhorar suas vendas e otimizar seu negocio. Pergunte-me sobre:"}),(0,i.jsxs)("div",{className:"ai-topics",children:[(0,i.jsxs)("button",{onClick:()=>j("Como estao minhas vendas?"),className:"ai-topic-btn",children:[(0,i.jsx)("span",{className:"ai-topic-icon",children:"\uD83D\uDCCA"}),"Analise de Vendas"]}),(0,i.jsxs)("button",{onClick:()=>j("Quais meus produtos mais vendidos?"),className:"ai-topic-btn",children:[(0,i.jsx)("span",{className:"ai-topic-icon",children:"\uD83C\uDF7D️"}),"Cardapio"]}),(0,i.jsxs)("button",{onClick:()=>j("Como estao minhas avaliacoes?"),className:"ai-topic-btn",children:[(0,i.jsx)("span",{className:"ai-topic-icon",children:"⭐"}),"Avaliacoes"]}),(0,i.jsxs)("button",{onClick:()=>j("Como posso melhorar?"),className:"ai-topic-btn",children:[(0,i.jsx)("span",{className:"ai-topic-icon",children:"\uD83D\uDCA1"}),"Dicas de Melhoria"]})]})]}):(0,i.jsxs)(i.Fragment,{children:[s.map((e,s)=>{var a;return(0,i.jsxs)("div",{className:"ai-message ai-message-".concat(e.role),children:["assistant"===e.role&&(0,i.jsx)("div",{className:"ai-avatar",children:(0,i.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,i.jsx)("path",{d:"M12 2a2 2 0 012 2c0 .74-.4 1.387-1 1.732V7h1a7 7 0 017 7v1h.5a1.5 1.5 0 010 3H19v1a2 2 0 01-2 2H7a2 2 0 01-2-2v-1H3.5a1.5 1.5 0 010-3H4v-1a7 7 0 017-7h1V5.732A2 2 0 0112 2z"})})}),(0,i.jsxs)("div",{className:"ai-message-content",children:[(0,i.jsx)("div",{className:"ai-message-text",dangerouslySetInnerHTML:{__html:(a=e.message)?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br/>"):""}}),(0,i.jsx)("div",{className:"ai-message-time",children:new Date(e.created_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})]},s)}),h&&(0,i.jsxs)("div",{className:"ai-message ai-message-assistant",children:[(0,i.jsx)("div",{className:"ai-avatar",children:(0,i.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,i.jsx)("path",{d:"M12 2a2 2 0 012 2c0 .74-.4 1.387-1 1.732V7h1a7 7 0 017 7v1h.5a1.5 1.5 0 010 3H19v1a2 2 0 01-2 2H7a2 2 0 01-2-2v-1H3.5a1.5 1.5 0 010-3H4v-1a7 7 0 017-7h1V5.732A2 2 0 0112 2z"})})}),(0,i.jsx)("div",{className:"ai-message-content",children:(0,i.jsxs)("div",{className:"ai-typing",children:[(0,i.jsx)("span",{}),(0,i.jsx)("span",{}),(0,i.jsx)("span",{})]})})]}),(0,i.jsx)("div",{ref:g})]})}),m.length>0&&(0,i.jsx)("div",{className:"ai-suggestions",children:m.map((e,s)=>(0,i.jsx)("button",{className:"ai-suggestion-btn",onClick:()=>j(e),children:e},s))}),(0,i.jsxs)("div",{className:"ai-input-container",children:[(0,i.jsx)("textarea",{className:"ai-input",placeholder:"Pergunte algo sobre seu negocio...",value:n,onChange:e=>r(e.target.value),onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),j())},rows:1,disabled:h}),(0,i.jsx)("button",{className:"ai-send-btn",onClick:()=>j(),disabled:h||!n.trim(),children:(0,i.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,i.jsx)("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),(0,i.jsx)("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]})}}},function(e){e.O(0,[3448,565,2205,2971,2117,1744],function(){return e(e.s=5108)}),_N_E=e.O()}]);